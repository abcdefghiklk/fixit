get acl request getaclrequest record string path get acl request getaclrequest get acl request getaclrequest string path path path string get path getpath path set path setpath string path serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get acl request getaclrequest cast except classcastexcept compar differ type record get acl request getaclrequest peer get acl request getaclrequest peer peer ret ret path compar compareto peer path ret ret ret equal object peer peer peer peer get acl request getaclrequest peer peer get acl request getaclrequest peer get acl request getaclrequest peer peer ret ret path equal peer path ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret result string signatur get acl request lgetaclrequest 

login logger log logger get logger getlogg login callback handler callbackhandl callback handler callbackhandl login thread loginthread sleep 80 time from last refresh ticket expiri ha reach time wake renew ticket ticket renew window ticket renew window 80f percentag random jitter ad renew time ticket renew jitter ticket renew jitter 05f ticket renew window ticket renew window set ticket expiri time thread sleep refresh attempt minut 60 1000 millisecond minut chang chang minut min time befor relogin min time befor relogin 60 1000l subject subject thread krb ticket iskrbticket ticket cach isusingticketcach keytab isusingkeytab random number gener random rng random login context logincontext login string login context name logincontextnam string keytab file keytabfil string princip last login lastlogin login thread loginthread constructor constructor start thread us period login kerbero ticket grant server param login context name logincontextnam name section jaa file us login pass first param javax secur auth login login context logincontext param callback handler callbackhandl pass second param javax secur auth login login context logincontext javax secur auth login login except loginexcept thrown authent fail login string login context name logincontextnam callback handler callbackhandl callback handler callbackhandl login except loginexcept callback handler callbackhandl callback handler callbackhandl login login login context name logincontextnam login context name logincontextnam login context name logincontextnam subject login get subject getsubject krb ticket iskrbticket subject get credenti getprivatecredenti kerbero ticket kerberosticket empti isempti app configur entri appconfigurationentri entri configur get configur getconfigur get app configur entri getappconfigurationentri login context name logincontextnam app configur entri appconfigurationentri entri entri singl entri loop iter entri get option getopt get us ticket cach useticketcach string val string entri get option getopt get us ticket cach useticketcach val equal ticket cach isusingticketcach entri get option getopt get kei tab keytab keytab file keytabfil string entri get option getopt get kei tab keytab keytab isusingkeytab entri get option getopt get princip princip string entri get option getopt get princip krb ticket iskrbticket tgt bother ticket manag refresh ticket grant ticket tgt period refresh determin tgt exist expiri date configur min time befor relogin min time befor relogin test develop decreas interv expir ticket exampl minut run modprinc maxlif min 3min princip kadmin thread runnabl run log info tgt refresh thread start renew thread main loop exit from here thread exit kerbero ticket kerberosticket tgt get tgt gettgt current time milli currenttimemilli next refresh nextrefresh date next refresh date nextrefreshd tgt next refresh nextrefresh min time befor relogin min time befor relogin next refresh date nextrefreshd date next refresh nextrefresh log warn tgt found next refresh date nextrefreshd next refresh nextrefresh get refresh time getrefreshtim tgt expiri tgt get end time getendtim get time gettim date expiri date expiryd date expiri ticket cach isusingticketcach tgt get end time getendtim equal tgt get renew till getrenewtil log error tgt renew next expiri date expiri date expiryd process abl authent sasl connect after time exampl authent connect zookeep quorum member ask administr increas renew time modprinc maxrenewlif princip kadmin gener keytab princip tgt expiri extend refresh exit refresh thread determin sleep from ticket expiri allow ticket expir consider min time befor relogin min time befor relogin sleep min time befor relogin min time befor relogin caus ticket expir next refresh nextrefresh expiri min time befor relogin min time befor relogin expiri expiri befor next schedul refresh log info refresh expiri befor next schedul refresh time next refresh nextrefresh next refresh nextrefresh min time befor relogin min time befor relogin next schedul refresh sooner min time befor login min time befor login date date next refresh nextrefresh date newuntil date min time befor relogin min time befor relogin log warn tgt refresh thread time adjust from newuntil sooner minimum refresh interv min time befor relogin min time befor relogin 1000 second from next refresh nextrefresh math max next refresh nextrefresh min time befor relogin min time befor relogin next refresh date nextrefreshd date next refresh nextrefresh next refresh nextrefresh expiri log error next refresh next refresh date nextrefreshd expiri expiri date expiryd clock skew problem check host kdc host clock sync exit refresh thread next refresh nextrefresh date date next refresh nextrefresh log info tgt refresh sleep string tostr thread sleep next refresh nextrefresh interrupt except interruptedexcept log warn tgt renew thread ha interrupt exit log error next refresh nextrefresh next refresh date nextrefreshd past exit refresh thread check clock sync host kdc kdc clock ahead host manual intervent requir client successfulli authent exit refresh thread ticket cach isusingticketcach string cmd usr bin kinit get properti getproperti zookeep kinit cmd get properti getproperti zookeep kinit string kinit arg kinitarg retri retri log debug run ticket cach refresh command cmd kinit arg kinitarg shell exec command execcommand cmd kinit arg kinitarg except retri retri sleep 10 second thread sleep 10 1000 interrupt except interruptedexcept log error interrupt renew tgt exit login thread log warn renew tgt problem run shell command cmd kinit arg kinitarg except exit refresh thread retri retri login relogin login except loginexcept le retri retri sleep 10 second thread sleep 10 1000 interrupt except interruptedexcept log error interrupt login retri after login except loginexcept le le log error refresh tgt princip princip le login except loginexcept le log error fail refresh tgt refresh thread exit le set daemon setdaemon start thread need startthreadifneed thread object refresh thread need start shutdown aliv isal interrupt join interrupt except interruptedexcept log warn error wait login thread shutdown subject get subject getsubject subject string get login context name getlogincontextnam login context name logincontextnam login context logincontext login string login context name logincontextnam login except loginexcept login context name logincontextnam login except loginexcept login context logincontext name jaa file section header check java secur login auth config get properti getproperti java secur login auth config zoo keeper sasl client zookeepersaslcli login context name kei login context name kei get properti getproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei client login context logincontext login context logincontext login context logincontext login context name logincontextnam callback handler callbackhandl login context logincontext login log info successfulli log login context logincontext org apach hadoop secur user group inform usergroupinform get refresh time getrefreshtim kerbero ticket kerberosticket tgt start tgt get start time getstarttim get time gettim expir tgt get end time getendtim get time gettim log info tgt valid start tgt get start time getstarttim string tostr log info tgt expir tgt get end time getendtim string tostr propos refresh proposedrefresh start expir start ticket renew window ticket renew window ticket renew jitter ticket renew jitter rng next nextdoubl propos refresh proposedrefresh expir propos refresh proposedrefresh futur after ticket expir simpli current time milli currenttimemilli propos refresh proposedrefresh kerbero ticket kerberosticket get tgt gettgt set kerbero ticket kerberosticket ticket subject get credenti getprivatecredenti kerbero ticket kerberosticket kerbero ticket kerberosticket ticket ticket kerbero princip kerberosprincip server ticket get server getserv server get name getnam equal krbtgt server get realm getrealm server get realm getrealm log debug found tgt ticket ticket ha suffici time elaps hassufficienttimeelaps current time milli currenttimemilli get last login getlastlogin min time befor relogin min time befor relogin log warn attempt login last login attempt min time befor relogin min time befor relogin 1000 second befor most recent relogin attempt set last login setlastlogin return login object login login context logincontext get login getlogin login set login object param login set login setlogin login context logincontext login login login set last login time param time number millisecond begin time set last login setlastlogin time last login lastlogin time get time last login number millisecond begin time get last login getlastlogin last login lastlogin login princip method assum link login string ha happen javax secur auth login login except loginexcept failur hadoop 6559 login relogin login except loginexcept krb ticket iskrbticket login context logincontext login get login getlogin login login except loginexcept login done first ha suffici time elaps hassufficienttimeelaps log info initi logout princip login clear up kerbero state token clear java kerbero login modul code kerbero credenti clear login logout login updat subject field instanc credenti pass login context logincontext constructor login login context logincontext login context name logincontextnam get subject getsubject log info initi login princip login login set login setlogin login 

multi transact record test multitransactionrecordtest test testcas test test round trip testroundtrip io except ioexcept multi transact record multitransactionrecord request multi transact record multitransactionrecord request add op check check request add op creat creat creat data get byte getbyt zoo def zoodef id creator acl creator acl zoo def zoodef perm request add op delet delet 17 request add op set data setdata set data setdata set data get byte getbyt 19 multi transact record multitransactionrecord decod request decodedrequest code decod codedecod request equal assertequ request decod request decodedrequest equal assertequ request hash code hashcod decod request decodedrequest hash code hashcod test test empti round trip testemptyroundtrip io except ioexcept multi transact record multitransactionrecord request multi transact record multitransactionrecord multi transact record multitransactionrecord decod request decodedrequest code decod codedecod request equal assertequ request decod request decodedrequest equal assertequ request hash code hashcod decod request decodedrequest hash code hashcod multi transact record multitransactionrecord code decod codedecod multi transact record multitransactionrecord request io except ioexcept arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao request serial boa request bao close buffer bytebuff bb buffer bytebuff wrap bao arrai tobytearrai bb rewind binari input archiv binaryinputarch bia binari input archiv binaryinputarch get archiv getarch buffer input stream bytebufferinputstream bb multi transact record multitransactionrecord decod request decodedrequest multi transact record multitransactionrecord decod request decodedrequest deseri bia request decod request decodedrequest 

client watch manag clientwatchmanag set watcher notifi event manag notifi watcher updat intern structur watch trigger intent calle respons notifi watcher event possibl time param state event state param type event type param path event path empti set set watcher materi watcher event keeper state keeperst state watcher event event type eventtyp type string path 

quorum server bean mbean server mx bean servermxbean name server bean mbean string get name getnam start time server string get start time getstarttim 

host port set hostportset set host port hostport host port set hostportset hash set hashset host port hostport string origin host port set hostportset string host port list hostportlist origin host port list hostportlist chroot start chrootstart host port list hostportlist index indexof string host port pair hostportpair chroot start chrootstart host port pair hostportpair host port list hostportlist substr chroot start chrootstart host port pair hostportpair host port list hostportlist string part host port pair hostportpair split string part host port set hostportset add host port hostport overrid string string tostr origin 

request processor gener start request processor requestprocessor chang set up transact associ request chang state count zoo keeper server zookeeperserv updat outstand request outstandingrequest account transact queue appli gener transact prep request processor preprequestprocessor thread request processor requestprocessor logger log logger factori loggerfactori get logger getlogg prep request processor preprequestprocessor skip acl skipacl skip acl skipacl get properti getproperti zookeep skip acl skipacl equal ye skip acl skipacl log info zookeep skip acl skipacl ye acl check skip test purpos use fail creat failcreat link block queue linkedblockingqueu request submit request submittedrequest link block queue linkedblockingqueu request request processor requestprocessor next processor nextprocessor zoo keeper server zookeeperserv zk prep request processor preprequestprocessor zoo keeper server zookeeperserv zk request processor requestprocessor next processor nextprocessor process thread processthread sid zk get server id getserverid cport zk get client port getclientport next processor nextprocessor next processor nextprocessor zk zk method test set fail creat failcreat param set fail creat setfailcr fail creat failcreat overrid run request request submit request submittedrequest trace mask tracemask zoo trace zootrac client request trace mask client request trace mask request type op code opcod ping trace mask tracemask zoo trace zootrac client ping trace mask client ping trace mask log trace enabl istraceen zoo trace zootrac log request logrequest log trace mask tracemask request request request death requestofdeath request request prequest request interrupt except interruptedexcept log error unexpect interrupt request processor except requestprocessorexcept get caus getcaus xid rollov except xidrolloverexcept log info get caus getcaus get messag getmessag log error unexpect except except log error unexpect except log info prep request processor preprequestprocessor exit loop chang record changerecord get record path getrecordforpath string path keeper except keeperexcept node except nonodeexcept chang record changerecord last chang lastchang zk outstand chang outstandingchang last chang lastchang zk outstand chang path outstandingchangesforpath get path zk outstand chang outstandingchang size chang record changerecord zk outstand chang outstandingchang get path equal path last chang lastchang last chang lastchang data node datanod zk get zk databas getzkdatabas get node getnod path acl set string children acl acl children get children getchildren last chang lastchang chang record changerecord path stat children children size zk get zk databas getzkdatabas convert convertlong acl last chang lastchang last chang lastchang stat keeper except keeperexcept node except nonodeexcept path last chang lastchang add chang record addchangerecord chang record changerecord zk outstand chang outstandingchang zk outstand chang outstandingchang add zk outstand chang path outstandingchangesforpath put path grab current pend chang record op multi op us insid multi op multiop error code path rollback event fail multi op param multi request multirequest hash map hashmap string chang record changerecord get pend chang getpendingchang multi transact record multitransactionrecord multi request multirequest hash map hashmap string chang record changerecord pend chang record pendingchangerecord hash map hashmap string chang record changerecord op op multi request multirequest string path op get path getpath chang record changerecord cr get record path getrecordforpath path cr pend chang record pendingchangerecord put path cr keeper except keeperexcept node except nonodeexcept ignor on pend chang record pendingchangerecord rollback pend chang record from fail multi op multi op fail leav invalid chang record creat restor prior valu prior valu valid param zxid param pend chang record pendingchangerecord rollback pend chang rollbackpendingchang zxid hash map hashmap string chang record changerecord pend chang record pendingchangerecord zk outstand chang outstandingchang grab list iter start end list iter revers list iter listiter chang record changerecord iter zk outstand chang outstandingchang list iter listiter zk outstand chang outstandingchang size iter ha previou hasprevi chang record changerecord iter previou zxid zxid iter remov zk outstand chang path outstandingchangesforpath remov path empti zk outstand chang outstandingchang empti isempti first zxid firstzxid empti first zxid firstzxid zk outstand chang outstandingchang get zxid iter chang record changerecord prior iter priorit pend chang record pendingchangerecord valu iter prior iter priorit ha next hasnext chang record changerecord prior iter priorit next don appli prior chang record first zxid firstzxid empti zxid first zxid firstzxid zk outstand chang path outstandingchangesforpath put path check acl checkacl zoo keeper server zookeeperserv zk list acl acl perm list id id keeper except keeperexcept auth except noauthexcept skip acl skipacl acl acl size id auth id authid id auth id authid get scheme getschem equal acl acl id id get id getid get perm getperm perm id get scheme getschem equal world id get id getid equal authent provid authenticationprovid ap provid registri providerregistri get provid getprovid id get scheme getschem ap id auth id authid id auth id authid get scheme getschem equal id get scheme getschem ap match auth id authid get id getid id get id getid keeper except keeperexcept auth except noauthexcept method call insid process request thread processrequestthread singleton singl thread call code param type param zxid param request param record suppress warn suppresswarn uncheck request2 txn prequest2txn type zxid request request record record deseri keeper except keeperexcept io except ioexcept request processor except requestprocessorexcept request hdr txn header txnheader request session id sessionid request cxid zxid zk get time gettim type type op code opcod creat zk session tracker sessiontrack check session checksess request session id sessionid request get owner getown creat request createrequest creat request createrequest creat request createrequest record deseri buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request creat request createrequest string path creat request createrequest get path getpath last slash lastslash path last index lastindexof last slash lastslash path index indexof fail creat failcreat log info invalid path path session 0x hex string tohexstr request session id sessionid keeper except keeperexcept bad argument except badargumentsexcept path list acl list acl listacl remov duplic removedupl creat request createrequest get acl getacl fixup acl fixupacl request auth info authinfo list acl listacl keeper except keeperexcept invalid acl except invalidaclexcept path string parent path parentpath path substr last slash lastslash chang record changerecord parent record parentrecord get record path getrecordforpath parent path parentpath check acl checkacl zk parent record parentrecord acl zoo def zoodef perm creat request auth info authinfo parent version parentcvers parent record parentrecord stat get cversion getcvers creat mode createmod creat mode createmod creat mode createmod from flag fromflag creat request createrequest get flag getflag creat mode createmod sequenti issequenti path path string format local english 010d parent version parentcvers path util pathutil valid path validatepath path illeg argument except illegalargumentexcept log info invalid path path session 0x hex string tohexstr request session id sessionid keeper except keeperexcept bad argument except badargumentsexcept path get record path getrecordforpath path keeper except keeperexcept node exist except nodeexistsexcept path keeper except keeperexcept node except nonodeexcept ignor on ephemer parent ephemeralpar parent record parentrecord stat get ephemer owner getephemeralown ephemer parent ephemeralpar keeper except keeperexcept children ephemer except nochildrenforephemeralsexcept path cversion newcvers parent record parentrecord stat get cversion getcvers request txn creat txn createtxn path creat request createrequest get data getdata list acl listacl creat mode createmod ephemer isephemer cversion newcvers stat persist statpersist stat persist statpersist creat mode createmod ephemer isephemer set ephemer owner setephemeralown request session id sessionid parent record parentrecord parent record parentrecord duplic request hdr get zxid getzxid parent record parentrecord child count childcount parent record parentrecord stat set cversion setcvers cversion newcvers add chang record addchangerecord parent record parentrecord add chang record addchangerecord chang record changerecord request hdr get zxid getzxid path list acl listacl op code opcod delet zk session tracker sessiontrack check session checksess request session id sessionid request get owner getown delet request deleterequest delet request deleterequest delet request deleterequest record deseri buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request delet request deleterequest path delet request deleterequest get path getpath last slash lastslash path last index lastindexof last slash lastslash path index indexof zk get zk databas getzkdatabas special path isspecialpath path keeper except keeperexcept bad argument except badargumentsexcept path parent path parentpath path substr last slash lastslash parent record parentrecord get record path getrecordforpath parent path parentpath chang record changerecord node record noderecord get record path getrecordforpath path check acl checkacl zk parent record parentrecord acl zoo def zoodef perm delet request auth info authinfo version delet request deleterequest get version getvers version node record noderecord stat get version getvers version keeper except keeperexcept bad version except badversionexcept path node record noderecord child count childcount keeper except keeperexcept empti except notemptyexcept path request txn delet txn deletetxn path parent record parentrecord parent record parentrecord duplic request hdr get zxid getzxid parent record parentrecord child count childcount add chang record addchangerecord parent record parentrecord add chang record addchangerecord chang record changerecord request hdr get zxid getzxid path op code opcod set data setdata zk session tracker sessiontrack check session checksess request session id sessionid request get owner getown set data request setdatarequest set data request setdatarequest set data request setdatarequest record deseri buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request set data request setdatarequest path set data request setdatarequest get path getpath node record noderecord get record path getrecordforpath path check acl checkacl zk node record noderecord acl zoo def zoodef perm write request auth info authinfo version set data request setdatarequest get version getvers current version currentvers node record noderecord stat get version getvers version version current version currentvers keeper except keeperexcept bad version except badversionexcept path version current version currentvers request txn set data txn setdatatxn path set data request setdatarequest get data getdata version node record noderecord node record noderecord duplic request hdr get zxid getzxid node record noderecord stat set version setvers version add chang record addchangerecord node record noderecord op code opcod set acl setacl zk session tracker sessiontrack check session checksess request session id sessionid request get owner getown set acl request setaclrequest set acl request setaclrequest set acl request setaclrequest record deseri buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request set acl request setaclrequest path set acl request setaclrequest get path getpath list acl listacl remov duplic removedupl set acl request setaclrequest get acl getacl fixup acl fixupacl request auth info authinfo list acl listacl keeper except keeperexcept invalid acl except invalidaclexcept path node record noderecord get record path getrecordforpath path check acl checkacl zk node record noderecord acl zoo def zoodef perm admin request auth info authinfo version set acl request setaclrequest get version getvers current version currentvers node record noderecord stat get avers getavers version version current version currentvers keeper except keeperexcept bad version except badversionexcept path version current version currentvers request txn set acl txn setacltxn path list acl listacl version node record noderecord node record noderecord duplic request hdr get zxid getzxid node record noderecord stat set avers setavers version add chang record addchangerecord node record noderecord op code opcod creat session createsess request request rewind request request get getint request txn creat session txn createsessiontxn request request rewind zk session tracker sessiontrack add session addsess request session id sessionid zk set owner setown request session id sessionid request get owner getown op code opcod close session closesess don check session expir thread queue up oper session owner request last session zk session tracker sessiontrack check session checksess request session id sessionid request get owner getown hash set hashset string es zk get zk databas getzkdatabas get ephemer getephemer request session id sessionid zk outstand chang outstandingchang chang record changerecord zk outstand chang outstandingchang stat delet es remov path stat get ephemer owner getephemeralown request session id sessionid es add path string path2 delet path2delet es add chang record addchangerecord chang record changerecord request hdr get zxid getzxid path2 delet path2delet zk session tracker sessiontrack set session close setsessionclos request session id sessionid log info process session termin sessionid 0x hex string tohexstr request session id sessionid op code opcod check zk session tracker sessiontrack check session checksess request session id sessionid request get owner getown check version request checkversionrequest check version request checkversionrequest check version request checkversionrequest record deseri buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request check version request checkversionrequest path check version request checkversionrequest get path getpath node record noderecord get record path getrecordforpath path check acl checkacl zk node record noderecord acl zoo def zoodef perm read request auth info authinfo version check version request checkversionrequest get version getvers current version currentvers node record noderecord stat get version getvers version version current version currentvers keeper except keeperexcept bad version except badversionexcept path version current version currentvers request txn check version txn checkversiontxn path version method call insid process request thread processrequestthread singleton singl thread call code param request suppress warn suppresswarn uncheck request prequest request request request processor except requestprocessorexcept log info prep cxid request cxid type request type id 0x hex string tohexstr request session id sessionid request hdr request txn request type op code opcod creat creat request createrequest creat request createrequest creat request createrequest request2 txn prequest2txn request type zk get next zxid getnextzxid request creat request createrequest op code opcod delet delet request deleterequest delet request deleterequest delet request deleterequest request2 txn prequest2txn request type zk get next zxid getnextzxid request delet request deleterequest op code opcod set data setdata set data request setdatarequest set data request setdatarequest set data request setdatarequest request2 txn prequest2txn request type zk get next zxid getnextzxid request set data request setdatarequest op code opcod set acl setacl set acl request setaclrequest set acl request setaclrequest set acl request setaclrequest request2 txn prequest2txn request type zk get next zxid getnextzxid request set acl request setaclrequest op code opcod check check version request checkversionrequest check request checkrequest check version request checkversionrequest request2 txn prequest2txn request type zk get next zxid getnextzxid request check request checkrequest op code opcod multi multi transact record multitransactionrecord multi request multirequest multi transact record multitransactionrecord buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request multi request multirequest io except ioexcept request hdr txn header txnheader request session id sessionid request cxid zk get next zxid getnextzxid zk get time gettim op code opcod multi list txn txn arrai list arraylist txn op multi op zxid zxid zk get next zxid getnextzxid keeper except keeperexcept ke store current pend chang record rollback hash map hashmap string chang record changerecord pend chang pendingchang get pend chang getpendingchang multi request multirequest index op op multi request multirequest record subrequest op request record torequestrecord ve fail on op don bother rest fail confus logfil ke request hdr set type settyp op code opcod error request txn error txn errortxn code runtimeinconsist valu intvalu prep request convert txn request2 txn prequest2txn op get type gettyp zxid request subrequest keeper except keeperexcept ke ke request hdr set type settyp op code opcod error request txn error txn errortxn code valu intvalu log info user level keeper except keeperexcept process request string tostr abort remain multi op error path get path getpath error get messag getmessag request set except setexcept rollback chang record from fail multi op rollback pend chang rollbackpendingchang zxid pend chang pendingchang fixm don serial here immedi deseri next processor get txn store list arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao request txn serial boa request buffer bytebuff bb buffer bytebuff wrap bao arrai tobytearrai txn add txn request hdr get type gettyp bb arrai index request hdr txn header txnheader request session id sessionid request cxid zxid zk get time gettim request type request txn multi txn multitxn txn creat close session don requir request record op code opcod creat session createsess op code opcod close session closesess request2 txn prequest2txn request type zk get next zxid getnextzxid request rest don creat txn verifi session op code opcod sync op code opcod exist op code opcod get data getdata op code opcod get acl getacl op code opcod get children getchildren op code opcod get children2 getchildren2 op code opcod ping op code opcod set watch setwatch zk session tracker sessiontrack check session checksess request session id sessionid request get owner getown keeper except keeperexcept request hdr request hdr set type settyp op code opcod error request txn error txn errortxn code valu intvalu log info user level keeper except keeperexcept process request string tostr error path get path getpath error get messag getmessag request set except setexcept except log error level return marshal error user log error fail process request string builder stringbuild sb string builder stringbuild buffer bytebuff bb request request bb bb rewind bb ha remain hasremain sb append integ hex string tohexstr bb get xff 0xff sb append request buffer log error dump request buffer 0x sb string tostr request hdr request hdr set type settyp op code opcod error request txn error txn errortxn code marshallingerror valu intvalu request zxid zk get zxid getzxid next processor nextprocessor process request processrequest request list acl remov duplic removedupl list acl acl arrai list arraylist acl retval arrai list arraylist acl iter acl acl iter ha next hasnext acl next retval contain retval add retval method check acl make isn empti ha valid scheme id expand rel id depend requestor authent inform param auth info authinfo list acl id associ client connect param acl list acl assign node creat set acl setacl oper fixup acl fixupacl list id auth info authinfo list acl acl skip acl skipacl acl acl size iter acl acl iter link list linkedlist acl add toadd ha next hasnext acl next id id get id getid id get scheme getschem equal world id get id getid equal wide open id get scheme getschem equal auth auth id expand authent id requestor remov add toadd add toadd link list linkedlist acl auth id valid authidvalid id cid auth info authinfo authent provid authenticationprovid ap provid registri providerregistri get provid getprovid cid get scheme getschem ap log error miss authent provid authenticationprovid cid get scheme getschem ap authent isauthent auth id valid authidvalid add toadd add acl get perm getperm cid auth id valid authidvalid authent provid authenticationprovid ap provid registri providerregistri get provid getprovid id get scheme getschem ap ap valid isvalid id get id getid add toadd acl add toadd acl add acl size process request processrequest request request request add rq rec addrqrec prep zk outstand chang outstandingchang size submit request submittedrequest add request shutdown log info shut down submit request submittedrequest clear submit request submittedrequest add request request death requestofdeath next processor nextprocessor shutdown 

async hammer test asynchammertest zk test zktestcas string callback stringcallback callback voidcallback data callback datacallback logger log logger factori loggerfactori get logger getlogg async hammer test asynchammertest quorum base quorumbas qb quorum base quorumbas bang set up setup observ withobserv except qb set up setup observ withobserv restart except log info restart get test name gettestnam qb tear down teardown don call setup don reassign port dir jmx env jmxenv set up setup qb start server startserv tear down teardown except log info test client shut down qb tear down teardown creat test sequenc node asynchron max 30 outstand hammer thread hammerthread thread string callback stringcallback callback voidcallback max outstand max outstand 30 testabl zoo keeper testablezookeep zk outstand fail hammer thread hammerthread string name name run countdown watcher countdownwatch watcher countdown watcher countdownwatch zk testabl zoo keeper testablezookeep qb host port hostport connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout bang outstand incoutstand befor creat otw race zk creat test id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti interrupt except interruptedexcept bang log error saniti check fail saniti check except log error client creat oper fail zk zk close zk testabl wait shutdown testablewaitforshutdown connect timeout connect timeout fail log error client shutdown interrupt except interruptedexcept log info interrupt outstand incoutstand interrupt except interruptedexcept outstand outstand max outstand max outstand wait dec outstand decoutstand outstand asserttru outstand outstand notifi notifyal process watch event watchedev event ignor purpos test process result processresult rc string path object ctx string name rc keeper except keeperexcept code valu intvalu bang fail log error creat fail 0x hex string tohexstr zk get session id getsessionid rc rc path path dec outstand decoutstand dec outstand decoutstand zk delet name except bang fail log error client delet fail process result processresult rc string path object ctx rc keeper except keeperexcept code valu intvalu bang fail log error delet fail 0x hex string tohexstr zk get session id getsessionid rc rc path path test test hammer testhamm except set up setup bang log info start hammer hammer thread hammerthread hammer hammer thread hammerthread 100 hammer length hammer hammer thread hammerthread hammer thread hammerthread hammer start log info start hammer thread sleep 5000 allow client run max sec 5sec bang log info stop hammer hammer length hammer interrupt verifi thread termin verifythreadtermin hammer 60000 assertfals hammer fail befor restart log info hammer stop verifi consist qb verifi root server match verifyrootofallserversmatch qb host port hostport restart after restart log info verifi hammer qb verifi root server match verifyrootofallserversmatch qb host port hostport tear down teardown test test observ hammer testobservershamm except set up setup bang thread hammer thread 100 hammer length hammer hammer thread hammerthread hammer thread hammerthread hammer start thread sleep 5000 allow client run max sec 5sec bang hammer length hammer interrupt verifi thread termin verifythreadtermin hammer 60000 befor restart qb verifi root server match verifyrootofallserversmatch qb host port hostport tear down teardown suppress warn suppresswarn uncheck process result processresult rc string path object ctx string name ctx link list linkedlist integ ctx add rc ctx notifi notifyal suppress warn suppresswarn uncheck process result processresult rc string path object ctx ctx link list linkedlist integ ctx add rc ctx notifi notifyal suppress warn suppresswarn uncheck process result processresult rc string path object ctx data stat stat ctx link list linkedlist integ ctx add rc ctx notifi notifyal 

creat test sequenc node asynchron max 30 outstand hammer thread hammerthread thread string callback stringcallback callback voidcallback max outstand max outstand 30 testabl zoo keeper testablezookeep zk outstand fail hammer thread hammerthread string name name run countdown watcher countdownwatch watcher countdown watcher countdownwatch zk testabl zoo keeper testablezookeep qb host port hostport connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout bang outstand incoutstand befor creat otw race zk creat test id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti interrupt except interruptedexcept bang log error saniti check fail saniti check except log error client creat oper fail zk zk close zk testabl wait shutdown testablewaitforshutdown connect timeout connect timeout fail log error client shutdown interrupt except interruptedexcept log info interrupt outstand incoutstand interrupt except interruptedexcept outstand outstand max outstand max outstand wait dec outstand decoutstand outstand asserttru outstand outstand notifi notifyal process watch event watchedev event ignor purpos test process result processresult rc string path object ctx string name rc keeper except keeperexcept code valu intvalu bang fail log error creat fail 0x hex string tohexstr zk get session id getsessionid rc rc path path dec outstand decoutstand dec outstand decoutstand zk delet name except bang fail log error client delet fail process result processresult rc string path object ctx rc keeper except keeperexcept code valu intvalu bang fail log error delet fail 0x hex string tohexstr zk get session id getsessionid rc rc path path 

map keeper except keeperexcept http statu code provid keeper except mapper keeperexceptionmapp except mapper exceptionmapp keeper except keeperexcept uri info uriinfo ui keeper except mapper keeperexceptionmapp context uri info uriinfo ui ui ui respons respons torespons keeper except keeperexcept respons statu statu string messag string path get path getpath code authfail statu respons statu unauthor messag path author badargu statu respons statu bad request bad request messag path bad argument badvers statu respons statu precondit fail precondit fail messag path bad version invalidacl statu respons statu bad request bad request messag path invalid acl nodeexist statu respons statu conflict messag path exist nonod statu respons statu found found messag path found notempti statu respons statu conflict messag path empti statu respons statu from statu code fromstatuscod 502 bad gatewai messag error process request path get messag getmessag respons statu statu entiti error zerror ui get request uri getrequesturi string tostr messag build 

chroot test chroottest client base clientbas watcher mywatch watcher string path string event path eventpath count down latch countdownlatch latch count down latch countdownlatch watcher mywatch string path path path process watch event watchedev event println latch path event get path getpath event path eventpath event get path getpath latch count down countdown match interrupt except interruptedexcept latch await connect timeout connect timeout time unit timeunit millisecond fail watch receiv timeout period path path equal event path eventpath test test chroot synchron testchrootsynchron io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk1 creat client createcli zk1 creat ch1 id open acl unsaf open acl unsaf creat mode createmod persist zk1 zk1 close zoo keeper zookeep zk2 creat client createcli host port hostport ch1 equal assertequ ch2 zk2 creat ch2 id open acl unsaf open acl unsaf creat mode createmod persist zk2 zk2 close zk1 creat client createcli zk2 creat client createcli host port hostport ch1 check get watcher mywatch w1 watcher mywatch ch1 assertnotnul zk1 exist ch1 w1 watcher mywatch w2 watcher mywatch ch1 ch2 assertnotnul zk1 exist ch1 ch2 w2 watcher mywatch w3 watcher mywatch ch2 assertnotnul zk2 exist ch2 w3 set watch child watcher mywatch w4 watcher mywatch ch1 zk1 get children getchildren ch1 w4 watcher mywatch w5 watcher mywatch zk2 get children getchildren w5 check set zk1 set data setdata ch1 get byte getbyt zk2 set data setdata ch2 get byte getbyt check watch asserttru w1 match asserttru w2 match asserttru w3 match check except zk2 set data setdata ch3 get byte getbyt keeper except keeperexcept node except nonodeexcept equal assertequ ch3 get path getpath asserttru arrai equal get byte getbyt zk1 get data getdata ch1 asserttru arrai equal get byte getbyt zk1 get data getdata ch1 ch2 asserttru arrai equal get byte getbyt zk2 get data getdata ch2 check delet zk2 delet ch2 asserttru w4 match asserttru w5 match zk1 delet ch1 assertnul zk1 exist ch1 assertnul zk1 exist ch1 ch2 assertnul zk2 exist ch2 zk1 zk1 close zk2 zk2 close 

watcher mywatch watcher string path string event path eventpath count down latch countdownlatch latch count down latch countdownlatch watcher mywatch string path path path process watch event watchedev event println latch path event get path getpath event path eventpath event get path getpath latch count down countdown match interrupt except interruptedexcept latch await connect timeout connect timeout time unit timeunit millisecond fail watch receiv timeout period path path equal event path eventpath 

fle test fletest zk test zktestcas logger log logger factori loggerfactori get logger getlogg fle test fletest fle test fletest le thread lethread le thread lethread test vote testvot test vote testvot id leader leader leader leader count vote countvot hash set hashset test vote testvot hs id counter test vote testvot hs leader id counter counter count hash map hashmap quorum server quorumserv peer arrai list arraylist le thread lethread thread hash map hashmap integ hash set hashset test vote testvot vote map votemap file tmpdir port success count successcount object obj finalobj vote vote leader di leaderdi leader round random rand random befor set up setup except count peer hash map hashmap quorum server quorumserv count thread arrai list arraylist le thread lethread count vote map votemap hash map hashmap integ hash set hashset test vote testvot vote vote count tmpdir file count port count success count successcount obj finalobj object after tear down teardown except thread size le thread lethread thread get quorum base quorumbas shutdown le thread lethread peer le thread lethread thread quorum peer quorump peer peer round peerround le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead log info thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote get current valu logic clock peer lc fast leader elect fastleaderelect peer get elect alg getelectionalg get logic clock getlogicalclock get id getid leader execut part code first leader elect fail right after wait ha follow support log info leader fle test fletest leader di leaderdi log info leader dy leader di leaderdi fast leader elect fastleaderelect peer get elect alg getelectionalg shutdown leader log info leader dead round fle test fletest notifi notifyal vote map votemap vote map votemap get lc vote map votemap put lc hash set hashset test vote testvot hash set hashset test vote testvot hs vote map votemap get lc hs add test vote testvot get id getid count vote countvot hs get id getid count leader log info major vote map votemap wait 3000 log info notifi expir hs vote map votemap get lc count vote countvot hs get id getid count leader log info major round fle test fletest notifi notifyal leader obj finalobj success count successcount success count successcount count obj finalobj notifi follow execut part first add vote vote map votemap wait bound amount time leader notifi follow fle test fletest object note get fle test fletest vote map votemap befor ad vote follow follow block leader notifi leav block fl etest fletest log info logic clock fast leader elect fastleaderelect peer get elect alg getelectionalg get logic clock getlogicalclock vote map votemap log info vote vote get id getid round fast leader elect fastleaderelect peer get elect alg getelectionalg get logic clock getlogicalclock vote map votemap get lc vote map votemap put lc hash set hashset test vote testvot hash set hashset test vote testvot hs vote map votemap get lc hs add test vote testvot vote get id getid count vote countvot hs vote get id getid count log info logic clock lc vote get id getid vote map votemap notifi part follow wait leader notifi remov vote leader take respond fle test fletest leader vote get id getid fle test fletest wait 3000 log info leader leader vote vote get id getid vote map votemap leader vote get id getid obj finalobj success count successcount success count successcount count obj finalobj notifi hash set hashset test vote testvot hs vote map votemap get lc test vote testvot remov toremov test vote testvot tv hs get id getid remov toremov tv hs remov remov toremov add random execut thread sleep rand next nextint 500 peer set current vote setcurrentvot vote peer get id getid log debug thread vote interrupt except interruptedexcept print stack trace printstacktrac test test le testl except fast leader elect fastleaderelect le fast leader elect fastleaderelect count leader di leaderdi allow on bad leader allowonebadlead leader di leaderdi log info test le testl get test name gettestnam count count peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress port assign portassign uniqu inet socket address inetsocketaddress port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port port assign portassign uniqu le length quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect le thread lethread thread le thread lethread peer thread start thread add thread log info start thread get test name gettestnam wait counter waitcount obj finalobj success count successcount count wait counter waitcount 50 obj finalobj wait 2000 wait counter waitcount list thread haven join thread doesn join hasn decid leader happen peer slow disconnect longer nomin connect current leader thread size thread get aliv isal log info thread didn join major good success count successcount count fail fewer major ha join thread get leader aliv isal fail leader hasn join leader verifi thread ha follow verifi state verifyst thread success quorum peer quorump peer verifi state verifyst quorum peer quorump peer peer peer run set name setnam verifi state verifyst peer get id getid peer get peer state getpeerst server state serverst follow log info follow success peer get peer state getpeerst server state serverst lead log info lead success thread sleep 250 except log warn sleep fail success issuccess success zookeep 975 verifi peer join establish cluster lead state test test join testjoin except sid quorum peer quorump peer wait time waittim 10 1000 arrai list arraylist quorum peer quorump peer list peerlist arrai list arraylist quorum peer quorump sid sid sid peer put valu valueof sid quorum server quorumserv sid inet socket address inetsocketaddress port assign portassign uniqu inet socket address inetsocketaddress port assign portassign uniqu tmpdir sid client base clientbas creat tmp dir createtmpdir port sid port assign portassign uniqu start peer verifi form cluster sid sid sid peer quorum peer quorump peer tmpdir sid tmpdir sid port sid sid 2000 log info start peer peer get id getid peer start peer list peerlist add sid peer peer peer list peerlist get verifi state verifyst v1 verifi state verifyst peer list peerlist get v1 start v1 join wait time waittim assertfals unabl form cluster wait time waittim ms v1 success issuccess start rd 3rd peer check lead state peer quorum peer quorump peer tmpdir sid tmpdir sid port sid sid 2000 log info start peer peer get id getid peer start peer list peerlist add sid peer v1 verifi state verifyst peer v1 start v1 join wait time waittim v1 aliv isal fail peer peer get id getid fail join cluster wait time waittim ms v1 success issuccess fail incorrect lead state peer peer get id getid cleanup id id id peer peer list peerlist get id peer peer shutdown 

test vote testvot test vote testvot id leader leader leader leader 

le thread lethread thread quorum peer quorump peer peer round peerround le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead log info thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote get current valu logic clock peer lc fast leader elect fastleaderelect peer get elect alg getelectionalg get logic clock getlogicalclock get id getid leader execut part code first leader elect fail right after wait ha follow support log info leader fle test fletest leader di leaderdi log info leader dy leader di leaderdi fast leader elect fastleaderelect peer get elect alg getelectionalg shutdown leader log info leader dead round fle test fletest notifi notifyal vote map votemap vote map votemap get lc vote map votemap put lc hash set hashset test vote testvot hash set hashset test vote testvot hs vote map votemap get lc hs add test vote testvot get id getid count vote countvot hs get id getid count leader log info major vote map votemap wait 3000 log info notifi expir hs vote map votemap get lc count vote countvot hs get id getid count leader log info major round fle test fletest notifi notifyal leader obj finalobj success count successcount success count successcount count obj finalobj notifi follow execut part first add vote vote map votemap wait bound amount time leader notifi follow fle test fletest object note get fle test fletest vote map votemap befor ad vote follow follow block leader notifi leav block fl etest fletest log info logic clock fast leader elect fastleaderelect peer get elect alg getelectionalg get logic clock getlogicalclock vote map votemap log info vote vote get id getid round fast leader elect fastleaderelect peer get elect alg getelectionalg get logic clock getlogicalclock vote map votemap get lc vote map votemap put lc hash set hashset test vote testvot hash set hashset test vote testvot hs vote map votemap get lc hs add test vote testvot vote get id getid count vote countvot hs vote get id getid count log info logic clock lc vote get id getid vote map votemap notifi part follow wait leader notifi remov vote leader take respond fle test fletest leader vote get id getid fle test fletest wait 3000 log info leader leader vote vote get id getid vote map votemap leader vote get id getid obj finalobj success count successcount success count successcount count obj finalobj notifi hash set hashset test vote testvot hs vote map votemap get lc test vote testvot remov toremov test vote testvot tv hs get id getid remov toremov tv hs remov remov toremov add random execut thread sleep rand next nextint 500 peer set current vote setcurrentvot vote peer get id getid log debug thread vote interrupt except interruptedexcept print stack trace printstacktrac 

verifi thread ha follow verifi state verifyst thread success quorum peer quorump peer verifi state verifyst quorum peer quorump peer peer peer run set name setnam verifi state verifyst peer get id getid peer get peer state getpeerst server state serverst follow log info follow success peer get peer state getpeerst server state serverst lead log info lead success thread sleep 250 except log warn sleep fail success issuccess success 

sole respons print log test start finish unit4 zk test runner junit4zktestrunn block unit4 runner blockjunit4classrunn logger log logger factori loggerfactori get logger getlogg unit4 zk test runner junit4zktestrunn unit4 zk test runner junit4zktestrunn klass initi error initializationerror klass log invok method loggedinvokemethod invok method invokemethod string name log invok method loggedinvokemethod framework method frameworkmethod method object target method target name method get name getnam overrid evalu throwabl log info run test method name evalu throwabl log info test method fail name log info finish test method name overrid statement method invok methodinvok framework method frameworkmethod method object test log invok method loggedinvokemethod method test 

log invok method loggedinvokemethod invok method invokemethod string name log invok method loggedinvokemethod framework method frameworkmethod method object target method target name method get name getnam overrid evalu throwabl log info run test method name evalu throwabl log info test method fail name log info finish test method name 

link dialog jdialog configur link zoo inspector node viewer zooinspectornodeview show applic zoo inspector node viewer dialog zooinspectornodeviewersdialog dialog jdialog list select listen listselectionlisten button jbutton up button upbutton button jbutton down button downbutton button jbutton remov button removebutton button jbutton add button addbutton list jlist viewer list viewerslist button jbutton save file button savefilebutton button jbutton load file button loadfilebutton button jbutton set default button setdefaultsbutton file chooser jfilechoos file chooser filechoos file chooser jfilechoos file param frame frame from dialog displai param current viewer currentview link zoo inspector node viewer zooinspectornodeview show param listen link node viewer chang listen nodeviewerschangelisten notifi chang node viewer configur param manag link zoo inspector manag zooinspectormanag applic zoo inspector node viewer dialog zooinspectornodeviewersdialog frame frame list zoo inspector node viewer zooinspectornodeview current viewer currentview collect node viewer chang listen nodeviewerschangelisten listen zoo inspector manag zooinspectormanag manag frame list zoo inspector node viewer zooinspectornodeview viewer newview arrai list arraylist zoo inspector node viewer zooinspectornodeview current viewer currentview set layout setlayout border layout borderlayout set icon imag seticonimag zoo inspector icon resourc zooinspectoriconresourc get chang node viewer icon getchangenodeviewersicon get imag getimag set titl settitl zoo inspector zooinspector set modal setmod set setalwaysontop set resiz setresiz panel jpanel panel panel jpanel panel set layout setlayout grid bag layout gridbaglayout viewer list viewerslist list jlist list model defaultlistmodel model list model defaultlistmodel zoo inspector node viewer zooinspectornodeview viewer viewer newview model add element addel viewer viewer list viewerslist set model setmodel model viewer list viewerslist set cell render setcellrender list cell render defaultlistcellrender overrid compon get list cell render compon getlistcellrenderercompon list jlist list object valu index select isselect cell ha focu cellhasfocu zoo inspector node viewer zooinspectornodeview viewer zoo inspector node viewer zooinspectornodeview valu label jlabel label label jlabel get list cell render compon getlistcellrenderercompon list valu index select isselect cell ha focu cellhasfocu label set text settext viewer get titl gettitl label viewer list viewerslist set drop mode setdropmod drop mode dropmod insert viewer list viewerslist enabl input method enableinputmethod viewer list viewerslist set drag enabl setdragen viewer list viewerslist set select mode setselectionmod list select model listselectionmodel singl select singl select viewer list viewerslist get select model getselectionmodel add list select listen addlistselectionlisten viewer list viewerslist set transfer handler settransferhandl transfer handler transferhandl overrid canimport transfer handler transferhandl transfer support transfersupport info node viewer nodeview info data flavor support isdataflavorsupport zoo inspector node viewer zooinspectornodeview node viewer data flavor nodeviewerdataflavor list jlist drop locat droploc dl list jlist drop locat droploc info get drop locat getdroploc dl get index getindex overrid data importdata transfer handler transferhandl transfer support transfersupport info list jlist drop locat droploc dl list jlist drop locat droploc info get drop locat getdroploc list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel index dl get index getindex insert dl insert isinsert get string drop transfer info get transfer gettransfer string data data string get transfer data gettransferdata zoo inspector node viewer zooinspectornodeview node viewer data flavor nodeviewerdataflavor except zoo inspector node viewer zooinspectornodeview viewer zoo inspector node viewer zooinspectornodeview name fornam data instanc newinst list model listmodel contain viewer list model listmodel remov element removeel viewer insert list model listmodel add index viewer list model listmodel set index viewer except logger factori loggerfactori get logger getlogg error error instanti data overrid get sourc action getsourceact compon jcompon move overrid transfer creat transfer createtransfer compon jcompon list jlist list list jlist zoo inspector node viewer zooinspectornodeview valu zoo inspector node viewer zooinspectornodeview list get select valu getselectedvalu valu scroll pane jscrollpan scroller scroll pane jscrollpan viewer list viewerslist grid bag constraint gridbagconstraint c1 grid bag constraint gridbagconstraint c1 gridx c1 gridi c1 gridwidth c1 gridheight c1 weightx c1 weighti c1 anchor grid bag constraint gridbagconstraint center c1 fill grid bag constraint gridbagconstraint c1 inset inset c1 ipadx c1 ipadi panel add scroller c1 up button upbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get up icon getupicon down button downbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get down icon getdownicon remov button removebutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get delet node icon getdeletenodeicon add button addbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get add node icon getaddnodeicon up button upbutton set enabl seten down button downbutton set enabl seten remov button removebutton set enabl seten add button addbutton set enabl seten up button upbutton set tool tip text settooltiptext move current select node viewer up down button downbutton set tool tip text settooltiptext move current select node viewer down remov button removebutton set tool tip text settooltiptext remov current select node viewer add button addbutton set tool tip text settooltiptext add node viewer text field jtextfield viewer text field newviewertextfield text field jtextfield grid bag constraint gridbagconstraint c2 grid bag constraint gridbagconstraint c2 gridx c2 gridi c2 gridwidth c2 gridheight c2 weightx c2 weighti c2 anchor grid bag constraint gridbagconstraint north c2 fill grid bag constraint gridbagconstraint horizont c2 inset inset c2 ipadx c2 ipadi panel add up button upbutton c2 grid bag constraint gridbagconstraint c3 grid bag constraint gridbagconstraint c3 gridx c3 gridi c3 gridwidth c3 gridheight c3 weightx c3 weighti c3 anchor grid bag constraint gridbagconstraint north c3 fill grid bag constraint gridbagconstraint horizont c3 inset inset c3 ipadx c3 ipadi panel add down button downbutton c3 grid bag constraint gridbagconstraint c4 grid bag constraint gridbagconstraint c4 gridx c4 gridi c4 gridwidth c4 gridheight c4 weightx c4 weighti c4 anchor grid bag constraint gridbagconstraint north c4 fill grid bag constraint gridbagconstraint horizont c4 inset inset c4 ipadx c4 ipadi panel add remov button removebutton c4 grid bag constraint gridbagconstraint c5 grid bag constraint gridbagconstraint c5 gridx c5 gridi c5 gridwidth c5 gridheight c5 weightx c5 weighti c5 anchor grid bag constraint gridbagconstraint center c5 fill grid bag constraint gridbagconstraint c5 inset inset c5 ipadx c5 ipadi panel add viewer text field newviewertextfield c5 grid bag constraint gridbagconstraint c6 grid bag constraint gridbagconstraint c6 gridx c6 gridi c6 gridwidth c6 gridheight c6 weightx c6 weighti c6 anchor grid bag constraint gridbagconstraint center c6 fill grid bag constraint gridbagconstraint c6 inset inset c6 ipadx c6 ipadi panel add add button addbutton c6 up button upbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel zoo inspector node viewer zooinspectornodeview viewer zoo inspector node viewer zooinspectornodeview viewer list viewerslist get select valu getselectedvalu index viewer list viewerslist get select index getselectedindex list model listmodel contain viewer list model listmodel remov element removeelementat index list model listmodel insert element insertelementat viewer index viewer list viewerslist set select valu setselectedvalu viewer down button downbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel zoo inspector node viewer zooinspectornodeview viewer zoo inspector node viewer zooinspectornodeview viewer list viewerslist get select valu getselectedvalu index viewer list viewerslist get select index getselectedindex list model listmodel contain viewer list model listmodel remov element removeelementat index list model listmodel insert element insertelementat viewer index viewer list viewerslist set select valu setselectedvalu viewer remov button removebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel zoo inspector node viewer zooinspectornodeview viewer zoo inspector node viewer zooinspectornodeview viewer list viewerslist get select valu getselectedvalu index viewer list viewerslist get select index getselectedindex list model listmodel contain viewer list model listmodel remov element removeel viewer viewer list viewerslist set select index setselectedindex index list model listmodel size index index add button addbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev string name classnam viewer text field newviewertextfield get text gettext name classnam name classnam length option pane joptionpan show messag dialog showmessagedialog zoo inspector node viewer dialog zooinspectornodeviewersdialog enter full name node viewer click add button input error option pane joptionpan error messag error messag list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel zoo inspector node viewer zooinspectornodeview viewer zoo inspector node viewer zooinspectornodeview name fornam name classnam instanc newinst list model listmodel contain viewer option pane joptionpan show messag dialog showmessagedialog zoo inspector node viewer dialog zooinspectornodeviewersdialog node viewer exist node viewer ad input error option pane joptionpan error messag error messag list model listmodel add element addel viewer except ex logger factori loggerfactori get logger getlogg error error occur instani node viewer ex option pane joptionpan show messag dialog showmessagedialog zoo inspector node viewer dialog zooinspectornodeviewersdialog error occur instani node viewer ex get messag getmessag error option pane joptionpan error messag error messag save file button savefilebutton button jbutton save load file button loadfilebutton button jbutton load set default button setdefaultsbutton button jbutton set default save file button savefilebutton set tool tip text settooltiptext save current node viewer configur file load file button loadfilebutton set tool tip text settooltiptext load node viewer configur frm file set default button setdefaultsbutton set tool tip text settooltiptext set current configur asd default grid bag constraint gridbagconstraint c7 grid bag constraint gridbagconstraint c7 gridx c7 gridi c7 gridwidth c7 gridheight c7 weightx c7 weighti c7 anchor grid bag constraint gridbagconstraint west c7 fill grid bag constraint gridbagconstraint vertic c7 inset inset c7 ipadx c7 ipadi panel add save file button savefilebutton c7 grid bag constraint gridbagconstraint c8 grid bag constraint gridbagconstraint c8 gridx c8 gridi c8 gridwidth c8 gridheight c8 weightx c8 weighti c8 anchor grid bag constraint gridbagconstraint west c8 fill grid bag constraint gridbagconstraint vertic c8 inset inset c8 ipadx c8 ipadi panel add load file button loadfilebutton c8 grid bag constraint gridbagconstraint c9 grid bag constraint gridbagconstraint c9 gridx c9 gridi c9 gridwidth c9 gridheight c9 weightx c9 weighti c9 anchor grid bag constraint gridbagconstraint west c9 fill grid bag constraint gridbagconstraint vertic c9 inset inset c9 ipadx c9 ipadi panel add set default button setdefaultsbutton c9 save file button savefilebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev result file chooser filechoos show save dialog showsavedialog zoo inspector node viewer dialog zooinspectornodeviewersdialog result file chooser jfilechoos approv option approv option file select file selectedfil file chooser filechoos get select file getselectedfil answer option pane joptionpan ye option ye option select file selectedfil exist answer option pane joptionpan show confirm dialog showconfirmdialog zoo inspector node viewer dialog zooinspectornodeviewersdialog specifi file exist overwrit confirm overwrit option pane joptionpan ye option ye option option pane joptionpan warn messag warn messag answer option pane joptionpan ye option ye option list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel list string node viewer name nodeviewersclassnam arrai list arraylist string object model content modelcont list model listmodel arrai toarrai object model content modelcont node viewer name nodeviewersclassnam add zoo inspector node viewer zooinspectornodeview get getclass get canon name getcanonicalnam manag save node viewer file savenodeviewersfil select file selectedfil node viewer name nodeviewersclassnam io except ioexcept ex logger factori loggerfactori get logger getlogg error error save node veiwer configur from file ex option pane joptionpan show messag dialog showmessagedialog zoo inspector node viewer dialog zooinspectornodeviewersdialog error save node veiwer configur from file ex get messag getmessag error option pane joptionpan error messag error messag load file button loadfilebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev result file chooser filechoos show open dialog showopendialog zoo inspector node viewer dialog zooinspectornodeviewersdialog result file chooser jfilechoos approv option approv option list string node viewer name nodeviewersclassnam manag load node viewer file loadnodeviewersfil file chooser filechoos get select file getselectedfil list zoo inspector node viewer zooinspectornodeview node viewer nodeview arrai list arraylist zoo inspector node viewer zooinspectornodeview string node viewer name nodeviewersclassnam node viewer name nodeviewersclassnam zoo inspector node viewer zooinspectornodeview viewer zoo inspector node viewer zooinspectornodeview name fornam node viewer name nodeviewersclassnam instanc newinst node viewer nodeview add viewer list model defaultlistmodel model list model defaultlistmodel zoo inspector node viewer zooinspectornodeview viewer node viewer nodeview model add element addel viewer viewer list viewerslist set model setmodel model panel revalid panel repaint except ex logger factori loggerfactori get logger getlogg error error load node veiwer configur from file ex option pane joptionpan show messag dialog showmessagedialog zoo inspector node viewer dialog zooinspectornodeviewersdialog error load node veiwer configur from file ex get messag getmessag error option pane joptionpan error messag error messag set default button setdefaultsbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev answer option pane joptionpan show confirm dialog showconfirmdialog zoo inspector node viewer dialog zooinspectornodeviewersdialog save configur confirm set default option pane joptionpan ye option ye option option pane joptionpan warn messag warn messag answer option pane joptionpan ye option ye option list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel list string node viewer name nodeviewersclassnam arrai list arraylist string object model content modelcont list model listmodel arrai toarrai object model content modelcont node viewer name nodeviewersclassnam add zoo inspector node viewer zooinspectornodeview get getclass get canon name getcanonicalnam manag set node viewer configur setdefaultnodeviewerconfigur node viewer name nodeviewersclassnam io except ioexcept ex logger factori loggerfactori get logger getlogg error error set node veiwer configur ex option pane joptionpan show messag dialog showmessagedialog zoo inspector node viewer dialog zooinspectornodeviewersdialog error set node veiwer configur ex get messag getmessag error option pane joptionpan error messag error messag panel jpanel button panel buttonspanel panel jpanel button panel buttonspanel set layout setlayout flow layout flowlayout flow layout flowlayout center 10 10 button jbutton button okbutton button jbutton button okbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector node viewer dialog zooinspectornodeviewersdialog dispos list model defaultlistmodel list model listmodel list model defaultlistmodel viewer list viewerslist get model getmodel viewer newview clear object model content modelcont list model listmodel arrai toarrai object model content modelcont viewer newview add zoo inspector node viewer zooinspectornodeview current viewer currentview clear current viewer currentview add addal viewer newview node viewer chang listen nodeviewerschangelisten listen listen listen node viewer chang nodeviewerschang current viewer currentview button panel buttonspanel add button okbutton button jbutton cancel button cancelbutton button jbutton cancel cancel button cancelbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector node viewer dialog zooinspectornodeviewersdialog dispos button panel buttonspanel add cancel button cancelbutton add panel border layout borderlayout center add button panel buttonspanel border layout borderlayout south pack non javadoc javax swing event list select listen listselectionlisten valu chang valuechang javax swing event list select event listselectionev valu chang valuechang list select event listselectionev index viewer list viewerslist get select index getselectedindex index remov button removebutton set enabl seten up button upbutton set enabl seten down button downbutton set enabl seten remov button removebutton set enabl seten index up button upbutton set enabl seten up button upbutton set enabl seten index list model defaultlistmodel viewer list viewerslist get model getmodel get size getsiz down button downbutton set enabl seten down button downbutton set enabl seten 

deprec ha deprec releas deprec leader elect leaderelect elect logger log logger factori loggerfactori get logger getlogg leader elect leaderelect random epoch gen epochgen random quorum peer quorump self leader elect leaderelect quorum peer quorump self self self elect result electionresult vote vote count vote winner win count winningcount num valid vote numvalidvot elect result electionresult count vote countvot hash map hashmap inet socket address inetsocketaddress vote vote hash set hashset heard from heardfrom elect result electionresult result elect result electionresult initi vote result vote vote min valu min valu min valu min valu result winner vote min valu min valu min valu min valu first filter vote from unheard from machin make view consist peer differ zxid server depend time hash map hashmap inet socket address inetsocketaddress vote valid vote validvot hash map hashmap inet socket address inetsocketaddress vote map max zxid maxzxid hash map hashmap map entri inet socket address inetsocketaddress vote vote entri set entryset includ vote from machin heard from vote get valu getvalu heard from heardfrom contain get id getid valid vote validvot put get kei getkei val max zxid maxzxid get get id getid val val get zxid getzxid max zxid maxzxid put get id getid get zxid getzxid make zxid vote id equal largest zxid id map entri inet socket address inetsocketaddress vote valid vote validvot entri set entryset vote get valu getvalu zxid max zxid maxzxid get get id getid get zxid getzxid zxid safe insid iter http download oracl com javas doc api java util map entri html set valu setvalu vote get id getid zxid get elect epoch getelectionepoch get peer epoch getpeerepoch get state getstat result num valid vote numvalidvot valid vote validvot size hash map hashmap vote integ count tabl counttabl hash map hashmap vote integ talli vote valid vote validvot valu integ count count tabl counttabl get count count count tabl counttabl put count get id getid result vote get id getid result count get zxid getzxid result vote get zxid getzxid get zxid getzxid result vote get zxid getzxid get id getid result vote get id getid result vote result count result win count winningcount log info elect talli entri vote integ entri count tabl counttabl entri set entryset entri get valu getvalu result win count winningcount result win count winningcount entri get valu getvalu result winner entri get kei getkei log info entri get kei getkei get id getid entri get valu getvalu result shutdown implement leader elect simpli empti method shutdown invok quorum peer quorump find elect leader interrupt except interruptedexcept vote leader lookforlead interrupt except interruptedexcept self jmx leader elect bean jmxleaderelectionbean leader elect bean leaderelectionbean bean registri mbeanregistri get instanc getinst self jmx leader elect bean jmxleaderelectionbean self jmx local peer bean jmxlocalpeerbean except log warn fail jmx self jmx leader elect bean jmxleaderelectionbean self set current vote setcurrentvot vote self get id getid self get last log zxid getlastloggedzxid leader cast vote ourself request byte requestbyt buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt respons byte responsebyt 28 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap respons byte responsebyt current vote leader initi datagram socket datagramsocket datagram socket datagramsocket set timeout setsotimeout 200 socket except socketexcept e1 log error socket except creat socket leader elect e1 exit datagram packet datagrampacket request packet requestpacket datagram packet datagrampacket request byte requestbyt request byte requestbyt length datagram packet datagrampacket respons packet responsepacket datagram packet datagrampacket respons byte responsebyt respons byte responsebyt length xid epoch gen epochgen next nextint self run isrun hash map hashmap inet socket address inetsocketaddress vote vote hash map hashmap inet socket address inetsocketaddress vote self get vote view getvotingview size request buffer requestbuff clear request buffer requestbuff put putint xid request packet requestpacket set length setlength hash set hashset heard from heardfrom hash set hashset quorum server quorumserv server self get vote view getvotingview valu log info server address server addr request packet requestpacket set socket address setsocketaddress server addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr server addr send request packet requestpacket respons packet responsepacket set length setlength respons byte responsebyt length receiv respons packet responsepacket respons packet responsepacket get length getlength respons byte responsebyt length log error respons respons packet responsepacket get length getlength respons buffer responsebuff clear recv xid recvedxid respons buffer responsebuff get getint recv xid recvedxid xid log error bad xid expect xid recv xid recvedxid peer id peerid respons buffer responsebuff get getlong heard from heardfrom add peer id peerid server id peer id peerid vote vote vote respons buffer responsebuff get getlong respons buffer responsebuff get getlong inet socket address inetsocketaddress addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress vote put addr vote io except ioexcept log warn ignor except leader error host down elect result electionresult result count vote countvot vote heard from heardfrom zookeep 569 vote receiv live peer reset vote hang vote dead peer result num valid vote numvalidvot self set current vote setcurrentvot vote self get id getid self get last log zxid getlastloggedzxid result winner get id getid self set current vote setcurrentvot result vote doesn us quorum verifi result win count winningcount self get vote view getvotingview size self set current vote setcurrentvot result winner close vote current self get current vote getcurrentvot log info found leader type self get learner type getlearnertyp make implement state machin correctli particip leader elect move lead follow observ error elect leader self get learner type getlearnertyp learner type learnertyp observ current get id getid self get id getid happen log error observ elect leader thread sleep 100 self set peer state setpeerst server state serverst observ thread sleep 100 current self set peer state setpeerst current get id getid self get id getid server state serverst lead server state serverst follow self get peer state getpeerst server state serverst follow thread sleep 100 current thread sleep 1000 self jmx leader elect bean jmxleaderelectionbean bean registri mbeanregistri get instanc getinst unregist self jmx leader elect bean jmxleaderelectionbean except log warn fail unregist jmx self jmx leader elect bean jmxleaderelectionbean 

elect result electionresult vote vote count vote winner win count winningcount num valid vote numvalidvot 

xml output archiv xmloutputarch output archiv outputarch print stream printstream stream indent stack string compound stack compoundstack put indent putind string builder stringbuild sb string builder stringbuild idx idx indent idx sb append stream print sb string tostr add indent addind indent close indent closeind indent print begin envelop printbeginenvelop string tag compound stack compoundstack empti string compound stack compoundstack peek equal put indent putind stream print member add indent addind put indent putind stream print name tag name put indent putind stream print valu vector equal stream print valu map equal stream print valu stream print valu print end envelop printendenvelop string tag compound stack compoundstack empti string compound stack compoundstack peek equal stream print valu close indent closeind put indent putind stream print member vector equal stream print valu map equal stream print valu stream print valu insid vector insidevector string tag print begin envelop printbeginenvelop tag compound stack compoundstack push vector vector outsidevector string tag io except ioexcept string compound stack compoundstack pop vector equal io except ioexcept error serial vector print end envelop printendenvelop tag insid map insidemap string tag print begin envelop printbeginenvelop tag compound stack compoundstack push map map outsidemap string tag io except ioexcept string compound stack compoundstack pop map equal io except ioexcept error serial map print end envelop printendenvelop tag insid record insiderecord string tag print begin envelop printbeginenvelop tag compound stack compoundstack push record outsiderecord string tag io except ioexcept string compound stack compoundstack pop equal io except ioexcept error serial record print end envelop printendenvelop tag xml output archiv xmloutputarch get archiv getarch output stream outputstream strm xml output archiv xmloutputarch strm creat instanc xml output archiv xmloutputarch xml output archiv xmloutputarch output stream outputstream stream print stream printstream compound stack compoundstack stack string write writebyt string tag io except ioexcept print begin envelop printbeginenvelop tag stream print ex i1 stream print string tostr stream print ex i1 print end envelop printendenvelop tag write writebool string tag io except ioexcept print begin envelop printbeginenvelop tag stream print stream print stream print print end envelop printendenvelop tag write writeint string tag io except ioexcept print begin envelop printbeginenvelop tag stream print i4 stream print integ string tostr stream print i4 print end envelop printendenvelop tag write writelong string tag io except ioexcept print begin envelop printbeginenvelop tag stream print ex i8 stream print string tostr stream print ex i8 print end envelop printendenvelop tag write writefloat string tag io except ioexcept print begin envelop printbeginenvelop tag stream print ex stream print string tostr stream print ex print end envelop printendenvelop tag write writedoubl string tag io except ioexcept print begin envelop printbeginenvelop tag stream print stream print string tostr stream print print end envelop printendenvelop tag write string writestr string string tag io except ioexcept print begin envelop printbeginenvelop tag stream print string stream print util xml string toxmlstr stream print string print end envelop printendenvelop tag write buffer writebuff buf string tag io except ioexcept print begin envelop printbeginenvelop tag stream print string stream print util xml buffer toxmlbuff buf stream print string print end envelop printendenvelop tag write record writerecord record string tag io except ioexcept serial tag start record startrecord record string tag io except ioexcept insid record insiderecord tag stream print add indent addind end record endrecord record string tag io except ioexcept close indent closeind put indent putind stream print record outsiderecord tag start vector startvector list string tag io except ioexcept insid vector insidevector tag stream print arrai add indent addind end vector endvector list string tag io except ioexcept close indent closeind put indent putind stream print arrai vector outsidevector tag start map startmap tree map treemap string tag io except ioexcept insid map insidemap tag stream print arrai add indent addind end map endmap tree map treemap string tag io except ioexcept close indent closeind put indent putind stream print arrai map outsidemap tag 

abstract json servlet jsonservlet http servlet httpservlet abstract string handl request handlerequest json request jsonrequest request except json request jsonrequest map map json request jsonrequest servlet request servletrequest request map request get paramet map getparametermap get number getnumb string name defaultnum string val string map get name val val length defaultnum valu valueof val number format except numberformatexcept defaultnum string get string getstr string name string defaultstr string val string map get name val val length defaultstr val get doget http servlet request httpservletrequest request http servlet respons httpservletrespons respons servlet except servletexcept io except ioexcept respons set content type setcontenttyp text plain charset utf respons set statu setstatu http servlet respons httpservletrespons sc sc string req request get request uri getrequesturi substr request get servlet path getservletpath length respons get writer getwrit println handl request handlerequest json request jsonrequest request except json object jsonobject json object jsonobject put error string tostr respons get writer getwrit println json valu jsonvalu json string tojsonstr java lang memori error outofmemoryerror oom json object jsonobject json object jsonobject put error memori ve request log narrow filter criteria respons get writer getwrit println json valu jsonvalu json string tojsonstr 

json request jsonrequest map map json request jsonrequest servlet request servletrequest request map request get paramet map getparametermap get number getnumb string name defaultnum string val string map get name val val length defaultnum valu valueof val number format except numberformatexcept defaultnum string get string getstr string name string defaultstr string val string map get name val val length defaultstr val 

file loader fileload json servlet jsonservlet merg log sourc mergedlogsourc sourc file loader fileload merg log sourc mergedlogsourc src except sourc src string handl request handlerequest json request jsonrequest request except string output string file request get string getstr path json object jsonobject json object jsonobject sourc add sourc addsourc file put statu except put statu err put error string tostr json valu jsonvalu json string tojsonstr 

abstract base type support hadoop record abstract type jtype string name mcname string cpp name mcppname string csharp name mcsharpnam string java name mjavanam string method suffix mmethodsuffix string wrapper mwrapper string sharp wrapper msharpwrapp string unwrap method munwrapmethod creat instanc type jtype type jtype string cname string cppname string csharp name csharpnam string javanam string suffix string wrapper string csharp wrapper csharpwrapp string unwrap name mcname cname cpp name mcppname cppname csharp name mcsharpnam id equal csharp name csharpnam zkid csharp name csharpnam java name mjavanam javanam method suffix mmethodsuffix suffix wrapper mwrapper wrapper sharp wrapper msharpwrapp csharp wrapper csharpwrapp unwrap method munwrapmethod unwrap abstract string get signatur getsignatur string gen cpp decl gencppdecl string fname cpp name mcppname fname string gen decl gencdecl string name name mcname name string gen csharp decl gencsharpdecl string name csharp name mcsharpnam name string gen java decl genjavadecl string fname java name mjavanam fname string gen java constructor param genjavaconstructorparam string fname java name mjavanam fname string gen cpp get set gencppgetset string fname idx fidx string get func getfunc cpp name mcppname get fname get func getfunc fname get func getfunc string set func setfunc set fname cpp name mcppname set func setfunc fname bs bs set idx fidx set func setfunc get func getfunc set func setfunc string gen csharp get set gencsharpgetset string fname idx fidx string get func getfunc get csharp type getcsharptyp capit fname get set get func getfunc string capit string substr upper touppercas substr string gen java get set genjavagetset string fname idx fidx string get func getfunc java name mjavanam get capit fname get func getfunc fname get func getfunc string set func setfunc set capit fname java name mjavanam set func setfunc fname set func setfunc get func getfunc set func setfunc string get type getctyp name mcname string get cpp type getcpptyp cpp name mcppname string get csharp type getcsharptyp csharp name mcsharpnam string get java type getjavatyp java name mjavanam string get java wrapper type getjavawrappertyp wrapper mwrapper string get csharp wrapper type getcsharpwrappertyp sharp wrapper msharpwrapp string get method suffix getmethodsuffix method suffix mmethodsuffix string gen java write method genjavawritemethod string fname string tag write method suffix mmethodsuffix fname tag string gen java read method genjavareadmethod string fname string tag fname read method suffix mmethodsuffix tag string gen java read wrapper genjavareadwrapp string fname string tag decl string ret decl ret wrapper mwrapper fname ret fname wrapper mwrapper read method suffix mmethodsuffix tag string gen java write wrapper genjavawritewrapp string fname string tag write method suffix mmethodsuffix fname unwrap method munwrapmethod tag string gen java compar genjavacompareto string fname ret fname peer fname fname peer fname string gen java equal genjavaequ string fname string peer ret fname peer string gen java hash code genjavahashcod string fname ret fname string gen java constructor set genjavaconstructorset string fname string name fname name string gen csharp write method gencsharpwritemethod string fname string tag write method suffix mmethodsuffix capit fname tag string gen csharp read method gencsharpreadmethod string fname string tag capit fname read method suffix mmethodsuffix tag string gen csharp read wrapper gencsharpreadwrapp string fname string tag decl string ret decl ret wrapper mwrapper fname ret fname read method suffix mmethodsuffix tag string gen csharp write wrapper gencsharpwritewrapp string fname string tag unwrap method munwrapmethod write method suffix mmethodsuffix fname tag write method suffix mmethodsuffix fname unwrap method munwrapmethod tag string gen csharp compar gencsharpcompareto string name ret capit name peer capit name capit name peer capit name string gen csharp equal gencsharpequ string name string peer string peer split peersplit peer split ret capit name peer split peersplit capit peer split peersplit string gen csharp hash code gencsharphashcod string fname ret capit fname string gen csharp constructor set gencsharpconstructorset string name mname string fname capit fname name mname string gen csharp constructor param gencsharpconstructorparam string fname csharp name mcsharpnam fname 

test zookeep method zoo keeper test zookeepertest client base clientbas test test delet recurs testdeleterecurs io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk creat client createcli make setdata work zk set data setdata get byte getbyt zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist list string children zk get children getchildren equal assertequ children present children size asserttru children contain asserttru children contain zk util zkutil delet recurs deleterecurs zk assertnul zk exist test test delet recurs async testdeleterecursiveasync io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk creat client createcli make setdata work zk set data setdata get byte getbyt zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist 50 zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist list string children zk get children getchildren equal assertequ children present children size asserttru children contain asserttru children contain callback voidcallback cb callback voidcallback overrid process result processresult rc string path object ctx ctx atom integ atomicinteg ctx set ctx notifi atom integ atomicinteg ctx atom integ atomicinteg zk util zkutil delet recurs deleterecurs zk cb ctx ctx ctx wait equal assertequ atom integ atomicinteg ctx get test test stat path exist teststatwhenpathdoesnotexist io except ioexcept interrupt except interruptedexcept zoo keeper zookeep zk creat client createcli zoo keeper main zookeepermain main zoo keeper main zookeepermain zk string cmdstring stat invalid path invalidpath main cl pars command parsecommand cmdstring main process zk cmd processzkcmd main cl fail node exist command fail throw node except keeper except keeperexcept equal assertequ keeper error code keepererrorcod node nonod invalid path invalidpath get messag getmessag test test pars extra space testparsewithextraspac except zoo keeper zookeep zk creat client createcli zoo keeper main zookeepermain zk main zkmain zoo keeper main zookeepermain zk string cmdstring ls zk main zkmain cl pars command parsecommand cmdstring equal assertequ space consid charact zk main zkmain cl get num argument getnumargu equal assertequ ls first argument zk main zkmain cl get cmd argument getcmdargu ls equal assertequ second argument zk main zkmain cl get cmd argument getcmdargu test test check invalid acl testcheckinvalidacl except zoo keeper zookeep zk creat client createcli zoo keeper main zookeepermain zk main zkmain zoo keeper main zookeepermain zk string cmdstring creat node data ip scheme gggsd invalid acl zk main zkmain execut line executelin cmdstring keeper except keeperexcept invalid acl except invalidaclexcept fail invalid cl acl except test test delet invalid version testdeletewithinvalidversionno except zoo keeper zookeep zk creat client createcli zoo keeper main zookeepermain zk main zkmain zoo keeper main zookeepermain zk string cmdstring creat node1 data string cmdstring1 delet node1 invalid datavers zk main zkmain execut line executelin cmdstring zk main zkmain execut line executelin cmdstring1 keeper except keeperexcept bad version except badversionexcept fail invalid datavers number except 

log iter logiter iter log entri logentri closeabl size io except ioexcept 

cnx manag test cnxmanagertest zk test zktestcas logger log logger factori loggerfactori get logger getlogg fle epoch test flenewepochtest threshold count hash map hashmap quorum server quorumserv peer file peer tmpdir peertmpdir peer quorum port peerquorumport peer client port peerclientport befor set up setup except count peer hash map hashmap quorum server quorumserv count peer tmpdir peertmpdir file count peer quorum port peerquorumport count peer client port peerclientport count count peer quorum port peerquorumport port assign portassign uniqu peer client port peerclientport port assign portassign uniqu peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress peer quorum port peerquorumport inet socket address inetsocketaddress port assign portassign uniqu peer tmpdir peertmpdir client base clientbas creat tmp dir createtmpdir buffer bytebuff creat msg createmsg state leader zxid epoch request byte requestbyt 28 buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt build notif packet send request buffer requestbuff clear request buffer requestbuff put putint state request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch request buffer requestbuff cnx manag thread cnxmanagerthread thread fail cnx manag thread cnxmanagerthread fail run quorum peer quorump peer quorum peer quorump peer peer tmpdir peertmpdir peer tmpdir peertmpdir peer client port peerclientport 1000 quorum cnx manag quorumcnxmanag cnx manag cnxmanag quorum cnx manag quorumcnxmanag peer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen listen start log error listen initi cnx manag sid cnx manag cnxmanag send tosend sid creat msg createmsg server state serverst ordin messag num retri numretri num retri numretri threshold cnx manag cnxmanag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond cnx manag cnxmanag connect connectal num retri numretri threshold fail cnx manag cnxmanag test initi connect testinitiateconnect sid cnx manag cnxmanag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond fail except log error except run mock thread fail unexpect except test test cnx manag testcnxmanag except cnx manag thread cnxmanagerthread thread cnx manag thread cnxmanagerthread thread start quorum peer quorump peer quorum peer quorump peer peer tmpdir peertmpdir peer tmpdir peertmpdir peer client port peerclientport 1000 quorum cnx manag quorumcnxmanag cnx manag cnxmanag quorum cnx manag quorumcnxmanag peer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen listen start log error listen initi cnx manag cnx manag cnxmanag send tosend creat msg createmsg server state serverst ordin messag num retri numretri num retri numretri threshold cnx manag cnxmanag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond cnx manag cnxmanag connect connectal asserttru exceed number retri num retri numretri threshold thread join 5000 thread aliv isal fail thread didn join thread fail fail receiv expect messag test test cnx manag timeout testcnxmanagertimeout except random rand random rand next nextint dead port deadport port assign portassign uniqu string dead address deadaddress string 10 log info dead address dead address deadaddress peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress dead address deadaddress dead port deadport inet socket address inetsocketaddress dead address deadaddress port assign portassign uniqu peer tmpdir peertmpdir client base clientbas creat tmp dir createtmpdir quorum peer quorump peer quorum peer quorump peer peer tmpdir peertmpdir peer tmpdir peertmpdir peer client port peerclientport 1000 quorum cnx manag quorumcnxmanag cnx manag cnxmanag quorum cnx manag quorumcnxmanag peer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen listen start log error listen initi cnx manag begin current time milli currenttimemilli cnx manag cnxmanag send tosend creat msg createmsg server state serverst ordin end current time milli currenttimemilli end begin 6000 fail wait more necessari test bug quorum cnx manag quorumcnxmanag caus spin lock neg valu sent test check connect close messag neg length except test test cnx manag spin lock testcnxmanagerspinlock except quorum peer quorump peer quorum peer quorump peer peer tmpdir peertmpdir peer tmpdir peertmpdir peer client port peerclientport 1000 quorum cnx manag quorumcnxmanag cnx manag cnxmanag quorum cnx manag quorumcnxmanag peer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen listen start log error listen initi cnx manag port peer get peer get id getid elect addr electionaddr get port getport log info elect port port inet socket address inetsocketaddress addr inet socket address inetsocketaddress port thread sleep 1000 socket channel socketchannel sc socket channel socketchannel open sc socket connect peer get elect addr electionaddr 5000 write id first neg length msg byte msgbyte buffer bytebuff msg buffer msgbuffer buffer bytebuff wrap msg byte msgbyte msg buffer msgbuffer put putlong msg buffer msgbuffer posit sc write msg buffer msgbuffer msg buffer msgbuffer buffer bytebuff wrap msg buffer msgbuffer put putint 20 msg buffer msgbuffer posit sc write msg buffer msgbuffer thread sleep 1000 write number time detect socket broken 100 msg buffer msgbuffer posit sc write msg buffer msgbuffer fail socket ha close except log info socket ha close expect peer shutdown cnx manag cnxmanag halt test receiv connect receiveconnect abl timeout socket error test test socket timeout testsockettimeout except quorum peer quorump peer quorum peer quorump peer peer tmpdir peertmpdir peer tmpdir peertmpdir peer client port peerclientport 2000 quorum cnx manag quorumcnxmanag cnx manag cnxmanag quorum cnx manag quorumcnxmanag peer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen listen start log error listen initi cnx manag port peer get peer get id getid elect addr electionaddr get port getport log info elect port port inet socket address inetsocketaddress addr inet socket address inetsocketaddress port thread sleep 1000 socket sock socket sock connect peer get elect addr electionaddr 5000 begin current time milli currenttimemilli read send data verifi timeout cnx manag cnxmanag receiv connect receiveconnect sock end current time milli currenttimemilli end begin peer get sync limit getsynclimit peer get tick time getticktim 500 fail wait more necessari test worker thread get kill after connect loss test test worker thread testworkerthread except arrai list arraylist quorum peer quorump peer list peerlist arrai list arraylist quorum peer quorump sid sid sid quorum peer quorump peer quorum peer quorump peer peer tmpdir peertmpdir sid peer tmpdir peertmpdir sid peer client port peerclientport sid sid 1000 log info start peer peer get id getid peer start peer list peerlist add sid peer string failur verifi thread count verifythreadcount peer list peerlist failur fail failur myid myid myid halt on listen verifi count quorum peer quorump peer peer list peerlist get myid log info round halt peer peer get id getid peer shutdown peer list peerlist remov myid failur verifi thread count verifythreadcount peer list peerlist failur fail failur restart halt node verifi count peer quorum peer quorump peer peer tmpdir peertmpdir myid peer tmpdir peertmpdir myid peer client port peerclientport myid myid 1000 log info round restart peer peer get id getid peer start peer list peerlist add myid peer failur verifi thread count verifythreadcount peer list peerlist failur fail failur return success otw messag assoc failur interrupt except interruptedexcept string verifi thread count verifythreadcount arrai list arraylist quorum peer quorump peer list peerlist ecnt interrupt except interruptedexcept string failur 480 thread sleep 500 failur verifi thread count verifythreadcount peer list peerlist ecnt failur failur string verifi thread count verifythreadcount arrai list arraylist quorum peer quorump peer list peerlist ecnt myid myid peer list peerlist size myid quorum peer quorump peer peer list peerlist get myid quorum cnx manag quorumcnxmanag cnx manag cnxmanag peer get quorum cnx manag getquorumcnxmanag cnt cnx manag cnxmanag get thread count getthreadcount cnt ecnt string date incorrect number worker thread sid myid expect ecnt found cnt 

cnx manag thread cnxmanagerthread thread fail cnx manag thread cnxmanagerthread fail run quorum peer quorump peer quorum peer quorump peer peer tmpdir peertmpdir peer tmpdir peertmpdir peer client port peerclientport 1000 quorum cnx manag quorumcnxmanag cnx manag cnxmanag quorum cnx manag quorumcnxmanag peer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen listen start log error listen initi cnx manag sid cnx manag cnxmanag send tosend sid creat msg createmsg server state serverst ordin messag num retri numretri num retri numretri threshold cnx manag cnxmanag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond cnx manag cnxmanag connect connectal num retri numretri threshold fail cnx manag cnxmanag test initi connect testinitiateconnect sid cnx manag cnxmanag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond fail except log error except run mock thread fail unexpect except 

json gener jsongener json object jsonobject root hash set hashset integ server messag from zxid messag from zxid from from zxid zxid equal messag from from zxid zxid json object jsonobject txn entri txnentri transact entri transactionentri json object jsonobject event json object jsonobject event put time string tostr get timestamp gettimestamp event put client hex string tohexstr get client id getclientid event put cxid hex string tohexstr get cxid getcxid event put zxid hex string tohexstr get zxid getzxid event put op get op getop event put extra get extra getextra event put type transact event assum entri sort timestamp json gener jsongener log iter logiter iter server hash set hashset integ pattern state changep statechangep pattern compil follow lead pattern electionp newelectionp pattern compil elect id propos zxid pattern receiv proposalp receivedproposalp pattern compil notif leader zxid round state sid state pattern exceptionp pattern compil xception root json object jsonobject matcher json arrai jsonarrai event json arrai jsonarrai root put event event starttim max valu max valu endtim leader cur epoch curepoch epoch newepoch iter ha next hasnext log entri logentri ent iter next ent get timestamp gettimestamp starttim starttim ent get timestamp gettimestamp ent get timestamp gettimestamp endtim endtim ent get timestamp gettimestamp ent get type gettyp log entri logentri type txn event add txn entri txnentri transact entri transactionentri ent log4 entri log4jentri log4 entri log4jentri ent server add get node getnod state changep statechangep matcher get entri getentri find json object jsonobject state chang statechang json object jsonobject state chang statechang put type state chang statechang state chang statechang put time get timestamp gettimestamp state chang statechang put server get node getnod state chang statechang put state group event add state chang statechang group equal lead leader get node getnod electionp newelectionp matcher get entri getentri find iter integ iter server iter zxid valu valueof group count zxid ffffffffl 0xffffffffl epoch rotat right rotateright zxid 32 32 leader epoch cur epoch curepoch json object jsonobject state chang statechang json object jsonobject state chang statechang put type state chang statechang state chang statechang put time get timestamp gettimestamp state chang statechang put server leader state chang statechang put state init event add state chang statechang leader iter ha next hasnext dst iter next dst get node getnod json object jsonobject msg json object jsonobject msg put type postmessag msg put src get node getnod msg put dst dst msg put time get timestamp gettimestamp msg put zxid group msg put count count msg put epoch epoch event add msg receiv proposalp receivedproposalp matcher get entri getentri find pattern compil notif src integ valu valueof group zxid valu valueof group dst get node getnod epoch2 valu valueof group count zxid ffffffffl 0xffffffffl epoch rotat right rotateright zxid 32 32 leader epoch cur epoch curepoch json object jsonobject state chang statechang json object jsonobject state chang statechang put type state chang statechang state chang statechang put time get timestamp gettimestamp state chang statechang put server leader state chang statechang put state init event add state chang statechang leader src dst json object jsonobject msg json object jsonobject msg put type delivermessag msg put src src msg put dst dst msg put time get timestamp gettimestamp msg put zxid zxid msg put epoch epoch msg put count count msg put epoch2 epoch2 event add msg exceptionp matcher get entri getentri find json object jsonobject ex json object jsonobject ex put type except ex put server get node getnod ex put time get timestamp gettimestamp ex put text get entri getentri event add ex json object jsonobject ex json object jsonobject ex put type text ex put time ent get timestamp gettimestamp string txt ent string tostr ex put text txt event add ex println pend messag pend messag pendingmessag size root put starttim starttim root put endtim endtim json arrai jsonarrai serversarrai json arrai jsonarrai root put server serversarrai iter integ iter server iter iter ha next hasnext serversarrai add iter next string string tostr json valu jsonvalu json string tojsonstr root main string arg except merg log sourc mergedlogsourc src merg log sourc mergedlogsourc arg log iter logiter iter src iter println json gener jsongener iter 

messag from zxid messag from zxid from from zxid zxid equal messag from from zxid zxid 

repres error jaxb xml root element xmlrootel name error error zerror string request string messag error zerror need jersei error zerror string request string messag request request messag messag 

shell session tracker sessiontrack track session activ forward leader ping learner session tracker learnersessiontrack session tracker sessiontrack session expir sessionexpir expir hash map hashmap integ touch tabl touchtabl hash map hashmap integ server id serverid next session id nextsessionid concurr hash map concurrenthashmap integ session timeout sessionswithtimeout learner session tracker learnersessiontrack session expir sessionexpir expir concurr hash map concurrenthashmap integ session timeout sessionswithtimeout id expir expir session timeout sessionswithtimeout session timeout sessionswithtimeout server id serverid id next session id nextsessionid session tracker impl sessiontrackerimpl initi next session initializenextsess server id serverid remov session removesess session id sessionid session timeout sessionswithtimeout remov session id sessionid touch tabl touchtabl remov session id sessionid shutdown add session addsess session id sessionid session timeout sessiontimeout session timeout sessionswithtimeout put session id sessionid session timeout sessiontimeout touch tabl touchtabl put session id sessionid session timeout sessiontimeout touch session touchsess session id sessionid session timeout sessiontimeout touch tabl touchtabl put session id sessionid session timeout sessiontimeout hash map hashmap integ snapshot hash map hashmap integ old touch tabl oldtoucht touch tabl touchtabl touch tabl touchtabl hash map hashmap integ old touch tabl oldtoucht creat session createsess session timeout sessiontimeout next session id nextsessionid check session checksess session id sessionid object owner here session check leader set owner setown session id sessionid object owner here session check leader dump session dumpsess print writer printwrit pwriter origin didn tostr impl dup befor pwriter println string tostr set session close setsessionclos session id sessionid here 

sasl authent provid saslauthenticationprovid authent provid authenticationprovid string get scheme getschem sasl keeper except keeperexcept code handl authent handleauthent server cnxn servercnxn cnxn auth data authdata call sasl authent negoti session initi todo substitut current implement direct client cnxn clientcnxn manipul call method sasl authent provid saslauthenticationprovid handl authent handleauthent session initi keeper except keeperexcept code authfail match string id string acl expr aclexpr get properti getproperti zookeep user superus id equal get properti getproperti zookeep user superus id equal acl expr aclexpr id equal id equal acl expr aclexpr authent isauthent valid isvalid string id sasl authent us kerbero authent enforc name valid kerbero syntax princip us kerbero name kerberosnam id constructor defin valid kerbero name kerberosnam id illeg argument except illegalargumentexcept id invalid valid kerbero name kerberosnam id illeg argument except illegalargumentexcept 

token mgr error tokenmgrerror error ordin reason error type thrown lexic error occur lexic error lexic error attempt wass made creat second instanc token manag lexer error lexer error chang invalid lexic state invalid lexic state invalid lexic state detect bail infinit loop token manag loop detect loop detect reason except thrown on valu error code errorcod replac unprint charact espac unicod escap equival string string add escap addescap string str string buffer stringbuff retval string buffer stringbuff ch str length str charat retval append retval append retval append retval append retval append retval append retval append retval append ch str charat x20 0x20 ch x7e 0x7e string 0000 integ string tostr ch 16 retval append substr length length retval append ch retval string tostr return detail messag error thrown token manag lexic error paramet eof eofseen eof caus lexicl error cur lex state curlexst lexic state error occur error line errorlin line number error occur error column errorcolumn column number error occur error after erroraft prefix befor error occur curchar offend charact note custom lexic error messag modifi method string lexic error lexicalerror eof eofseen lex state lexstat error line errorlin error column errorcolumn string error after erroraft cur curchar lexic error line error line errorlin column error column errorcolumn encount eof eofseen eof add escap addescap string valu valueof cur curchar cur curchar after add escap addescap error after erroraft modifi bodi method custom error messag exampl case loop detect loop detect invalid lexic state invalid lexic state end user concern intern error file bug report from method case releas version parser string get messag getmessag get messag getmessag constructor flavor follow token mgr error tokenmgrerror token mgr error tokenmgrerror string messag reason messag error code errorcod reason token mgr error tokenmgrerror eof eofseen lex state lexstat error line errorlin error column errorcolumn string error after erroraft cur curchar reason lexic error lexicalerror eof eofseen lex state lexstat error line errorlin error column errorcolumn error after erroraft cur curchar reason 

ha control logic leader leader logger log logger factori loggerfactori get logger getlogg leader nodelai get properti getproperti leader nodelai equal log info tcp delai nodelai set nodelai propos quorum packet quorumpacket packet hash set hashset ack set ackset hash set hashset request request overrid string string tostr packet get type gettyp packet get zxid getzxid request leader zoo keeper server leaderzookeeperserv zk quorum peer quorump self follow acceptor thread learner cnx acceptor learnercnxacceptor cnx acceptor cnxacceptor list follow hash set hashset learner handler learnerhandl learner hash set hashset learner handler learnerhandl return copi current learner snapshot list learner handler learnerhandl get learner getlearn learner arrai list arraylist learner handler learnerhandl learner list follow readi follow sync leader hash set hashset learner handler learnerhandl forward follow forwardingfollow hash set hashset learner handler learnerhandl return copi current forward follow snapshot list learner handler learnerhandl get forward follow getforwardingfollow forward follow forwardingfollow arrai list arraylist learner handler learnerhandl forward follow forwardingfollow add forward follow addforwardingfollow learner handler learnerhandl lh forward follow forwardingfollow forward follow forwardingfollow add lh hash set hashset learner handler learnerhandl observ learner observinglearn hash set hashset learner handler learnerhandl return copi current observ snapshot list learner handler learnerhandl get observ learner getobservinglearn observ learner observinglearn arrai list arraylist learner handler learnerhandl observ learner observinglearn add observ learner handler addobserverlearnerhandl learner handler learnerhandl lh observ learner observinglearn observ learner observinglearn add lh pend sync request access lock hash map hashmap list learner sync request learnersyncrequest pend sync pendingsync hash map hashmap list learner sync request learnersyncrequest get num pend sync getnumpendingsync pend sync pendingsync size follow counter atom atomiclong follow counter followercount atom atomiclong add peer leader param learner instanc learner handl add learner handler addlearnerhandl learner handler learnerhandl learner learner learner add learner remov learner from learner list param peer remov learner handler removelearnerhandl learner handler learnerhandl peer forward follow forwardingfollow forward follow forwardingfollow remov peer learner learner remov peer observ learner observinglearn observ learner observinglearn remov peer learner sync islearnersync learner handler learnerhandl peer forward follow forwardingfollow forward follow forwardingfollow contain peer server socket serversocket ss leader quorum peer quorump self leader zoo keeper server leaderzookeeperserv zk io except ioexcept self self ss server socket serversocket ss set reus address setreuseaddress ss bind inet socket address inetsocketaddress self get quorum address getquorumaddress get port getport bind except bindexcept log error couldn bind port self get quorum address getquorumaddress get port getport zk zk messag follow expect diff diff 13 follow truncat log trunc 14 follow download snapshot snap 15 tell leader connect peer observ observerinfo 16 messag type sent leader zxid need databas newlead 10 messag type sent follow pass last zxid here backward compat purpos followerinfo 11 messag type sent leader follow uptod andt start respond client uptod 12 messag first follow receiv from leader ha protocol version epoch leader leaderinfo 17 messag us follow ack propos epoch ackepoch 18 messag type sent leader request mutat oper payload consist request header follow request request messag type sent leader propos mutat propos messag type sent follow after ha sync propos ack messag type sent leader commit propos caus follow start serv data commit messag type enchang follow leader initi follow determin liveli ping messag type valid session activ revalid messag repli synchron command flush pipe leader follow sync messag type inform observ commit propos inform concurr map concurrentmap propos outstand propos outstandingpropos concurr hash map concurrenthashmap propos concurr link queue concurrentlinkedqueu propos appli tobeappli concurr link queue concurrentlinkedqueu propos propos leader propos newleaderpropos propos learner cnx acceptor learnercnxacceptor thread stop overrid run stop socket ss accept start init limit initlimit ack process learner handler learnerhandl sync limit synclimit set timeout setsotimeout self tick time ticktim self init limit initlimit set tcp delai settcpnodelai nodelai learner handler learnerhandl fh learner handler learnerhandl leader fh start socket except socketexcept stop log info except shut down acceptor leader shutdown call ss close call accept except set stop stop except log warn except accept follow halt stop state summari statesummari leader state summari leaderstatesummari epoch wait epoch waitingfornewepoch readi start readytostart method main function call lead io except ioexcept interrupt except interruptedexcept lead io except ioexcept interrupt except interruptedexcept self end fle end fle current time milli currenttimemilli log info lead leader elect self end fle end fle self start fle start fle self start fle start fle self end fle end fle zk jmx registerjmx leader bean leaderbean zk self jmx local peer bean jmxlocalpeerbean self tick zk load data loaddata leader state summari leaderstatesummari state summari statesummari self get current epoch getcurrentepoch zk get last process zxid getlastprocessedzxid start thread wait connect request from follow cnx acceptor cnxacceptor learner cnx acceptor learnercnxacceptor cnx acceptor cnxacceptor start readi start readytostart epoch get epoch propos getepochtopropos self get id getid self get accept epoch getacceptedepoch zk set zxid setzxid zxid util zxidutil make zxid makezxid epoch last propos lastpropos zk get zxid getzxid leader propos newleaderpropos packet quorum packet quorumpacket newlead zk get zxid getzxid leader propos newleaderpropos packet get zxid getzxid xffffffffl 0xffffffffl log info newlead propos ha zxid hex string tohexstr leader propos newleaderpropos packet get zxid getzxid outstand propos outstandingpropos put leader propos newleaderpropos packet get zxid getzxid leader propos newleaderpropos leader propos newleaderpropos ack set ackset add self get id getid wait epoch ack waitforepochack self get id getid leader state summari leaderstatesummari self set current epoch setcurrentepoch epoch get least major server sync wait newlead packet get acknowledg self get quorum verifi getquorumverifi contain quorum containsquorum leader propos newleaderpropos ack set ackset leader propos newleaderpropos ack count ackcount self quorum peer quorump size self tick self init limit initlimit follow aren sync fast renounc leadership string builder stringbuild ack string acktostr string builder stringbuild id leader propos newleaderpropos ack set ackset ack string acktostr append id shutdown wait quorum follow sync ack string acktostr hash set hashset follow set followerset hash set hashset learner handler learnerhandl get learner getlearn follow set followerset add get sid getsid self get quorum verifi getquorumverifi contain quorum containsquorum follow set followerset follow size self quorum peer quorump size log warn follow present init tick inittick increas thread sleep self tick time ticktim self tick warn us qa test real cluster specif enabl verif quorum handl lower 32 bit 32bit roll issu identifi zookeep 1277 option time order month billion write necessari caus roll occur field allow overrid zxid server typic ll set xfffffff0 0xfffffff0 start quorum run oper elect string initi zxid initialzxid get properti getproperti zookeep testingonli initi zxid initialzxid initi zxid initialzxid zxid pars parselong initi zxid initialzxid zk set zxid setzxid zk get zxid getzxid xffffffff00000000l 0xffffffff00000000l zxid get properti getproperti zookeep leader serv leaderserv ye equal self cnxn factori cnxnfactori set zoo keeper server setzookeeperserv zk simpli start count tick warn couldn find wait statement block notifi notifi notifyal call comment notifi notifyal ping twice tick updat tick iter tick skip tickskip thread sleep self tick time ticktim tick skip tickskip self tick hash set hashset sync set syncedset hash set hashset lock follow us sync set syncedset add self get id getid learner handler learnerhandl get learner getlearn sync set us check support quorum particip observ learner us sync get learner type getlearnertyp learner type learnertyp particip sync set syncedset add get sid getsid ping tick skip tickskip self get quorum verifi getquorumverifi contain quorum containsquorum sync set syncedset tick skip tickskip sync count syncedcount self quorum peer quorump size lost quorum shutdown todo messag wrong major quorum us shutdown sync set syncedset size follow self get vote view getvotingview size make order leader tick skip tickskip tick skip tickskip zk unregist jmx unregisterjmx shutdown isshutdown close down learner handler learnerhandl shutdown string reason log info shut down shutdown isshutdown log info shutdown call except shutdown leader reason reason cnx acceptor cnxacceptor cnx acceptor cnxacceptor halt nio accept conenct self cnxn factori cnxnfactori set zoo keeper server setzookeeperserv ss close io except ioexcept log warn ignor unexpect except close clear connect self cnxn factori cnxnfactori close closeal shutdown previou zk zk zk shutdown learner iter learner handler learnerhandl learner iter ha next hasnext learner handler learnerhandl next remov shutdown shutdown isshutdown keep count ack receiv leader propos param zxid zxid propos sent param follow addr followeraddr process ack processack sid zxid socket address socketaddress follow addr followeraddr log trace enabl istraceen log trace ack zxid 0x hex string tohexstr zxid propos outstand propos outstandingpropos valu packet zxid packetzxid packet get zxid getzxid log trace outstand propos 0x hex string tohexstr packet zxid packetzxid log trace outstand propos outstand propos outstandingpropos size log debug enabl isdebugen log debug outstand last commit lastcommit zxid log debug enabl isdebugen log debug propos ha commit pzxid 0x zxid 0x hex string tohexstr last commit lastcommit hex string tohexstr zxid propos ha commit propos outstand propos outstandingpropos get zxid log warn commit futur propos zxid 0x from hex string tohexstr zxid follow addr followeraddr ack set ackset add sid log debug enabl isdebugen log debug count zxid 0x hex string tohexstr zxid ack set ackset size self get quorum verifi getquorumverifi contain quorum containsquorum ack set ackset zxid last commit lastcommit log warn commit zxid 0x from first hex string tohexstr zxid follow addr followeraddr log warn first 0x hex string tohexstr last commit lastcommit outstand propos outstandingpropos remov zxid request appli tobeappli add don commit leader propos zxid xffffffffl 0xffffffffl request log warn commmit request propos commit zxid inform zk commit processor commitprocessor commit request pend sync pendingsync contain kei containskei zxid learner sync request learnersyncrequest pend sync pendingsync remov zxid send sync sendsync last commit lastcommit zxid log info quorum support start up set last process zxid 0x hex string tohexstr zk get zxid getzxid zk startup zk get zk databas getzkdatabas setlast process zxid setlastprocessedzxid zk get zxid getzxid appli request processor tobeappliedrequestprocessor request processor requestprocessor request processor requestprocessor next concurr link queue concurrentlinkedqueu propos appli tobeappli request processor simpli maintain appli tobeappli list work next request processor finalrequestprocessor request processor finalrequestprocessor process request processrequest process request synchron param next refer request processor finalrequestprocessor appli request processor tobeappliedrequestprocessor request processor requestprocessor next concurr link queue concurrentlinkedqueu propos appli tobeappli next request processor finalrequestprocessor runtim except runtimeexcept appli request processor tobeappliedrequestprocessor get name getnam connect request processor finalrequestprocessor get name getnam next get getclass get name getnam appli tobeappli appli tobeappli next next non javadoc org apach zookeep server request processor requestprocessor process request processrequest org apach zookeep server request process request processrequest request request request processor except requestprocessorexcept request add rq rec addrqrec tobe next process request processrequest request propos appli tobeappli peek request request zxid request zxid appli tobeappli remov non javadoc org apach zookeep server request processor requestprocessor shutdown shutdown log info shut down next shutdown send packet follow readi follow param qp packet sent send packet sendpacket quorum packet quorumpacket qp forward follow forwardingfollow learner handler learnerhandl forward follow forwardingfollow queue packet queuepacket qp send packet observ send observ packet sendobserverpacket quorum packet quorumpacket qp learner handler learnerhandl get observ learner getobservinglearn queue packet queuepacket qp last commit lastcommit creat commit packet send member quorum param zxid commit zxid last commit lastcommit zxid quorum packet quorumpacket qp quorum packet quorumpacket leader commit zxid send packet sendpacket qp creat inform packet send observ param zxid param propos inform propos propos quorum packet quorumpacket qp quorum packet quorumpacket leader inform propos request zxid propos packet get data getdata send observ packet sendobserverpacket qp last propos lastpropos return current epoch leader get epoch getepoch zxid util zxidutil get epoch from zxid getepochfromzxid last propos lastpropos suppress warn suppresswarn serial xid rollov except xidrolloverexcept except xid rollov except xidrolloverexcept string messag messag creat propos send member param request propos queu send member propos propos request request xid rollov except xidrolloverexcept address rollov issu lower 32 bit 32bit set leader elect forc elect zookeep 1277 request zxid xffffffffl 0xffffffffl xffffffffl 0xffffffffl string msg zxid lower 32 bit roll forc elect epoch start shutdown msg xid rollov except xidrolloverexcept msg arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao request hdr serial boa hdr request txn request txn serial boa txn bao close io except ioexcept log warn imposs quorum packet quorumpacket pp quorum packet quorumpacket leader propos request zxid bao arrai tobytearrai propos propos packet pp request request log debug enabl isdebugen log debug propos request last propos lastpropos packet get zxid getzxid outstand propos outstandingpropos put last propos lastpropos send packet sendpacket pp process sync request param request process sync processsync learner sync request learnersyncrequest outstand propos outstandingpropos empti isempti send sync sendsync list learner sync request learnersyncrequest pend sync pendingsync get last propos lastpropos arrai list arraylist learner sync request learnersyncrequest add pend sync pendingsync put last propos lastpropos send sync messag appropri server param param send sync sendsync learner sync request learnersyncrequest quorum packet quorumpacket qp quorum packet quorumpacket leader sync fh queue packet queuepacket qp let leader follow capabl follow done sync param handler handler follow last propos zxid start forward startforward learner handler learnerhandl handler last zxid lastseenzxid queue up outstand request enabl receipt request last propos lastpropos last zxid lastseenzxid propos appli tobeappli packet get zxid getzxid last zxid lastseenzxid handler queue packet queuepacket packet propos ha commit send commit messag quorum packet quorumpacket qp quorum packet quorumpacket leader commit packet get zxid getzxid handler queue packet queuepacket qp list zxid arrai list arraylist outstand propos outstandingpropos kei set keyset collect sort zxid zxid zxid zxid last zxid lastseenzxid handler queue packet queuepacket outstand propos outstandingpropos get zxid packet handler get learner type getlearnertyp learner type learnertyp particip add forward follow addforwardingfollow handler add observ learner handler addobserverlearnerhandl handler last propos lastpropos hash set hashset connect follow connectingfollow hash set hashset get epoch propos getepochtopropos sid last accept epoch lastacceptedepoch interrupt except interruptedexcept io except ioexcept connect follow connectingfollow wait epoch waitingfornewepoch epoch last accept epoch lastacceptedepoch epoch epoch last accept epoch lastacceptedepoch connect follow connectingfollow add sid quorum verifi quorumverifi verifi self get quorum verifi getquorumverifi connect follow connectingfollow contain self get id getid verifi contain quorum containsquorum connect follow connectingfollow wait epoch waitingfornewepoch self set accept epoch setacceptedepoch epoch connect follow connectingfollow notifi notifyal start current time milli currenttimemilli cur start end start self get init limit getinitlimit self get tick time getticktim wait epoch waitingfornewepoch cur end connect follow connectingfollow wait end cur cur current time milli currenttimemilli wait epoch waitingfornewepoch interrupt except interruptedexcept timeout wait epoch from quorum epoch hash set hashset elect follow electingfollow hash set hashset elect finish electionfinish wait epoch ack waitforepochack id state summari statesummari ss io except ioexcept interrupt except interruptedexcept elect follow electingfollow elect finish electionfinish ss get current epoch getcurrentepoch ss more recent ismorerecentthan leader state summari leaderstatesummari io except ioexcept follow ahead leader leader summari leader state summari leaderstatesummari get current epoch getcurrentepoch current epoch leader state summari leaderstatesummari get last zxid getlastzxid last zxid elect follow electingfollow add id quorum verifi quorumverifi verifi self get quorum verifi getquorumverifi elect follow electingfollow contain self get id getid verifi contain quorum containsquorum elect follow electingfollow elect finish electionfinish elect follow electingfollow notifi notifyal start current time milli currenttimemilli cur start end start self get init limit getinitlimit self get tick time getticktim elect finish electionfinish cur end elect follow electingfollow wait end cur cur current time milli currenttimemilli elect finish electionfinish interrupt except interruptedexcept timeout wait epoch ack quorum get string represent packet type param packet type packettyp string repres packet type string get packet type getpackettyp packet type packettyp packet type packettyp diff diff trunc trunc snap snap observerinfo observerinfo newlead newlead followerinfo followerinfo uptod uptod leaderinfo leaderinfo ackepoch ackepoch request request propos propos ack ack commit commit ping ping revalid revalid sync sync inform inform unknown 

propos quorum packet quorumpacket packet hash set hashset ack set ackset hash set hashset request request overrid string string tostr packet get type gettyp packet get zxid getzxid request 

learner cnx acceptor learnercnxacceptor thread stop overrid run stop socket ss accept start init limit initlimit ack process learner handler learnerhandl sync limit synclimit set timeout setsotimeout self tick time ticktim self init limit initlimit set tcp delai settcpnodelai nodelai learner handler learnerhandl fh learner handler learnerhandl leader fh start socket except socketexcept stop log info except shut down acceptor leader shutdown call ss close call accept except set stop stop except log warn except accept follow halt stop 

appli request processor tobeappliedrequestprocessor request processor requestprocessor request processor requestprocessor next concurr link queue concurrentlinkedqueu propos appli tobeappli request processor simpli maintain appli tobeappli list work next request processor finalrequestprocessor request processor finalrequestprocessor process request processrequest process request synchron param next refer request processor finalrequestprocessor appli request processor tobeappliedrequestprocessor request processor requestprocessor next concurr link queue concurrentlinkedqueu propos appli tobeappli next request processor finalrequestprocessor runtim except runtimeexcept appli request processor tobeappliedrequestprocessor get name getnam connect request processor finalrequestprocessor get name getnam next get getclass get name getnam appli tobeappli appli tobeappli next next non javadoc org apach zookeep server request processor requestprocessor process request processrequest org apach zookeep server request process request processrequest request request request processor except requestprocessorexcept request add rq rec addrqrec tobe next process request processrequest request propos appli tobeappli peek request request zxid request zxid appli tobeappli remov non javadoc org apach zookeep server request processor requestprocessor shutdown shutdown log info shut down next shutdown 

suppress warn suppresswarn serial xid rollov except xidrolloverexcept except xid rollov except xidrolloverexcept string messag messag 

ha control logic follow follow learner last queu lastqueu object zk cach downcast op follow zoo keeper server followerzookeeperserv fzk follow quorum peer quorump self follow zoo keeper server followerzookeeperserv zk self self zk zk fzk zk overrid string string tostr string builder stringbuild sb string builder stringbuild sb append follow append sock sb append last queu zxid lastqueuedzxid append last queu lastqueu sb append pend revalid count pendingrevalidationcount append pend revalid pendingrevalid size sb string tostr main method call follow follow leader interrupt except interruptedexcept follow leader followlead interrupt except interruptedexcept self end fle end fle current time milli currenttimemilli log info follow leader elect self end fle end fle self start fle start fle self start fle start fle self end fle end fle fzk jmx registerjmx follow bean followerbean zk self jmx local peer bean jmxlocalpeerbean inet socket address inetsocketaddress addr find leader findlead connect leader connecttolead addr epoch zxid newepochzxid leader registerwithlead leader followerinfo check leader zxid lower happen safeti check epoch newepoch zxid util zxidutil get epoch from zxid getepochfromzxid epoch zxid newepochzxid epoch newepoch self get accept epoch getacceptedepoch log error propos leader epoch zxid util zxidutil zxid string zxidtostr epoch zxid newepochzxid accept epoch zxid util zxidutil zxid string zxidtostr self get accept epoch getacceptedepoch io except ioexcept error epoch leader lower sync leader syncwithlead epoch zxid newepochzxid quorum packet quorumpacket qp quorum packet quorumpacket self run isrun read packet readpacket qp process packet processpacket qp io except ioexcept log warn except follow leader sock close io except ioexcept e1 e1 print stack trace printstacktrac clear pend revalid pend revalid pendingrevalid clear zk unregist jmx unregisterjmx learner examin packet receiv qp dispatch base content param qp io except ioexcept process packet processpacket quorum packet quorumpacket qp io except ioexcept qp get type gettyp leader ping ping qp leader propos txn header txnheader hdr txn header txnheader record txn serial util serializeutil deseri txn deserializetxn qp get data getdata hdr hdr get zxid getzxid last queu lastqueu log warn zxid 0x hex string tohexstr hdr get zxid getzxid expect 0x hex string tohexstr last queu lastqueu last queu lastqueu hdr get zxid getzxid fzk log request logrequest hdr txn leader commit fzk commit qp get zxid getzxid leader uptod log error receiv uptod messag after follow start leader revalid revalid qp leader sync fzk sync zxid last oper zxid get zxid getzxid fzk fzk get zxid getzxid pointer except nullpointerexcept log warn error get zxid zxid last oper queu zxid get last queu getlastqueu last queu lastqueu overrid shutdown log info shutdown call except shutdown follow shutdown 

valid hierarch quorum construct zookeep server split disjoint group server ha weight obtain quorum get more half total weight group major group configur quorum us two paramet group weight group set zoo keeper zookeep server set group pass colon separ list server id necessari assign weight server here exampl configur creat three group assign weight server group group group weight weight weight weight weight weight weight weight weight note necessari defin peer server keyword quorum hierarch quorumhierarch quorum verifi quorumverifi logger log logger factori loggerfactori get logger getlogg quorum hierarch quorumhierarch hash map hashmap server weight serverweight hash map hashmap server group servergroup hash map hashmap group weight groupweight num group numgroup contructor requir quorum configur declar separ file take file input paramet quorum hierarch quorumhierarch string filenam config except configexcept server weight serverweight hash map hashmap server group servergroup hash map hashmap group weight groupweight hash map hashmap num group numgroup read config file readconfigfil filenam constructor take set properti us unit test featur quorum hierarch quorumhierarch properti qp config except configexcept server weight serverweight hash map hashmap server group servergroup hash map hashmap group weight groupweight hash map hashmap num group numgroup pars qp log info server weight serverweight size server group servergroup size group weight groupweight size contructor take two hash map need enabl valid quorum us quorum peer config quorumpeerconfig declar weight group server configur file paramet param num group numgroup param server weight serverweight param server group servergroup quorum hierarch quorumhierarch num group numgroup hash map hashmap server weight serverweight hash map hashmap server group servergroup server weight serverweight server weight serverweight server group servergroup server group servergroup group weight groupweight hash map hashmap num group numgroup num group numgroup comput group weight computegroupweight return weight server param id get weight getweight id server weight serverweight get id read configr file call from constructor take file input read config file readconfigfil string filenam config except configexcept file config file configfil file filenam log info read configur from config file configfil config file configfil exist illeg argument except illegalargumentexcept config file configfil string tostr file miss properti cfg properti file input stream fileinputstream file input stream fileinputstream config file configfil cfg load close pars cfg io except ioexcept config except configexcept error process filenam illeg argument except illegalargumentexcept config except configexcept error process filenam pars properti configur separ file pars properti quorum prop quorumprop entri object object entri quorum prop quorumprop entri set entryset string kei entri get kei getkei string tostr string valu entri get valu getvalu string tostr kei start startswith group dot kei index indexof gid pars parselong kei substr dot num group numgroup string part valu split string part sid pars parselong server group servergroup put sid gid kei start startswith weight dot kei index indexof sid pars parselong kei substr dot server weight serverweight put sid pars parselong valu comput group weight computegroupweight method pre comput weight group speed up process valid set comput weight group differ place separ method comput group weight computegroupweight sid server group servergroup kei set keyset gid server group servergroup get sid group weight groupweight contain kei containskei gid group weight groupweight put gid server weight serverweight get sid total weight totalweight server weight serverweight get sid group weight groupweight get gid group weight groupweight put gid total weight totalweight group weight zero weight group weight groupweight valu log debug group weight weight weight num group numgroup log debug on zero weight group num group numgroup verifi set quorum contain quorum containsquorum hash set hashset set hash map hashmap expans hash map hashmap add up weight group set size log debug set size set size sid set gid server group servergroup get sid expans contain kei containskei gid expans put gid server weight serverweight get sid total weight totalweight server weight serverweight get sid expans get gid expans put gid total weight totalweight check group major maj group counter majgroupcount gid expans kei set keyset log debug group info expans get gid gid group weight groupweight get gid expans get gid group weight groupweight get gid maj group counter majgroupcount log debug major group counter maj group counter majgroupcount num group numgroup maj group counter majgroupcount num group numgroup log debug posit set size set size log debug neg set size set size 

digest login modul digestloginmodul login modul loginmodul subject subject abort commit initi subject subject callback handler callbackhandl callback handler callbackhandl map string share state sharedst map string option option contain kei containskei usernam zookeep client get usernam password from jaa conf us digest md5 subject subject string usernam string option get usernam subject get credenti getpubliccredenti add object usernam string password string option get password subject get credenti getprivatecredenti add object password logout login unlik krb5 login modul krb5loginmodul don actual login credenti pass here authent zookeep done sasl client saslclient object 

set data respons setdatarespons record org apach zookeep data stat stat set data respons setdatarespons set data respons setdatarespons org apach zookeep data stat stat stat stat org apach zookeep data stat get stat getstat stat set stat setstat org apach zookeep data stat stat serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write record writerecord stat stat end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag stat org apach zookeep data stat read record readrecord stat stat end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write record writerecord stat stat end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set data respons setdatarespons cast except classcastexcept compar differ type record set data respons setdatarespons peer set data respons setdatarespons peer peer ret ret stat compar compareto peer stat ret ret ret equal object peer peer peer peer set data respons setdatarespons peer peer set data respons setdatarespons peer set data respons setdatarespons peer peer ret ret stat equal peer stat ret ret ret hash code hashcod result 17 ret ret stat hash code hashcod result 37 result ret result string signatur set data respons lsetdatarespons stat lstat lllliiiliil 

random access file reader randomaccessfileread reader data input datainput logger log logger factori loggerfactori get logger getlogg random access file reader randomaccessfileread random access file randomaccessfil file buffer buffers bufferoffset fileoffset fp buffer size buffer size 512 1024 512k point random access file reader randomaccessfileread file file found except filenotfoundexcept file random access file randomaccessfil log debug enabl isdebugen log debug open file fd file get fd getfd io except ioexcept ioe log debug open file could get fd buffer buffer size buffer size buffers bufferoffset fileoffset fp fill buffer from file fp keep track file pointer fileoffset offset file buffer from fill io except ioexcept fileoffset fp read file read buffer buffer length log debug enabl isdebugen string buf string buffer 40 utf log debug fill buffer buf read eof reach buffers buffers read fp buffers bufferoffset buffers reader mark support marksupport copi from buffer fill buffer copi read cbuf len io except ioexcept faster wont us bytesread len read read bytesread read read bytesread cbuf xff 0xff read len read bytesread read buf len io except ioexcept log trace enabl istraceen log trace read buf len len read len buffers fill buffers tocopi math min len buffers log trace enabl istraceen log trace tocopi tocopi arraycopi buffer bufferoffset buf tocopi buffers tocopi bufferoffset tocopi len tocopi read tocopi tocopi log trace enabl istraceen log trace read read read close io except ioexcept file close seek get posit getposit bufferoffset fileoffset seek po io except ioexcept log debug enabl isdebugen log debug seek po file seek po fp po buffers forc buffer fill next read work usual read line readlin disregard make thing easier string read line readlin io except ioexcept string buffer stringbuff buffer find reach end buffer first put what buffer string buffer repeat buffer buffers fill buffers buffers buffer bufferoffset first buffer leav string buffer empti string buffer stringbuff append string buffer bufferoffset utf bufferoffset buffers buffer didn find read buffer string buffer string buffer stringbuff append string buffer bufferoffset buffers utf buffers string tostr data input datainput read fulli readfulli io except ioexcept read fulli readfulli length read fulli readfulli len io except ioexcept len read read len len read read read eof except eofexcept end file reach skip byte skipbyt io except ioexcept seek get posit getposit read readboolean io except ioexcept read readbyt read readbyt io except ioexcept read fulli readfulli read readunsignedbyt io except ioexcept read readbyt read readshort io except ioexcept read fulli readfulli xff 0xff read readunsignedshort io except ioexcept read fulli readfulli xff 0xff xff 0xff read readchar io except ioexcept read readshort read readint io except ioexcept read fulli readfulli xff 0xff 24 xff 0xff 16 xff 0xff xff 0xff read readlong io except ioexcept read fulli readfulli xff 0xff 56 xff 0xff 48 xff 0xff 40 xff 0xff 32 xff 0xff 24 xff 0xff 16 xff 0xff xff 0xff read readfloat io except ioexcept bit intbitstofloat read readint read readdoubl io except ioexcept bit longbitstodoubl read readlong string read utf readutf io except ioexcept len read readunsignedshort byte len byte len ff 0xff byte len ff 0xff read fulli readfulli byte len data input stream datainputstream di data input stream datainputstream arrai input stream bytearrayinputstream byte di read utf readutf main string arg io except ioexcept random access file reader randomaccessfileread random access file reader randomaccessfileread file arg pos0 get posit getposit println read line readlin println pos1 get posit getposit println po pos1 println read line readlin println seek pos1 println read line readlin println seek pos0 println read line readlin pos2 get posit getposit println println read line readlin seek pos2 println read line readlin 

watcher event watcherev record type state string path watcher event watcherev watcher event watcherev type state string path type type state state path path get type gettyp type set type settyp type get state getstat state set state setstat state string get path getpath path set path setpath string path serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint type type write writeint state state write string writestr path path end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag type read readint type state read readint state path read string readstr path end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint type type write writeint state state write string writestr path path end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer watcher event watcherev cast except classcastexcept compar differ type record watcher event watcherev peer watcher event watcherev peer peer ret ret type peer type type peer type ret ret ret state peer state state peer state ret ret ret path compar compareto peer path ret ret ret equal object peer peer peer peer watcher event watcherev peer peer watcher event watcherev peer watcher event watcherev peer peer ret ret type peer type ret ret ret state peer state ret ret ret path equal peer path ret ret ret hash code hashcod result 17 ret ret type result 37 result ret ret state result 37 result ret ret path hash code hashcod result 37 result ret result string signatur watcher event lwatcherev ii 

observ mx bean implement observ bean observerbean observ mx bean observermxbean zoo keeper server mx bean zookeeperservermxbean count pend revalid get pend revalid count getpendingrevalidationcount socket address string get quorum address getquorumaddress 

get data respons getdatarespons record data org apach zookeep data stat stat get data respons getdatarespons get data respons getdatarespons data org apach zookeep data stat stat data data stat stat get data getdata data set data setdata data org apach zookeep data stat get stat getstat stat set stat setstat org apach zookeep data stat stat serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write buffer writebuff data data write record writerecord stat stat end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag data read buffer readbuff data stat org apach zookeep data stat read record readrecord stat stat end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write buffer writebuff data data write record writerecord stat stat end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get data respons getdatarespons cast except classcastexcept compar differ type record get data respons getdatarespons peer get data respons getdatarespons peer peer ret data ur peer data ret org apach jute util compar byte comparebyt length ur ur length ret ret ret stat compar compareto peer stat ret ret ret equal object peer peer peer peer get data respons getdatarespons peer peer get data respons getdatarespons peer get data respons getdatarespons peer peer ret ret org apach jute util buf equal bufequ data peer data ret ret ret stat equal peer stat ret ret ret hash code hashcod result 17 ret ret java util arrai string tostr data hash code hashcod result 37 result ret ret stat hash code hashcod result 37 result ret result string signatur get data respons lgetdatarespons bl stat blstat lllliiiliil 

rcc token manag rcctokenmanag rcc constant rccconstant java io print stream printstream debug stream debugstream set debug stream setdebugstream java io print stream printstream ds debug stream debugstream ds jj move string liter dfa0 jjmovestringliteraldfa0 jj move nfa jjmovenfa jj check add jjchecknadd state jjround state jjround jjstate set jjstateset jjnew state cnt jjnewstatecnt state jjround state jjround jj add state jjaddstat start end jjstate set jjstateset jjnew state cnt jjnewstatecnt jjnext state jjnextstat start start end jj check add two state jjchecknaddtwost state1 state2 jj check add jjchecknadd state1 jj check add jjchecknadd state2 jj check add state jjchecknaddst start end jj check add jjchecknadd jjnext state jjnextstat start start end jj check add state jjchecknaddst start jj check add jjchecknadd jjnext state jjnextstat start jj check add jjchecknadd jjnext state jjnextstat start jj move nfa jjmovenfa start state startstat cur po curpo next state nextstat start startsat jjnew state cnt jjnewstatecnt jjstate set jjstateset start state startstat kind x7 fffffff 0x7fffffff jjround x7 fffffff 0x7fffffff init round reinitround cur curchar 64 1l cur curchar match loop matchloop jjstate set jjstateset x2400l 0x2400l 0l kind kind cur curchar 13 jjstate set jjstateset jjnew state cnt jjnewstatecnt cur curchar 10 kind kind cur curchar 13 jjstate set jjstateset jjnew state cnt jjnewstatecnt start startsat cur curchar 128 1l cur curchar 077 match loop matchloop jjstate set jjstateset start startsat i2 cur curchar xff 0xff l2 1l cur curchar 077 match loop matchloop jjstate set jjstateset start startsat kind x7 fffffff 0x7fffffff jjmatch kind jjmatchedkind kind jjmatch po jjmatchedpo cur po curpo kind x7 fffffff 0x7fffffff cur po curpo jjnew state cnt jjnewstatecnt start startsat jjnew state cnt jjnewstatecnt start startsat cur po curpo cur curchar input stream input stream read readchar java io io except ioexcept cur po curpo jj stop string liter dfa jjstopstringliteraldfa po active0 po active0 xfff800l 0xfff800l 0l jjmatch kind jjmatchedkind 32 active0 xfff800l 0xfff800l 0l jjmatch kind jjmatchedkind 32 jjmatch po jjmatchedpo active0 x7 ef800l 0x7ef800l 0l jjmatch kind jjmatchedkind 32 jjmatch po jjmatchedpo active0 x810000l 0x810000l 0l active0 x24000l 0x24000l 0l active0 x7 cb800l 0x7cb800l 0l jjmatch kind jjmatchedkind 32 jjmatch po jjmatchedpo active0 x41000l 0x41000l 0l active0 x78 a800l 0x78a800l 0l jjmatch kind jjmatchedkind 32 jjmatch po jjmatchedpo active0 x680800l 0x680800l 0l active0 x10 a000l 0x10a000l 0l jjmatch kind jjmatchedkind 32 jjmatch po jjmatchedpo jj start nfa jjstartnfa po active0 jj move nfa jjmovenfa jj stop string liter dfa jjstopstringliteraldfa po active0 po jj stop po jjstopatpo po kind jjmatch kind jjmatchedkind kind jjmatch po jjmatchedpo po po jj start nfa state jjstartnfawithst po kind state jjmatch kind jjmatchedkind kind jjmatch po jjmatchedpo po cur curchar input stream input stream read readchar java io io except ioexcept po jj move nfa jjmovenfa state po jj move string liter dfa0 jjmovestringliteraldfa0 cur curchar 44 jj stop po jjstopatpo 29 46 jj stop po jjstopatpo 30 47 jj move string liter dfa1 jjmovestringliteraldfa1 x120l 0x120l 59 jj stop po jjstopatpo 28 60 jj stop po jjstopatpo 26 62 jj stop po jjstopatpo 27 98 jj move string liter dfa1 jjmovestringliteraldfa1 x20 c000l 0x20c000l 99 jj move string liter dfa1 jjmovestringliteraldfa1 x1000l 0x1000l 100 jj move string liter dfa1 jjmovestringliteraldfa1 x80000l 0x80000l 102 jj move string liter dfa1 jjmovestringliteraldfa1 x40000l 0x40000l 105 jj move string liter dfa1 jjmovestringliteraldfa1 x12000l 0x12000l 108 jj move string liter dfa1 jjmovestringliteraldfa1 x20000l 0x20000l 109 jj move string liter dfa1 jjmovestringliteraldfa1 x800800l 0x800800l 117 jj move string liter dfa1 jjmovestringliteraldfa1 x100000l 0x100000l 118 jj move string liter dfa1 jjmovestringliteraldfa1 x400000l 0x400000l 123 jj stop po jjstopatpo 24 125 jj stop po jjstopatpo 25 jj move nfa jjmovenfa jj move string liter dfa1 jjmovestringliteraldfa1 active0 cur curchar input stream input stream read readchar java io io except ioexcept jj stop string liter dfa jjstopstringliteraldfa active0 cur curchar 42 active0 x100l 0x100l 0l jj stop po jjstopatpo 47 active0 x20l 0x20l 0l jj stop po jjstopatpo 97 jj move string liter dfa2 jjmovestringliteraldfa2 active0 x800000l 0x800000l 101 jj move string liter dfa2 jjmovestringliteraldfa2 active0 x400000l 0x400000l 108 jj move string liter dfa2 jjmovestringliteraldfa2 active0 x41000l 0x41000l 110 jj move string liter dfa2 jjmovestringliteraldfa2 active0 x12000l 0x12000l 111 jj move string liter dfa2 jjmovestringliteraldfa2 active0 xa8800l 0xa8800l 115 jj move string liter dfa2 jjmovestringliteraldfa2 active0 x100000l 0x100000l 117 jj move string liter dfa2 jjmovestringliteraldfa2 active0 x200000l 0x200000l 121 jj move string liter dfa2 jjmovestringliteraldfa2 active0 x4000l 0x4000l jj start nfa jjstartnfa active0 jj move string liter dfa2 jjmovestringliteraldfa2 old0 active0 active0 old0 0l jj start nfa jjstartnfa old0 cur curchar input stream input stream read readchar java io io except ioexcept jj stop string liter dfa jjstopstringliteraldfa active0 cur curchar 97 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x1000l 0x1000l 99 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x402000l 0x402000l 100 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x800l 0x800l 102 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x200000l 0x200000l 110 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x20000l 0x20000l 111 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x48000l 0x48000l 112 active0 x800000l 0x800000l 0l jj start nfa state jjstartnfawithst 23 116 active0 x10000l 0x10000l 0l jj start nfa state jjstartnfawithst 16 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x104000l 0x104000l 117 jj move string liter dfa3 jjmovestringliteraldfa3 active0 x80000l 0x80000l jj start nfa jjstartnfa active0 jj move string liter dfa3 jjmovestringliteraldfa3 old0 active0 active0 old0 0l jj start nfa jjstartnfa old0 cur curchar input stream input stream read readchar java io io except ioexcept jj stop string liter dfa jjstopstringliteraldfa active0 cur curchar 97 jj move string liter dfa4 jjmovestringliteraldfa4 active0 x40000l 0x40000l 98 jj move string liter dfa4 jjmovestringliteraldfa4 active0 x80000l 0x80000l 101 active0 x4000l 0x4000l 0l jj start nfa state jjstartnfawithst 14 102 jj move string liter dfa4 jjmovestringliteraldfa4 active0 x200000l 0x200000l 103 active0 x20000l 0x20000l 0l jj start nfa state jjstartnfawithst 17 108 jj move string liter dfa4 jjmovestringliteraldfa4 active0 xa000l 0xa000l 114 jj move string liter dfa4 jjmovestringliteraldfa4 active0 x100000l 0x100000l 115 jj move string liter dfa4 jjmovestringliteraldfa4 active0 x1000l 0x1000l 116 jj move string liter dfa4 jjmovestringliteraldfa4 active0 x400000l 0x400000l 117 jj move string liter dfa4 jjmovestringliteraldfa4 active0 x800l 0x800l jj start nfa jjstartnfa active0 jj move string liter dfa4 jjmovestringliteraldfa4 old0 active0 active0 old0 0l jj start nfa jjstartnfa old0 cur curchar input stream input stream read readchar java io io except ioexcept jj stop string liter dfa jjstopstringliteraldfa active0 cur curchar 101 jj move string liter dfa5 jjmovestringliteraldfa5 active0 x208000l 0x208000l 105 jj move string liter dfa5 jjmovestringliteraldfa5 active0 x100000l 0x100000l 108 jj move string liter dfa5 jjmovestringliteraldfa5 active0 x80800l 0x80800l 111 jj move string liter dfa5 jjmovestringliteraldfa5 active0 x400000l 0x400000l 115 active0 x1000l 0x1000l 0l jj start nfa state jjstartnfawithst 12 116 active0 x40000l 0x40000l 0l jj start nfa state jjstartnfawithst 18 117 jj move string liter dfa5 jjmovestringliteraldfa5 active0 x2000l 0x2000l jj start nfa jjstartnfa active0 jj move string liter dfa5 jjmovestringliteraldfa5 old0 active0 active0 old0 0l jj start nfa jjstartnfa old0 cur curchar input stream input stream read readchar java io io except ioexcept jj stop string liter dfa jjstopstringliteraldfa active0 cur curchar 97 jj move string liter dfa6 jjmovestringliteraldfa6 active0 x8000l 0x8000l 100 jj move string liter dfa6 jjmovestringliteraldfa6 active0 x2000l 0x2000l 101 active0 x800l 0x800l 0l jj start nfa state jjstartnfawithst 11 active0 x80000l 0x80000l 0l jj start nfa state jjstartnfawithst 19 110 jj move string liter dfa6 jjmovestringliteraldfa6 active0 x100000l 0x100000l 114 active0 x200000l 0x200000l 0l jj start nfa state jjstartnfawithst 21 active0 x400000l 0x400000l 0l jj start nfa state jjstartnfawithst 22 jj start nfa jjstartnfa active0 jj move string liter dfa6 jjmovestringliteraldfa6 old0 active0 active0 old0 0l jj start nfa jjstartnfa old0 cur curchar input stream input stream read readchar java io io except ioexcept jj stop string liter dfa jjstopstringliteraldfa active0 cur curchar 101 active0 x2000l 0x2000l 0l jj start nfa state jjstartnfawithst 13 103 active0 x100000l 0x100000l 0l jj start nfa state jjstartnfawithst 20 110 active0 x8000l 0x8000l 0l jj start nfa state jjstartnfawithst 15 jj start nfa jjstartnfa active0 jjbit vec0 jjbitvec0 x0l 0x0l x0l 0x0l xffffffffffffffffl 0xffffffffffffffffl xffffffffffffffffl 0xffffffffffffffffl jj move nfa jjmovenfa start state startstat cur po curpo next state nextstat start startsat jjnew state cnt jjnewstatecnt jjstate set jjstateset start state startstat kind x7 fffffff 0x7fffffff jjround x7 fffffff 0x7fffffff init round reinitround cur curchar 64 1l cur curchar match loop matchloop jjstate set jjstateset cur curchar 34 jj check add jjchecknadd xfffffffbffffffffl 0xfffffffbffffffffl 0l jj check add two state jjchecknaddtwost cur curchar 34 kind 31 kind 31 x3 ff000000000000l 0x3ff000000000000l 0l kind 32 kind 32 jjstate set jjstateset jjnew state cnt jjnewstatecnt start startsat cur curchar 128 1l cur curchar 077 match loop matchloop jjstate set jjstateset x7 fffffe07 fffffel 0x7fffffe07fffffel 0l kind 32 kind 32 jj check add jjchecknadd jj add state jjaddstat x7 fffffe87 fffffel 0x7fffffe87fffffel 0l kind 32 kind 32 jj check add jjchecknadd start startsat i2 cur curchar xff 0xff l2 1l cur curchar 077 match loop matchloop jjstate set jjstateset jjbit vec0 jjbitvec0 i2 l2 0l jj add state jjaddstat start startsat kind x7 fffffff 0x7fffffff jjmatch kind jjmatchedkind kind jjmatch po jjmatchedpo cur po curpo kind x7 fffffff 0x7fffffff cur po curpo jjnew state cnt jjnewstatecnt start startsat jjnew state cnt jjnewstatecnt start startsat cur po curpo cur curchar input stream input stream read readchar java io io except ioexcept cur po curpo jj move string liter dfa0 jjmovestringliteraldfa0 cur curchar 42 jj move string liter dfa1 jjmovestringliteraldfa1 x200l 0x200l jj move string liter dfa1 jjmovestringliteraldfa1 active0 cur curchar input stream input stream read readchar java io io except ioexcept cur curchar 47 active0 x200l 0x200l 0l jj stop po jjstopatpo jjnext state jjnextstat string jjstr liter imag jjstrliteralimag 155 157 144 165 154 145 143 154 141 163 163 151 156 143 154 165 144 145 142 171 164 145 142 157 157 154 145 141 156 151 156 164 154 157 156 147 146 154 157 141 164 144 157 165 142 154 145 165 163 164 162 151 156 147 142 165 146 146 145 162 166 145 143 164 157 162 155 141 160 173 175 74 76 73 54 56 string lex state name lexstatenam on line comment withinonelinecom multi line comment withinmultilinecom jjnew lex state jjnewlexst jjto token jjtotoken x1 fffff801l 0x1fffff801l jjto skip jjtoskip x37 el 0x37el jjto special jjtospeci x360l 0x360l jjto more jjtomor x480l 0x480l simpl stream simplecharstream input stream input stream jjround jjstate set jjstateset 10 string buffer stringbuff imag jjimag len jjimagelen length match lengthofmatch cur curchar rcc token manag rcctokenmanag simpl stream simplecharstream stream simpl stream simplecharstream flag staticflag error error us stream charstream non lexic analyz input stream input stream stream rcc token manag rcctokenmanag simpl stream simplecharstream stream lex state lexstat stream switchto lex state lexstat init reinit simpl stream simplecharstream stream jjmatch po jjmatchedpo jjnew state cnt jjnewstatecnt cur lex state curlexst lex state defaultlexst input stream input stream stream init round reinitround init round reinitround jjround x80000001 0x80000001 jjround x80000000 0x80000000 init reinit simpl stream simplecharstream stream lex state lexstat init reinit stream switchto lex state lexstat switchto lex state lexstat lex state lexstat lex state lexstat token mgr error tokenmgrerror error ignor invalid lexic state lex state lexstat state unchang token mgr error tokenmgrerror invalid lexic state invalid lexic state cur lex state curlexst lex state lexstat token jj fill token jjfilltoken token token token newtoken jjmatch kind jjmatchedkind kind jjmatch kind jjmatchedkind string im jjstr liter imag jjstrliteralimag jjmatch kind jjmatchedkind imag im input stream input stream get imag getimag im begin line beginlin input stream input stream get begin line getbeginlin begin column begincolumn input stream input stream get begin column getbegincolumn end line endlin input stream input stream get end line getendlin end column endcolumn input stream input stream get end column getendcolumn cur lex state curlexst lex state defaultlexst jjnew state cnt jjnewstatecnt jjround jjmatch po jjmatchedpo jjmatch kind jjmatchedkind token get next token getnexttoken kind token special token specialtoken token match token matchedtoken cur po curpo eof loop eofloop cur curchar input stream input stream begin token begintoken java io io except ioexcept jjmatch kind jjmatchedkind match token matchedtoken jj fill token jjfilltoken match token matchedtoken special token specialtoken special token specialtoken match token matchedtoken imag jjimag len jjimagelen cur lex state curlexst input stream input stream backup cur curchar 32 x100002600l 0x100002600l 1l cur curchar 0l cur curchar input stream input stream begin token begintoken java io io except ioexcept e1 eof loop eofloop jjmatch kind jjmatchedkind x7 fffffff 0x7fffffff jjmatch po jjmatchedpo cur po curpo jj move string liter dfa0 jjmovestringliteraldfa0 jjmatch kind jjmatchedkind x7 fffffff 0x7fffffff jjmatch po jjmatchedpo cur po curpo jj move string liter dfa0 jjmovestringliteraldfa0 jjmatch po jjmatchedpo jjmatch kind jjmatchedkind jjmatch kind jjmatchedkind jjmatch kind jjmatchedkind x7 fffffff 0x7fffffff jjmatch po jjmatchedpo cur po curpo jj move string liter dfa0 jjmovestringliteraldfa0 jjmatch po jjmatchedpo jjmatch kind jjmatchedkind 10 jjmatch kind jjmatchedkind 10 jjmatch kind jjmatchedkind x7 fffffff 0x7fffffff jjmatch po jjmatchedpo cur po curpo input stream input stream backup cur po curpo jjmatch po jjmatchedpo jjto token jjtotoken jjmatch kind jjmatchedkind 1l jjmatch kind jjmatchedkind 077 0l match token matchedtoken jj fill token jjfilltoken match token matchedtoken special token specialtoken special token specialtoken jjnew lex state jjnewlexst jjmatch kind jjmatchedkind cur lex state curlexst jjnew lex state jjnewlexst jjmatch kind jjmatchedkind match token matchedtoken jjto skip jjtoskip jjmatch kind jjmatchedkind 1l jjmatch kind jjmatchedkind 077 0l jjto special jjtospeci jjmatch kind jjmatchedkind 1l jjmatch kind jjmatchedkind 077 0l match token matchedtoken jj fill token jjfilltoken special token specialtoken special token specialtoken match token matchedtoken match token matchedtoken special token specialtoken special token specialtoken special token specialtoken special token specialtoken next match token matchedtoken skip lexic action skiplexicalact match token matchedtoken skip lexic action skiplexicalact jjnew lex state jjnewlexst jjmatch kind jjmatchedkind cur lex state curlexst jjnew lex state jjnewlexst jjmatch kind jjmatchedkind eof loop eofloop jjimag len jjimagelen jjmatch po jjmatchedpo jjnew lex state jjnewlexst jjmatch kind jjmatchedkind cur lex state curlexst jjnew lex state jjnewlexst jjmatch kind jjmatchedkind cur po curpo jjmatch kind jjmatchedkind x7 fffffff 0x7fffffff cur curchar input stream input stream read readchar java io io except ioexcept e1 error line error line input stream input stream get end line getendlin error column error column input stream input stream get end column getendcolumn string error after error after eof eofseen input stream input stream read readchar input stream input stream backup java io io except ioexcept e1 eof eofseen error after error after cur po curpo input stream input stream get imag getimag cur curchar cur curchar error line error line error column error column error column error column eof eofseen input stream input stream backup error after error after cur po curpo input stream input stream get imag getimag token mgr error tokenmgrerror eof eofseen cur lex state curlexst error line error line error column error column error after error after cur curchar token mgr error tokenmgrerror lexic error lexic error skip lexic action skiplexicalact token match token matchedtoken jjmatch kind jjmatchedkind 

test stand server run runwith parameter set test settest base logger log logger factori loggerfactori get logger getlogg set test settest string accept string path string encod client respons clientrespons statu expect statu expectedstatu stat zstat expect stat expectedstat data watcher mywatch watcher process watch event watchedev event fixm ignor paramet collect object data except string base znode baseznod base creat base node createbaseznod arrai list aslist object media type mediatyp applic json applic json base znode baseznod t1 utf8 client respons clientrespons statu stat zstat base znode baseznod t1 media type mediatyp applic json applic json base znode baseznod t2 utf8 client respons clientrespons statu stat zstat base znode baseznod t2 media type mediatyp applic json applic json base znode baseznod t3 utf8 client respons clientrespons statu stat zstat base znode baseznod t3 foobar get byte getbyt media type mediatyp applic json applic json base znode baseznod t4 base64 client respons clientrespons statu stat zstat base znode baseznod t4 media type mediatyp applic json applic json base znode baseznod t5 base64 client respons clientrespons statu stat zstat base znode baseznod t5 media type mediatyp applic json applic json base znode baseznod t6 base64 client respons clientrespons statu stat zstat base znode baseznod t6 foobar get byte getbyt media type mediatyp applic json applic json base znode baseznod dkdkdkd utf8 client respons clientrespons statu found found media type mediatyp applic json applic json base znode baseznod dkdkdkd base64 client respons clientrespons statu found found set test settest string accept string path string encod client respons clientrespons statu statu stat zstat expect stat expectedstat data accept accept path path encod encod expect statu expectedstatu statu expect stat expectedstat expect stat expectedstat data data test test set testset except log info start get name getnam expect stat expectedstat zk creat expect stat expectedstat path initi get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist web resourc webresourc wr znodesr path path queri param queryparam dataformat encod data wr wr queri param queryparam builder builder wr accept accept type media type mediatyp applic octet stream applic octet stream client respons clientrespons cr data cr builder put client respons clientrespons shouldn necessari wrap data string problem server hang 30 second doesn get data todo investig cr builder put client respons clientrespons string data equal assertequ expect statu expectedstatu cr get client respons statu getclientresponsestatu expect stat expectedstat stat zstat zstat cr get entiti getent stat zstat equal assertequ expect stat expectedstat zstat us band method verifi data zk get data getdata zstat path stat data data data data fail data string data data string data asserttru string data string data arrai equal data data 

watcher mywatch watcher process watch event watchedev event fixm ignor 

parent link panel jpanel applic zoo inspector panel zooinspectorpanel panel jpanel node viewer chang listen nodeviewerschangelisten button jbutton refresh button refreshbutton button jbutton disconnect button disconnectbutton button jbutton connect button connectbutton zoo inspector node viewer panel zooinspectornodeviewerspanel node viewer panel nodeviewerspanel zoo inspector tree viewer zooinspectortreeview tree viewer treeview zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag button jbutton add node button addnodebutton button jbutton delet node button deletenodebutton button jbutton node viewer button nodeviewersbutton button jbutton button aboutbutton list node viewer chang listen nodeviewerschangelisten listen arrai list arraylist node viewer chang listen nodeviewerschangelisten listen add param zoo inspector manag zooinspectormanag link zoo inspector manag zooinspectormanag applic zoo inspector panel zooinspectorpanel zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag arrai list arraylist zoo inspector node viewer zooinspectornodeview node viewer nodeview arrai list arraylist zoo inspector node viewer zooinspectornodeview list string node viewer name defaultnodeviewersclassnam zoo inspector manag zooinspectormanag get node viewer configur getdefaultnodeviewerconfigur string name classnam node viewer name defaultnodeviewersclassnam node viewer nodeview add zoo inspector node viewer zooinspectornodeview name fornam name classnam instanc newinst except ex logger factori loggerfactori get logger getlogg error error load node viewer ex option pane joptionpan show messag dialog showmessagedialog zoo inspector panel zooinspectorpanel error load node viewer ex get messag getmessag error option pane joptionpan error messag error messag node viewer panel nodeviewerspanel zoo inspector node viewer panel zooinspectornodeviewerspanel zoo inspector manag zooinspectormanag node viewer nodeview tree viewer treeview zoo inspector tree viewer zooinspectortreeview zoo inspector manag zooinspectormanag node viewer panel nodeviewerspanel set layout setlayout border layout borderlayout tool bar jtoolbar toolbar tool bar jtoolbar toolbar set floatabl setfloat connect button connectbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get connect icon getconnecticon disconnect button disconnectbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get disconnect icon getdisconnecticon refresh button refreshbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get refresh icon getrefreshicon add node button addnodebutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get add node icon getaddnodeicon delet node button deletenodebutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get delet node icon getdeletenodeicon node viewer button nodeviewersbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get chang node viewer icon getchangenodeviewersicon button aboutbutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get inform icon getinformationicon toolbar add connect button connectbutton toolbar add disconnect button disconnectbutton toolbar add refresh button refreshbutton toolbar add add node button addnodebutton toolbar add delet node button deletenodebutton toolbar add node viewer button nodeviewersbutton toolbar add button aboutbutton button aboutbutton set enabl seten connect button connectbutton set enabl seten disconnect button disconnectbutton set enabl seten refresh button refreshbutton set enabl seten add node button addnodebutton set enabl seten delet node button deletenodebutton set enabl seten node viewer button nodeviewersbutton set enabl seten node viewer button nodeviewersbutton set tool tip text settooltiptext chang node viewer button aboutbutton set tool tip text settooltiptext zoo inspector zooinspector connect button connectbutton set tool tip text settooltiptext connect disconnect button disconnectbutton set tool tip text settooltiptext disconnect refresh button refreshbutton set tool tip text settooltiptext refresh add node button addnodebutton set tool tip text settooltiptext add node delet node button deletenodebutton set tool tip text settooltiptext delet node connect button connectbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog zicpd zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog zoo inspector manag zooinspectormanag get last connect prop getlastconnectionprop zoo inspector manag zooinspectormanag get connect properti getconnectionpropertiestempl zoo inspector panel zooinspectorpanel zicpd set visibl setvis disconnect button disconnectbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev disconnect refresh button refreshbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev tree viewer treeview refresh view refreshview add node button addnodebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev list string select node selectednod tree viewer treeview get select node getselectednod select node selectednod size string node name nodenam option pane joptionpan show input dialog showinputdialog zoo inspector panel zooinspectorpanel enter name node creat node option pane joptionpan inform messag inform messag node name nodenam node name nodenam length swing worker swingwork worker swing worker swingwork overrid background doinbackground except zoo inspector panel zooinspectorpanel zoo inspector manag zooinspectormanag creat node createnod select node selectednod get node name nodenam overrid done tree viewer treeview refresh view refreshview worker execut option pane joptionpan show messag dialog showmessagedialog zoo inspector panel zooinspectorpanel select parent node node delet node button deletenodebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev list string select node selectednod tree viewer treeview get select node getselectednod select node selectednod size option pane joptionpan show messag dialog showmessagedialog zoo inspector panel zooinspectorpanel select least node delet answer option pane joptionpan show confirm dialog showconfirmdialog zoo inspector panel zooinspectorpanel delet select node action revert confirm delet option pane joptionpan ye option ye option option pane joptionpan warn messag warn messag answer option pane joptionpan ye option ye option swing worker swingwork worker swing worker swingwork overrid background doinbackground except string node path nodepath select node selectednod zoo inspector panel zooinspectorpanel zoo inspector manag zooinspectormanag delet node deletenod node path nodepath overrid done tree viewer treeview refresh view refreshview worker execut node viewer button nodeviewersbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector node viewer dialog zooinspectornodeviewersdialog nvd zoo inspector node viewer dialog zooinspectornodeviewersdialog option pane joptionpan get root frame getrootfram node viewer nodeview listen zoo inspector manag zooinspectormanag nvd set visibl setvis button aboutbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector dialog zooinspectoraboutdialog zicpd zoo inspector dialog zooinspectoraboutdialog option pane joptionpan get root frame getrootfram zicpd set visibl setvis scroll pane jscrollpan tree scroller treescrol scroll pane jscrollpan tree viewer treeview split pane jsplitpan split pane splitpan split pane jsplitpan split pane jsplitpan horizont split horizont split tree scroller treescrol node viewer panel nodeviewerspanel split pane splitpan set resiz weight setresizeweight 25 add split pane splitpan border layout borderlayout center add toolbar border layout borderlayout north param connect prop connectionprop link properti connect zookeep instanc connect properti connect prop connectionprop swing worker swingwork worker swing worker swingwork overrid background doinbackground except zoo inspector manag zooinspectormanag set last connect prop setlastconnectionprop connect prop connectionprop zoo inspector manag zooinspectormanag connect connect prop connectionprop overrid done get tree viewer treeview refresh view refreshview connect button connectbutton set enabl seten disconnect button disconnectbutton set enabl seten refresh button refreshbutton set enabl seten add node button addnodebutton set enabl seten delet node button deletenodebutton set enabl seten option pane joptionpan show messag dialog showmessagedialog zoo inspector panel zooinspectorpanel unabl connect zookeep error option pane joptionpan error messag error messag interrupt except interruptedexcept logger factori loggerfactori get logger getlogg error error occur connect zoo keeper zookeep server execut except executionexcept logger factori loggerfactori get logger getlogg error error occur connect zoo keeper zookeep server worker execut disconnect disconnect param wait set method applic ha successfulli disconnect disconnect wait swing worker swingwork worker swing worker swingwork overrid background doinbackground except zoo inspector panel zooinspectorpanel zoo inspector manag zooinspectormanag disconnect overrid done get tree viewer treeview clear view clearview connect button connectbutton set enabl seten disconnect button disconnectbutton set enabl seten refresh button refreshbutton set enabl seten add node button addnodebutton set enabl seten delet node button deletenodebutton set enabl seten interrupt except interruptedexcept logger factori loggerfactori get logger getlogg error error occur disconnect from zoo keeper zookeep server execut except executionexcept logger factori loggerfactori get logger getlogg error error occur disconnect from zoo keeper zookeep server worker execut wait worker done isdon thread sleep 100 interrupt except interruptedexcept logger factori loggerfactori get logger getlogg error error occur disconnect from zoo keeper zookeep server non javadoc seeorg apach zookeep inspector gui node viewer chang listen nodeviewerschangelisten node viewer chang nodeviewerschang java util list node viewer chang nodeviewerschang list zoo inspector node viewer zooinspectornodeview viewer newview node viewer panel nodeviewerspanel set node viewer setnodeview viewer newview param connect prop connectionprop io except ioexcept setdefault connect prop setdefaultconnectionprop properti connect prop connectionprop io except ioexcept zoo inspector manag zooinspectormanag save connect file savedefaultconnectionfil connect prop connectionprop 

assign except noassignmentexcept except serial version uid serialversionuid 1l 

le non termin test lenonterminatetest zk test zktestcas mock leader elect mockleaderelect leader elect leaderelect mock leader elect mockleaderelect quorum peer quorump self self temporari ensur round vote befor peer updat vote easiest add latch wait after count vote intend make more testabl duplic code jmx bean method call remov reduc nois vote leader lookforlead interrupt except interruptedexcept self set current vote setcurrentvot vote self get id getid self get last log zxid getlastloggedzxid leader cast vote ourself request byte requestbyt buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt respons byte responsebyt 28 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap respons byte responsebyt current vote leader initi datagram socket datagramsocket datagram socket datagramsocket set timeout setsotimeout 200 socket except socketexcept e1 log error socket except creat socket leader elect e1 exit datagram packet datagrampacket request packet requestpacket datagram packet datagrampacket request byte requestbyt request byte requestbyt length datagram packet datagrampacket respons packet responsepacket datagram packet datagrampacket respons byte responsebyt respons byte responsebyt length xid epoch gen epochgen next nextint self run isrun hash map hashmap inet socket address inetsocketaddress vote vote hash map hashmap inet socket address inetsocketaddress vote self get vote view getvotingview size request buffer requestbuff clear request buffer requestbuff put putint xid request packet requestpacket set length setlength hash set hashset heard from heardfrom hash set hashset quorum server quorumserv server self get vote view getvotingview valu log info server address server addr request packet requestpacket set socket address setsocketaddress server addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr server addr send request packet requestpacket respons packet responsepacket set length setlength respons byte responsebyt length receiv respons packet responsepacket respons packet responsepacket get length getlength respons byte responsebyt length log error respons respons packet responsepacket get length getlength respons buffer responsebuff clear recv xid recvedxid respons buffer responsebuff get getint recv xid recvedxid xid log error bad xid expect xid recv xid recvedxid peer id peerid respons buffer responsebuff get getlong heard from heardfrom add peer id peerid server id peer id peerid vote vote vote respons buffer responsebuff get getlong respons buffer responsebuff get getlong inet socket address inetsocketaddress addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress vote put addr vote io except ioexcept log warn ignor except leader error host down elect result electionresult result count vote countvot vote heard from heardfrom differ from leader elect leaderelect wait latch first time method ensur first round vote befor set current vote setcurrentvot call log info wait first round vote complet latch count down countdown asserttru thread time wait latch latch await 10000 time unit timeunit millisecond zookeep 569 vote receiv live peer reset vote hang vote dead peer result num valid vote numvalidvot self set current vote setcurrentvot vote self get id getid self get last log zxid getlastloggedzxid result winner get id getid self set current vote setcurrentvot result vote doesn us quorum verifi result win count winningcount self get vote view getvotingview size self set current vote setcurrentvot result winner close vote current self get current vote getcurrentvot log info found leader type self get learner type getlearnertyp make implement state machin correctli particip leader elect move lead follow observ error elect leader self get learner type getlearnertyp learner type learnertyp observ current get id getid self get id getid happen log error observ elect leader thread sleep 100 self set peer state setpeerst server state serverst observ thread sleep 100 current self set peer state setpeerst current get id getid self get id getid server state serverst lead server state serverst follow self get peer state getpeerst server state serverst follow thread sleep 100 current thread sleep 1000 mock quorum peer mockquorump quorum peer quorump mock quorum peer mockquorump map quorum server quorumserv quorum peer quorump file snap dir snapdir file log dir logdir client port clientport elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit io except ioexcept quorum peer quorump snap dir snapdir log dir logdir elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit server cnxn factori servercnxnfactori creat factori createfactori client port clientport quorum maj quorummaj count particip countparticip quorum peer quorump elect creat elect algorithm createelectionalgorithm elect algorithm electionalgorithm log info return mock leader elect mock leader elect mockleaderelect logger log logger factori loggerfactori get logger getlogg fle lost messag test flelostmessagetest count hash map hashmap quorum server quorumserv peer file tmpdir port befor set up setup except count peer hash map hashmap quorum server quorumserv count tmpdir file count port count count down latch countdownlatch latch count down latch countdownlatch count down latch countdownlatch mock latch mocklatch count down latch countdownlatch le thread lethread thread quorum peer quorump peer le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead fail thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid except print stack trace printstacktrac log info join test zk 569 three peer follow happen round vote round di vote ha di vote ignor reset vote le termin zk 569 fix reset vote set vote live peer test test non termin testnontermin except log info test non termin testnontermin get test name gettestnam count count clientport port assign portassign uniqu peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 clientport inet socket address inetsocketaddress 127 port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port clientport peer1 peer2 exampl quorum peer quorump peer1 mock quorum peer mockquorump peer tmpdir tmpdir port peer1 start leader elect startleaderelect le thread lethread thread1 le thread lethread peer1 quorum peer quorump peer2 mock quorum peer mockquorump peer tmpdir tmpdir port peer2 start leader elect startleaderelect le thread lethread thread2 le thread lethread peer2 start mock server thread thread3 thread run mock server mockserv except log error except fail except run mock server thread3 start asserttru mock server mockserv start 5s mock latch mocklatch await 5000 time unit timeunit millisecond thread1 start thread2 start occasion neg 5s timeout thread1 join 15000 thread2 join 15000 thread3 join 15000 thread1 aliv isal thread2 aliv isal thread3 aliv isal fail thread didn join mock server mockserv plai role peer respond two request vote vote self fail mock server mockserv interrupt except interruptedexcept io except ioexcept 36 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap datagram packet datagrampacket packet datagram packet datagrampacket length quorum server quorumserv server peer get valu valueof datagram socket datagramsocket udp socket udpsocket datagram socket datagramsocket server addr get port getport log info mock server mockserv mock latch mocklatch count down countdown vote current vote udp socket udpsocket receiv packet respons buffer responsebuff rewind log info receiv respons buffer responsebuff get getint respons buffer responsebuff get getlong respons buffer responsebuff get getlong log info from packet get socket address getsocketaddress respons buffer responsebuff clear respons buffer responsebuff get getint skip xid respons buffer responsebuff put putlong respons buffer responsebuff put putlong current get id getid respons buffer responsebuff put putlong current get zxid getzxid packet set data setdata udp socket udpsocket send packet 

mock leader elect mockleaderelect leader elect leaderelect mock leader elect mockleaderelect quorum peer quorump self self temporari ensur round vote befor peer updat vote easiest add latch wait after count vote intend make more testabl duplic code jmx bean method call remov reduc nois vote leader lookforlead interrupt except interruptedexcept self set current vote setcurrentvot vote self get id getid self get last log zxid getlastloggedzxid leader cast vote ourself request byte requestbyt buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt respons byte responsebyt 28 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap respons byte responsebyt current vote leader initi datagram socket datagramsocket datagram socket datagramsocket set timeout setsotimeout 200 socket except socketexcept e1 log error socket except creat socket leader elect e1 exit datagram packet datagrampacket request packet requestpacket datagram packet datagrampacket request byte requestbyt request byte requestbyt length datagram packet datagrampacket respons packet responsepacket datagram packet datagrampacket respons byte responsebyt respons byte responsebyt length xid epoch gen epochgen next nextint self run isrun hash map hashmap inet socket address inetsocketaddress vote vote hash map hashmap inet socket address inetsocketaddress vote self get vote view getvotingview size request buffer requestbuff clear request buffer requestbuff put putint xid request packet requestpacket set length setlength hash set hashset heard from heardfrom hash set hashset quorum server quorumserv server self get vote view getvotingview valu log info server address server addr request packet requestpacket set socket address setsocketaddress server addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr server addr send request packet requestpacket respons packet responsepacket set length setlength respons byte responsebyt length receiv respons packet responsepacket respons packet responsepacket get length getlength respons byte responsebyt length log error respons respons packet responsepacket get length getlength respons buffer responsebuff clear recv xid recvedxid respons buffer responsebuff get getint recv xid recvedxid xid log error bad xid expect xid recv xid recvedxid peer id peerid respons buffer responsebuff get getlong heard from heardfrom add peer id peerid server id peer id peerid vote vote vote respons buffer responsebuff get getlong respons buffer responsebuff get getlong inet socket address inetsocketaddress addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress vote put addr vote io except ioexcept log warn ignor except leader error host down elect result electionresult result count vote countvot vote heard from heardfrom differ from leader elect leaderelect wait latch first time method ensur first round vote befor set current vote setcurrentvot call log info wait first round vote complet latch count down countdown asserttru thread time wait latch latch await 10000 time unit timeunit millisecond zookeep 569 vote receiv live peer reset vote hang vote dead peer result num valid vote numvalidvot self set current vote setcurrentvot vote self get id getid self get last log zxid getlastloggedzxid result winner get id getid self set current vote setcurrentvot result vote doesn us quorum verifi result win count winningcount self get vote view getvotingview size self set current vote setcurrentvot result winner close vote current self get current vote getcurrentvot log info found leader type self get learner type getlearnertyp make implement state machin correctli particip leader elect move lead follow observ error elect leader self get learner type getlearnertyp learner type learnertyp observ current get id getid self get id getid happen log error observ elect leader thread sleep 100 self set peer state setpeerst server state serverst observ thread sleep 100 current self set peer state setpeerst current get id getid self get id getid server state serverst lead server state serverst follow self get peer state getpeerst server state serverst follow thread sleep 100 current thread sleep 1000 

mock quorum peer mockquorump quorum peer quorump mock quorum peer mockquorump map quorum server quorumserv quorum peer quorump file snap dir snapdir file log dir logdir client port clientport elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit io except ioexcept quorum peer quorump snap dir snapdir log dir logdir elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit server cnxn factori servercnxnfactori creat factori createfactori client port clientport quorum maj quorummaj count particip countparticip quorum peer quorump elect creat elect algorithm createelectionalgorithm elect algorithm electionalgorithm log info return mock leader elect mock leader elect mockleaderelect 

le thread lethread thread quorum peer quorump peer le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead fail thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid except print stack trace printstacktrac log info join 

elect vote leader lookforlead interrupt except interruptedexcept shutdown 

event type test eventtypetest zk test zktestcas test test convers testintconvers ensur convert valid integ event type eventtyp set enumset event type eventtyp type alltyp set enumset allof event type eventtyp event type eventtyp type alltyp equal assertequ event type eventtyp from fromint get valu getintvalu test test invalid convers testinvalidintconvers event type eventtyp event type eventtyp from fromint 324242 fail abl creat invalid event type eventtyp integ runtim except runtimeexcept good 

zoo inspector zooinspector param arg us valu paramet effect applic main string arg ui manag uimanag set feel setlookandfeel ui manag uimanag get feel name getsystemlookandfeelclassnam frame jframe frame frame jframe zoo inspector zooinspector frame set close oper setdefaultcloseoper frame jframe exit close exit close zoo inspector panel zooinspectorpanel zoo inspector panel zooinspectorpanel zoo inspector panel zooinspectorpanel zoo inspector manag impl zooinspectormanagerimpl frame add window listen addwindowlisten window adapt windowadapt overrid window close windowclos window event windowev window close windowclos zoo inspector panel zooinspectorpanel disconnect frame set content pane setcontentpan zoo inspector panel zooinspectorpanel frame set size setsiz 1024 768 frame set visibl setvis except logger factori loggerfactori get logger getlogg error error occur load zoo inspector zooinspector option pane joptionpan show messag dialog showmessagedialog zoo inspector zooinspector fail start get messag getmessag error option pane joptionpan error messag error messag 

singleton jax rs resourc access zoo keeper zookeep client singl session base uri on zoo keeper servic zookeeperservic logger log logger factori loggerfactori get logger getlogg zoo keeper servic zookeeperservic map base uri zoo keeper zookeep host port paramet map string endpoint context map contextmap hash map hashmap string endpoint map base uri zoo keeper zookeep session map string zoo keeper zookeep zk map zkmap hash map hashmap string zoo keeper zookeep session timer map string session timer task sessiontimertask zk session timer zksessiontim hash map hashmap string session timer task sessiontimertask timer timer timer track statu zoo keeper zookeep session watcher mywatch watcher string context path contextpath separ watcher base uri watcher mywatch string context path contextpath context path contextpath context path contextpath track state watch expir creation zk client session process watch event watchedev event event get state getstat keeper state keeperst expir close context path contextpath zoo keeper zookeep session timer session timer task sessiontimertask timer task timertask delai string context path contextpath session timer timer session timer task sessiontimertask delai second delayinsecond string session string context path contextpath timer timer delai delai second delayinsecond 1000 convert millisecond context path contextpath context path contextpath session session timer timer reset session timer task sessiontimertask session timer task sessiontimertask delai 1000 session context path contextpath timer overrid run log info enabl isinfoen log info string format session expir after millisecond session delai zoo keeper servic zookeeperservic close context path contextpath session reset timer schedul delai specifi zoo keeper zookeep host port context path host port string pass zk client format more singl host port pair map context mapcontext string context path contextpath endpoint context map contextmap put context path contextpath reset timer session reset timer resettim string context path contextpath string session session string uri concat context path contextpath session session timer task sessiontimertask zk session timer zksessiontim remov uri cancel zk session timer zksessiontim put uri session timer task sessiontimertask close zoo keeper zookeep session remov from intern map close string context path contextpath close context path contextpath close zoo keeper zookeep session remov close string context path contextpath string session string uri concat context path contextpath session timer task timertask zk session timer zksessiontim remov uri cancel zoo keeper zookeep zk zk map zkmap remov uri zk zk close interrupt except interruptedexcept log error interrupt close zoo keeper zookeep connect close zoo keeper zookeep session remov from intern map close closeal set string session tree set treeset string zk map zkmap kei set keyset string kei session close kei activ connect session connect isconnect string context path contextpath string session zk map zkmap contain kei containskei concat context path contextpath session zoo keeper zookeep client ti specif session zoo keeper zookeep get client getclient string context path contextpath io except ioexcept get client getclient context path contextpath zoo keeper zookeep client session expir time io except ioexcept zoo keeper zookeep get client getclient string context path contextpath string session io except ioexcept get client getclient context path contextpath session zoo keeper zookeep client connect expir method call multipl time object return session expir point session return zoo keeper zookeep get client getclient string context path contextpath string session expir time expiretim io except ioexcept string connect id connectionid concat context path contextpath session zoo keeper zookeep zk zk map zkmap get connect id connectionid zk log info enabl isinfoen log info string format creat connect connect id connectionid endpoint context map contextmap get context path contextpath zk zoo keeper zookeep get host port gethostport 30000 watcher mywatch connect id connectionid map entri string string get zoo keeper auth info getzookeeperauthinfo entri set entryset zk add auth info addauthinfo digest string format get kei getkei get valu getvalu get byte getbyt zk map zkmap put connect id connectionid zk session automat expir after amount time session zk session timer zksessiontim put connect id connectionid session timer task sessiontimertask expir time expiretim session context path contextpath timer zk string concat string context path contextpath string session session string format context path contextpath session context path contextpath 

track statu zoo keeper zookeep session watcher mywatch watcher string context path contextpath separ watcher base uri watcher mywatch string context path contextpath context path contextpath context path contextpath track state watch expir creation zk client session process watch event watchedev event event get state getstat keeper state keeperst expir close context path contextpath 

zoo keeper zookeep session timer session timer task sessiontimertask timer task timertask delai string context path contextpath session timer timer session timer task sessiontimertask delai second delayinsecond string session string context path contextpath timer timer delai delai second delayinsecond 1000 convert millisecond context path contextpath context path contextpath session session timer timer reset session timer task sessiontimertask session timer task sessiontimertask delai 1000 session context path contextpath timer overrid run log info enabl isinfoen log info string format session expir after millisecond session delai zoo keeper servic zookeeperservic close context path contextpath session reset timer schedul delai 

node viewer displai data current select node node viewer data nodeviewerdata zoo inspector node viewer zooinspectornodeview zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag text pane jtextpan data area dataarea tool bar jtoolbar toolbar string select node selectednod node viewer data nodeviewerdata set layout setlayout border layout borderlayout data area dataarea text pane jtextpan toolbar tool bar jtoolbar toolbar set floatabl setfloat scroll pane jscrollpan scroller scroll pane jscrollpan data area dataarea scroller set horizont scroll bar polici sethorizontalscrollbarpolici scroll pane jscrollpan horizont scrollbar horizont scrollbar add scroller border layout borderlayout center add toolbar border layout borderlayout north button jbutton save button savebutton button jbutton zoo inspector icon resourc zooinspectoriconresourc get save icon getsaveicon save button savebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev select node selectednod option pane joptionpan show confirm dialog showconfirmdialog node viewer data nodeviewerdata save node action revert confirm save option pane joptionpan ye option ye option option pane joptionpan warn messag warn messag option pane joptionpan ye option ye option zoo inspector manag zooinspectormanag set data setdata select node selectednod data area dataarea get text gettext toolbar add save button savebutton non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview get titl gettitl overrid string get titl gettitl node data non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview node select chang nodeselectionchang java util set overrid node select chang nodeselectionchang list string select node selectednod select node selectednod size select node selectednod select node selectednod get swing worker swingwork string worker swing worker swingwork string overrid string background doinbackground except node viewer data nodeviewerdata zoo inspector manag zooinspectormanag get data getdata node viewer data nodeviewerdata select node selectednod overrid done string data data get interrupt except interruptedexcept logger factori loggerfactori get logger getlogg error error retriev data node node viewer data nodeviewerdata select node selectednod execut except executionexcept logger factori loggerfactori get logger getlogg error error retriev data node node viewer data nodeviewerdata select node selectednod node viewer data nodeviewerdata data area dataarea set text settext data worker execut non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview set zoo inspector manag setzooinspectormanag org apach zookeep inspector manag zoo inspector node manag zooinspectornodemanag overrid set zoo inspector manag setzooinspectormanag zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag 

observ hierarch quorum test observerhierarchicalquorumtest hierarch quorum test hierarchicalquorumtest logger log logger factori loggerfactori get logger getlogg quorum base quorumbas start server startserv put two observ peer ensembl start server startserv except start server startserv shutdown quorum peer quorump qp quorum base quorumbas shutdown qp test test hierarch quorum testhierarchicalquorum throwabl cht run hammer runhamm 10 

snapshot convers upgrad snap shot upgradesnapshot data tree datatre get data tree getnewdatatre io except ioexcept concurr hash map concurrenthashmap integ get session time out getsessionwithtimeout 

specifi event handler implement zoo keeper zookeep client get event from zoo keepr zookeepr server connect applic client handl event regist callback object client callback object expect instanc watcher watcher defin state event repres event enumer state zoo keeper zookeep event keeper state keeperst unus state gener server deprec unknown client disconnect state connect server ensembl disconnect unus state gener server deprec sync connect nosyncconnect client connect state connect server ensembl on server specifi host connect paramet zoo keeper zookeep client creation sync connect syncconnect auth fail state auth fail authfail client connect read server server current connect major oper allow after receiv state read oper state gener read client read write client aren allow connect server connect read connectedreadonli sasl authent saslauthent us notifi client sasl authent perform zookeep action sasl author permiss sasl authent saslauthent serv cluster ha expir session zoo keeper zookeep client connect session longer valid creat client connect instanti zoo keeper zookeep instanc access ensembl expir 112 valu intvalu integ represent valu send wire keeper state keeperst valu intvalu valu intvalu valu intvalu get valu getintvalu valu intvalu keeper state keeperst from fromint valu intvalu valu intvalu keeper state keeperst unknown keeper state keeperst disconnect keeper state keeperst sync connect nosyncconnect keeper state keeperst sync connect syncconnect keeper state keeperst auth fail authfail keeper state keeperst connect read connectedreadonli keeper state keeperst sasl authent saslauthent 112 keeper state keeperst expir runtim except runtimeexcept invalid integ valu convers keeper state keeperst enumer type event occur zoo keeper zookeep event type eventtyp node creat nodecr node delet nodedelet node data chang nodedatachang node children chang nodechildrenchang valu intvalu integ represent valu send wire event type eventtyp valu intvalu valu intvalu valu intvalu get valu getintvalu valu intvalu event type eventtyp from fromint valu intvalu valu intvalu event type eventtyp event type eventtyp node creat nodecr event type eventtyp node delet nodedelet event type eventtyp node data chang nodedatachang event type eventtyp node children chang nodechildrenchang runtim except runtimeexcept invalid integ valu convers event type eventtyp abstract process watch event watchedev event 

defin state event repres event enumer state zoo keeper zookeep event keeper state keeperst unus state gener server deprec unknown client disconnect state connect server ensembl disconnect unus state gener server deprec sync connect nosyncconnect client connect state connect server ensembl on server specifi host connect paramet zoo keeper zookeep client creation sync connect syncconnect auth fail state auth fail authfail client connect read server server current connect major oper allow after receiv state read oper state gener read client read write client aren allow connect server connect read connectedreadonli sasl authent saslauthent us notifi client sasl authent perform zookeep action sasl author permiss sasl authent saslauthent serv cluster ha expir session zoo keeper zookeep client connect session longer valid creat client connect instanti zoo keeper zookeep instanc access ensembl expir 112 valu intvalu integ represent valu send wire keeper state keeperst valu intvalu valu intvalu valu intvalu get valu getintvalu valu intvalu keeper state keeperst from fromint valu intvalu valu intvalu keeper state keeperst unknown keeper state keeperst disconnect keeper state keeperst sync connect nosyncconnect keeper state keeperst sync connect syncconnect keeper state keeperst auth fail authfail keeper state keeperst connect read connectedreadonli keeper state keeperst sasl authent saslauthent 112 keeper state keeperst expir runtim except runtimeexcept invalid integ valu convers keeper state keeperst enumer type event occur zoo keeper zookeep event type eventtyp node creat nodecr node delet nodedelet node data chang nodedatachang node children chang nodechildrenchang valu intvalu integ represent valu send wire event type eventtyp valu intvalu valu intvalu valu intvalu get valu getintvalu valu intvalu event type eventtyp from fromint valu intvalu valu intvalu event type eventtyp event type eventtyp node creat nodecr event type eventtyp node delet nodedelet event type eventtyp node data chang nodedatachang event type eventtyp node children chang nodechildrenchang runtim except runtimeexcept invalid integ valu convers event type eventtyp 

enumer state zoo keeper zookeep event keeper state keeperst unus state gener server deprec unknown client disconnect state connect server ensembl disconnect unus state gener server deprec sync connect nosyncconnect client connect state connect server ensembl on server specifi host connect paramet zoo keeper zookeep client creation sync connect syncconnect auth fail state auth fail authfail client connect read server server current connect major oper allow after receiv state read oper state gener read client read write client aren allow connect server connect read connectedreadonli sasl authent saslauthent us notifi client sasl authent perform zookeep action sasl author permiss sasl authent saslauthent serv cluster ha expir session zoo keeper zookeep client connect session longer valid creat client connect instanti zoo keeper zookeep instanc access ensembl expir 112 valu intvalu integ represent valu send wire keeper state keeperst valu intvalu valu intvalu valu intvalu get valu getintvalu valu intvalu keeper state keeperst from fromint valu intvalu valu intvalu keeper state keeperst unknown keeper state keeperst disconnect keeper state keeperst sync connect nosyncconnect keeper state keeperst sync connect syncconnect keeper state keeperst auth fail authfail keeper state keeperst connect read connectedreadonli keeper state keeperst sasl authent saslauthent 112 keeper state keeperst expir runtim except runtimeexcept invalid integ valu convers keeper state keeperst 

enumer type event occur zoo keeper zookeep event type eventtyp node creat nodecr node delet nodedelet node data chang nodedatachang node children chang nodechildrenchang valu intvalu integ represent valu send wire event type eventtyp valu intvalu valu intvalu valu intvalu get valu getintvalu valu intvalu event type eventtyp from fromint valu intvalu valu intvalu event type eventtyp event type eventtyp node creat nodecr event type eventtyp node delet nodedelet event type eventtyp node data chang nodedatachang event type eventtyp node children chang nodechildrenchang runtim except runtimeexcept invalid integ valu convers event type eventtyp 

standalon server test standalon test standalonetest quorum peer test base quorumpeertestbas watcher logger log logger factori loggerfactori get logger getlogg standalon test standalonetest ensur singl standalon server up misconfigur singl server line configur handl base hbase configur zoo cfg maintain compat todo remov futur version test test standalon quorum teststandalonequorum except client base clientbas setup test env setuptestenv client port qp1 client port qp1 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect q1 start asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp1 client port qp1 connect timeout connect timeout q1 shutdown 

get children2 respons getchildren2respons record java util list string children org apach zookeep data stat stat get children2 respons getchildren2respons get children2 respons getchildren2respons java util list string children org apach zookeep data stat stat children children stat stat java util list string get children getchildren children set children setchildren java util list string children org apach zookeep data stat get stat getstat stat set stat setstat org apach zookeep data stat stat serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag start vector startvector children children children len1 children size vidx1 vidx1 len1 vidx1 string e1 string children get vidx1 write string writestr e1 e1 end vector endvector children children write record writerecord stat stat end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag index vidx1 start vector startvector children vidx1 children java util arrai list arraylist string vidx1 done vidx1 incr string e1 e1 read string readstr e1 children add e1 end vector endvector children stat org apach zookeep data stat read record readrecord stat stat end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord start vector startvector children children children len1 children size vidx1 vidx1 len1 vidx1 string e1 string children get vidx1 write string writestr e1 e1 end vector endvector children children write record writerecord stat stat end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar get children2 respons getchildren2respons unimpl equal object peer peer peer peer get children2 respons getchildren2respons peer peer get children2 respons getchildren2respons peer get children2 respons getchildren2respons peer peer ret ret children equal peer children ret ret ret stat equal peer stat ret ret ret hash code hashcod result 17 ret ret children hash code hashcod result 37 result ret ret stat hash code hashcod result 37 result ret result string signatur get children2 respons lgetchildren2respons stat lstat lllliiiliil 

us clean up snapshot data log dir run cronjob zookeep server machin invoc clean up datalogdir file snapdir file keep last snapshot file log purg txn log purgetxnlog logger log logger factori loggerfactori get logger getlogg purg txn log purgetxnlog print usag printusag println purg txn log purgetxnlog data log dir datalogdir snap dir snapdir count println tdata log dir tdatalogdir path txn log directori println tsnap dir tsnapdir path snapshot directori println tcount number old snap log keep exit purg snapshot log keep last num snapshot log param data dir datadir dir ha log param snap dir snapdir dir ha snapshot param num number snapshot keep io except ioexcept purg file data dir datadir file snap dir snapdir num io except ioexcept num illeg argument except illegalargumentexcept count greater file txn snap log filetxnsnaplog txn log txnlog file txn snap log filetxnsnaplog data dir datadir snap dir snapdir found valid recent snapshot file exclud from delet set file exc hash set hashset file list file snap txn log txnlog find recent snapshot findnrecentsnapshot num snap size file snap shot snapshot snap get snap size file snap exc add zxid util get zxid from name getzxidfromnam snap shot snapshot get name getnam snapshot exc add addal arrai list aslist txn log txnlog get snapshot log getsnapshotlog zxid set file exclud exc file filter myfilefilt file filter filefilt string prefix file filter myfilefilt string prefix prefix prefix accept file get name getnam start startswith prefix exclud contain add non exclud log file list file file arrai list arraylist file arrai list aslist txn log txnlog get data dir getdatadir list file listfil file filter myfilefilt log add non exclud snapshot file delet list file add addal arrai list aslist txn log txnlog get snap dir getsnapdir list file listfil file filter myfilefilt snapshot remov old file file file println remov file date format dateformat get date time instanc getdatetimeinst format last modifi lastmodifi get path getpath delet err println fail remov get path getpath param arg purg txn log purgetxnlog data log dir datalogdir data log dir datalogdir txn log directori num number snapshot keep main string arg io except ioexcept arg length arg length print usag printusag file data dir datadir file arg file snap dir snapdir data dir datadir arg length snap dir snapdir file arg num integ pars parseint arg purg data dir datadir snap dir snapdir num 

sasl auth test saslauthtest client base clientbas set properti setproperti zookeep auth provid authprovid org apach zookeep server auth sasl authent provid saslauthenticationprovid file tmp dir tmpdir creat tmp dir createtmpdir file sasl conf file saslconffil file tmp dir tmpdir jaa conf file writer filewrit fwriter file writer filewrit sasl conf file saslconffil fwriter write server org apach zookeep server auth digest login modul digestloginmodul requir user user test client org apach zookeep server auth digest login modul digestloginmodul requir usernam password test fwriter close set properti setproperti java secur auth login config sasl conf file saslconffil get absolut path getabsolutepath io except ioexcept creat tmp directori hold jaa conf file test fail atom integ atomicinteg auth fail authfail atom integ atomicinteg overrid testabl zoo keeper testablezookeep creat client createcli string hp io except ioexcept interrupt except interruptedexcept watcher mywatch watcher watcher mywatch creat client createcli watcher hp watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget process event test test auth testauth except zoo keeper zookeep zk creat client createcli zk creat path1 id creator acl creator acl creat mode createmod persist thread sleep 1000 zk close test test valid sasl id testvalidsaslid except zoo keeper zookeep zk creat client createcli list string valid id validid arrai list arraylist string valid id validid add user valid id validid add servic host name com valid id validid add user kerb realm valid id validid add servic host name com kerb realm string valid id validid valid id validid list acl acl list acllist arrai list arraylist acl acl acl acl id sasl valid id validid acl list acllist add acl zk creat valid acl list acllist creat mode createmod persist test test invalid sasl id testinvalidsaslid except zoo keeper zookeep zk creat client createcli list string invalid id invalidid arrai list arraylist string invalid id invalidid add user kerb realm server com invalid id invalidid add user kerb realm1 kerb realm2 string invalid id invalidid invalid id invalidid list acl acl list acllist arrai list arraylist acl acl acl acl id sasl invalid id invalidid acl list acllist add acl zk creat invalid acl list acllist creat mode createmod persist fail sasl authent provid saslauthenticationprovid valid isvalid fail invalid id keeper except keeperexcept invalid acl except invalidaclexcept 

watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget process event 

fs json servlet jsonservlet string handl request handlerequest json request jsonrequest request except string output json arrai jsonarrai filelist json arrai jsonarrai file base file request get string getstr path base exist base directori isdirectori file found except filenotfoundexcept couldn find request file file base list file listfil arrai sort file compar file compar file o1 file o2 o1 directori isdirectori o2 directori isdirectori o1 directori isdirectori o1 get name getnam compar ignor comparetoignorecas o2 get name getnam file file json object jsonobject json object jsonobject put file get name getnam put type directori isdirectori put path get canon path getcanonicalpath filelist add json valu jsonvalu json string tojsonstr filelist 

zoo keeper zookeep server bean mbean zoo keeper server bean zookeeperserverbean zoo keeper server mx bean zookeeperservermxbean zkm bean info zkmbeaninfo date start time starttim string name zoo keeper server zookeeperserv zk zoo keeper server bean zookeeperserverbean zoo keeper server zookeeperserv zk start time starttim date zk zk name standalon server port standaloneserv port zk get client port getclientport string get client port getclientport inet address inetaddress get local host getlocalhost get host address gethostaddress zk get client port getclientport unknown host except unknownhostexcept localhost zk get client port getclientport string get name getnam name hidden ishidden string get start time getstarttim start time starttim string tostr string get version getvers version get full version getfullvers get avg request latenc getavgrequestlat zk server stat serverstat get avg latenc getavglat get max request latenc getmaxrequestlat zk server stat serverstat get max latenc getmaxlat get min request latenc getminrequestlat zk server stat serverstat get min latenc getminlat get outstand request getoutstandingrequest zk server stat serverstat get outstand request getoutstandingrequest get tick time getticktim zk get tick time getticktim set tick time setticktim tick time ticktim zk set tick time setticktim tick time ticktim get max client cnxn host getmaxclientcnxnsperhost server cnxn factori servercnxnfactori fac zk get server cnxn factori getservercnxnfactori fac fac get max client cnxn host getmaxclientcnxnsperhost set max client cnxn host setmaxclientcnxnsperhost max fac except propag client zk get server cnxn factori getservercnxnfactori set max client cnxn host setmaxclientcnxnsperhost max get min session timeout getminsessiontimeout zk get min session timeout getminsessiontimeout set min session timeout setminsessiontimeout min zk set min session timeout setminsessiontimeout min get max session timeout getmaxsessiontimeout zk get max session timeout getmaxsessiontimeout set max session timeout setmaxsessiontimeout max zk set max session timeout setmaxsessiontimeout max get packet receiv getpacketsreceiv zk server stat serverstat get packet receiv getpacketsreceiv get packet sent getpacketss zk server stat serverstat get packet sent getpacketss reset latenc resetlat zk server stat serverstat reset latenc resetlat reset max latenc resetmaxlat zk server stat serverstat reset max latenc resetmaxlat reset statist resetstatist server stat serverstat server stat serverstat zk server stat serverstat server stat serverstat reset request counter resetrequestcount server stat serverstat reset latenc resetlat get num aliv connect getnumaliveconnect zk get num aliv connect getnumaliveconnect 

binari output archiv binaryoutputarch output archiv outputarch buffer bytebuff bb buffer bytebuff alloc 1024 data output dataoutput binari output archiv binaryoutputarch get archiv getarch output stream outputstream strm binari output archiv binaryoutputarch data output stream dataoutputstream strm creat instanc binari output archiv binaryoutputarch binari output archiv binaryoutputarch data output dataoutput write writebyt string tag io except ioexcept write writebyt write writebool string tag io except ioexcept write writeboolean write writeint string tag io except ioexcept write writeint write writelong string tag io except ioexcept write writelong write writefloat string tag io except ioexcept write writefloat write writedoubl string tag io except ioexcept write writedoubl creat encod utf8 faster string getbyt utf8 param string encod utf8 utf8 sequenc buffer bytebuff string buffer stringtobytebuff sequenc charsequ bb clear len length len bb remain buffer bytebuff buffer bytebuff alloc bb capac bb flip put bb bb charat x80 0x80 bb put x800 0x800 bb put xc0 0xc0 bb put x80 0x80 x3f 0x3f bb put xe0 0xe0 12 bb put x80 0x80 x3f 0x3f bb put x80 0x80 x3f 0x3f bb flip bb write string writestr string string tag io except ioexcept write writeint len buffer bytebuff bb string buffer stringtobytebuff write writeint bb remain len write bb arrai bb posit bb limit write buffer writebuff barr string tag io except ioexcept barr write writeint write writeint barr length write barr write record writerecord record string tag io except ioexcept serial tag start record startrecord record string tag io except ioexcept end record endrecord record string tag io except ioexcept start vector startvector list string tag io except ioexcept write writeint tag write writeint size tag end vector endvector list string tag io except ioexcept start map startmap tree map treemap string tag io except ioexcept write writeint size tag end map endmap tree map treemap string tag io except ioexcept 

server admin client serveradmincli logger log logger factori loggerfactori get logger getlogg server admin client serveradmincli get mask getmask string mask retv mask equal ignor equalsignorecas client request trace mask client request trace mask retv zoo trace zootrac client request trace mask client request trace mask mask equal ignor equalsignorecas client data packet trace mask client data packet trace mask retv zoo trace zootrac client data packet trace mask client data packet trace mask mask equal ignor equalsignorecas client ping trace mask client ping trace mask retv zoo trace zootrac client ping trace mask client ping trace mask mask equal ignor equalsignorecas server packet trace mask server packet trace mask retv zoo trace zootrac server packet trace mask server packet trace mask mask equal ignor equalsignorecas session trace mask session trace mask retv zoo trace zootrac session trace mask session trace mask mask equal ignor equalsignorecas event deliveri trace mask event deliveri trace mask retv zoo trace zootrac event deliveri trace mask event deliveri trace mask mask equal ignor equalsignorecas server ping trace mask server ping trace mask retv zoo trace zootrac server ping trace mask server ping trace mask mask equal ignor equalsignorecas warn trace mask warn trace mask retv zoo trace zootrac warn trace mask warn trace mask retv get mask getmask string mask retv string token stringtoken st string token stringtoken mask st ha more token hasmoretoken string mask st next token nexttoken trim retv retv get mask getmask mask retv ruok string host port socket req byte reqbyt buffer bytebuff req buffer bytebuff wrap req byte reqbyt req put putint buffer bytebuff wrap ruok get byte getbyt get getint socket set linger setsoling 10 set timeout setsotimeout 20000 connect inet socket address inetsocketaddress host port input stream inputstream get input stream getinputstream output stream outputstream os get output stream getoutputstream os write req byte reqbyt re byte resbyt rc read re byte resbyt string retv string re byte resbyt println rc rc retv retv io except ioexcept log warn unexpect except close io except ioexcept log warn unexpect except dump string host port socket req byte reqbyt buffer bytebuff req buffer bytebuff wrap req byte reqbyt req put putint buffer bytebuff wrap dump get byte getbyt get getint socket set linger setsoling 10 set timeout setsotimeout 20000 connect inet socket address inetsocketaddress host port input stream inputstream get input stream getinputstream output stream outputstream os get output stream getoutputstream os write req byte reqbyt re byte resbyt 1024 rc read re byte resbyt string retv string re byte resbyt println rc rc retv retv io except ioexcept log warn unexpect except close io except ioexcept log warn unexpect except stat string host port socket req byte reqbyt buffer bytebuff req buffer bytebuff wrap req byte reqbyt req put putint buffer bytebuff wrap stat get byte getbyt get getint socket set linger setsoling 10 set timeout setsotimeout 20000 connect inet socket address inetsocketaddress host port input stream inputstream get input stream getinputstream output stream outputstream os get output stream getoutputstream os write req byte reqbyt re byte resbyt 1024 rc read re byte resbyt string retv string re byte resbyt println rc rc retv retv io except ioexcept log warn unexpect except close io except ioexcept log warn unexpect except kill string host port socket req byte reqbyt buffer bytebuff req buffer bytebuff wrap req byte reqbyt req put putint buffer bytebuff wrap kill get byte getbyt get getint socket set linger setsoling 10 set timeout setsotimeout 20000 connect inet socket address inetsocketaddress host port input stream inputstream get input stream getinputstream output stream outputstream os get output stream getoutputstream os write req byte reqbyt re byte resbyt rc read re byte resbyt string retv string re byte resbyt println rc rc retv retv io except ioexcept log warn unexpect except close io except ioexcept log warn unexpect except set trace mask settracemask string host port string trace mask str tracemaskstr socket req byte reqbyt 12 buffer bytebuff req buffer bytebuff wrap req byte reqbyt trace mask tracemask pars parselong trace mask str tracemaskstr req put putint buffer bytebuff wrap stmk get byte getbyt get getint req put putlong trace mask tracemask socket set linger setsoling 10 set timeout setsotimeout 20000 connect inet socket address inetsocketaddress host port input stream inputstream get input stream getinputstream output stream outputstream os get output stream getoutputstream os write req byte reqbyt re byte resbyt rc read re byte resbyt buffer bytebuff re buffer bytebuff wrap re byte resbyt retv re get getlong println rc rc retv octal string tooctalstr retv mask octal string tooctalstr trace mask tracemask retv trace mask tracemask io except ioexcept log warn unexpect except close io except ioexcept log warn unexpect except get trace mask gettracemask string host port socket req byte reqbyt 12 buffer bytebuff req buffer bytebuff wrap req byte reqbyt req put putint buffer bytebuff wrap gtmk get byte getbyt get getint socket set linger setsoling 10 set timeout setsotimeout 20000 connect inet socket address inetsocketaddress host port input stream inputstream get input stream getinputstream output stream outputstream os get output stream getoutputstream os write req byte reqbyt re byte resbyt rc read re byte resbyt buffer bytebuff re buffer bytebuff wrap re byte resbyt retv re get getlong println rc rc retv octal string tooctalstr retv io except ioexcept log warn unexpect except close io except ioexcept log warn unexpect except usag println usag java cp classpath org apach zookeep server admin client serveradmincli host port op ruok stat dump kill gettracemask settracemask argument main string arg arg length usag string host arg port integ pars parseint arg string op arg op equal ignor equalsignorecas gettracemask get trace mask gettracemask host port op equal ignor equalsignorecas settracemask set trace mask settracemask host port arg op equal ignor equalsignorecas ruok ruok host port op equal ignor equalsignorecas kill kill host port op equal ignor equalsignorecas stat stat host port op equal ignor equalsignorecas dump dump host port println unrecogn op op 

zk util zkutil logger log logger factori loggerfactori get logger getlogg zk util zkutil recurs delet node path import version node node delet error delet on sub node tree oper abort respons app handl link delet string more detail illeg argument except illegalargumentexcept invalid path specifi delet recurs deleterecurs zoo keeper zookeep zk string path root pathroot interrupt except interruptedexcept keeper except keeperexcept path util pathutil valid path validatepath path root pathroot list string tree list sub tree bf listsubtreebf zk path root pathroot log debug delet tree log debug delet tree size subnod tree size delet leav first eventu get rid root zk delet tree get delet version node recurs delet node path async version import version node node delet error delet on sub node tree oper abort respons app handl param zk zookeep handl param path root pathroot path delet param cb call back method param ctx context callback method call illeg argument except illegalargumentexcept invalid path specifi delet recurs deleterecurs zoo keeper zookeep zk string path root pathroot callback voidcallback cb object ctx interrupt except interruptedexcept keeper except keeperexcept path util pathutil valid path validatepath path root pathroot list string tree list sub tree bf listsubtreebf zk path root pathroot log debug delet tree log debug delet tree size subnod tree size delet leav first eventu get rid root zk delet tree get cb ctx delet version node bf travers path root pathroot entri list order travers import atom snapshot tree state exist multipl rpc from zk client zkclient ensembl practic purpos suggest bring client ensembl down prevent write path root pathroot simul snapshot behavior param zk zookeep handl param path root pathroot znode path entir subtre list interrupt except interruptedexcept keeper except keeperexcept list string list sub tree bf listsubtreebf zoo keeper zookeep zk string path root pathroot keeper except keeperexcept interrupt except interruptedexcept dequ string queue link list linkedlist string list string tree arrai list arraylist string queue add path root pathroot tree add path root pathroot string node queue poll first pollfirst node list string children zk get children getchildren node string child children string child path childpath node child queue add child path childpath tree add child path childpath tree 

implement local peer bean mbean local peer bean localpeerbean server bean serverbean local peer mx bean localpeermxbean quorum peer quorump peer local peer bean localpeerbean quorum peer quorump peer peer peer string get name getnam replica peer get id getid hidden ishidden get tick time getticktim peer get tick time getticktim get max client cnxn host getmaxclientcnxnsperhost peer get max client cnxn host getmaxclientcnxnsperhost get min session timeout getminsessiontimeout peer get min session timeout getminsessiontimeout get max session timeout getmaxsessiontimeout peer get max session timeout getmaxsessiontimeout get init limit getinitlimit peer get init limit getinitlimit get sync limit getsynclimit peer get sync limit getsynclimit get tick gettick peer get tick gettick string get state getstat peer get state getstat string tostr string get quorum address getquorumaddress peer get quorum address getquorumaddress string tostr get elect type getelectiontyp peer get elect type getelectiontyp 

jint type jtype creat instanc jint jint int32 int32 int32 int32 integ toint string get signatur getsignatur 

local zookeep server bean mbean unlik remot peer local peer complet state statist runtim manag standalon zookeep server local peer mx bean localpeermxbean server mx bean servermxbean number millisecond tick get tick time getticktim current max client cnxn maxclientcnxn allow from host get max client cnxn host getmaxclientcnxnsperhost minimum number millisecond allow session timeout get min session timeout getminsessiontimeout maximum number millisecond allow session timeout get max session timeout getmaxsessiontimeout number tick initi sync phase get init limit getinitlimit number tick pass send request get acknowledg get sync limit getsynclimit current tick get tick gettick current server state string get state getstat quorum address string get quorum address getquorumaddress elect type get elect type getelectiontyp 

jbyte type jtype creat instanc jbyte jbyte int8 int8 tobyt string get signatur getsignatur 

builder style multipl updat layer zookeep multi transact zoo keeper zookeep zk list op op arrai list arraylist op transact zoo keeper zookeep zk zk zk transact creat string path data list acl acl creat mode createmod creat mode createmod op add op creat path data acl creat mode createmod flag toflag transact delet string path version op add op delet path version transact check string path version op add op check path version transact set data setdata string path data version op add op set data setdata path data version list op result opresult commit interrupt except interruptedexcept keeper except keeperexcept zk multi op 

atom file output stream test atomicfileoutputstreamtest zk test zktestcas string test string test string hello world string test string test string goodby world file test dir testdir file dst file dstfile befor setup test dir setuptestdir io except ioexcept test dir testdir client base clientbas creat tmp dir createtmpdir dst file dstfile file test dir testdir test txt after cleanup test dir cleanuptestdir io except ioexcept client base clientbas recurs delet recursivedelet test dir testdir test exist file test test write file testwritenewfil io except ioexcept output stream outputstream fo atom file output stream atomicfileoutputstream dst file dstfile assertfals dst file dstfile exist fo write test string test string get byte getbyt fo flush assertfals dst file dstfile exist fo close asserttru dst file dstfile exist string read back data readbackdata client base clientbas read file readfil dst file dstfile equal assertequ test string test string read back data readbackdata test exist file test test overwrit file testoverwritefil io except ioexcept asserttru creat empti dst file dst file dstfile creat file createnewfil output stream outputstream fo atom file output stream atomicfileoutputstream dst file dstfile asserttru empti file exist dst file dstfile exist fo write test string test string get byte getbyt fo flush origin content place equal assertequ client base clientbas read file readfil dst file dstfile fo close content replac origin file string read back data readbackdata client base clientbas read file readfil dst file dstfile equal assertequ test string test string read back data readbackdata test flush fail close time make clean up after don touch exist file destin test test fail flush testfailtoflush io except ioexcept creat file destin file output stream fileoutputstream fo file output stream fileoutputstream dst file dstfile fo write test string test string get byte getbyt fo close output stream outputstream fail stream failingstream creat fail stream createfailingstream fail stream failingstream write test string test string get byte getbyt fail stream failingstream close fail close didn except io except ioexcept ioe expect touch origin file equal assertequ test string test string client base clientbas read file readfil dst file dstfile equal assertequ temporari file clean up dst file dstfile get name getnam client base clientbas join test dir testdir list creat stream fail flush close time output stream outputstream creat fail stream createfailingstream file found except filenotfoundexcept atom file output stream atomicfileoutputstream dst file dstfile overrid flush io except ioexcept io except ioexcept inject failur ensur tmp file clean up dst file dstfile creat abort file test test abort file testabortnewfil io except ioexcept atom file output stream atomicfileoutputstream fo atom file output stream atomicfileoutputstream dst file dstfile fo abort equal assertequ test dir testdir list length ensur tmp file clean up dst file dstfile creat abort file test test abort file after flush testabortnewfileafterflush io except ioexcept atom file output stream atomicfileoutputstream fo atom file output stream atomicfileoutputstream dst file dstfile fo write test string test string get byte getbyt fo flush fo abort equal assertequ test dir testdir list length ensur tmp file clean up dst file dstfile untouch abort exist file overwrit test test abort exist file testabortexistingfil io except ioexcept file output stream fileoutputstream fos1 file output stream fileoutputstream dst file dstfile fos1 write test string test string get byte getbyt fos1 close atom file output stream atomicfileoutputstream fos2 atom file output stream atomicfileoutputstream dst file dstfile fos2 abort touch origin file equal assertequ test string test string client base clientbas read file readfil dst file dstfile equal assertequ test dir testdir list length ensur tmp file clean up dst file dstfile untouch abort exist file overwrit test test abort exist file after flush testabortexistingfileafterflush io except ioexcept file output stream fileoutputstream fos1 file output stream fileoutputstream dst file dstfile fos1 write test string test string get byte getbyt fos1 close atom file output stream atomicfileoutputstream fos2 atom file output stream atomicfileoutputstream dst file dstfile fos2 write test string test string get byte getbyt fos2 flush fos2 abort touch origin file equal assertequ test string test string client base clientbas read file readfil dst file dstfile equal assertequ test dir testdir list length 

leader bean mbean implement leader bean leaderbean zoo keeper server bean zookeeperserverbean leader mx bean leadermxbean leader leader leader bean leaderbean leader leader zoo keeper server zookeeperserv zk zk leader leader string get name getnam leader string get current zxid getcurrentzxid 0x hex string tohexstr zk get zxid getzxid string follow info followerinfo string builder stringbuild sb string builder stringbuild learner handler learnerhandl handler leader get learner getlearn sb append handler string tostr append sb string tostr 

digest authent provid digestauthenticationprovid authent provid authenticationprovid logger log logger factori loggerfactori get logger getlogg digest authent provid digestauthenticationprovid specifi command line properti kei zookeep digest authent provid digestauthenticationprovid digest superdigest valu base64 encod base64encod sha1 password enabl user access acl disabl string digest superdigest get properti getproperti zookeep digest authent provid digestauthenticationprovid digest superdigest string get scheme getschem digest string base64 encod base64encod string builder stringbuild sb string builder stringbuild length pad xff 0xff 16 length xff 0xff pad length xff 0xff pad sb append encod 18 sb append encod 12 pad sb append encod sb append pad sb append encod sb append sb string tostr encod x3f 0x3f 26 52 26 62 52 62 string gener digest generatedigest string id password idpassword algorithm except nosuchalgorithmexcept string part id password idpassword split digest messag digest messagedigest get instanc getinst sha1 digest id password idpassword get byte getbyt part base64 encod base64encod digest keeper except keeperexcept code handl authent handleauthent server cnxn servercnxn cnxn auth data authdata string id string auth data authdata string digest gener digest generatedigest id digest equal digest superdigest cnxn add auth info addauthinfo id cnxn add auth info addauthinfo id get scheme getschem digest keeper except keeperexcept code algorithm except nosuchalgorithmexcept log error miss algorithm keeper except keeperexcept code authfail authent isauthent valid isvalid string id string part id split part length match string id string acl expr aclexpr id equal acl expr aclexpr call singl argument user pass gener authdata authdata output us set digest superdigest exampl param arg singl argument user pass algorithm except nosuchalgorithmexcept main string arg algorithm except nosuchalgorithmexcept arg length println arg gener digest generatedigest arg 

observ le test observerletest zk test zktestcas quorum base quorumbas qb quorum base quorumbas client test clienttest ct client test clienttest befor establish three particip on observ ensembl establishthreeparticipantoneobserverensembl except qb set up setup ct host port hostport qb host port hostport ct set up setupal qb s5 shutdown after shutdown quorum shutdownquorum except ct tear down teardownal qb tear down teardown zookeep 1294 confirm observ support quorum leader form node observ ensembl quorum size leader on observ shut down leader enter state stai lead state test test le observ testlewithobserv except quorum peer quorump leader quorum peer quorump server arrai list aslist qb s1 qb s2 qb s3 server get server state getserverst equal quorum stat quorumstat provid follow state follow state server shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 server get client port getclientport client base clientbas connect timeout connect timeout assertnul more on leader found leader leader server asserttru leader state client base clientbas wait server state waitforserverst leader client base clientbas connect timeout connect timeout quorum stat quorumstat provid state state 

run test nio client netti server suit suit class suiteclass async hammer test asynchammertest nio netti suit hammer test nionettysuitehammertest nio netti suit base nionettysuitebas 

throughput json servlet jsonservlet ms sec ms sec 1000 ms min ms min ms sec ms sec 60 ms hour ms hour ms min ms min 60 log sourc logsourc sourc throughput log sourc logsourc src except sourc src string handl request handlerequest json request jsonrequest request except starttim endtim period scale starttim request get number getnumb start endtim request get number getnumb end period request get number getnumb period starttim starttim sourc get start time getstarttim endtim period endtim starttim period endtim sourc get end time getendtim string scalestr request get string getstr scale minut scalestr equal second scale ms sec ms sec scalestr equal hour scale ms hour ms hour scale ms min ms min log iter logiter iter sourc iter starttim endtim current currentm hash set hashset zxid ms zxid ms hash set hashset zxidcount json arrai jsonarrai event json arrai jsonarrai iter ha next hasnext log entri logentri iter next get type gettyp log entri logentri type txn transact entri transactionentri cxn transact entri transactionentri ms cxn get timestamp gettimestamp inscal ms scale currentm ms currentm zxidcount zxid ms zxid ms size zxid ms zxid ms clear inscal current current json object jsonobject json object jsonobject put time current scale put count zxidcount event add zxidcount current inscal currentm ms zxid ms zxid ms add cxn get zxid getzxid json object jsonobject json object jsonobject put time current scale put count zxidcount event add iter close json valu jsonvalu json string tojsonstr event 

filter except filterexcept except filter except filterexcept string 

sasl auth fail design client test saslauthfaildesignatedclienttest client base clientbas set properti setproperti zookeep auth provid authprovid org apach zookeep server auth sasl authent provid saslauthenticationprovid set properti setproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei zookeep client myzookeepercli file tmp dir tmpdir creat tmp dir createtmpdir file sasl conf file saslconffil file tmp dir tmpdir jaa conf file writer filewrit fwriter file writer filewrit sasl conf file saslconffil fwriter write server org apach zookeep server auth digest login modul digestloginmodul requir user myuser user myuser mypassword client client section ha correct password configur us configur set properti setproperti login context name kei login context name kei us zookeep client myzookeepercli section ha incorrect password org apach zookeep server auth digest login modul digestloginmodul requir usernam myuser password mypassword zookeep client myzookeepercli org apach zookeep server auth digest login modul digestloginmodul requir usernam myuser password wrongpassword fwriter close set properti setproperti java secur auth login config sasl conf file saslconffil get absolut path getabsolutepath io except ioexcept creat tmp directori hold jaa conf file test fail atom integ atomicinteg auth fail authfail atom integ atomicinteg watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget process event test test auth testauth except zoo keeper zookeep zk creat client createcli zk creat path1 id creator acl creator acl creat mode createmod persist fail except keeper except keeperexcept except expect log info except expect zk close 

watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget process event 

fle epoch test flenewepochtest zk test zktestcas logger log logger factori loggerfactori get logger getlogg fle epoch test flenewepochtest count hash map hashmap quorum server quorumserv peer arrai list arraylist le thread lethread thread file tmpdir port round semaphor start0 semaphor finish3 finish0 befor set up setup except count peer hash map hashmap quorum server quorumserv count thread arrai list arraylist le thread lethread count tmpdir file count port count round round round round start0 semaphor finish0 semaphor finish3 semaphor after tear down teardown except thread size fast leader elect fastleaderelect thread get peer get elect alg getelectionalg shutdown le thread lethread thread quorum peer quorump peer le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run flag flag vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead fail thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote log info first peer join finish0 acquir tryacquir 1000 java util concurr time unit timeunit millisecond thread get peer get peer state getpeerst server state serverst lead log info set flag flag log info second enter round finish0 releas flag finish3 acquir start0 releas log info second start second round round log info third peer shut down quorum base quorumbas shutdown peer flag round finish3 releas log info third leav except print stack trace printstacktrac test test le epoch testlenewepoch except fast leader elect fastleaderelect le fast leader elect fastleaderelect count log info test le testl get test name gettestnam count count peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress port assign portassign uniqu inet socket address inetsocketaddress port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port port assign portassign uniqu le length quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect le thread lethread thread le thread lethread peer thread start thread add thread start0 acquir tryacquir 4000 java util concurr time unit timeunit millisecond fail first leader elect fail quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect le thread lethread thread le thread lethread peer thread start thread add thread log info start thread get test name gettestnam thread size thread get join 10000 thread get aliv isal fail thread didn join 

le thread lethread thread quorum peer quorump peer le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run flag flag vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead fail thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote log info first peer join finish0 acquir tryacquir 1000 java util concurr time unit timeunit millisecond thread get peer get peer state getpeerst server state serverst lead log info set flag flag log info second enter round finish0 releas flag finish3 acquir start0 releas log info second start second round round log info third peer shut down quorum base quorumbas shutdown peer flag round finish3 releas log info third leav except print stack trace printstacktrac 

client hammer test clienthammertest client base clientbas logger log logger factori loggerfactori get logger getlogg client hammer test clienthammertest hammerthread latenc hammerthread latenc abstract hammer thread hammerthread thread count current hammer thread hammerthread string name count name count count basic hammer thread basichammerthread hammer thread hammerthread zoo keeper zookeep zk string prefix basic hammer thread basichammerthread string name zoo keeper zookeep zk string prefix count name count zk zk prefix prefix run 256 current count current simul bit network latenc thread sleep hammerthread latenc hammerthread latenc zk creat prefix current id open acl unsaf open acl unsaf creat mode createmod persist throwabl log error client creat oper fail zk close interrupt except interruptedexcept log warn unexpect hammer thread superhammerthread hammer thread hammerthread client hammer test clienthammertest parent string prefix hammer thread superhammerthread string name client hammer test clienthammertest parent string prefix count name count parent parent prefix prefix run 256 current count current zoo keeper zookeep zk parent creat client createcli zk creat prefix current id open acl unsaf open acl unsaf creat mode createmod persist zk close interrupt except interruptedexcept log warn unexpect throwabl log error client creat oper fail separ thread creat number node thread non share own thread client node creation throwabl test test hammer basic testhammerbas throwabl run hammer runhamm 10 1000 run hammer runhamm thread count threadcount child count childcount throwabl hammer thread hammerthread thread hammer thread hammerthread thread count threadcount start current time milli currenttimemilli thread length zoo keeper zookeep zk creat client createcli string prefix test zk creat prefix id open acl unsaf open acl unsaf creat mode createmod persist prefix hammer thread hammerthread thread basic hammer thread basichammerthread basic hammer thread basichammerthread zk prefix child count childcount thread start thread thread verifi hammer verifyhamm start thread child count childcount throwabl log error test fail separ thread creat number node thread creat client node creation throwabl test test hammer testhammersup throwabl thread count threadcount child count childcount 10 hammer thread hammerthread thread hammer thread hammerthread thread count threadcount start current time milli currenttimemilli thread length string prefix test zoo keeper zookeep zk creat client createcli zk creat prefix id open acl unsaf open acl unsaf creat mode createmod persist zk close prefix hammer thread hammerthread thread hammer thread superhammerthread hammer thread superhammerthread prefix child count childcount thread start thread thread verifi hammer verifyhamm start thread child count childcount throwabl log error test fail verifi hammer verifyhamm start hammer thread hammerthread thread child count childcount io except ioexcept interrupt except interruptedexcept keeper except keeperexcept client finish creat oper log info start check complet hammer work count workingcount thread length 120 thread sleep 10000 hammer thread hammerthread thread aliv isal current count work count workingcount work count workingcount work count workingcount thread length work count workingcount hammer thread hammerthread thread log warn get name getnam finish creation current current log info hammer thread complet creation oper hammer thread hammerthread thread safeti factor safetyfactor verifi thread termin verifythreadtermin thread length child count childcount hammerthread latenc hammerthread latenc safeti factor safetyfactor log info date total time current time milli currenttimemilli start zoo keeper zookeep zk creat client createcli log info connect zoo keeper zookeep date thread length log info thread date list string children zk get children getchildren test equal assertequ child count childcount children size children zk get children getchildren test equal assertequ child count childcount children size thread length list string children zk get children getchildren test equal assertequ child count childcount children size children zk get children getchildren test equal assertequ child count childcount children size zk close 

abstract hammer thread hammerthread thread count current hammer thread hammerthread string name count name count count 

basic hammer thread basichammerthread hammer thread hammerthread zoo keeper zookeep zk string prefix basic hammer thread basichammerthread string name zoo keeper zookeep zk string prefix count name count zk zk prefix prefix run 256 current count current simul bit network latenc thread sleep hammerthread latenc hammerthread latenc zk creat prefix current id open acl unsaf open acl unsaf creat mode createmod persist throwabl log error client creat oper fail zk close interrupt except interruptedexcept log warn unexpect 

hammer thread superhammerthread hammer thread hammerthread client hammer test clienthammertest parent string prefix hammer thread superhammerthread string name client hammer test clienthammertest parent string prefix count name count parent parent prefix prefix run 256 current count current zoo keeper zookeep zk parent creat client createcli zk creat prefix current id open acl unsaf open acl unsaf creat mode createmod persist zk close interrupt except interruptedexcept log warn unexpect throwabl log error client creat oper fail 

exist request existsrequest record string path watch exist request existsrequest exist request existsrequest string path watch path path watch watch string get path getpath path set path setpath string path get watch getwatch watch set watch setwatch watch serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writebool watch watch end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path watch read readbool watch end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writebool watch watch end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer exist request existsrequest cast except classcastexcept compar differ type record exist request existsrequest peer exist request existsrequest peer peer ret ret path compar compareto peer path ret ret ret watch peer watch watch ret ret ret equal object peer peer peer peer exist request existsrequest peer peer exist request existsrequest peer exist request existsrequest peer peer ret ret path equal peer path ret ret ret watch peer watch ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret watch result 37 result ret result string signatur exist request lexistsrequest sz 

trace formatt traceformatt string op2 string op2str op op op code opcod notif notif op code opcod creat creat op code opcod delet delet op code opcod exist exist op code opcod get data getdata get date getdat op code opcod set data setdata set data setdata op code opcod multi multi op code opcod get acl getacl get acl getacl op code opcod set acl setacl set acl setacl op code opcod get children getchildren get children getchildren op code opcod get children2 getchildren2 get children2 getchildren2 op code opcod ping ping op code opcod creat session createsess creat session createsess op code opcod close session closesess close session closesess op code opcod error error unknown op param arg io except ioexcept main string arg io except ioexcept arg length err println usag trace formatt traceformatt trace file trace file exit file channel filechannel fc file input stream fileinputstream arg get channel getchannel buffer bytebuff bb buffer bytebuff alloc 41 fc read bb bb flip app bb get time bb get getlong id bb get getlong cxid bb get getint zxid bb get getlong txn type txntype bb get getint type bb get getint len bb get getint bb buffer bytebuff alloc len fc read bb bb flip string path bb remain type op code opcod creat session createsess path len pathlen bb get getint path len pathlen bb get path string println date format dateformat get date time instanc getdatetimeinst date format dateformat date format dateformat format date time app id 0x hex string tohexstr id cxid cxid op op2 string op2str type zxid 0x hex string tohexstr zxid txn type txntype txn type txntype len len path path 

client reconnect test clientreconnecttest test testcas socket channel socketchannel sc count down latch countdownlatch count down latch countdownlatch count down latch countdownlatch mock cnxn mockcnxn client cnxn socket nio clientcnxnsocketnio mock cnxn mockcnxn io except ioexcept overrid connect registerandconnect socket channel socketchannel sock inet socket address inetsocketaddress addr io except ioexcept count down latch countdownlatch count down countdown io except ioexcept fail overrid socket channel socketchannel creat sock createsock sc test test client reconnect testclientreconnect io except ioexcept interrupt except interruptedexcept host provid hostprovid host provid hostprovid mock host provid hostprovid host provid hostprovid size thenreturn inet socket address inetsocketaddress inaddr inet socket address inetsocketaddress 1111 host provid hostprovid next anylong thenreturn inaddr zoo keeper zookeep zk mock zoo keeper zookeep sc socket channel socketchannel open client cnxn socket nio clientcnxnsocketnio nio cnxn niocnxn mock cnxn mockcnxn client watch manag clientwatchmanag watcher mock client watch manag clientwatchmanag client cnxn clientcnxn client cnxn clientcnxn client cnxn clientcnxn tmp host provid hostprovid 5000 zk watcher nio cnxn niocnxn client cnxn clientcnxn start count down latch countdownlatch await 5000 time unit timeunit millisecond asserttru count down latch countdownlatch get count getcount client cnxn clientcnxn close 

mock cnxn mockcnxn client cnxn socket nio clientcnxnsocketnio mock cnxn mockcnxn io except ioexcept overrid connect registerandconnect socket channel socketchannel sock inet socket address inetsocketaddress addr io except ioexcept count down latch countdownlatch count down countdown io except ioexcept fail overrid socket channel socketchannel creat sock createsock sc 

leader bean mbean leader mx bean leadermxbean zoo keeper server mx bean zookeeperservermxbean current zxid cluster string get current zxid getcurrentzxid inform current follow string follow info followerinfo 

jmx env jmxenv logger log logger factori loggerfactori get logger getlogg jmx env jmxenv jmx connector server jmxconnectorserv cs jmx connector jmxconnector cc set up setup io except ioexcept bean server mbeanserv mb bean registri mbeanregistri get instanc getinst get platform bean server getplatformmbeanserv jmx servic url jmxserviceurl url jmx servic url jmxserviceurl servic jmx rmi cs jmx connector server factori jmxconnectorserverfactori jmx connector server newjmxconnectorserv url mb cs start jmx servic url jmxserviceurl addr cs get address getaddress cc jmx connector factori jmxconnectorfactori connect addr tear down teardown cc close io except ioexcept log warn unexpect ignor cc cs stop io except ioexcept log warn unexpect ignor cs bean server connect mbeanserverconnect conn io except ioexcept cc get bean server connect getmbeanserverconnect ensur specifi name regist note compon name order matter more specif name leaf specifi befor parent name hierarch param expect name expectednam io except ioexcept malform object name except malformedobjectnameexcept set object name objectnam ensur ensureal string expect name expectednam io except ioexcept set object name objectnam bean bean conn queri name querynam object name objectnam common name commonnam domain malform object name except malformedobjectnameexcept runtim except runtimeexcept set object name objectnam found hash set hashset object name objectnam string name expect name expectednam log info expect name object name objectnam bean bean bean string tostr contain name log info found name bean found add bean bean remov removeal found test testcas equal assertequ expect arrai string tostr expect name expectednam expect name expectednam length found size bean ensur specifi name regist note compon name order matter more specif name leaf specifi befor parent name hierarch param expect name expectednam io except ioexcept malform object name except malformedobjectnameexcept set object name objectnam ensur ensureonli string expect name expectednam io except ioexcept log info ensur ensureonli arrai string tostr expect name expectednam set object name objectnam bean ensur ensureal expect name expectednam object name objectnam bean bean log info unexpect bean string tostr test testcas equal assertequ bean size bean ensur ensurenon string expect name expectednam io except ioexcept set object name objectnam bean bean conn queri name querynam object name objectnam common name commonnam domain malform object name except malformedobjectnameexcept runtim except runtimeexcept string name expect name expectednam object name objectnam bean bean bean string tostr contain name log info didntexpect name test testcas fail name bean string tostr dump io except ioexcept log info jmx env jmxenv dump follow set object name objectnam bean bean conn queri name querynam object name objectnam common name commonnam domain malform object name except malformedobjectnameexcept runtim except runtimeexcept object name objectnam bean bean log info bean bean string tostr 

duplic name except duplicatenameexcept except serial version uid serialversionuid 1l duplic name except duplicatenameexcept string mess mess 

filter parser filterpars pushback reader pushbackread reader filter parser filterpars string reader pushback reader pushbackread string reader stringread string read space readuntilspac io except ioexcept string buffer stringbuff buffer string buffer stringbuff reader read charact whitespac iswhitespac buffer append reader read reader unread buffer string tostr trim string arg stringarg read string arg readstringarg io except ioexcept filter except filterexcept reader read last filter except filterexcept check parser read string doesn begin quot string buffer stringbuff buffer string buffer stringbuff reader readi last reader read last string arg stringarg buffer string tostr buffer append filter except filterexcept untermin string number arg numberarg read number arg readnumberarg io except ioexcept filter except filterexcept string strval read space readuntilspac strval start startswith 0x number arg numberarg valu valueof strval substr 16 number arg numberarg valu valueof strval number format except numberformatexcept filter except filterexcept number strval symbol arg symbolarg read symbol arg readsymbolarg io except ioexcept filter except filterexcept symbol arg symbolarg read space readuntilspac filter op filterop pars io except ioexcept filter except filterexcept reader read filter except filterexcept invalid format string opstr read space readuntilspac filter op filterop op filter op filterop op newop opstr reader readi reader read reader unread op add sub op addsubop pars op reader unread op add arg addarg read string arg readstringarg charact digit isdigit reader unread op add arg addarg read number arg readnumberarg charact java identifi start isjavaidentifierstart reader unread op add arg addarg read symbol arg readsymbolarg filter except filterexcept incomplet filter main string arg io except ioexcept filter except filterexcept arg length println filter parser filterpars arg pars println filter parser filterpars session foobar session barfoo session sdf pars 

request processor requestprocessor simpli forward request ack request processor ackrequestprocessor sync request processor syncrequestprocessor propos request processor proposalrequestprocessor request processor requestprocessor logger log logger factori loggerfactori get logger getlogg propos request processor proposalrequestprocessor leader zoo keeper server leaderzookeeperserv zk request processor requestprocessor next processor nextprocessor sync request processor syncrequestprocessor sync processor syncprocessor propos request processor proposalrequestprocessor leader zoo keeper server leaderzookeeperserv zk request processor requestprocessor next processor nextprocessor zk zk next processor nextprocessor next processor nextprocessor ack request processor ackrequestprocessor ack processor ackprocessor ack request processor ackrequestprocessor zk get leader getlead sync processor syncprocessor sync request processor syncrequestprocessor zk ack processor ackprocessor initi processor initi sync processor syncprocessor start process request processrequest request request request processor except requestprocessorexcept log warn ack cxid request cxid type request type id request session id sessionid request add rq rec addrqrec prop follow block process sync leader sync come from follow follow handler add sync handler synchandl client leader issu sync command sync handler synchandl won contain handler add sync handler synchandl call process request processrequest next processor request learner sync request learnersyncrequest zk get leader getlead process sync processsync learner sync request learnersyncrequest request next processor nextprocessor process request processrequest request request hdr sync get consensu transact zk get leader getlead propos request xid rollov except xidrolloverexcept request processor except requestprocessorexcept get messag getmessag sync processor syncprocessor process request processrequest request shutdown log info shut down next processor nextprocessor shutdown sync processor syncprocessor shutdown 

parser zoo keeper zookeep client connect string meant us zoo keeper zookeep chroot path chrootpath member replac path object issu zookeep 849 org apach zookeep zoo keeper zookeep connect string parser connectstringpars port port 2181 string chroot path chrootpath arrai list arraylist inet socket address inetsocketaddress server address serveraddress arrai list arraylist inet socket address inetsocketaddress illeg argument except illegalargumentexcept invalid chroot path connect string parser connectstringpars string connect string connectstr pars chroot connect string connectstr index indexof string chroot path chrootpath connect string connectstr substr ignor chroot spec chroot path chrootpath length chroot path chrootpath path util pathutil valid path validatepath chroot path chrootpath chroot path chrootpath chroot path chrootpath connect string connectstr connect string connectstr substr chroot path chrootpath string host list hostslist connect string connectstr split string host host list hostslist port port port pidx host last index lastindexof pidx end string ignor pidx host length port integ pars parseint host substr pidx host host substr pidx server address serveraddress add inet socket address inetsocketaddress creat unresolv createunresolv host port string get chroot path getchrootpath chroot path chrootpath arrai list arraylist inet socket address inetsocketaddress get server address getserveraddress server address serveraddress 

sync request syncrequest record string path sync request syncrequest sync request syncrequest string path path path string get path getpath path set path setpath string path serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer sync request syncrequest cast except classcastexcept compar differ type record sync request syncrequest peer sync request syncrequest peer peer ret ret path compar compareto peer path ret ret ret equal object peer peer peer peer sync request syncrequest peer peer sync request syncrequest peer sync request syncrequest peer peer ret ret path equal peer path ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret result string signatur sync request lsyncrequest 

sasl auth design server test saslauthdesignatedservertest client base clientbas authent timeout authent timeout 30000 set properti setproperti zookeep auth provid authprovid org apach zookeep server auth sasl authent provid saslauthenticationprovid set properti setproperti zoo keeper sasl server zookeepersaslserv login context name kei login context name kei zookeep server myzookeeperserv jaa configur jaasconfigur conf jaa configur jaasconfigur server section ha incorrect password configur us configur set properti setproperti login context name kei login context name kei us zookeep server myzookeeperserv section ha correct password conf add section addsect server org apach zookeep server auth digest login modul digestloginmodul user myuser user myuser wrongpassword conf add section addsect zookeep server myzookeeperserv org apach zookeep server auth digest login modul digestloginmodul user myuser user myuser mypassword conf add section addsect client org apach zookeep server auth digest login modul digestloginmodul usernam myuser password mypassword javax secur auth login configur set configur setconfigur conf atom integ atomicinteg auth fail authfail atom integ atomicinteg watcher mywatch countdown watcher countdownwatch count down latch countdownlatch auth complet authcomplet overrid reset auth complet authcomplet count down latch countdownlatch reset overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget auth complet authcomplet count down countdown event get state getstat keeper state keeperst sasl authent saslauthent auth complet authcomplet count down countdown process event test test auth testauth except watcher mywatch watcher watcher mywatch zoo keeper zookeep zk creat client createcli watcher watcher auth complet authcomplet await authent timeout authent timeout time unit timeunit millisecond equal assertequ auth fail authfail get zk creat path1 id creator acl creator acl creat mode createmod persist keeper except keeperexcept fail test fail zk close 

watcher mywatch countdown watcher countdownwatch count down latch countdownlatch auth complet authcomplet overrid reset auth complet authcomplet count down latch countdownlatch reset overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget auth complet authcomplet count down countdown event get state getstat keeper state keeperst sasl authent saslauthent auth complet authcomplet count down countdown process event 

callback object us implement retri abl oper link org apach zookeep recip lock protocol support protocolsupport zoo keeper oper zookeeperoper perform oper involv multipl time connect zoo keeper zookeep close oper result oper keeper except keeperexcept interrupt except interruptedexcept execut keeper except keeperexcept interrupt except interruptedexcept 

sasl auth miss client config test saslauthmissingclientconfigtest client base clientbas set properti setproperti zookeep auth provid authprovid org apach zookeep server auth sasl authent provid saslauthenticationprovid configur section zookeep client myzookeepercli miss from jaa configur result sasl authent fail test test test auth testauth set properti setproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei zookeep client myzookeepercli file tmp dir tmpdir creat tmp dir createtmpdir file sasl conf file saslconffil file tmp dir tmpdir jaa conf file writer filewrit fwriter file writer filewrit sasl conf file saslconffil fwriter write server org apach zookeep server auth digest login modul digestloginmodul requir user myuser user myuser mypassword client client section ha correct password configur us configur set properti setproperti login context name kei login context name kei us nonexist zookeep client myzookeepercli section org apach zookeep server auth digest login modul digestloginmodul requir usernam myuser password mypassword fwriter close set properti setproperti java secur auth login config sasl conf file saslconffil get absolut path getabsolutepath io except ioexcept creat tmp directori hold jaa conf file test fail atom integ atomicinteg auth fail authfail atom integ atomicinteg watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget process event test test auth testauth except zoo keeper zookeep zk creat client createcli zk creat path1 id creator acl creator acl creat mode createmod persist fail except keeper except keeperexcept except expect log info except expect zk close 

watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail increment get incrementandget process event 

four letter word test fourletterwordstest client base clientbas logger log logger factori loggerfactori get logger getlogg four letter word test fourletterwordstest test four letter word test test four letter word testfourletterword except verifi ruok imok verifi envi java version verifi conf client port clientport verifi stat outstand verifi srvr outstand verifi con queu verifi dump session verifi wch watch verifi wchp verifi wchc verifi srst reset verifi crst reset verifi stat outstand verifi srvr outstand verifi con queu testabl zoo keeper testablezookeep zk creat client createcli string sid 0x hex string tohexstr zk get session id getsessionid verifi stat queu verifi srvr outstand verifi con sid verifi dump sid zk get data getdata verifi stat queu verifi srvr outstand verifi con sid verifi dump sid verifi wch watch verifi wchp sid verifi wchc sid zk close verifi ruok imok verifi envi java version verifi conf client port clientport verifi stat outstand verifi srvr outstand verifi con queu verifi dump session verifi wch watch verifi wchp verifi wchc verifi srst reset verifi crst reset verifi stat outstand verifi srvr outstand verifi con queu verifi mntr zk server state zk server state tstandalon verifi mntr num aliv connect num aliv connect verifi stat connect verifi srvr connect string send request sendrequest string cmd io except ioexcept host port hostport hpobj client base clientbas pars host port list parsehostportlist host port hostport get send4 letter word send4letterword hpobj host hpobj port cmd verifi string cmd string expect io except ioexcept string resp send request sendrequest cmd log info cmd cmd expect expect resp asserttru resp contain expect test valid stat output validatestatoutput except zoo keeper zookeep zk1 creat client createcli zoo keeper zookeep zk2 creat client createcli string resp send request sendrequest stat buffer reader bufferedread buffer reader bufferedread string reader stringread resp string line first line version info line read line readlin asserttru pattern match line asserttru pattern match client read line readlin count line read line readlin length count asserttru pattern match queu recv sent line ensur least two client creat account asserttru count line read line readlin asserttru pattern match latenc min avg max line line read line readlin asserttru pattern match receiv line line read line readlin asserttru pattern match sent line line read line readlin asserttru pattern match connect line line read line readlin asserttru pattern match outstand line line read line readlin asserttru pattern match zxid 0x da fa line line read line readlin asserttru pattern match mode line line read line readlin asserttru pattern match node count line zk1 close zk2 close test valid con output validateconsoutput except zoo keeper zookeep zk1 creat client createcli zoo keeper zookeep zk2 creat client createcli string resp send request sendrequest con buffer reader bufferedread buffer reader bufferedread string reader stringread resp string line count line read line readlin line length count asserttru line pattern match queu recv sent line ensur least two client creat account asserttru count zk1 close zk2 close 

rest cfg restcfg properti cfg properti set endpoint endpoint hash set hashset endpoint credenti credenti credenti rest cfg restcfg string resourc io except ioexcept rest cfg restcfg get loader getclassload get resourc stream getresourceasstream resourc rest cfg restcfg input stream inputstream io io except ioexcept cfg load io extract endpoint extractendpoint extract credenti extractcredenti extract credenti extractcredenti cfg contain kei containskei rest http auth credenti credenti cfg get properti getproperti rest http auth extract endpoint extractendpoint count string cfg get properti getproperti string format rest endpoint count string part split part length count endpoint point endpoint part part string cfg get properti getproperti string format rest endpoint http auth count point set credenti setcredenti string digest cfg get properti getproperti string format rest endpoint zk digest count point set zoo keeper auth info setzookeeperauthinfo digest endpoint add point count get port getport integ pars parseint cfg get properti getproperti rest port 9998 us ssl usessl valu valueof cfg get properti getproperti rest ssl set endpoint get endpoint getendpoint endpoint credenti get credenti getcredenti credenti string get jk getjk cfg get properti getproperti rest ssl jk string get jk getjk string def cfg get properti getproperti rest ssl jk def string get jk password getjkspassword cfg get properti getproperti rest ssl jk pass 

dole assign instanc contain instancecontain regist zoo keeper zookeep znode znode four child node readi znode instanc manag instancemanag run avail children znode ephemer node repres run instanc contain instancecontain assign child znode avail instanc contain instancecontain znode child assign instanc report child znode instanc run report string from instanc instanc manag instancemanag async callback asynccallback children callback childrencallback watcher logger log logger factori loggerfactori get logger getlogg instanc manag instancemanag zoo keeper zookeep zk string prefix node prefixnod string report node reportsnod report string readi node readynod readi string assign node assignmentsnod assign string statu node statusnod avail max maxtri assign string contain string instanc weight assign string contain string instanc weight contain contain instanc instanc weight weight list string prefer list preferredlist arrai list arraylist string string list get properti getproperti ic prefer list preferredlist list prefer list preferredlist arrai list aslist list split err println prefer list prefer list preferredlist err println prefer list empti hash map hashmap string hash set hashset assign assign hash map hashmap string hash set hashset assign hash map hashmap string assign instanc assign instancetoassign hash map hashmap string assign instanc manag instancemanag zoo keeper zookeep zk string prefix keeper except keeperexcept interrupt except interruptedexcept zk zk prefix node prefixnod prefix readi node readynod prefix readi node readynod assign node assignmentsnod prefix assign node assignmentsnod report node reportsnod prefix report node reportsnod statu node statusnod prefix statu node statusnod max maxtri setup node setupnod zk connect loss except connectionlossexcept connect loss except connectionlossexcept last except lastexcept max maxtri list string children zk get children getchildren statu node statusnod process result processresult statu node statusnod children last except lastexcept connect loss except connectionlossexcept last except lastexcept last except lastexcept last except lastexcept setup node setupnod zoo keeper zookeep zk keeper except keeperexcept interrupt except interruptedexcept zk creat prefix node prefixnod id open acl unsaf open acl unsaf creat mode createmod persist node exist except nodeexistsexcept zk creat assign node assignmentsnod id open acl unsaf open acl unsaf creat mode createmod persist node exist except nodeexistsexcept zk creat statu node statusnod id open acl unsaf open acl unsaf creat mode createmod persist node exist except nodeexistsexcept zk creat report node reportsnod id open acl unsaf open acl unsaf creat mode createmod persist node exist except nodeexistsexcept zk creat readi node readynod id open acl unsaf open acl unsaf creat mode createmod persist node exist except nodeexistsexcept process result processresult rc string path object ctx list string children rc keeper except keeperexcept code valu intvalu zk get children getchildren statu node statusnod log debug enabl isdebugen log debug children children from path hash map hashmap string hash set hashset assign assign newassign hash map hashmap string hash set hashset assign string children hash set hashset assign assign remov assign newassign put assign newassign put hash set hashset assign clean up dead machin string dead assign kei set keyset remov instanc removeinst dead keeper except keeperexcept print stack trace printstacktrac interrupt except interruptedexcept thread current thread currentthread interrupt assign assign newassign remov assign node removeassignmentnod string dead keeper except keeperexcept interrupt except interruptedexcept string dead node deadnod assign node assignmentsnod dead list string children zk get children getchildren dead node deadnod string children zk delet dead node deadnod zk delet dead node deadnod node except nonodeexcept process watch event watchedev event event get path getpath equal statu node statusnod zk get children getchildren statu node statusnod string assign instanc assigninst string name instanc clazz string param weight avail contain noavailablecontain duplic name except duplicatenameexcept interrupt except interruptedexcept keeper except keeperexcept weight weight zero thing get mess up weight string instanc spec instancespec clazz get name getnam param instanc assign instancetoassign get name duplic name except duplicatenameexcept name exist find most idl node string most idl mostidl most idl weight mostidleweight integ max valu max valu string prefer prefer list preferredlist hash set hashset assign assign list assignmentlist assign get prefer assign list assignmentlist assign assign list assignmentlist weight most idl weight mostidleweight most idl weight mostidleweight most idl mostidl prefer entri string hash set hashset assign assign entri set entryset assign get valu getvalu weight most idl weight mostidleweight most idl weight mostidleweight most idl mostidl get kei getkei most idl mostidl avail contain noavailablecontain avail contain assign assign most idl mostidl name weight instanc assign instancetoassign put name hash set hashset assign assign get most idl mostidl hash set hashset assign assign put most idl mostidl add keeper except keeperexcept last except lastexcept max maxtri zk creat assign node assignmentsnod most idl mostidl name instanc spec instancespec get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer most idl mostidl node exist except nodeexistsexcept most idl mostidl keeper except keeperexcept last except lastexcept last except lastexcept reconfigur instanc reconfigureinst string name string param assign except noassignmentexcept interrupt except interruptedexcept keeper except keeperexcept log debug enabl isdebugen log debug reconfigur name param assign assign instanc assign instancetoassign get name assign assign except noassignmentexcept keeper except keeperexcept last except lastexcept max maxtri zk set data setdata assign node assignmentsnod assign contain name updat param get byte getbyt connect loss except connectionlossexcept last except lastexcept last except lastexcept last except lastexcept delet dodelet string path interrupt except interruptedexcept keeper except keeperexcept keeper except keeperexcept last except lastexcept max maxtri zk delet path node except nonodeexcept keeper except keeperexcept last except lastexcept last except lastexcept remov instanc removeinst string name interrupt except interruptedexcept keeper except keeperexcept assign assign instanc assign instancetoassign remov name assign assign get assign contain remov name delet dodelet assign node assignmentsnod assign contain name delet dodelet report node reportsnod name aliv isal string name instanc assign instancetoassign get name reset statu resetstatu string name interrupt except interruptedexcept keeper except keeperexcept keeper except keeperexcept last except lastexcept max maxtri zk delet report node reportsnod name last except lastexcept connect loss except connectionlossexcept last except lastexcept node except nonodeexcept great last except lastexcept last except lastexcept string get statu getstatu string name timeout keeper except keeperexcept interrupt except interruptedexcept stat stat stat data end time endtim current time milli currenttimemilli timeout keeper except keeperexcept last except lastexcept max maxtri end time endtim current time milli currenttimemilli data zk get data getdata report node reportsnod name stat log debug enabl isdebugen log debug data data string data last except lastexcept connect loss except connectionlossexcept last except lastexcept node except nonodeexcept object event obj eventobj object event obj eventobj wait node appear stat stat estat zk exist report node reportsnod name watcher process watch event watchedev event event obj eventobj event obj eventobj notifi notifyal stat estat event obj eventobj wait end time endtim current time milli currenttimemilli last except lastexcept last except lastexcept last except lastexcept string data close interrupt except interruptedexcept string name instanc assign instancetoassign kei set keyset arrai toarrai string remov instanc removeinst name keeper except keeperexcept print stack trace printstacktrac delet dodelet readi node readynod keeper except keeperexcept print stack trace printstacktrac 

assign string contain string instanc weight assign string contain string instanc weight contain contain instanc instanc weight weight 

link panel jpanel displai inform current select node abstract zoo inspector node viewer zooinspectornodeview panel jpanel transfer link data flavor dataflavor us dnd node viewer configur dialog data flavor dataflavor node viewer data flavor nodeviewerdataflavor data flavor dataflavor zoo inspector node viewer zooinspectornodeview nodeview param zoo inspector manag zooinspectormanag abstract set zoo inspector manag setzooinspectormanag zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag call select node tree view chang param select node selectednod node current select tree view abstract node select chang nodeselectionchang list string select node selectednod titl node viewer shown tab node viewer abstract string get titl gettitl non javadoc java awt datatransf transfer get transfer data gettransferdata java awt datatransf data flavor dataflavor object get transfer data gettransferdata data flavor dataflavor flavor unsupport flavor except unsupportedflavorexcept io except ioexcept flavor equal node viewer data flavor nodeviewerdataflavor get getclass get canon name getcanonicalnam non javadoc java awt datatransf transfer get transfer data flavor gettransferdataflavor data flavor dataflavor get transfer data flavor gettransferdataflavor data flavor dataflavor node viewer data flavor nodeviewerdataflavor non javadoc seejava awt datatransf transfer data flavor support isdataflavorsupport java awt datatransf data flavor dataflavor data flavor support isdataflavorsupport data flavor dataflavor flavor flavor equal node viewer data flavor nodeviewerdataflavor non javadoc java lang object hash code hashcod overrid hash code hashcod prime 31 result result prime result get titl gettitl get titl gettitl hash code hashcod result non javadoc java lang object equal java lang object overrid equal object obj obj obj get getclass obj get getclass zoo inspector node viewer zooinspectornodeview zoo inspector node viewer zooinspectornodeview obj get getclass get canon name getcanonicalnam get getclass get canon name getcanonicalnam get titl gettitl get titl gettitl get titl gettitl equal get titl gettitl 

read mode test readonlymodetest zk test zktestcas connect timeout connect timeout quorum base quorumbas connect timeout connect timeout quorum util quorumutil qu quorum util quorumutil befor set up setup except set properti setproperti readonlymod enabl qu start quorum startquorum after tear down teardown except set properti setproperti readonlymod enabl qu tear down teardown basic test read client function read write read mode regain quorum write test test read client testreadonlycli except countdown watcher countdownwatch watcher countdown watcher countdownwatch zoo keeper zookeep zk zoo keeper zookeep qu get conn string getconnstr connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout ensur zk connect string data data read ro mode string node tnode zk creat node data get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist watcher reset qu shutdown watcher wait connect waitforconnect connect timeout connect timeout read oper mode string remot data remotedata string zk get data getdata node equal assertequ data remot data remotedata zk set data setdata node get byte getbyt fail write oper ha succeed ro mode read except notreadonlyexcept watcher reset qu start asserttru wait server up client base clientbas wait server up waitforserverup 127 qu get peer getpeer client port clientport connect timeout connect timeout watcher wait connect waitforconnect connect timeout connect timeout zk set data setdata node quorum get byte getbyt zk close ensur connect read server client receiv connect read connectedreadonli state notif test test connect event testconnectionev except list keeper state keeperst state arrai list arraylist keeper state keeperst zoo keeper zookeep zk zoo keeper zookeep qu get conn string getconnstr connect timeout connect timeout watcher process watch event watchedev event state add event get state getstat success 30 zk creat test test get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist success keeper except keeperexcept connect loss except connectionlossexcept thread sleep 1000 asserttru succe connect 30 success kill peer wait more second read server start on tick time ticktim second qu shutdown start current time milli currenttimemilli zk get state getstat state connectedreadonli thread sleep 200 fixm origin second realist random slow virt host guarante asserttru connect server current time milli currenttimemilli start 30000 point state list contain order sync connect syncconnect disconnect connect read connectedreadonli state asserttru connect read connectedreadonli event wasn receiv state get keeper state keeperst connect read connectedreadonli zk close test situat client firstli connect read server connect major server transit transpar user test test session establish testsessionestablish except qu shutdown countdown watcher countdownwatch watcher countdown watcher countdownwatch zoo keeper zookeep zk zoo keeper zookeep qu get conn string getconnstr connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout assertsam mode state connectedreadonli zk get state getstat fake id fakeid zk get session id getsessionid watcher reset qu start asserttru wait server up client base clientbas wait server up waitforserverup 127 qu get peer getpeer client port clientport connect timeout connect timeout watcher wait connect waitforconnect connect timeout connect timeout zk creat test test get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist assertfals fake session real session id zk get session id getsessionid fake id fakeid zk close ensur client seek server connect server suppress warn suppresswarn deprec test test seek rw server testseekforrwserv except setup logger captur log layout layout logger get root logger getrootlogg get append getappend consol get layout getlayout arrai output stream bytearrayoutputstream os arrai output stream bytearrayoutputstream writer append writerappend append writer append writerappend layout os append set flush setimmediateflush append set threshold setthreshold level info logger zlogger logger get logger getlogg org apach zookeep zlogger add append addappend append qu shutdown countdown watcher countdownwatch watcher countdown watcher countdownwatch zoo keeper zookeep zk zoo keeper zookeep qu get conn string getconnstr connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout don suspend peer rejoin quorum qu get peer getpeer peer suspend start two server form quorum client detect connect on watcher reset qu start qu start client base clientbas wait server up waitforserverup qu get conn string getconnstr 2000 watcher wait connect waitforconnect connect timeout connect timeout zk creat test test get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist resum poor fellow qu get peer getpeer peer resum zlogger remov append removeappend append os close line number reader linenumberread line number reader linenumberread string reader stringread os string tostr string line pattern pattern compil major server found found line read line readlin matcher line match found asserttru major server wasn found connect server found 

zoo keeper sasl server zookeepersaslserv string login context name kei login context name kei zookeep sasl serverconfig string login context name login context name server logger log logger factori loggerfactori get logger getlogg zoo keeper sasl server zookeepersaslserv sasl server saslserv sasl server saslserv zoo keeper sasl server zookeepersaslserv login login sasl server saslserv creat sasl server createsaslserv login sasl server saslserv creat sasl server createsaslserv login login login subject subject login get subject getsubject subject server jaa authent subject determin servic princip name hostnam from zk server subject subject get princip getprincip size object princip subject get princip getprincip arrai toarrai princip servic princip serviceprincip princip princip servic princip name hostnam serviceprincipalnameandhostnam zookeep myhost foo com foo com string servic princip name hostnam serviceprincipalnameandhostnam servic princip serviceprincip get name getnam index indexof servic princip name hostnam serviceprincipalnameandhostnam index indexof servic princip name serviceprincipalnam zookeep string servic princip name serviceprincipalnam servic princip name hostnam serviceprincipalnameandhostnam substr index indexof servic hostnam kerb domain servicehostnameandkerbdomain myhost foo com foo com string servic hostnam kerb domain servicehostnameandkerbdomain servic princip name hostnam serviceprincipalnameandhostnam substr index indexof servic princip name hostnam serviceprincipalnameandhostnam length index indexof servic hostnam kerb domain servicehostnameandkerbdomain index indexof servic hostnam servicehostnam myhost foo com string servic hostnam servicehostnam servic hostnam kerb domain servicehostnameandkerbdomain substr index indexof string mech gssapi todo depend zoo cfg specifi mech subject non assum gssapi log debug servic hostnam servicehostnam servic hostnam servicehostnam log debug servic princip name serviceprincipalnam servic princip name serviceprincipalnam log debug sasl mechan mech mech subject doa subject privileg except action privilegedexceptionact sasl server saslserv sasl server saslserv run sasl server saslserv sasl server saslserv sasl server saslserv sasl creat sasl server createsaslserv mech servic princip name serviceprincipalnam servic hostnam servicehostnam login callback handler callbackhandl sasl server saslserv sasl except saslexcept log error zookeep server fail creat sasl server saslserv interact client session initi print stack trace printstacktrac privileg action except privilegedactionexcept todo exit server point log error zookeep quorum member experienc privileg action except privilegedactionexcept except creat sasl server saslserv jaa princip context print stack trace printstacktrac except log error server princip name hostnam determin error jaa non gssapi authent assum support digest md5 mechan todo us auth mech authmech valu zoo cfg sasl server saslserv sasl server saslserv sasl creat sasl server createsaslserv digest md5 zookeep zk sasl md5 login callback handler callbackhandl sasl server saslserv sasl except saslexcept log error zookeep quorum member fail creat sasl server saslserv interact client session initi log error fail creat sasl server saslserv object evalu respons evaluaterespons respons sasl except saslexcept sasl server saslserv evalu respons evaluaterespons respons complet iscomplet sasl server saslserv complet iscomplet string get author id getauthorizationid sasl server saslserv get author id getauthorizationid 

run runwith suit suit class suiteclass wadl test wadltest get test gettest get children test getchildrentest creat test createtest set test settest exist test existstest delet test deletetest rest test suit resttestsuit befor beforeclass set up setup suit setup after afterclass tear down teardown suit setup 

get max children respons getmaxchildrenrespons record max get max children respons getmaxchildrenrespons get max children respons getmaxchildrenrespons max max max get max getmax max set max setmax max serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint max max end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag max read readint max end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint max max end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get max children respons getmaxchildrenrespons cast except classcastexcept compar differ type record get max children respons getmaxchildrenrespons peer get max children respons getmaxchildrenrespons peer peer ret ret max peer max max peer max ret ret ret equal object peer peer peer peer get max children respons getmaxchildrenrespons peer peer get max children respons getmaxchildrenrespons peer get max children respons getmaxchildrenrespons peer peer ret ret max peer max ret ret ret hash code hashcod result 17 ret ret max result 37 result ret result string signatur get max children respons lgetmaxchildrenrespons 

sasl auth design client test saslauthdesignatedclienttest client base clientbas set properti setproperti zookeep auth provid authprovid org apach zookeep server auth sasl authent provid saslauthenticationprovid set properti setproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei zookeep client myzookeepercli file tmp dir tmpdir creat tmp dir createtmpdir file sasl conf file saslconffil file tmp dir tmpdir jaa conf file writer filewrit fwriter file writer filewrit sasl conf file saslconffil fwriter write server org apach zookeep server auth digest login modul digestloginmodul requir user myuser user myuser mypassword client client section ha incorrect password configur us configur set properti setproperti login context name kei login context name kei us zookeep client myzookeepercli section ha correct password org apach zookeep server auth digest login modul digestloginmodul requir usernam myuser password wrongpassword zookeep client myzookeepercli org apach zookeep server auth digest login modul digestloginmodul requir usernam myuser password mypassword fwriter close set properti setproperti java secur auth login config sasl conf file saslconffil get absolut path getabsolutepath io except ioexcept creat tmp directori hold jaa conf file test fail test test auth testauth except zoo keeper zookeep zk creat client createcli zk creat path1 id creator acl creator acl creat mode createmod persist thread sleep 1000 keeper except keeperexcept fail test fail zk close test test sasl config testsaslconfig except zoo keeper zookeep zk creat client createcli zk get children getchildren assertfals zk get sasl client getsaslcli client tunnel authent progress clienttunneledauthenticationinprogress equal assertequ zk get sasl client getsaslcli get sasl state getsaslst zoo keeper sasl client zookeepersaslcli sasl state saslstat complet assertnotnul javax secur auth login configur get configur getconfigur get app configur entri getappconfigurationentri zookeep client myzookeepercli assertsam zk get sasl client getsaslcli get login context getlogincontext zookeep client myzookeepercli keeper except keeperexcept fail test fail zk close 

test stand server wadl test wadltest base logger log logger factori loggerfactori get logger getlogg wadl test wadltest test test applic wadl testapplicationwadl web resourc webresourc client resourc baseuri string servic wadl servicewadl path applic wadl accept media type mediatyp wadl get string asserttru wrong return wadl length servic wadl servicewadl length 

op notop filter op filterop match log entri logentri entri filter except filterexcept sub op subop size filter except filterexcept oper on argument sub op subop get match entri 

basic data encrypt manag basicdataencryptionmanag data encrypt manag dataencryptionmanag non javadoc org apach zookeep inspector encrypt data encrypt manag dataencryptionmanag decrypt data decryptdata string decrypt data decryptdata encrypt except string encrypt non javadoc org apach zookeep inspector encrypt data encrypt manag dataencryptionmanag encrypt data encryptdata java lang string encrypt data encryptdata string data except data data get byte getbyt 

error respons errorrespons record err error respons errorrespons error respons errorrespons err err err get err geterr err set err seterr err serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint err err end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag err read readint err end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint err err end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer error respons errorrespons cast except classcastexcept compar differ type record error respons errorrespons peer error respons errorrespons peer peer ret ret err peer err err peer err ret ret ret equal object peer peer peer peer error respons errorrespons peer peer error respons errorrespons peer error respons errorrespons peer peer ret ret err peer err ret ret ret hash code hashcod result 17 ret ret err result 37 result ret result string signatur error respons lerrorrespons 

learner test learnertest zk test zktestcas simpl learner zoo keeper server simplelearnerzookeeperserv learner zoo keeper server learnerzookeeperserv startup call startupcal simpl learner zoo keeper server simplelearnerzookeeperserv file txn snap log filetxnsnaplog ftsl quorum peer quorump self io except ioexcept ftsl 2000 2000 2000 zk databas zkdatabas ftsl self learner learner overrid learner get learner getlearn learner overrid startup startup call startupcal simpl learner simplelearn learner simpl learner simplelearn file txn snap log filetxnsnaplog ftsl io except ioexcept self quorum peer quorump zk simpl learner zoo keeper server simplelearnerzookeeperserv ftsl self simpl learner zoo keeper server simplelearnerzookeeperserv zk learner recurs delet recursivedelet file dir dir dir exist dir directori isdirectori dir delet file child dir list file listfil recurs delet recursivedelet child test sync test synctest except file tmp file tmpfile file creat temp file createtempfil test dir tmp file tmpfile delet file txn snap log filetxnsnaplog ftsl file txn snap log filetxnsnaplog tmp file tmpfile tmp file tmpfile simpl learner simplelearn sl simpl learner simplelearn ftsl start zxid startzxid sl zk get last process zxid getlastprocessedzxid set up bogu stream arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch oa binari output archiv binaryoutputarch get archiv getarch bao sl leader os leadero binari output archiv binaryoutputarch get archiv getarch arrai output stream bytearrayoutputstream make stream socket innocu sl buffer output bufferedoutput buffer output stream bufferedoutputstream sl sock socket fake messag from server quorum packet quorumpacket qp quorum packet quorumpacket leader snap oa write record writerecord qp sl zk get zk databas getzkdatabas serial snapshot serializesnapshot oa oa write string writestr ben here benwasher signatur txn header txnheader hdr txn header txnheader zoo def zoodef op code opcod creat creat txn createtxn txn creat txn createtxn foo arrai list arraylist acl sl zk get zk databas getzkdatabas get node getnod stat get cversion getcvers arrai output stream bytearrayoutputstream tbao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch tbao hdr serial boa hdr txn serial boa txn tbao close qp quorum packet quorumpacket leader propos tbao arrai tobytearrai oa write record writerecord qp setup messag stream follow sl leader leaderi binari input archiv binaryinputarch get archiv getarch arrai input stream bytearrayinputstream bao arrai tobytearrai sl sync leader syncwithlead eof except eofexcept sl zk shutdown sl simpl learner simplelearn ftsl equal assertequ start zxid startzxid sl zk get last process zxid getlastprocessedzxid recurs delet recursivedelet tmp file tmpfile 

simpl learner zoo keeper server simplelearnerzookeeperserv learner zoo keeper server learnerzookeeperserv startup call startupcal simpl learner zoo keeper server simplelearnerzookeeperserv file txn snap log filetxnsnaplog ftsl quorum peer quorump self io except ioexcept ftsl 2000 2000 2000 zk databas zkdatabas ftsl self learner learner overrid learner get learner getlearn learner overrid startup startup call startupcal 

simpl learner simplelearn learner simpl learner simplelearn file txn snap log filetxnsnaplog ftsl io except ioexcept self quorum peer quorump zk simpl learner zoo keeper server simplelearnerzookeeperserv ftsl self simpl learner zoo keeper server simplelearnerzookeeperserv zk learner 

follow resync concurr test followerresyncconcurrencytest zk test zktestcas logger log logger get logger getlogg follow resync concurr test followerresyncconcurrencytest connect timeout connect timeout client test clienttest connect timeout connect timeout counter error zookeep 1319 verifi lag follwer resync correctli start down quorum start leader follower1 add data restart leader follower1 start follower2 verifi data consist ensembl except test test lag follow resync epoch testlaggingfollowerresyncsundernewepoch except countdown watcher countdownwatch watcher1 countdown watcher countdownwatch countdown watcher countdownwatch watcher2 countdown watcher countdownwatch countdown watcher countdownwatch watcher3 countdown watcher countdownwatch quorum util quorumutil qu quorum util quorumutil qu shutdown shutdownal qu start qu start asserttru wait server up client base clientbas wait server up waitforserverup 127 qu get peer getpeer client port clientport client base clientbas connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 qu get peer getpeer client port clientport client base clientbas connect timeout connect timeout zoo keeper zookeep zk1 creat client createcli qu get peer getpeer peer get client port getclientport watcher1 log info zk1 ha session id 0x hex string tohexstr zk1 get session id getsessionid string resync path resyncpath resyncundernewepoch zk1 creat resync path resyncpath zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk1 close qu shutdown qu shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 qu get peer getpeer client port clientport client base clientbas connect timeout connect timeout asserttru wait server down client base clientbas wait server down waitforserverdown 127 qu get peer getpeer client port clientport client base clientbas connect timeout connect timeout qu start qu start asserttru wait server up client base clientbas wait server up waitforserverup 127 qu get peer getpeer client port clientport client base clientbas connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 qu get peer getpeer client port clientport client base clientbas connect timeout connect timeout qu start asserttru wait server up client base clientbas wait server up waitforserverup 127 qu get peer getpeer client port clientport client base clientbas connect timeout connect timeout zk1 creat client createcli qu get peer getpeer peer get client port getclientport watcher1 log info zk1 ha session id 0x hex string tohexstr zk1 get session id getsessionid assertnotnul zk1 ha data zk1 exist resync path resyncpath zoo keeper zookeep zk2 creat client createcli qu get peer getpeer peer get client port getclientport watcher2 log info zk2 ha session id 0x hex string tohexstr zk2 get session id getsessionid assertnotnul zk2 ha data zk2 exist resync path resyncpath zoo keeper zookeep zk3 creat client createcli qu get peer getpeer peer get client port getclientport watcher3 log info zk3 ha session id 0x hex string tohexstr zk3 get session id getsessionid assertnotnul zk3 ha data zk3 exist resync path resyncpath zk1 close zk2 close zk3 close qu shutdown shutdownal zookeep 962 test on bug hit fix set zxid snap packet start up zk shut down f1 write node restart on shut down non leader zk write cluster shut down f1 restart after session expir expect get snap file shut down run transact restart diff transact run leader io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test test resync snap diff after follow crash testresyncbysnapthendiffafterfollowercrash io except ioexcept interrupt except interruptedexcept keeper except keeperexcept throwabl semaphor sem semaphor quorum util quorumutil qu quorum util quorumutil qu start startal countdown watcher countdownwatch watcher1 countdown watcher countdownwatch countdown watcher countdownwatch watcher2 countdown watcher countdownwatch countdown watcher countdownwatch watcher3 countdown watcher countdownwatch index qu get peer getpeer index peer leader index leader leader qu get peer getpeer index peer leader assertnotnul leader reus index variabl select follow connect index index log info connect follow index qu shutdown index zoo keeper zookeep zk3 creat client createcli qu get peer getpeer peer get client port getclientport watcher3 log info zk3 ha session id 0x hex string tohexstr zk3 get session id getsessionid zk3 creat mybar zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti qu restart index zoo keeper zookeep zk1 creat client createcli qu get peer getpeer index peer get client port getclientport watcher1 log info zk1 ha session id 0x hex string tohexstr zk1 get session id getsessionid zoo keeper zookeep zk2 creat client createcli qu get peer getpeer index peer get client port getclientport watcher2 log info zk2 ha session id 0x hex string tohexstr zk2 get session id getsessionid zk1 creat first zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist thread mytestfoo thread mytestfoothread thread runnabl overrid run 3000 zk3 creat mytestfoo zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti async callback asynccallback string callback stringcallback overrid process result processresult rc string path object ctx string name counter rc error counter 16200 sem releas 10 thread sleep 100 except 13000 zk3 creat mybar zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti async callback asynccallback string callback stringcallback overrid process result processresult rc string path object ctx string name counter rc error counter 16200 sem releas 5000 qu shutdown index log info shut down s1 12000 restart snap get txn log shut down mytestfoo thread mytestfoothread start qu restart index thread sleep 300 qu shutdown index thread sleep 300 qu restart index log info set up server index 1000 thread sleep 1000 50 zk2 creat newbaz zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti async callback asynccallback string callback stringcallback overrid process result processresult rc string path object ctx string name counter rc error counter 16200 sem releas wait updat sem acquir tryacquir client base clientbas connect timeout connect timeout time unit timeunit millisecond log warn aquir semaphor fast mytestfoo thread mytestfoothread join client base clientbas connect timeout connect timeout mytestfoo thread mytestfoothread aliv isal log error mytestfoo thread mytestfoothread aliv thread sleep 1000 verifi state verifyst qu index leader zk1 close zk2 close zk3 close qu shutdown shutdownal test start up zk non leader zk write cluster shut down on non leader zk restart after session expir 500 txn place get diff shut down immedi after restart start run separ thread transact restart diff transact run leader befor fix zookeep 962 restart diff get inconsist view data miss transact complet diff sync follow consid restart befor forward transact complet process restart caus snap file high zxid written transact miss test pretti reliabl failur restart server befor diff messag process natur failur concurr process transact leader diff forward io except ioexcept interrupt except interruptedexcept keeper except keeperexcept throwabl test test resync diff after follow crash testresyncbydiffafterfollowercrash io except ioexcept interrupt except interruptedexcept keeper except keeperexcept throwabl semaphor sem semaphor quorum util quorumutil qu quorum util quorumutil qu start startal countdown watcher countdownwatch watcher1 countdown watcher countdownwatch countdown watcher countdownwatch watcher2 countdown watcher countdownwatch countdown watcher countdownwatch watcher3 countdown watcher countdownwatch index qu get peer getpeer index peer leader index leader leader qu get peer getpeer index peer leader assertnotnul leader reus index variabl select follow connect index index log info connect follow index zoo keeper zookeep zk1 creat client createcli qu get peer getpeer index peer get client port getclientport watcher1 log info zk1 ha session id 0x hex string tohexstr zk1 get session id getsessionid zoo keeper zookeep zk2 creat client createcli qu get peer getpeer index peer get client port getclientport watcher2 log info zk2 ha session id 0x hex string tohexstr zk2 get session id getsessionid zoo keeper zookeep zk3 creat client createcli qu get peer getpeer peer get client port getclientport watcher3 log info zk3 ha session id 0x hex string tohexstr zk3 get session id getsessionid zk1 creat first zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk2 creat mybar zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti atom atomicboolean run runnow atom atomicboolean thread mytestfoo thread mytestfoothread thread runnabl overrid run sync counter insynccount sync counter insynccount 400 run runnow get zk3 creat mytestfoo zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti async callback asynccallback string callback stringcallback overrid process result processresult rc string path object ctx string name counter rc error counter 7300 sem releas thread sleep 10 except sync counter insynccount thread yield mytestfoo thread mytestfoothread start 5000 zk2 creat mybar zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti async callback asynccallback string callback stringcallback overrid process result processresult rc string path object ctx string name counter rc error counter 7300 sem releas 1000 qu shutdown index thread sleep 1100 log info shut down s1 1100 1150 1200 thread sleep 1000 1200 qu start shutdown startthenshutdown index run runnow set qu restart index log info set up server index 1000 zk3 creat newbaz zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti async callback asynccallback string callback stringcallback overrid process result processresult rc string path object ctx string name counter rc error counter 7300 sem releas 1050 1100 1150 thread sleep 1000 wait updat sem acquir tryacquir client base clientbas connect timeout connect timeout time unit timeunit millisecond log warn aquir semaphor fast mytestfoo thread mytestfoothread join client base clientbas connect timeout connect timeout mytestfoo thread mytestfoothread aliv isal log error mytestfoo thread mytestfoothread aliv thread sleep 1000 verifi server follow ha epoch leader verifi state verifyst qu index leader zk1 close zk2 close zk3 close qu shutdown shutdownal disconnect zoo keeper disconnectablezookeep creat client createcli port countdown watcher countdownwatch watcher io except ioexcept timeout except timeoutexcept interrupt except interruptedexcept disconnect zoo keeper disconnectablezookeep zk disconnect zoo keeper disconnectablezookeep 127 port client base clientbas connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout zk testabl zoo keeper testablezookeep creat testabl client createtestablecli string hp io except ioexcept timeout except timeoutexcept interrupt except interruptedexcept countdown watcher countdownwatch watcher countdown watcher countdownwatch creat testabl client createtestablecli watcher hp testabl zoo keeper testablezookeep creat testabl client createtestablecli countdown watcher countdownwatch watcher string hp io except ioexcept timeout except timeoutexcept interrupt except interruptedexcept testabl zoo keeper testablezookeep zk testabl zoo keeper testablezookeep hp client base clientbas connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout zk verifi state verifyst quorum util quorumutil qu index leader leader asserttru follow qu get peer getpeer index peer follow epochf qu get peer getpeer index peer get activ server getactiveserv get zxid getzxid 32l epochl leader get epoch getepoch 32l asserttru zxid qu get peer getpeer index peer get activ server getactiveserv get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid current epoch epochf epochf epochl leader index leaderindex index collect session restart sessionsrestart qu get peer getpeer index peer get activ server getactiveserv get zk databas getzkdatabas get session getsess collect session restart sessionsnotrestart qu get peer getpeer leader index leaderindex peer get activ server getactiveserv get zk databas getzkdatabas get session getsess session restart sessionsrestart asserttru set session server expect session restart sessionsnotrestart contain equal assertequ number session session restart sessionsnotrestart size session restart sessionsrestart size zk databas zkdatabas restart qu get peer getpeer index peer get activ server getactiveserv get zk databas getzkdatabas zk databas zkdatabas clean qu get peer getpeer peer get activ server getactiveserv get zk databas getzkdatabas zk databas zkdatabas lead qu get peer getpeer leader index leaderindex peer get activ server getactiveserv get zk databas getzkdatabas session restart sessionsrestart asserttru set session server expect session restart sessionsnotrestart contain hash set hashset ephemer restart get ephemer getephemer hash set hashset clean ephemer cleanephemer clean get ephemer getephemer object clean ephemer cleanephemer ephemer contain log info restart follow doesn contain ephemer hash set hashset lead ephemer leadephemer lead get ephemer getephemer object lead ephemer leadephemer clean ephemer cleanephemer contain log info follow doesn contain ephemer from leader equal assertequ number ephemer follow ephemer size clean ephemer cleanephemer size equal assertequ leader equal follow lead get ephemer getephemer size clean ephemer cleanephemer size verifi server send proper zxid zookeep 1412 test test follow send last zxid testfollowersendslastzxid except quorum util quorumutil qu quorum util quorumutil qu start startal index qu get peer getpeer index peer follow index log info connect follow index testabl zoo keeper testablezookeep zk creat testabl client createtestablecli localhost qu get peer getpeer index peer get client port getclientport equal assertequ 0l zk testabl last zxid testablelastzxid zk exist lzxid zk testabl last zxid testablelastzxid asserttru lzxid lzxid lzxid zk close watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put verifi server send proper zxid result watch doesn fire zookeep 1412 test test follow watcher resync testfollowerwatcherresync except quorum util quorumutil qu quorum util quorumutil qu start startal index qu get peer getpeer index peer follow index log info connect follow index testabl zoo keeper testablezookeep zk1 creat testabl client createtestablecli localhost qu get peer getpeer index peer get client port getclientport zk1 creat foo foo get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist watcher mywatch watcher watcher mywatch testabl zoo keeper testablezookeep zk2 creat testabl client createtestablecli watcher localhost qu get peer getpeer index peer get client port getclientport zk2 exist foo watcher reset zk2 testabl connloss testableconnloss watcher client connect clientconnect await connect timeout connect timeout time unit timeunit millisecond fail unabl connect server arrai equal assertarrayequ foo get byte getbyt zk2 get data getdata foo assertnul watcher event poll time unit timeunit second zk1 close zk2 close 

watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put 

implement leader elect tcp us object quorum cnx manag quorumcnxmanag manag connect algorithm push base udp implement paramet tune chang behavior first final wait finalizewait determin amount time wait decid leader part leader elect algorithm fast leader elect fastleaderelect elect logger log logger factori loggerfactori get logger getlogg fast leader elect fastleaderelect determin time process ha wait believ ha reach end leader elect final wait finalizewait 200 upper bound amount time two consecut notif check impact amount time get up after partit current 60 second max notif interv maxnotificationinterv 60000 connect manag fast leader elect us tcp commun peer quorum cnx manag quorumcnxmanag manag connect quorum cnx manag quorumcnxmanag manag notif messag let peer peer ha chang vote ha join leader elect learn peer higher zxid zxid higher server id notif propos leader leader zxid propos leader zxid epoch elect epoch electionepoch current state sender quorum peer quorump server state serverst state address sender sid epoch propos leader peer epoch peerepoch messag peer send peer messag notif ack recept notif send tosend type mtype crequest challeng notif ack send tosend type mtype type leader zxid elect epoch electionepoch server state serverst state sid peer epoch peerepoch leader leader zxid zxid elect epoch electionepoch elect epoch electionepoch state state sid sid peer epoch peerepoch peer epoch peerepoch propos leader notif leader id contain tag ack zxid notif zxid epoch elect epoch electionepoch current state quorum peer quorump server state serverst state address recipi sid leader epoch peer epoch peerepoch link block queue linkedblockingqueu send tosend sendqueu link block queue linkedblockingqueu notif recvqueu multi thread implement messag handler messeng two sub class work receiv workreceiv work sender worksend function obviou from name spawn thread messeng receiv messag from instanc quorum cnx manag quorumcnxmanag method run process messag worker receiv workerreceiv runnabl stop quorum cnx manag quorumcnxmanag manag worker receiv workerreceiv quorum cnx manag quorumcnxmanag manag stop manag manag run messag respons stop sleep receiv respons manag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond respons from observ respond right awai note follow predic assum server follow observ type learner futur ll chang check observ self get vote view getvotingview contain kei containskei respons sid vote current self get current vote getcurrentvot send tosend notmsg send tosend send tosend type mtype notif current get id getid current get zxid getzxid logicalclock self get peer state getpeerst respons sid current get peer epoch getpeerepoch sendqueu offer notmsg receiv messag log debug enabl isdebugen log debug receiv notif messag id self get id getid check 28 byte backward compat respons buffer capac 28 log error respons respons buffer capac back compat backcompat respons buffer capac 28 respons buffer clear state peer sent messag quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst respons buffer get getint ackstat quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst follow ackstat quorum peer quorump server state serverst lead ackstat quorum peer quorump server state serverst observ instanti notif set attribut notif notif leader respons buffer get getlong zxid respons buffer get getlong elect epoch electionepoch respons buffer get getlong state ackstat sid respons sid back compat backcompat peer epoch peerepoch respons buffer get getlong log info enabl isinfoen log info backward compat mode server id sid peer epoch peerepoch zxid util zxidutil get epoch from zxid getepochfromzxid zxid print notif info log info enabl isinfoen print notif printnotif server send propos leader self get peer state getpeerst quorum peer quorump server state serverst recvqueu offer send notif back peer sent messag logic clock lag ackstat quorum peer quorump server state serverst elect epoch electionepoch logicalclock vote get vote getvot send tosend notmsg send tosend send tosend type mtype notif get id getid get zxid getzxid logicalclock self get peer state getpeerst respons sid get peer epoch getpeerepoch sendqueu offer notmsg server on sent ack send back believ leader vote current self get current vote getcurrentvot ackstat quorum peer quorump server state serverst log debug enabl isdebugen log debug send notif id self get id getid recipi respons sid zxid 0x hex string tohexstr current get zxid getzxid leader current get id getid send tosend notmsg send tosend send tosend type mtype notif current get id getid current get zxid getzxid logicalclock self get peer state getpeerst respons sid current get peer epoch getpeerepoch sendqueu offer notmsg interrupt except interruptedexcept println interrupt except wait messag string tostr log info worker receiv workerreceiv down worker simpli dequeu messag send queue manag queue worker sender workersend runnabl stop quorum cnx manag quorumcnxmanag manag worker sender workersend quorum cnx manag quorumcnxmanag manag stop manag manag run stop send tosend sendqueu poll 3000 time unit timeunit millisecond process interrupt except interruptedexcept log info worker sender workersend down call run messag send param messag send process send tosend request byte requestbyt 36 buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt build notif packet send request buffer requestbuff clear request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong elect epoch electionepoch request buffer requestbuff put putlong peer epoch peerepoch manag send tosend sid request buffer requestbuff test send receiv queue empti queue empti queueempti sendqueu empti isempti recvqueu empti isempti worker sender workersend ws worker receiv workerreceiv wr constructor messeng param manag connect manag messeng quorum cnx manag quorumcnxmanag manag ws worker sender workersend manag thread thread ws worker sender workersend myid self get id getid set daemon setdaemon start wr worker receiv workerreceiv manag thread wr worker receiv workerreceiv myid self get id getid set daemon setdaemon start stop instanc worker sender workersend worker receiv workerreceiv halt ws stop wr stop quorum peer quorump self messeng messeng logicalclock elect instanc propos leader proposedlead propos zxid proposedzxid propos epoch proposedepoch return current vlue logic clock counter get logic clock getlogicalclock logicalclock constructor fast leader elect fastleaderelect take two paramet on quorum peer quorump object instanti object connect manag object creat peer instanc zoo keeper zookeep servic param self quorum peer quorump creat object param manag connect manag fast leader elect fastleaderelect quorum peer quorump self quorum cnx manag quorumcnxmanag manag stop manag manag starter self manag method invok constructor part start procedur object constructor best keep separ method singl constructor current strictli necessari separ param self quorum peer quorump creat object param manag connect manag starter quorum peer quorump self quorum cnx manag quorumcnxmanag manag self self propos leader proposedlead propos zxid proposedzxid sendqueu link block queue linkedblockingqueu send tosend recvqueu link block queue linkedblockingqueu notif messeng messeng manag leav instanc leaveinst vote log debug enabl isdebugen log debug leav fle instanc leader get id getid zxid 0x hex string tohexstr get zxid getzxid id self get id getid state self get peer state getpeerst recvqueu clear quorum cnx manag quorumcnxmanag get cnx manag getcnxmanag manag stop shutdown stop log debug shut down connect manag manag halt log debug shut down messeng messeng halt log debug fle down send notif peer chang vote send notif sendnotif quorum server quorumserv server self get vote view getvotingview valu sid server id send tosend notmsg send tosend send tosend type mtype notif propos leader proposedlead propos zxid proposedzxid logicalclock quorum peer quorump server state serverst sid propos epoch proposedepoch log debug enabl isdebugen log debug send notif propos leader proposedlead leader 0x hex string tohexstr propos zxid proposedzxid zxid 0x hex string tohexstr logicalclock round sid recipi self get id getid myid 0x hex string tohexstr propos epoch proposedepoch peer epoch peerepoch sendqueu offer notmsg print notif printnotif notif log info notif leader leader 0x hex string tohexstr zxid zxid 0x hex string tohexstr elect epoch electionepoch round state state sid sid 0x hex string tohexstr peer epoch peerepoch peer poch peerepoch self get peer state getpeerst state check pair server id zxid succe current vote param id server identifi param zxid last zxid observ issuer vote total order predic totalorderpred id newid zxid newzxid epoch newepoch cur id curid cur zxid curzxid cur epoch curepoch log debug id id newid propos id cur id curid zxid 0x hex string tohexstr zxid newzxid propos zxid 0x hex string tohexstr cur zxid curzxid self get quorum verifi getquorumverifi get weight getweight id newid on follow three case hold epoch higher epoch current epoch zxid higher epoch current epoch zxid current zxid server id higher epoch newepoch cur epoch curepoch epoch newepoch cur epoch curepoch zxid newzxid cur zxid curzxid zxid newzxid cur zxid curzxid id newid cur id curid termin predic set vote determin suffici declar end elect round param vote set vote param identifi vote receiv last param zxid zxid vote receiv last term predic termpred hash map hashmap vote vote vote vote hash set hashset set hash set hashset first make view consist peer differ zxid server depend time map entri vote entri vote entri set entryset vote equal entri get valu getvalu set add entri get kei getkei self get quorum verifi getquorumverifi contain quorum containsquorum set leader elect quorum support leader check leader ha vote ack lead check avoid peer keep elect peer ha crash longer lead param vote set vote param leader leader id param elect epoch electionepoch epoch id check leader checklead hash map hashmap vote vote leader elect epoch electionepoch predic think leader leader two check leader leader haven receiv messag from leader state lead predic leader self get id getid vote get leader predic vote get leader get state getstat server state serverst lead predic logicalclock elect epoch electionepoch predic predic updat propos updatepropos leader zxid epoch log debug enabl isdebugen log debug updat propos leader newlead 0x hex string tohexstr zxid newzxid propos leader proposedlead oldlead 0x hex string tohexstr propos zxid proposedzxid oldzxid propos leader proposedlead leader propos zxid proposedzxid zxid propos epoch proposedepoch epoch vote get vote getvot vote propos leader proposedlead propos zxid proposedzxid propos epoch proposedepoch learn state follow observ method simpli decid on depend role server server state serverst server state serverst learn state learningst self get learner type getlearnertyp learner type learnertyp particip log debug particip self get id getid server state serverst follow log debug observ self get id getid server state serverst observ return initi vote valu server identifi get init id getinitid self get learner type getlearnertyp learner type learnertyp particip self get id getid min valu min valu return initi last log zxid get init last log zxid getinitlastloggedzxid self get learner type getlearnertyp learner type learnertyp particip self get last log zxid getlastloggedzxid min valu min valu return initi vote valu peer epoch get peer epoch getpeerepoch self get learner type getlearnertyp learner type learnertyp particip self get current epoch getcurrentepoch io except ioexcept runtim except runtimeexcept runtim except runtimeexcept get messag getmessag set stack trace setstacktrac get stack trace getstacktrac min valu min valu start round leader elect quorum peer quorump chang state method invok send notif peer vote leader lookforlead interrupt except interruptedexcept self jmx leader elect bean jmxleaderelectionbean leader elect bean leaderelectionbean bean registri mbeanregistri get instanc getinst self jmx leader elect bean jmxleaderelectionbean self jmx local peer bean jmxlocalpeerbean except log warn fail jmx self jmx leader elect bean jmxleaderelectionbean self start fle start fle self start fle start fle current time milli currenttimemilli hash map hashmap vote recvset hash map hashmap vote hash map hashmap vote outofelect hash map hashmap vote timeout nottimeout final wait finalizewait logicalclock updat propos updatepropos get init id getinitid get init last log zxid getinitlastloggedzxid get peer epoch getpeerepoch log info elect id self get id getid propos zxid 0x hex string tohexstr propos zxid proposedzxid send notif sendnotif loop exchang notif find leader self get peer state getpeerst server state serverst stop remov next notif from queue time after time termin time notif recvqueu poll timeout nottimeout time unit timeunit millisecond send more notif haven receiv process notif manag deliv havedeliv send notif sendnotif manag connect connectal exponenti backoff tmp time tmptimeout timeout nottimeout timeout nottimeout tmp time tmptimeout max notif interv maxnotificationinterv tmp time tmptimeout max notif interv maxnotificationinterv log info notif time timeout nottimeout self get vote view getvotingview contain kei containskei sid proce vote from replica vote view state notif current replac send messag elect epoch electionepoch logicalclock logicalclock elect epoch electionepoch recvset clear total order predic totalorderpred leader zxid peer epoch peerepoch get init id getinitid get init last log zxid getinitlastloggedzxid get peer epoch getpeerepoch updat propos updatepropos leader zxid peer epoch peerepoch updat propos updatepropos get init id getinitid get init last log zxid getinitlastloggedzxid get peer epoch getpeerepoch send notif sendnotif elect epoch electionepoch logicalclock log debug enabl isdebugen log debug notif elect epoch smaller logicalclock elect epoch electionepoch 0x hex string tohexstr elect epoch electionepoch logicalclock 0x hex string tohexstr logicalclock total order predic totalorderpred leader zxid peer epoch peerepoch propos leader proposedlead propos zxid proposedzxid propos epoch proposedepoch updat propos updatepropos leader zxid peer epoch peerepoch send notif sendnotif log debug enabl isdebugen log debug ad vote from sid propos leader leader propos zxid 0x hex string tohexstr zxid propos elect epoch 0x hex string tohexstr elect epoch electionepoch recvset put sid vote leader zxid elect epoch electionepoch peer epoch peerepoch term predic termpred recvset vote propos leader proposedlead propos zxid proposedzxid logicalclock propos epoch proposedepoch verifi chang propos leader recvqueu poll final wait finalizewait time unit timeunit millisecond total order predic totalorderpred leader zxid peer epoch peerepoch propos leader proposedlead propos zxid proposedzxid propos epoch proposedepoch recvqueu put predic don read relev messag from recept queue self set peer state setpeerst propos leader proposedlead self get id getid server state serverst lead learn state learningst vote end vote endvot vote propos leader proposedlead propos zxid proposedzxid propos epoch proposedepoch leav instanc leaveinst end vote endvot end vote endvot observ log debug notif from observ sid follow lead notif from epoch elect epoch electionepoch logicalclock recvset put sid vote leader zxid elect epoch electionepoch peer epoch peerepoch term predic termpred recvset vote leader zxid elect epoch electionepoch peer epoch peerepoch state check leader checklead outofelect leader elect epoch electionepoch self set peer state setpeerst leader self get id getid server state serverst lead learn state learningst vote end vote endvot vote leader zxid peer epoch peerepoch leav instanc leaveinst end vote endvot end vote endvot befor join establish ensembl verifi major follow leader outofelect put sid vote leader zxid elect epoch electionepoch peer epoch peerepoch state term predic termpred outofelect vote leader zxid elect epoch electionepoch peer epoch peerepoch state check leader checklead outofelect leader elect epoch electionepoch logicalclock elect epoch electionepoch self set peer state setpeerst leader self get id getid server state serverst lead learn state learningst vote end vote endvot vote leader zxid peer epoch peerepoch leav instanc leaveinst end vote endvot end vote endvot log warn notif state unrecogin state state sid sid log warn ignor notif from non cluster member sid self jmx leader elect bean jmxleaderelectionbean bean registri mbeanregistri get instanc getinst unregist self jmx leader elect bean jmxleaderelectionbean except log warn fail unregist jmx self jmx leader elect bean jmxleaderelectionbean 

notif messag let peer peer ha chang vote ha join leader elect learn peer higher zxid zxid higher server id notif propos leader leader zxid propos leader zxid epoch elect epoch electionepoch current state sender quorum peer quorump server state serverst state address sender sid epoch propos leader peer epoch peerepoch 

messag peer send peer messag notif ack recept notif send tosend type mtype crequest challeng notif ack send tosend type mtype type leader zxid elect epoch electionepoch server state serverst state sid peer epoch peerepoch leader leader zxid zxid elect epoch electionepoch elect epoch electionepoch state state sid sid peer epoch peerepoch peer epoch peerepoch propos leader notif leader id contain tag ack zxid notif zxid epoch elect epoch electionepoch current state quorum peer quorump server state serverst state address recipi sid leader epoch peer epoch peerepoch 

type mtype crequest challeng notif ack 

multi thread implement messag handler messeng two sub class work receiv workreceiv work sender worksend function obviou from name spawn thread messeng receiv messag from instanc quorum cnx manag quorumcnxmanag method run process messag worker receiv workerreceiv runnabl stop quorum cnx manag quorumcnxmanag manag worker receiv workerreceiv quorum cnx manag quorumcnxmanag manag stop manag manag run messag respons stop sleep receiv respons manag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond respons from observ respond right awai note follow predic assum server follow observ type learner futur ll chang check observ self get vote view getvotingview contain kei containskei respons sid vote current self get current vote getcurrentvot send tosend notmsg send tosend send tosend type mtype notif current get id getid current get zxid getzxid logicalclock self get peer state getpeerst respons sid current get peer epoch getpeerepoch sendqueu offer notmsg receiv messag log debug enabl isdebugen log debug receiv notif messag id self get id getid check 28 byte backward compat respons buffer capac 28 log error respons respons buffer capac back compat backcompat respons buffer capac 28 respons buffer clear state peer sent messag quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst respons buffer get getint ackstat quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst follow ackstat quorum peer quorump server state serverst lead ackstat quorum peer quorump server state serverst observ instanti notif set attribut notif notif leader respons buffer get getlong zxid respons buffer get getlong elect epoch electionepoch respons buffer get getlong state ackstat sid respons sid back compat backcompat peer epoch peerepoch respons buffer get getlong log info enabl isinfoen log info backward compat mode server id sid peer epoch peerepoch zxid util zxidutil get epoch from zxid getepochfromzxid zxid print notif info log info enabl isinfoen print notif printnotif server send propos leader self get peer state getpeerst quorum peer quorump server state serverst recvqueu offer send notif back peer sent messag logic clock lag ackstat quorum peer quorump server state serverst elect epoch electionepoch logicalclock vote get vote getvot send tosend notmsg send tosend send tosend type mtype notif get id getid get zxid getzxid logicalclock self get peer state getpeerst respons sid get peer epoch getpeerepoch sendqueu offer notmsg server on sent ack send back believ leader vote current self get current vote getcurrentvot ackstat quorum peer quorump server state serverst log debug enabl isdebugen log debug send notif id self get id getid recipi respons sid zxid 0x hex string tohexstr current get zxid getzxid leader current get id getid send tosend notmsg send tosend send tosend type mtype notif current get id getid current get zxid getzxid logicalclock self get peer state getpeerst respons sid current get peer epoch getpeerepoch sendqueu offer notmsg interrupt except interruptedexcept println interrupt except wait messag string tostr log info worker receiv workerreceiv down worker simpli dequeu messag send queue manag queue worker sender workersend runnabl stop quorum cnx manag quorumcnxmanag manag worker sender workersend quorum cnx manag quorumcnxmanag manag stop manag manag run stop send tosend sendqueu poll 3000 time unit timeunit millisecond process interrupt except interruptedexcept log info worker sender workersend down call run messag send param messag send process send tosend request byte requestbyt 36 buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt build notif packet send request buffer requestbuff clear request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong elect epoch electionepoch request buffer requestbuff put putlong peer epoch peerepoch manag send tosend sid request buffer requestbuff test send receiv queue empti queue empti queueempti sendqueu empti isempti recvqueu empti isempti worker sender workersend ws worker receiv workerreceiv wr constructor messeng param manag connect manag messeng quorum cnx manag quorumcnxmanag manag ws worker sender workersend manag thread thread ws worker sender workersend myid self get id getid set daemon setdaemon start wr worker receiv workerreceiv manag thread wr worker receiv workerreceiv myid self get id getid set daemon setdaemon start stop instanc worker sender workersend worker receiv workerreceiv halt ws stop wr stop 

receiv messag from instanc quorum cnx manag quorumcnxmanag method run process messag worker receiv workerreceiv runnabl stop quorum cnx manag quorumcnxmanag manag worker receiv workerreceiv quorum cnx manag quorumcnxmanag manag stop manag manag run messag respons stop sleep receiv respons manag poll recv queue pollrecvqueu 3000 time unit timeunit millisecond respons from observ respond right awai note follow predic assum server follow observ type learner futur ll chang check observ self get vote view getvotingview contain kei containskei respons sid vote current self get current vote getcurrentvot send tosend notmsg send tosend send tosend type mtype notif current get id getid current get zxid getzxid logicalclock self get peer state getpeerst respons sid current get peer epoch getpeerepoch sendqueu offer notmsg receiv messag log debug enabl isdebugen log debug receiv notif messag id self get id getid check 28 byte backward compat respons buffer capac 28 log error respons respons buffer capac back compat backcompat respons buffer capac 28 respons buffer clear state peer sent messag quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst respons buffer get getint ackstat quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst follow ackstat quorum peer quorump server state serverst lead ackstat quorum peer quorump server state serverst observ instanti notif set attribut notif notif leader respons buffer get getlong zxid respons buffer get getlong elect epoch electionepoch respons buffer get getlong state ackstat sid respons sid back compat backcompat peer epoch peerepoch respons buffer get getlong log info enabl isinfoen log info backward compat mode server id sid peer epoch peerepoch zxid util zxidutil get epoch from zxid getepochfromzxid zxid print notif info log info enabl isinfoen print notif printnotif server send propos leader self get peer state getpeerst quorum peer quorump server state serverst recvqueu offer send notif back peer sent messag logic clock lag ackstat quorum peer quorump server state serverst elect epoch electionepoch logicalclock vote get vote getvot send tosend notmsg send tosend send tosend type mtype notif get id getid get zxid getzxid logicalclock self get peer state getpeerst respons sid get peer epoch getpeerepoch sendqueu offer notmsg server on sent ack send back believ leader vote current self get current vote getcurrentvot ackstat quorum peer quorump server state serverst log debug enabl isdebugen log debug send notif id self get id getid recipi respons sid zxid 0x hex string tohexstr current get zxid getzxid leader current get id getid send tosend notmsg send tosend send tosend type mtype notif current get id getid current get zxid getzxid logicalclock self get peer state getpeerst respons sid current get peer epoch getpeerepoch sendqueu offer notmsg interrupt except interruptedexcept println interrupt except wait messag string tostr log info worker receiv workerreceiv down 

worker simpli dequeu messag send queue manag queue worker sender workersend runnabl stop quorum cnx manag quorumcnxmanag manag worker sender workersend quorum cnx manag quorumcnxmanag manag stop manag manag run stop send tosend sendqueu poll 3000 time unit timeunit millisecond process interrupt except interruptedexcept log info worker sender workersend down call run messag send param messag send process send tosend request byte requestbyt 36 buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt build notif packet send request buffer requestbuff clear request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong elect epoch electionepoch request buffer requestbuff put putlong peer epoch peerepoch manag send tosend sid request buffer requestbuff 

gener skip list hold rough index log file log file load index built ad mark entri specif time posit request from file point most entri befor time posit jump log skip list logskiplist logger log logger factori loggerfactori get logger getlogg log skip list logskiplist link list linkedlist mark mark mark time byte skip mark time byte skip time time byte byte skip skip get time gettim time get byte getbyt byte get entri skip getentriesskip skip string string tostr mark time time byte byte skip skip log skip list logskiplist log trace enabl istraceen log trace skip list mark link list linkedlist mark add mark addmark time byte skip log trace enabl istraceen log trace add mark addmark time time byte byte skip skip mark add mark time byte skip find last mark skip list befor time mark find mark befor findmarkbefor time element except nosuchelementexcept log trace enabl istraceen log trace find mark befor findmarkbefor time mark last mark get first getfirst mark mark get time gettim time last log trace enabl istraceen log trace last last 

mark time byte skip mark time byte skip time time byte byte skip skip get time gettim time get byte getbyt byte get entri skip getentriesskip skip string string tostr mark time time byte byte skip skip 

merg log sourc mergedlogsourc log sourc logsourc logger log logger factori loggerfactori get logger getlogg merg log sourc mergedlogsourc vector log sourc logsourc sourc starttim endtim size overlap rang overlapsrang starttim endtim starttim endtim endtim starttim size size get start time getstarttim starttim get end time getendtim endtim merg log sourc iter mergedlogsourceiter log iter logiter log entri logentri next start end merg log sourc mergedlogsourc src log iter logiter sourc log entri logentri next filter op filterop filter merg log sourc iter mergedlogsourceiter merg log sourc mergedlogsourc src starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept vector log iter logiter iter vector log iter logiter log sourc logsourc src sourc overlap rang overlapsrang starttim endtim iter add iter starttim endtim filter sourc log iter logiter iter size sourc iter arrai toarrai sourc next log entri logentri iter size sourc length sourc ha next hasnext next sourc next filter filter merg log sourc iter mergedlogsourceiter merg log sourc mergedlogsourc src starttim endtim illeg argument except illegalargumentexcept filter except filterexcept src starttim endtim size io except ioexcept size log iter logiter sourc size size size ha next hasnext log entri logentri next log entri logentri next min next length next min min next get timestamp gettimestamp next min get timestamp gettimestamp min min log entri logentri next min next min sourc min next remov unsupport oper except unsupportedoperationexcept unsupport oper except unsupportedoperationexcept remov support merg log close io except ioexcept log iter logiter sourc close log iter logiter iter starttim endtim illeg argument except illegalargumentexcept iter starttim endtim filter except filterexcept fe shouldn happen filter log iter logiter iter starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept sanitis start end time endtim starttim illeg argument except illegalargumentexcept end time endtim greater equal starttim starttim merg log sourc iter mergedlogsourceiter starttim endtim filter log iter logiter iter illeg argument except illegalargumentexcept iter starttim endtim merg log sourc mergedlogsourc string file io except ioexcept sourc vector log sourc logsourc string file add sourc addsourc add sourc addsourc string io except ioexcept log sourc logsourc txn log sourc txnlogsourc transact file istransactionfil txn log sourc txnlogsourc log4 sourc log4jsourc size size endtim get end time getendtim endtim get end time getendtim endtim starttim get start time getstarttim starttim starttim get start time getstarttim starttim sourc add string string tostr string merg log sourc mergedlogsourc size size start starttim end endtim log sourc logsourc src sourc src main string arg io except ioexcept println time current time milli currenttimemilli merg log sourc mergedlogsourc merg log sourc mergedlogsourc arg println log iter logiter iter iter iter println time current time milli currenttimemilli println iter size iter size println time current time milli currenttimemilli iter ha next hasnext println iter next iter close println time current time milli currenttimemilli 

merg log sourc iter mergedlogsourceiter log iter logiter log entri logentri next start end merg log sourc mergedlogsourc src log iter logiter sourc log entri logentri next filter op filterop filter merg log sourc iter mergedlogsourceiter merg log sourc mergedlogsourc src starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept vector log iter logiter iter vector log iter logiter log sourc logsourc src sourc overlap rang overlapsrang starttim endtim iter add iter starttim endtim filter sourc log iter logiter iter size sourc iter arrai toarrai sourc next log entri logentri iter size sourc length sourc ha next hasnext next sourc next filter filter merg log sourc iter mergedlogsourceiter merg log sourc mergedlogsourc src starttim endtim illeg argument except illegalargumentexcept filter except filterexcept src starttim endtim size io except ioexcept size log iter logiter sourc size size size ha next hasnext log entri logentri next log entri logentri next min next length next min min next get timestamp gettimestamp next min get timestamp gettimestamp min min log entri logentri next min next min sourc min next remov unsupport oper except unsupportedoperationexcept unsupport oper except unsupportedoperationexcept remov support merg log close io except ioexcept log iter logiter sourc close 

version org apach zookeep version info get revis getrevis revis string get build date getbuildd build date build date string get version getvers major minor micro qualifi qualifi string get version revis getversionrevis get version getvers get revis getrevis string get full version getfullvers get version revis getversionrevis built get build date getbuildd print usag printusag print usag tjava cp org apach zookeep version full revis print tprint full version info arg specifi exit print current version revis build date standard param arg ul li print version string li revis print version string svn repositori revis 94 li full print revis build date ul main string arg arg length print usag printusag arg length arg length arg equal full println get full version getfullvers exit arg equal println get version getvers arg equal revis println get version revis getversionrevis print usag printusag exit 

contain data node data tree data node contain refer parent arrai data arrai acl stat object set children path data node datanod record parent datanod data node datanod parent data datanod data acl map datanod datatre ha map acl stat node persist disk stat persist statpersist stat list children node note list children string contain parent path last part path deseri speed up issu set string children constructor datanod data node datanod constructor creat data node datanod parent data acl stat param parent parent data node datanod param data data set param acl acl node param stat stat node data node datanod data node datanod parent data acl stat persist statpersist stat parent parent data data acl acl stat stat method insert child children set param child insert set contain specifi element add child addchild string child children let conserv typic number children children hash set hashset string children add child method remov child from children set param child set contain specifi element remov child removechild string child children children remov child conveni method set children datanod param children set children setchildren hash set hashset string children children children conveni method get children children datanod set string get children getchildren children copi stat copystat stat set avers setavers stat get avers getavers set ctime setctim stat get ctime getctim set czxid setczxid stat get czxid getczxid set mtime setmtim stat get mtime getmtim set mzxid setmzxid stat get mzxid getmzxid set pzxid setpzxid stat get pzxid getpzxid set version setvers stat get version getvers set ephemer owner setephemeralown stat get ephemer owner getephemeralown set data length setdatalength data data length num children numchildren children num children numchildren children size cversion translat from count creat count chang v3 semant creat delet children present set cversion setcvers stat get cversion getcvers num children numchildren set num children setnumchildren num children numchildren deseri input archiv inputarch archiv string tag io except ioexcept archiv start record startrecord node data archiv read buffer readbuff data acl archiv read readlong acl stat stat persist statpersist stat deseri archiv statpersist archiv end record endrecord node serial output archiv outputarch archiv string tag io except ioexcept archiv start record startrecord node archiv write buffer writebuff data data archiv write writelong acl acl stat serial archiv statpersist archiv end record endrecord node 

string jstring comp type jcomptyp creat instanc string jstring string jstring std string string string string string string string get signatur getsignatur string gen java read wrapper genjavareadwrapp string fname string tag decl string ret decl ret string fname ret fname read string readstr tag string gen java write wrapper genjavawritewrapp string fname string tag write string writestr fname tag 

basic server statist server stat serverstat packet sent packetss packet receiv packetsreceiv max latenc maxlat min latenc minlat max valu max valu total latenc totallat count provid provid provid get outstand request getoutstandingrequest get last process zxid getlastprocessedzxid string get state getstat get num aliv connect getnumaliveconnect server stat serverstat provid provid provid provid getter get min latenc getminlat min latenc minlat max valu max valu min latenc minlat get avg latenc getavglat count total latenc totallat count get max latenc getmaxlat max latenc maxlat get outstand request getoutstandingrequest provid get outstand request getoutstandingrequest get last process zxid getlastprocessedzxid provid get last process zxid getlastprocessedzxid get packet receiv getpacketsreceiv packet receiv packetsreceiv get packet sent getpacketss packet sent packetss string get server state getserverst provid get state getstat number client connect aliv server get num aliv client connect getnumaliveclientconnect provid get num aliv connect getnumaliveconnect overrid string string tostr string builder stringbuild sb string builder stringbuild sb append latenc min avg max get min latenc getminlat get avg latenc getavglat get max latenc getmaxlat sb append receiv get packet receiv getpacketsreceiv sb append sent get packet sent getpacketss sb append connect get num aliv client connect getnumaliveclientconnect provid sb append outstand get outstand request getoutstandingrequest sb append zxid 0x hex string tohexstr get last process zxid getlastprocessedzxid sb append mode get server state getserverst sb string tostr mutat updat latenc updatelat request creat time requestcreatetim latenc current time milli currenttimemilli request creat time requestcreatetim total latenc totallat latenc count latenc min latenc minlat min latenc minlat latenc latenc max latenc maxlat max latenc maxlat latenc reset latenc resetlat total latenc totallat count max latenc maxlat min latenc minlat max valu max valu reset max latenc resetmaxlat max latenc maxlat get min latenc getminlat increment packet receiv incrementpacketsreceiv packet receiv packetsreceiv increment packet sent incrementpacketss packet sent packetss reset request counter resetrequestcount packet receiv packetsreceiv packet sent packetss reset reset latenc resetlat reset request counter resetrequestcount 

provid get outstand request getoutstandingrequest get last process zxid getlastprocessedzxid string get state getstat get num aliv connect getnumaliveconnect 

zoo keeper test client zookeepertestcli zk test zktestcas watcher string host port hostport 127 22801 string dir zk dironzk test dir test dir string test dir zk testdironzk dir zk dironzk current time milli currenttimemilli link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev watch event watchedev get event getev num numtri interrupt except interruptedexcept watch event watchedev event num numtri println event event poll 10 time unit timeunit second event thread sleep 5000 event delet zk dir deletezkdir zoo keeper zookeep zk string node name nodenam io except ioexcept interrupt except interruptedexcept keeper except keeperexcept stat stat zk exist node name nodenam stat list string children1 zk get children getchildren node name nodenam list string c2 zk get children getchildren node name nodenam stat children1 equal c2 fail children list from get children getchildren get children2 getchildren2 match stat equal stat fail stat from exist get children2 getchildren2 match children1 size zk delet node name nodenam string children1 delet zk dir deletezkdir zk check root checkroot io except ioexcept interrupt except interruptedexcept zoo keeper zookeep zk zoo keeper zookeep host port hostport 10000 zk creat dir zk dironzk id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept node exist except nodeexistsexcept ke expect sort keeper except keeperexcept ke fail unexpect except code creat dir zk dironzk ke get messag getmessag zk creat test dir zk testdironzk id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept node exist except nodeexistsexcept ke expect sort keeper except keeperexcept ke fail unexpect except code creat test dir zk testdironzk ke get messag getmessag zk close enod test enod test io except ioexcept interrupt except interruptedexcept keeper except keeperexcept check root checkroot string parent name parentnam test dir zk testdironzk string node name nodenam parent name parentnam enod abc enod abc zoo keeper zookeep zk zoo keeper zookeep host port hostport 10000 stat stat zk exist parent name parentnam stat zk creat parent name parentnam id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept ke fail creat node parent name parentnam ke get messag getmessag zk creat node name nodenam id open acl unsaf open acl unsaf creat mode createmod ephemer keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code nodeexist valid fail unexpect except code createin ke get messag getmessag stat zk exist node name nodenam stat fail node node name nodenam exist println close client sessionid 0x hex string tohexstr zk get session id getsessionid zk close zk zoo keeper zookeep host port hostport 10000 10 println stat zk exist node name nodenam stat println node node name nodenam exist after reconnect close println node node name nodenam after reconnect close thread sleep 5000 delet zk dir deletezkdir zk node name nodenam zk close enod test enod test io except ioexcept interrupt except interruptedexcept keeper except keeperexcept check root checkroot string parent name parentnam test dir zk testdironzk string node name nodenam parent name parentnam enod abc enod abc zoo keeper zookeep zk zoo keeper zookeep host port hostport 10000 zoo keeper zookeep zk zk zoo keeper zookeep host port hostport 10000 stat stat parent stat parent zk zk exist parent name parentnam stat parent stat parent zk creat parent name parentnam id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept ke fail creat node parent name parentnam ke get messag getmessag stat stat node stat node zk zk exist node name nodenam stat node stat node zk delet node name nodenam keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code nonod code keeper except keeperexcept code notempti valid fail unexpect except code delet ke get messag getmessag list string first gen1 firstgen1 zk zk get children getchildren parent name parentnam stat stat stat list string first gen2 firstgen2 zk zk get children getchildren parent name parentnam stat first gen1 firstgen1 equal first gen2 firstgen2 fail children list from get children getchildren get children2 getchildren2 match stat parent stat parent equal stat fail stat from exist get children getchildren match zk creat node name nodenam id open acl unsaf open acl unsaf creat mode createmod ephemer keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code nodeexist valid fail unexpect except code createin ke get messag getmessag thread sleep 5000 watch event watchedev event event poll 10 time unit timeunit second event io except ioexcept event deliv promptli event get type gettyp event type eventtyp node children chang nodechildrenchang event get path getpath equal ignor equalsignorecas parent name parentnam fail unexpect event deliv event string tostr stat node stat node zk zk exist node name nodenam stat node stat node fail node node name nodenam exist zk delet parent name parentnam fail imposs delet non empti node parent name parentnam keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code notempti valid fail unexpect except code delet code zk creat node name nodenam def id open acl unsaf open acl unsaf creat mode createmod ephemer fail imposs creat child ephemer node node name nodenam keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code nochildrenforephemer valid fail unexpect except code createin code list string children1 zk get children getchildren node name nodenam list string children2 zk get children getchildren node name nodenam children1 equal children2 fail children list from get children getchildren get children2 getchildren2 match children1 size fail ephemer node node name nodenam children keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code nonod valid fail unexpect except code createin code first gen1 firstgen1 zk zk get children getchildren parent name parentnam first gen2 firstgen2 zk zk get children getchildren parent name parentnam first gen1 firstgen1 equal first gen2 firstgen2 fail children list from get children getchildren get children2 getchildren2 match stat node stat node zk zk exist node name nodenam stat node stat node fail node node name nodenam exist println session id zk zk get session id getsessionid println session id zk zk zk zk get session id getsessionid zk close stat stat stat zk zk exist nosuchnod event get event getev 10 event error first event deliv promptli event get type gettyp event type eventtyp node children chang nodechildrenchang event get path getpath equal ignor equalsignorecas parent name parentnam event get type gettyp event type eventtyp node delet nodedelet event get path getpath equal ignor equalsignorecas node name nodenam print parent name parentnam event type eventtyp node children chang nodechildrenchang node name nodenam event type eventtyp node delet nodedelet fail unexpect first event deliv event string tostr event get event getev 10 event error second event deliv promptli event get type gettyp event type eventtyp node children chang nodechildrenchang event get path getpath equal ignor equalsignorecas parent name parentnam event get type gettyp event type eventtyp node delet nodedelet event get path getpath equal ignor equalsignorecas node name nodenam print parent name parentnam event type eventtyp node children chang nodechildrenchang node name nodenam event type eventtyp node delet nodedelet fail unexpect second event deliv event string tostr first gen1 firstgen1 zk zk get children getchildren parent name parentnam stat node stat node zk zk exist node name nodenam stat node stat node fail node node name nodenam delet first gen1 firstgen1 contain node name nodenam fail node node name nodenam children delet zk dir deletezkdir zk zk node name nodenam zk zk close delet creat get set test delet creat get set test io except ioexcept interrupt except interruptedexcept keeper except keeperexcept check root checkroot zoo keeper zookeep zk zoo keeper zookeep host port hostport 10000 string parent name parentnam test dir zk testdironzk string node name nodenam parent name parentnam benwasher zk delet node name nodenam keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code nonod code keeper except keeperexcept code notempti valid fail unexpect except code delet ke get messag getmessag zk creat node name nodenam id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code nodeexist valid fail unexpect except code creat ke get messag getmessag zk set data setdata node name nodenam get byte getbyt 5700 fail bad version badvers except keeper except keeperexcept ke ke code code badvers fail bad version badvers except zk set data setdata node name nodenam get byte getbyt stat st stat byte zk get data getdata node name nodenam st string retriev string byte equal retriev fail retriev data retriev differ expect zk delet node name nodenam 6800 fail bad version badvers except keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code notempti code keeper except keeperexcept code badvers valid fail unexpect except code delet ke get messag getmessag zk delet node name nodenam keeper except keeperexcept ke code code ke code valid code keeper except keeperexcept code notempti valid fail unexpect except code delet code delet zk dir deletezkdir zk node name nodenam zk close test test io except ioexcept interrupt except interruptedexcept keeper except keeperexcept enod test enod test enod test enod test delet creat get set test delet creat get set test process watch event watchedev event println event event string tostr event put event interrupt except interruptedexcept print stack trace printstacktrac main string arg zoo keeper test client zookeepertestcli zktc zoo keeper test client zookeepertestcli zktc test test except print stack trace printstacktrac 

encapsul central trace zoo keeper zookeep server trace messag log trace level log4j correctli configur captur trace messag zoo trace zootrac client request trace mask client request trace mask client data packet trace mask client data packet trace mask client ping trace mask client ping trace mask server packet trace mask server packet trace mask session trace mask session trace mask event deliveri trace mask event deliveri trace mask server ping trace mask server ping trace mask warn trace mask warn trace mask jmx trace mask jmx trace mask trace mask tracemask client request trace mask client request trace mask server packet trace mask server packet trace mask session trace mask session trace mask warn trace mask warn trace mask get text trace level gettexttracelevel trace mask tracemask set text trace level settexttracelevel mask trace mask tracemask mask logger log logger factori loggerfactori get logger getlogg zoo trace zootrac log info set text trace mask 0x hex string tohexstr mask trace enabl istraceen logger log mask log trace enabl istraceen mask trace mask tracemask log trace messag logtracemessag logger log mask string msg trace enabl istraceen log mask log trace msg log quorum packet logquorumpacket logger log mask direct quorum packet quorumpacket qp trace enabl istraceen log mask log trace messag logtracemessag log mask direct follow handler followerhandl packet string packettostr qp log request logrequest logger log mask rp request request string header trace enabl istraceen log mask log trace header rp request string tostr 

get max children request getmaxchildrenrequest record string path get max children request getmaxchildrenrequest get max children request getmaxchildrenrequest string path path path string get path getpath path set path setpath string path serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get max children request getmaxchildrenrequest cast except classcastexcept compar differ type record get max children request getmaxchildrenrequest peer get max children request getmaxchildrenrequest peer peer ret ret path compar compareto peer path ret ret ret equal object peer peer peer peer get max children request getmaxchildrenrequest peer peer get max children request getmaxchildrenrequest peer get max children request getmaxchildrenrequest peer peer ret ret path equal peer path ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret result string signatur get max children request lgetmaxchildrenrequest 

main zoo keeper zookeep client librari us zoo keeper zookeep servic applic first instanti object zoo keeper zookeep iter done call method zoo keeper zookeep method thread safe note connect server establish session id assign client client send heart beat server period keep session valid applic call zoo keeper zookeep api client session id client remain valid reason client fail send heart beat server prolong period time exceed session timeout sessiontimeout valu instanc server expir session session id invalid client object longer usabl make zoo keeper zookeep api call applic creat client object zoo keeper zookeep server client current connect fail respond client automat connect server befor session id expir success applic us client zoo keeper zookeep api method synchron asynchron synchron method block server ha respond asynchron method queue request send immedi callback object execut success execut request error appropri code rc indic error success zoo keeper zookeep api call leav watch data node zoo keeper zookeep server success zoo keeper zookeep api call trigger watch watch trigger event deliv client left watch first place watch trigger up on event deliv client watch leav client object implement watcher process event deliv client client drop current connect connect server exist watch consid trigger undeliv event lost emul client gener special event event handler connect ha drop special event ha type event eventnon state keeper state disconnect skeeperstatedisconnect zoo keeper zookeep string zookeep client cnxn socket zookeep client cnxn socket zookeep client cnxn socket clientcnxnsocket client cnxn clientcnxn cnxn logger log keep two line keep initi order log logger factori loggerfactori get logger getlogg zoo keeper zookeep environ log env logenv client environ log zoo keeper sasl client zookeepersaslcli get sasl client getsaslcli cnxn zoo keeper sasl client zookeepersaslcli zk watch manag zkwatchmanag watch manag watchmanag zk watch manag zkwatchmanag list string get data watch getdatawatch watch manag watchmanag data watch datawatch list string rc arrai list arraylist string watch manag watchmanag data watch datawatch kei set keyset rc list string get exist watch getexistwatch watch manag watchmanag exist watch existwatch list string rc arrai list arraylist string watch manag watchmanag exist watch existwatch kei set keyset rc list string get child watch getchildwatch watch manag watchmanag child watch childwatch list string rc arrai list arraylist string watch manag watchmanag child watch childwatch kei set keyset rc manag watcher handl event gener client cnxn clientcnxn object implement nest zoo keeper zookeep method expos part zoo keeper zookeep client api zk watch manag zkwatchmanag client watch manag clientwatchmanag map string set watcher data watch datawatch hash map hashmap string set watcher map string set watcher exist watch existwatch hash map hashmap string set watcher map string set watcher child watch childwatch hash map hashmap string set watcher watcher watcher defaultwatch add addto set watcher from set watcher from add addal from non javadoc org apach zookeep client watch manag clientwatchmanag materi event keeper state keeperst event event type eventtyp java lang string overrid set watcher materi watcher event keeper state keeperst state watcher event event type eventtyp type string client path clientpath set watcher result hash set hashset watcher type result add watcher defaultwatch clear client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch state watcher event keeper state keeperst sync connect syncconnect data watch datawatch set watcher ws data watch datawatch valu result add addal ws clear data watch datawatch clear exist watch existwatch set watcher ws exist watch existwatch valu result add addal ws clear exist watch existwatch clear child watch childwatch set watcher ws child watch childwatch valu result add addal ws clear child watch childwatch clear result node data chang nodedatachang node creat nodecr data watch datawatch add addto data watch datawatch remov client path clientpath result exist watch existwatch add addto exist watch existwatch remov client path clientpath result node children chang nodechildrenchang child watch childwatch add addto child watch childwatch remov client path clientpath result node delet nodedelet data watch datawatch add addto data watch datawatch remov client path clientpath result xxx shouldn need exist watch existwatch set watcher list exist watch existwatch remov client path clientpath list add addto exist watch existwatch remov client path clientpath result log warn trigger exist watch delet shouldn happen child watch childwatch add addto child watch childwatch remov client path clientpath result string msg unhandl watch event type type state state path client path clientpath log error msg runtim except runtimeexcept msg result watcher path abstract watch registr watchregistr watcher watcher string client path clientpath watch registr watchregistr watcher watcher string client path clientpath watcher watcher client path clientpath client path clientpath abstract map string set watcher get watch getwatch rc watcher set watch path param rc result code oper attempt add watch path rc add watch shouldaddwatch rc map string set watcher watch get watch getwatch rc watch set watcher watcher watch get client path clientpath watcher watcher hash set hashset watcher watch put client path clientpath watcher watcher add watcher determin watch ad base code param rc result code oper attempt add watch node watch ad otw add watch shouldaddwatch rc rc handl special exist watch add watcher even nonod result code return exist watch registr existswatchregistr watch registr watchregistr exist watch registr existswatchregistr watcher watcher string client path clientpath watcher client path clientpath overrid map string set watcher get watch getwatch rc rc watch manag watchmanag data watch datawatch watch manag watchmanag exist watch existwatch overrid add watch shouldaddwatch rc rc rc keeper except keeperexcept code nonod valu intvalu data watch registr datawatchregistr watch registr watchregistr data watch registr datawatchregistr watcher watcher string client path clientpath watcher client path clientpath overrid map string set watcher get watch getwatch rc watch manag watchmanag data watch datawatch child watch registr childwatchregistr watch registr watchregistr child watch registr childwatchregistr watcher watcher string client path clientpath watcher client path clientpath overrid map string set watcher get watch getwatch rc watch manag watchmanag child watch childwatch state connect associ connect connectedreadonli close auth fail auth fail connect connect aliv isal close auth fail auth fail return connect server possibl read client allow read mode connect isconnect connect connectedreadonli creat zoo keeper zookeep client object applic pass connect string contain comma separ list host port pair zoo keeper zookeep server session establish asynchron constructor initi connect server immedi potenti befor session fulli establish watcher argument specifi watcher notifi chang state notif point befor after constructor call ha return instanti zoo keeper zookeep client object pick arbitrari server from connect string connectstr attempt connect establish connect fail server connect string order non determinist random shuffl list connect establish client attempt session explicitli close ad option chroot suffix append connect string run client command interpret path rel root similar unix chroot command param connect string connectstr comma separ host port pair zk server 127 3000 127 3001 127 3002 option chroot suffix us exampl 127 3000 127 3001 127 3002 app client root app path rel root get set foo bar result oper run app foo bar from server perspect param session timeout sessiontimeout session timeout millisecond param watcher watcher object notifi state chang notifi node event io except ioexcept case network failur illeg argument except illegalargumentexcept invalid chroot path specifi zoo keeper zookeep string connect string connectstr session timeout sessiontimeout watcher watcher io except ioexcept connect string connectstr session timeout sessiontimeout watcher creat zoo keeper zookeep client object applic pass connect string contain comma separ list host port pair zoo keeper zookeep server session establish asynchron constructor initi connect server immedi potenti befor session fulli establish watcher argument specifi watcher notifi chang state notif point befor after constructor call ha return instanti zoo keeper zookeep client object pick arbitrari server from connect string connectstr attempt connect establish connect fail server connect string order non determinist random shuffl list connect establish client attempt session explicitli close ad option chroot suffix append connect string run client command interpret path rel root similar unix chroot command param connect string connectstr comma separ host port pair zk server 127 3000 127 3001 127 3002 option chroot suffix us exampl 127 3000 127 3001 127 3002 app client root app path rel root get set foo bar result oper run app foo bar from server perspect param session timeout sessiontimeout session timeout millisecond param watcher watcher object notifi state chang notifi node event param read canbereadonli ad creat client allow read mode partit read mode basic mean client find major server partit server reach connect on read mode read request allow write request continu seek major background io except ioexcept case network failur illeg argument except illegalargumentexcept invalid chroot path specifi zoo keeper zookeep string connect string connectstr session timeout sessiontimeout watcher watcher read canbereadonli io except ioexcept log info initi client connect connect string connectstr connect string connectstr session timeout sessiontimeout session timeout sessiontimeout watcher watcher watch manag watchmanag watcher defaultwatch watcher connect string parser connectstringpars connect string parser connectstringpars connect string parser connectstringpars connect string connectstr host provid hostprovid host provid hostprovid host provid statichostprovid connect string parser connectstringpars get server address getserveraddress cnxn client cnxn clientcnxn connect string parser connectstringpars get chroot path getchrootpath host provid hostprovid session timeout sessiontimeout watch manag watchmanag get client cnxn socket getclientcnxnsocket read canbereadonli cnxn start creat zoo keeper zookeep client object applic pass connect string contain comma separ list host port pair zoo keeper zookeep server session establish asynchron constructor initi connect server immedi potenti befor session fulli establish watcher argument specifi watcher notifi chang state notif point befor after constructor call ha return instanti zoo keeper zookeep client object pick arbitrari server from connect string connectstr attempt connect establish connect fail server connect string order non determinist random shuffl list connect establish client attempt session explicitli close session expir server ad option chroot suffix append connect string run client command interpret path rel root similar unix chroot command us link get session id getsessionid link get session passwd getsessionpasswd establish client connect valu pass session id sessionid session passwd sessionpasswd reconnect reconnect us constructor requir paramet param connect string connectstr comma separ host port pair zk server 127 3000 127 3001 127 3002 option chroot suffix us exampl 127 3000 127 3001 127 3002 app client root app path rel root get set foo bar result oper run app foo bar from server perspect param session timeout sessiontimeout session timeout millisecond param watcher watcher object notifi state chang notifi node event param session id sessionid specif session id us reconnect param session passwd sessionpasswd password session io except ioexcept case network failur illeg argument except illegalargumentexcept invalid chroot path specifi illeg argument except illegalargumentexcept invalid list zoo keeper zookeep host zoo keeper zookeep string connect string connectstr session timeout sessiontimeout watcher watcher session id sessionid session passwd sessionpasswd io except ioexcept connect string connectstr session timeout sessiontimeout watcher session id sessionid session passwd sessionpasswd creat zoo keeper zookeep client object applic pass connect string contain comma separ list host port pair zoo keeper zookeep server session establish asynchron constructor initi connect server immedi potenti befor session fulli establish watcher argument specifi watcher notifi chang state notif point befor after constructor call ha return instanti zoo keeper zookeep client object pick arbitrari server from connect string connectstr attempt connect establish connect fail server connect string order non determinist random shuffl list connect establish client attempt session explicitli close session expir server ad option chroot suffix append connect string run client command interpret path rel root similar unix chroot command us link get session id getsessionid link get session passwd getsessionpasswd establish client connect valu pass session id sessionid session passwd sessionpasswd reconnect reconnect us constructor requir paramet param connect string connectstr comma separ host port pair zk server 127 3000 127 3001 127 3002 option chroot suffix us exampl 127 3000 127 3001 127 3002 app client root app path rel root get set foo bar result oper run app foo bar from server perspect param session timeout sessiontimeout session timeout millisecond param watcher watcher object notifi state chang notifi node event param session id sessionid specif session id us reconnect param session passwd sessionpasswd password session param read canbereadonli ad creat client allow read mode partit read mode basic mean client find major server partit server reach connect on read mode read request allow write request continu seek major background io except ioexcept case network failur illeg argument except illegalargumentexcept invalid chroot path specifi zoo keeper zookeep string connect string connectstr session timeout sessiontimeout watcher watcher session id sessionid session passwd sessionpasswd read canbereadonli io except ioexcept log info initi client connect connect string connectstr connect string connectstr session timeout sessiontimeout session timeout sessiontimeout watcher watcher session id sessionid hex string tohexstr session id sessionid session passwd sessionpasswd session passwd sessionpasswd hidden watch manag watchmanag watcher defaultwatch watcher connect string parser connectstringpars connect string parser connectstringpars connect string parser connectstringpars connect string connectstr host provid hostprovid host provid hostprovid host provid statichostprovid connect string parser connectstringpars get server address getserveraddress cnxn client cnxn clientcnxn connect string parser connectstringpars get chroot path getchrootpath host provid hostprovid session timeout sessiontimeout watch manag watchmanag get client cnxn socket getclientcnxnsocket session id sessionid session passwd sessionpasswd read canbereadonli cnxn rw server befor seenrwserverbefor user ha provid session id sessionid cnxn start session id zoo keeper zookeep client instanc valu return valid client connect server chang after connect method thread safe current session id get session id getsessionid cnxn get session id getsessionid session password zoo keeper zookeep client instanc valu return valid client connect server chang after connect method thread safe current session password get session passwd getsessionpasswd cnxn get session passwd getsessionpasswd negoti session timeout zoo keeper zookeep client instanc valu return valid client connect server chang after connect method thread safe current session timeout get session timeout getsessiontimeout cnxn get session timeout getsessiontimeout add specifi scheme auth inform connect method thread safe param scheme param auth add auth info addauthinfo string scheme auth cnxn add auth info addauthinfo scheme auth specifi watcher connect overrid on specifi construct param watcher watcher watcher watch manag watchmanag watcher defaultwatch watcher close client object client close session invalid ephemer node zoo keeper zookeep server associ session remov watch left node parent trigger interrupt except interruptedexcept close interrupt except interruptedexcept cnxn get state getstat aliv isal log debug enabl isdebugen log debug close call close client log debug enabl isdebugen log debug close session 0x hex string tohexstr get session id getsessionid cnxn close io except ioexcept log debug enabl isdebugen log debug ignor unexpect except close log info session 0x hex string tohexstr get session id getsessionid close prepend chroot client path present expect function client path ha valid befor function call param client path clientpath path node server view path chroot prepend client path string prepend chroot prependchroot string client path clientpath cnxn chroot path chrootpath handl client path clientpath client path clientpath length cnxn chroot path chrootpath cnxn chroot path chrootpath client path clientpath client path clientpath creat node path node data data node acl acl flag argument specifi creat node ephemer ephemer node remov zoo keeper zookeep automat session associ creation node expir flag argument specifi creat sequenti node actual path name sequenti node path plu suffix current sequenti number node sequenc number fix length 10 digit pad node creat sequenti number increment on node actual path exist zoo keeper zookeep keeper except keeperexcept error code keeper except keeperexcept node exist nodeexist thrown note differ actual path us invoc creat sequenti node path argument call file exist keeper except keeperexcept parent node exist zoo keeper zookeep keeper except keeperexcept error code keeper except keeperexcept node nonod thrown ephemer node children parent node path ephemer keeper except keeperexcept error code keeper except keeperexcept children ephemer nochildrenforephemer thrown oper success trigger watch left node path exist get data getdata api call watch left parent node get children getchildren api call node creat successfulli zoo keeper zookeep server trigger watch path left exist call watch parent node get children getchildren call maximum allow size data arrai mb 048 576 byte arrai larger caus keeper execpt keeperexecpt thrown param path path node param data initi data node param acl acl node param creat mode createmod specifi node creat ephemer sequenti actual path creat node keeper except keeperexcept server return non zero error code keeper except keeperexcept invalid acl except invalidaclexcept acl invalid empti interrupt except interruptedexcept transact interrupt illeg argument except illegalargumentexcept invalid path specifi string creat string path data list acl acl creat mode createmod creat mode createmod keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath creat mode createmod sequenti issequenti string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod creat creat request createrequest request creat request createrequest creat respons createrespons respons creat respons createrespons request set data setdata data request set flag setflag creat mode createmod flag toflag request set path setpath server path serverpath acl acl size keeper except keeperexcept invalid acl except invalidaclexcept request set acl setacl acl repli header replyhead cnxn submit request submitrequest request respons get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath cnxn chroot path chrootpath respons get path getpath respons get path getpath substr cnxn chroot path chrootpath length asynchron version creat creat string list creat mode createmod creat string path data list acl acl creat mode createmod creat mode createmod string callback stringcallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath creat mode createmod sequenti issequenti string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod creat creat request createrequest request creat request createrequest creat respons createrespons respons creat respons createrespons repli header replyhead repli header replyhead request set data setdata data request set flag setflag creat mode createmod flag toflag request set path setpath server path serverpath request set acl setacl acl cnxn queue packet queuepacket request respons cb client path clientpath server path serverpath ctx delet node path call succe node exist version match node version version match node version keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node exist keeper except keeperexcept error code keeper except keeperexcept bad version badvers thrown version match node version keeper except keeperexcept error code keeper except keeperexcept empti notempti thrown node ha children oper success trigger watch node path left exist api call watch parent node left get children getchildren api call param path path node delet param version expect node version interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero code illeg argument except illegalargumentexcept invalid path specifi delet string path version interrupt except interruptedexcept keeper except keeperexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath maintain semant even chroot specif root delet make sens even chroot client path clientpath equal bit hack delet succe ensur semant maintain server path serverpath client path clientpath server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod delet delet request deleterequest request delet request deleterequest request set path setpath server path serverpath request set version setvers version repli header replyhead cnxn submit request submitrequest request get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath execut multipl zoo keeper zookeep oper success list result return failur except rais contain partial result error detail link keeper except keeperexcept get result getresult note maximum allow size data arrai set data setdata oper singl request typic mb 048 576 byte limit specifi server href http zookeep apach org doc current zookeep admin zookeeperadmin html unsaf option jute maxbuff request larger caus keeper except keeperexcept thrown param op iter contain oper done creat factori method link op list result on input op order exactli match order code op code input oper interrupt except interruptedexcept oper interrupt oper succeed partial succeed except thrown keeper except keeperexcept oper complet error on specifi op list op result opresult multi iter op op interrupt except interruptedexcept keeper except keeperexcept reconstruct transact chroot prefix list op transact arrai list arraylist op op op op transact add root prefix withrootprefix op multi intern multiintern multi transact record multitransactionrecord transact op root prefix withrootprefix op op op get path getpath string server path serverpath prepend chroot prependchroot op get path getpath op get path getpath equal server path serverpath op chroot withchroot server path serverpath op list op result opresult multi intern multiintern multi transact record multitransactionrecord request interrupt except interruptedexcept keeper except keeperexcept request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod multi multi respons multirespons respons multi respons multirespons repli header replyhead cnxn submit request submitrequest request respons get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr list op result opresult result respons get result list getresultlist error result errorresult fatal error fatalerror op result opresult result result result error result errorresult error result errorresult result get err geterr keeper except keeperexcept code valu intvalu fatal error fatalerror error result errorresult result fatal error fatalerror keeper except keeperexcept ex keeper except keeperexcept creat keeper except keeperexcept code get fatal error fatalerror get err geterr ex set multi result setmultiresult result ex result transact wrapper link multi method builder object us construct commit atom set oper transact builder object transact transact transact asynchron version delet delet string delet string path version callback voidcallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath maintain semant even chroot specif root delet make sens even chroot client path clientpath equal bit hack delet succe ensur semant maintain server path serverpath client path clientpath server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod delet delet request deleterequest request delet request deleterequest request set path setpath server path serverpath request set version setvers version cnxn queue packet queuepacket repli header replyhead request cb client path clientpath server path serverpath ctx stat node path node exist watch non call success except thrown watch left node path watch trigger success oper creat delet node set data node param path node path param watcher watcher stat node path node exist keeper except keeperexcept server signal error interrupt except interruptedexcept server transact interrupt illeg argument except illegalargumentexcept invalid path specifi stat exist string path watcher watcher keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb exist watch registr existswatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod exist exist request existsrequest request exist request existsrequest request set path setpath server path serverpath request set watch setwatch watcher set data respons setdatarespons respons set data respons setdatarespons repli header replyhead cnxn submit request submitrequest request respons wcb get err geterr get err geterr keeper except keeperexcept code nonod valu intvalu keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath respons get stat getstat get czxid getczxid respons get stat getstat stat node path node exist watch call success except thrown watch left node path watch trigger success oper creat delet node set data node param path node path param watch watch node stat node path node exist keeper except keeperexcept server signal error interrupt except interruptedexcept server transact interrupt stat exist string path watch keeper except keeperexcept interrupt except interruptedexcept exist path watch watch manag watchmanag watcher defaultwatch asynchron version exist exist string watcher exist string path watcher watcher stat callback statcallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb exist watch registr existswatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod exist exist request existsrequest request exist request existsrequest request set path setpath server path serverpath request set watch setwatch watcher set data respons setdatarespons respons set data respons setdatarespons cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx wcb asynchron version exist exist string exist string path watch stat callback statcallback cb object ctx exist path watch watch manag watchmanag watcher defaultwatch cb ctx data stat node path watch non call success except thrown watch left node path watch trigger success oper set data node delet node keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist param path path param watcher watcher param stat stat node data node keeper except keeperexcept server signal error non zero error code interrupt except interruptedexcept server transact interrupt illeg argument except illegalargumentexcept invalid path specifi get data getdata string path watcher watcher stat stat keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb data watch registr datawatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get data getdata get data request getdatarequest request get data request getdatarequest request set path setpath server path serverpath request set watch setwatch watcher get data respons getdatarespons respons get data respons getdatarespons repli header replyhead cnxn submit request submitrequest request respons wcb get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath stat data tree datatre copi stat copystat respons get stat getstat stat respons get data getdata data stat node path watch call success except thrown watch left node path watch trigger success oper set data node delet node keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist param path path param watch watch node param stat stat node data node keeper except keeperexcept server signal error non zero error code interrupt except interruptedexcept server transact interrupt get data getdata string path watch stat stat keeper except keeperexcept interrupt except interruptedexcept get data getdata path watch watch manag watchmanag watcher defaultwatch stat asynchron version get data getdata get data getdata string watcher stat get data getdata string path watcher watcher data callback datacallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb data watch registr datawatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get data getdata get data request getdatarequest request get data request getdatarequest request set path setpath server path serverpath request set watch setwatch watcher get data respons getdatarespons respons get data respons getdatarespons cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx wcb asynchron version get data getdata get data getdata string stat get data getdata string path watch data callback datacallback cb object ctx get data getdata path watch watch manag watchmanag watcher defaultwatch cb ctx set data node path node exist version match version node version match node version stat node oper success trigger watch node path left get data getdata call keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist keeper except keeperexcept error code keeper except keeperexcept bad version badvers thrown version match node version maximum allow size data arrai mb 048 576 byte arrai larger caus keeper except keeperexcept thrown param path path node param data data set param version expect match version state node interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero error code illeg argument except illegalargumentexcept invalid path specifi stat set data setdata string path data version keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod set data setdata set data request setdatarequest request set data request setdatarequest request set path setpath server path serverpath request set data setdata data request set version setvers version set data respons setdatarespons respons set data respons setdatarespons repli header replyhead cnxn submit request submitrequest request respons get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath respons get stat getstat asynchron version set data setdata set data setdata string set data setdata string path data version stat callback statcallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod set data setdata set data request setdatarequest request set data request setdatarequest request set path setpath server path serverpath request set data setdata data request set version setvers version set data respons setdatarespons respons set data respons setdatarespons cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx acl stat node path keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist param path path node param stat stat node copi paramet acl arrai node interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero error code illeg argument except illegalargumentexcept invalid path specifi list acl get acl getacl string path stat stat keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get acl getacl get acl request getaclrequest request get acl request getaclrequest request set path setpath server path serverpath get acl respons getaclrespons respons get acl respons getaclrespons repli header replyhead cnxn submit request submitrequest request respons get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath data tree datatre copi stat copystat respons get stat getstat stat respons get acl getacl asynchron version get acl getacl get acl getacl string stat get acl getacl string path stat stat acl callback aclcallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get acl getacl get acl request getaclrequest request get acl request getaclrequest request set path setpath server path serverpath get acl respons getaclrespons respons get acl respons getaclrespons cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx set acl node path node exist version match version node stat node keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist keeper except keeperexcept error code keeper except keeperexcept bad version badvers thrown version match node version param path param acl param version stat node interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero error code org apach zookeep keeper except keeperexcept invalid acl except invalidaclexcept acl invalid illeg argument except illegalargumentexcept invalid path specifi stat set acl setacl string path list acl acl version keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod set acl setacl set acl request setaclrequest request set acl request setaclrequest request set path setpath server path serverpath acl acl size keeper except keeperexcept invalid acl except invalidaclexcept client path clientpath request set acl setacl acl request set version setvers version set acl respons setaclrespons respons set acl respons setaclrespons repli header replyhead cnxn submit request submitrequest request respons get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath respons get stat getstat asynchron version set acl setacl set acl setacl string list set acl setacl string path list acl acl version stat callback statcallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod set acl setacl set acl request setaclrequest request set acl request setaclrequest request set path setpath server path serverpath request set acl setacl acl request set version setvers version set acl respons setaclrespons respons set acl respons setaclrespons cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx list children node path watch non call success except thrown watch left node path watch willb trigger success oper delet node path creat delet child node list children return sort guarante provid natur lexic order keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist param path param watcher watcher unord arrai children node path interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero error code illeg argument except illegalargumentexcept invalid path specifi list string get children getchildren string path watcher watcher keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb child watch registr childwatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get children getchildren get children request getchildrenrequest request get children request getchildrenrequest request set path setpath server path serverpath request set watch setwatch watcher get children respons getchildrenrespons respons get children respons getchildrenrespons repli header replyhead cnxn submit request submitrequest request respons wcb get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath respons get children getchildren list children node path watch call success except thrown watch left node path watch willb trigger success oper delet node path creat delet child node list children return sort guarante provid natur lexic order keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist param path param watch unord arrai children node path interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero error code list string get children getchildren string path watch keeper except keeperexcept interrupt except interruptedexcept get children getchildren path watch watch manag watchmanag watcher defaultwatch asynchron version get children getchildren get children getchildren string watcher get children getchildren string path watcher watcher children callback childrencallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb child watch registr childwatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get children getchildren get children request getchildrenrequest request get children request getchildrenrequest request set path setpath server path serverpath request set watch setwatch watcher get children respons getchildrenrespons respons get children respons getchildrenrespons cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx wcb asynchron version get children getchildren get children getchildren string get children getchildren string path watch children callback childrencallback cb object ctx get children getchildren path watch watch manag watchmanag watcher defaultwatch cb ctx znode path stat children list watch non call success except thrown watch left node path watch willb trigger success oper delet node path creat delet child node list children return sort guarante provid natur lexic order keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist param path param watcher watcher param stat stat znode design path unord arrai children node path interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero error code illeg argument except illegalargumentexcept invalid path specifi list string get children getchildren string path watcher watcher stat stat keeper except keeperexcept interrupt except interruptedexcept string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb child watch registr childwatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get children2 getchildren2 get children2 request getchildren2request request get children2 request getchildren2request request set path setpath server path serverpath request set watch setwatch watcher get children2 respons getchildren2respons respons get children2 respons getchildren2respons repli header replyhead cnxn submit request submitrequest request respons wcb get err geterr keeper except keeperexcept creat keeper except keeperexcept code get get err geterr client path clientpath stat data tree datatre copi stat copystat respons get stat getstat stat respons get children getchildren znode path stat children list watch call success except thrown watch left node path watch willb trigger success oper delet node path creat delet child node list children return sort guarante provid natur lexic order keeper except keeperexcept error code keeper except keeperexcept node nonod thrown node path exist param path param watch param stat stat znode design path unord arrai children node path interrupt except interruptedexcept server transact interrupt keeper except keeperexcept server signal error non zero error code list string get children getchildren string path watch stat stat keeper except keeperexcept interrupt except interruptedexcept get children getchildren path watch watch manag watchmanag watcher defaultwatch stat asynchron version get children getchildren get children getchildren string watcher stat get children getchildren string path watcher watcher children2 callback children2callback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath watch contain chroot path watch registr watchregistr wcb watcher wcb child watch registr childwatchregistr watcher client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod get children2 getchildren2 get children2 request getchildren2request request get children2 request getchildren2request request set path setpath server path serverpath request set watch setwatch watcher get children2 respons getchildren2respons respons get children2 respons getchildren2respons cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx wcb asynchron version get children getchildren get children getchildren string stat get children getchildren string path watch children2 callback children2callback cb object ctx get children getchildren path watch watch manag watchmanag watcher defaultwatch cb ctx asynchron sync flush channel process leader param path param cb handler callback param ctx context provid callback illeg argument except illegalargumentexcept invalid path specifi sync string path callback voidcallback cb object ctx string client path clientpath path path util pathutil valid path validatepath client path clientpath string server path serverpath prepend chroot prependchroot client path clientpath request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod sync sync request syncrequest request sync request syncrequest sync respons syncrespons respons sync respons syncrespons request set path setpath server path serverpath cnxn queue packet queuepacket repli header replyhead request respons cb client path clientpath server path serverpath ctx state get state getstat cnxn get state getstat string represent zoo keeper zookeep client suitabl thing log count format string chang warn overrid string string tostr state state get state getstat state state string tostr state connect isconnect timeout get session timeout getsessiontimeout cnxn method aid test follow method expect us test wait up wait millisecond underli thread shutdown method expect us test param wait max wait millisecond iff thread shutdown otw testabl wait shutdown testablewaitforshutdown wait interrupt except interruptedexcept cnxn send thread sendthread join wait cnxn send thread sendthread aliv isal cnxn event thread eventthread join wait cnxn event thread eventthread aliv isal return address socket connect test ensembl test client server shutdown interest verifi code handl disconnect reconnect correctli method expect us test ip address remot side connect connect socket address socketaddress testabl remot socket address testableremotesocketaddress cnxn send thread sendthread get client cnxn socket getclientcnxnsocket get remot socket address getremotesocketaddress return local address socket bound method expect us test ip address remot side connect connect socket address socketaddress testabl local socket address testablelocalsocketaddress cnxn send thread sendthread get client cnxn socket getclientcnxnsocket get local socket address getlocalsocketaddress client cnxn socket clientcnxnsocket get client cnxn socket getclientcnxnsocket io except ioexcept string client cnxn socket name clientcnxnsocketnam get properti getproperti zookeep client cnxn socket zookeep client cnxn socket client cnxn socket name clientcnxnsocketnam client cnxn socket name clientcnxnsocketnam client cnxn socket nio clientcnxnsocketnio get name getnam client cnxn socket clientcnxnsocket name fornam client cnxn socket name clientcnxnsocketnam instanc newinst except io except ioexcept ioe io except ioexcept couldn instanti client cnxn socket name clientcnxnsocketnam ioe init caus initcaus ioe 

manag watcher handl event gener client cnxn clientcnxn object implement nest zoo keeper zookeep method expos part zoo keeper zookeep client api zk watch manag zkwatchmanag client watch manag clientwatchmanag map string set watcher data watch datawatch hash map hashmap string set watcher map string set watcher exist watch existwatch hash map hashmap string set watcher map string set watcher child watch childwatch hash map hashmap string set watcher watcher watcher defaultwatch add addto set watcher from set watcher from add addal from non javadoc org apach zookeep client watch manag clientwatchmanag materi event keeper state keeperst event event type eventtyp java lang string overrid set watcher materi watcher event keeper state keeperst state watcher event event type eventtyp type string client path clientpath set watcher result hash set hashset watcher type result add watcher defaultwatch clear client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch state watcher event keeper state keeperst sync connect syncconnect data watch datawatch set watcher ws data watch datawatch valu result add addal ws clear data watch datawatch clear exist watch existwatch set watcher ws exist watch existwatch valu result add addal ws clear exist watch existwatch clear child watch childwatch set watcher ws child watch childwatch valu result add addal ws clear child watch childwatch clear result node data chang nodedatachang node creat nodecr data watch datawatch add addto data watch datawatch remov client path clientpath result exist watch existwatch add addto exist watch existwatch remov client path clientpath result node children chang nodechildrenchang child watch childwatch add addto child watch childwatch remov client path clientpath result node delet nodedelet data watch datawatch add addto data watch datawatch remov client path clientpath result xxx shouldn need exist watch existwatch set watcher list exist watch existwatch remov client path clientpath list add addto exist watch existwatch remov client path clientpath result log warn trigger exist watch delet shouldn happen child watch childwatch add addto child watch childwatch remov client path clientpath result string msg unhandl watch event type type state state path client path clientpath log error msg runtim except runtimeexcept msg result 

watcher path abstract watch registr watchregistr watcher watcher string client path clientpath watch registr watchregistr watcher watcher string client path clientpath watcher watcher client path clientpath client path clientpath abstract map string set watcher get watch getwatch rc watcher set watch path param rc result code oper attempt add watch path rc add watch shouldaddwatch rc map string set watcher watch get watch getwatch rc watch set watcher watcher watch get client path clientpath watcher watcher hash set hashset watcher watch put client path clientpath watcher watcher add watcher determin watch ad base code param rc result code oper attempt add watch node watch ad otw add watch shouldaddwatch rc rc 

handl special exist watch add watcher even nonod result code return exist watch registr existswatchregistr watch registr watchregistr exist watch registr existswatchregistr watcher watcher string client path clientpath watcher client path clientpath overrid map string set watcher get watch getwatch rc rc watch manag watchmanag data watch datawatch watch manag watchmanag exist watch existwatch overrid add watch shouldaddwatch rc rc rc keeper except keeperexcept code nonod valu intvalu 

data watch registr datawatchregistr watch registr watchregistr data watch registr datawatchregistr watcher watcher string client path clientpath watcher client path clientpath overrid map string set watcher get watch getwatch rc watch manag watchmanag data watch datawatch 

child watch registr childwatchregistr watch registr watchregistr child watch registr childwatchregistr watcher watcher string client path clientpath watcher client path clientpath overrid map string set watcher get watch getwatch rc watch manag watchmanag child watch childwatch 

state connect associ connect connectedreadonli close auth fail auth fail connect connect aliv isal close auth fail auth fail return connect server possibl read client allow read mode connect isconnect connect connectedreadonli 

repres ephemer znode name ha order sequenc number sort order node name znodenam compar node name znodenam string name string prefix sequenc logger log logger factori loggerfactori get logger getlogg node name znodenam node name znodenam string name name pointer except nullpointerexcept id name name prefix name idx name last index lastindexof idx prefix name substr idx sequenc integ pars parseint name substr idx except occur misdetect sequenc suffix number format except numberformatexcept log info number format except idx arrai index bound except arrayindexoutofboundsexcept log info arrai bound idx overrid string string tostr name string tostr overrid equal object get getclass get getclass node name znodenam sequenc node name znodenam name equal sequenc name overrid hash code hashcod name hash code hashcod 37 compar compareto node name znodenam answer prefix compar compareto prefix answer s1 sequenc s2 sequenc s1 s2 name compar compareto name answer s1 s2 s1 s2 answer return name znode string get name getnam name return sequenc number get node name getznodenam sequenc return text prefix befor sequenc number string get prefix getprefix prefix 

auth packet authpacket record type string scheme auth auth packet authpacket auth packet authpacket type string scheme auth type type scheme scheme auth auth get type gettyp type set type settyp type string get scheme getschem scheme set scheme setschem string scheme get auth getauth auth set auth setauth auth serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint type type write string writestr scheme scheme write buffer writebuff auth auth end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag type read readint type scheme read string readstr scheme auth read buffer readbuff auth end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint type type write string writestr scheme scheme write buffer writebuff auth auth end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer auth packet authpacket cast except classcastexcept compar differ type record auth packet authpacket peer auth packet authpacket peer peer ret ret type peer type type peer type ret ret ret scheme compar compareto peer scheme ret ret auth ur peer auth ret org apach jute util compar byte comparebyt length ur ur length ret ret ret equal object peer peer peer peer auth packet authpacket peer peer auth packet authpacket peer auth packet authpacket peer peer ret ret type peer type ret ret ret scheme equal peer scheme ret ret ret org apach jute util buf equal bufequ auth peer auth ret ret ret hash code hashcod result 17 ret ret type result 37 result ret ret scheme hash code hashcod result 37 result ret ret java util arrai string tostr auth hash code hashcod result 37 result ret result string signatur auth packet lauthpacket isb 

zk databas corrupt test zkdatabasecorruptiontest zk test zktestcas logger log logger factori loggerfactori get logger getlogg zk databas corrupt test zkdatabasecorruptiontest connect timeout connect timeout client test clienttest connect timeout connect timeout quorum base quorumbas qb quorum base quorumbas befor set up setup except log info start quorum get getclass get name getnam qb set up setup after tear down teardown except log info stop quorum get getclass get name getnam corrupt file corruptfil file io except ioexcept random access file randomaccessfil file outfil random access file randomaccessfil rw file outfil write fail server get byte getbyt file outfil close corrupt snapshot corruptallsnapshot file snap dir snapdir io except ioexcept file list file listfil snap dir snapdir list file listfil file list file listfil get name getnam start startswith snapshot corrupt file corruptfil test test corrupt testcorrupt except client base clientbas wait server up waitforserverup qb host port hostport 10000 client base clientbas wait server up waitforserverup qb host port hostport 10000 zoo keeper zookeep zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event sync request processor syncrequestprocessor set snap count setsnapcount 100 2000 zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close quorum peer quorump leader find leader kill qb s5 get peer state getpeerst server state serverst lead except last server leader leader qb s5 corrupt quromp databas file txn snap log filetxnsnaplog snap log snaplog leader get txn factori gettxnfactori file snap dir snapdir snap log snaplog get snap dir getsnapdir corrupt snapshot snapshot directori corrupt snapshot corruptallsnapshot snap dir snapdir qb shutdown server shutdownserv qb setup server setupserv qb s1 start qb s2 start qb s3 start qb s4 start qb s5 start asserttru runtim except runtimeexcept log info error expect waut server up string list qb host port hostport split string hp list asserttru wait server up client base clientbas wait server up waitforserverup hp connect timeout connect timeout log info hp accept client connect zk qb creat client createcli sync request processor syncrequestprocessor set snap count setsnapcount 100 2000 4000 zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close quorum base quorumbas shutdown qb s1 quorum base quorumbas shutdown qb s2 quorum base quorumbas shutdown qb s3 quorum base quorumbas shutdown qb s4 

quorum peer config quorumpeerconfig logger log logger factori loggerfactori get logger getlogg quorum peer config quorumpeerconfig inet socket address inetsocketaddress client port address clientportaddress string data dir datadir string data log dir datalogdir tick time ticktim zoo keeper server zookeeperserv tick time tick time max client cnxn maxclientcnxn 60 default set explicitli min session timeout minsessiontimeout default set explicitli max session timeout maxsessiontimeout init limit initlimit sync limit synclimit elect alg electionalg elect port electionport 2182 hash map hashmap quorum server quorumserv server hash map hashmap quorum server quorumserv hash map hashmap quorum server quorumserv observ hash map hashmap quorum server quorumserv server id serverid hash map hashmap server weight serverweight hash map hashmap hash map hashmap server group servergroup hash map hashmap num group numgroup quorum verifi quorumverifi quorum verifi quorumverifi snap retain count snapretaincount purg interv purgeinterv learner type learnertyp peer type peertyp learner type learnertyp particip minimum snapshot retain count org apach zookeep server purg txn log purgetxnlog purg file file min snap retain count min snap retain count suppress warn suppresswarn serial config except configexcept except config except configexcept string msg msg config except configexcept string msg except msg pars zoo keeper zookeep configur file param path patch configur file config except configexcept error process configur pars string path config except configexcept file config file configfil file path log info read configur from config file configfil config file configfil exist illeg argument except illegalargumentexcept config file configfil string tostr file miss properti cfg properti file input stream fileinputstream file input stream fileinputstream config file configfil cfg load close pars properti parseproperti cfg io except ioexcept config except configexcept error process path illeg argument except illegalargumentexcept config except configexcept error process path pars config from properti param zk prop zkprop properti pars from io except ioexcept config except configexcept pars properti parseproperti properti zk prop zkprop io except ioexcept config except configexcept client port clientport string client port address clientportaddress entri object object entri zk prop zkprop entri set entryset string kei entri get kei getkei string tostr trim string valu entri get valu getvalu string tostr trim kei equal data dir datadir data dir datadir valu kei equal data log dir datalogdir data log dir datalogdir valu kei equal client port clientport client port clientport integ pars parseint valu kei equal client port address clientportaddress client port address clientportaddress valu trim kei equal tick time ticktim tick time ticktim integ pars parseint valu kei equal max client cnxn maxclientcnxn max client cnxn maxclientcnxn integ pars parseint valu kei equal min session timeout minsessiontimeout min session timeout minsessiontimeout integ pars parseint valu kei equal max session timeout maxsessiontimeout max session timeout maxsessiontimeout integ pars parseint valu kei equal init limit initlimit init limit initlimit integ pars parseint valu kei equal sync limit synclimit sync limit synclimit integ pars parseint valu kei equal elect alg electionalg elect alg electionalg integ pars parseint valu kei equal peer type peertyp valu lower tolowercas equal observ peer type peertyp learner type learnertyp observ valu lower tolowercas equal particip peer type peertyp learner type learnertyp particip config except configexcept unrecognis peertyp valu kei equal autopurg snap retain count snapretaincount snap retain count snapretaincount integ pars parseint valu kei equal autopurg purg interv purgeinterv purg interv purgeinterv integ pars parseint valu kei start startswith server dot kei index indexof sid pars parselong kei substr dot string part valu split part length part length part length log error valu form host port host port port host port port type inet socket address inetsocketaddress addr inet socket address inetsocketaddress part integ pars parseint part part length server put valu valueof sid quorum server quorumserv sid addr part length inet socket address inetsocketaddress elect addr electionaddr inet socket address inetsocketaddress part integ pars parseint part server put valu valueof sid quorum server quorumserv sid addr elect addr electionaddr part length inet socket address inetsocketaddress elect addr electionaddr inet socket address inetsocketaddress part integ pars parseint part learner type learnertyp type learner type learnertyp particip part lower tolowercas equal observ type learner type learnertyp observ observ put valu valueof sid quorum server quorumserv sid addr elect addr electionaddr type part lower tolowercas equal particip type learner type learnertyp particip server put valu valueof sid quorum server quorumserv sid addr elect addr electionaddr type config except configexcept unrecognis peertyp valu kei start startswith group dot kei index indexof gid pars parselong kei substr dot num group numgroup string part valu split string part sid pars parselong server group servergroup contain kei containskei sid config except configexcept server sid multipl group server group servergroup put sid gid kei start startswith weight dot kei index indexof sid pars parselong kei substr dot server weight serverweight put sid pars parselong valu set properti setproperti zookeep kei valu reset min snap retain count min snap retain count invalid purg txn log purgetxnlog purg file file allow purg snap retain count snapretaincount min snap retain count min snap retain count log warn invalid autopurg snap retain count snapretaincount snap retain count snapretaincount default min snap retain count min snap retain count snap retain count snapretaincount min snap retain count min snap retain count data dir datadir illeg argument except illegalargumentexcept data dir datadir set data log dir datalogdir data log dir datalogdir data dir datadir file data log dir datalogdir directori isdirectori illeg argument except illegalargumentexcept data log dir datalogdir data log dir datalogdir miss client port clientport illeg argument except illegalargumentexcept client port clientport set client port address clientportaddress client port address clientportaddress inet socket address inetsocketaddress inet address inetaddress get name getbynam client port address clientportaddress client port clientport client port address clientportaddress inet socket address inetsocketaddress client port clientport tick time ticktim illeg argument except illegalargumentexcept tick time ticktim set min session timeout minsessiontimeout max session timeout maxsessiontimeout illeg argument except illegalargumentexcept min session timeout minsessiontimeout larger max session timeout maxsessiontimeout server size observ size illeg argument except illegalargumentexcept observ particip invalid configur quorum configur immedi error compat server standalon mode server size observ size illeg argument except illegalargumentexcept observ quorum invalid configur base hbase current add singl server line config compat reason keep here log error invalid configur on server specifi ignor server clear server size server size log warn server failur toler least server server size log warn non optimi configur odd number server init limit initlimit illeg argument except illegalargumentexcept init limit initlimit set sync limit synclimit illeg argument except illegalargumentexcept sync limit synclimit set fle server requir separ elect port elect alg electionalg quorum server quorumserv server valu elect addr electionaddr illeg argument except illegalargumentexcept miss elect port server id quorum config major server group servergroup size server size server group servergroup size config except configexcept server exactli on group deafult weight server quorum server quorumserv server valu server weight serverweight contain kei containskei id server weight serverweight put id set quorum verifi quorumverifi quorum hierarch quorumhierarch quorum verifi quorumverifi quorum hierarch quorumhierarch num group numgroup server weight serverweight server group servergroup quorum verifi quorumverifi quorum maj quorummaj log info default major quorum quorum verifi quorumverifi quorum maj quorummaj server size add observ server quorum figur server put putal observ file id file myidfil file data dir datadir myid id file myidfil exist illeg argument except illegalargumentexcept id file myidfil string tostr file miss buffer reader bufferedread br buffer reader bufferedread file reader fileread id file myidfil string id string myidstr id string myidstr br read line readlin br close server id serverid pars parselong id string myidstr mdc put myid id string myidstr number format except numberformatexcept illeg argument except illegalargumentexcept serverid id string myidstr number warn inconsist peer type learner type learnertyp role server list rolebyserverslist observ contain kei containskei server id serverid learner type learnertyp observ learner type learnertyp particip role server list rolebyserverslist peer type peertyp log warn peer type from server list role server list rolebyserverslist doesn match peer type peertyp peer type peertyp default server list peer type peertyp role server list rolebyserverslist inet socket address inetsocketaddress get client port address getclientportaddress client port address clientportaddress string get data dir getdatadir data dir datadir string get data log dir getdatalogdir data log dir datalogdir get tick time getticktim tick time ticktim get max client cnxn getmaxclientcnxn max client cnxn maxclientcnxn get min session timeout getminsessiontimeout min session timeout minsessiontimeout get max session timeout getmaxsessiontimeout max session timeout maxsessiontimeout get init limit getinitlimit init limit initlimit get sync limit getsynclimit sync limit synclimit get elect alg getelectionalg elect alg electionalg get elect port getelectionport elect port electionport get snap retain count getsnapretaincount snap retain count snapretaincount get purg interv getpurgeinterv purg interv purgeinterv quorum verifi quorumverifi get quorum verifi getquorumverifi quorum verifi quorumverifi map quorum server quorumserv get server getserv collect unmodifi map unmodifiablemap server get server id getserverid server id serverid distribut isdistribut server size learner type learnertyp get peer type getpeertyp peer type peertyp 

suppress warn suppresswarn serial config except configexcept except config except configexcept string msg msg config except configexcept string msg except msg 

op lessthanop filter op filterop match log entri logentri entri filter except filterexcept arg first arg get first filter op filterop arg type argtyp type first get type gettyp type filter op filterop arg type argtyp symbol string kei string first get valu getvalu object entri get attribut getattribut kei string type filter op filterop arg type argtyp string integ type filter op filterop arg type argtyp number filter except filterexcept op lessthanop invalid argument first argument resolv string number object last arg arg object get valu getvalu get type gettyp filter op filterop arg type argtyp symbol string kei string get valu getvalu entri get attribut getattribut kei last type filter op filterop arg type argtyp string string last compar compareto string type filter op filterop arg type argtyp number number last valu doublevalu number valu doublevalu last 

creat request createrequest record string path data java util list org apach zookeep data acl acl flag creat request createrequest creat request createrequest string path data java util list org apach zookeep data acl acl flag path path data data acl acl flag flag string get path getpath path set path setpath string path get data getdata data set data setdata data java util list org apach zookeep data acl get acl getacl acl set acl setacl java util list org apach zookeep data acl acl get flag getflag flag set flag setflag flag serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write buffer writebuff data data start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writeint flag flag end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path data read buffer readbuff data index vidx1 start vector startvector acl vidx1 acl java util arrai list arraylist org apach zookeep data acl vidx1 done vidx1 incr org apach zookeep data acl e1 e1 org apach zookeep data acl read record readrecord e1 e1 acl add e1 end vector endvector acl flag read readint flag end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write buffer writebuff data data start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writeint flag flag end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar creat request createrequest unimpl equal object peer peer peer peer creat request createrequest peer peer creat request createrequest peer creat request createrequest peer peer ret ret path equal peer path ret ret ret org apach jute util buf equal bufequ data peer data ret ret ret acl equal peer acl ret ret ret flag peer flag ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret java util arrai string tostr data hash code hashcod result 37 result ret ret acl hash code hashcod result 37 result ret ret flag result 37 result ret result string signatur creat request lcreaterequest sb lacl lid ilid ss 

quorum stat quorumstat provid provid provid string unknown state unknown state unknown string state state leaderelect string lead state lead state lead string follow state follow state follow string observ state observ state observ string get quorum peer getquorump string get server state getserverst quorum stat quorumstat provid provid provid provid string get server state getserverst provid get server state getserverst string get quorum peer getquorump provid get quorum peer getquorump overrid string string tostr string builder stringbuild sb string builder stringbuild string tostr string state get server state getserverst state equal provid lead state lead state sb append follow string get quorum peer getquorump sb append append sb append state equal provid follow state follow state state equal provid observ state observ state sb append leader string ldr get quorum peer getquorump ldr length sb append ldr sb append connect sb append sb string tostr 

provid string unknown state unknown state unknown string state state leaderelect string lead state lead state lead string follow state follow state follow string observ state observ state observ string get quorum peer getquorump string get server state getserverst 

manag interact applic node zookeep instanc zoo inspector node manag zooinspectornodemanag zoo inspector read manag zooinspectorreadonlymanag param node path nodepath path node set data param data data set node data node successfulli updat set data setdata string node path nodepath string data 

fle backward elect round test flebackwardelectionroundtest zk test zktestcas logger log logger factori loggerfactori get logger getlogg fle lost messag test flelostmessagetest count hash map hashmap quorum server quorumserv peer file tmpdir port quorum cnx manag quorumcnxmanag cnx manag cnxmanag befor set up setup except count peer hash map hashmap quorum server quorumserv count tmpdir file count port count cnx manag cnxmanag quorum cnx manag quorumcnxmanag count after tear down teardown except count cnx manag cnxmanag cnx manag cnxmanag halt test check follow server current receiv notif from quorum indic follow elect round higher elect round notif messag leader set epoch back on more follow turn elect elect round leader follow differ elect round prevent server from elect leader get consist set notif from quorum link http issu apach org jira brows zookeep 1514 except test test backward elect round testbackwardelectionround except log info test le testl get test name gettestnam count count clientport port assign portassign uniqu peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress clientport inet socket address inetsocketaddress port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port clientport start server quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect fle test util fletestutil le thread lethread thread fle test util fletestutil le thread lethread peer thread start start mock server quorum peer quorump mock peer mockpeer quorum peer quorump peer tmpdir tmpdir port 1000 cnx manag cnxmanag quorum cnx manag quorumcnxmanag mock peer mockpeer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen start cnx manag cnxmanag send tosend 0l fle test util fletestutil creat msg createmsg server state serverst follow ordin start mock server mock peer mockpeer quorum peer quorump peer tmpdir tmpdir port 1000 cnx manag cnxmanag quorum cnx manag quorumcnxmanag mock peer mockpeer listen cnx manag cnxmanag listen listen start cnx manag cnxmanag send tosend 0l fle test util fletestutil creat msg createmsg server state serverst follow ordin run instanc leader elect thread join 5000 thread fle test util fletestutil le thread lethread peer thread start send messag time make leader cnx manag cnxmanag send tosend 0l fle test util fletestutil creat msg createmsg server state serverst follow ordin cnx manag cnxmanag send tosend 0l fle test util fletestutil creat msg createmsg server state serverst follow ordin thread join 5000 thread aliv isal fail join 

test writelock write lock test writelocktest client base clientbas session timeout sessiontimeout 10 1000 string dir get getclass get name getnam write lock writelock node count down latch countdownlatch latch count down latch countdownlatch restart server restartserv work close last node fail workaroundclosinglastznodefail kill leader killlead test test run testrun except run test runtest lock callback lockcallback lock listen locklisten lock acquir lockacquir latch count down countdown lock releas lockreleas run test runtest count except node write lock writelock count count zoo keeper zookeep keeper creat client createcli write lock writelock leader write lock writelock keeper dir leader set lock listen setlocklisten lock callback lockcallback node leader leader lock let wait previou leader die on node leader latch await 30 time unit timeunit second write lock writelock first node dump node dumpnod count let first elect leader asserttru first znode leader first get id getid first owner isown count write lock writelock node node assertfals node leader node get id getid node owner isown count kill leader killlead println kill leader let kill leader latch count down latch countdownlatch first unlock latch await 30 time unit timeunit second thread sleep 10000 write lock writelock second node dump node dumpnod count let first elect leader asserttru second znode leader second get id getid second owner isown count write lock writelock node node assertfals node leader node get id getid node owner isown restart server restartserv let stop server println stop server stop server stopserv thread sleep 10000 todo let longer leader dump node dumpnod count println start server start server startserv thread sleep 10000 count println call acquir node node lock dump node dumpnod count println close down dump node dumpnod count count write lock writelock node node println node id node get id getid leader node owner isown after tear down teardown except node node length write lock writelock node node node println close node node close work close last node fail workaroundclosinglastznodefail node length println close zookeep bug println close zookeep node get zookeep getzookeep close println close zookeep println let stop server tear down teardown 

lock callback lockcallback lock listen locklisten lock acquir lockacquir latch count down countdown lock releas lockreleas 

read readonli mx bean implement read bean readonlybean read bean readonlybean zoo keeper server bean zookeeperserverbean read bean readonlybean zoo keeper server zookeeperserv zk zk string get name getnam read server readonlyserv 

buffer jbuffer comp type jcomptyp creat instanc buffer jbuffer buffer jbuffer buffer std string buffer string gen cpp get set gencppgetset string fname idx fidx string cget func cgetfunc get cpp type getcpptyp get fname cget func cgetfunc fname cget func cgetfunc string get func getfunc get cpp type getcpptyp get fname get func getfunc bs bs set idx fidx fname get func getfunc cget func cgetfunc get func getfunc string get signatur getsignatur string gen java read wrapper genjavareadwrapp string fname string tag decl string ret decl ret fname ret fname read buffer readbuff tag string gen java write wrapper genjavawritewrapp string fname string tag write buffer writebuff fname tag string gen java compar genjavacompareto string fname string string builder stringbuild sb string builder stringbuild sb append sb append fname sb append ur sb append ret org apach jute util compar byte comparebyt length ur ur length sb append sb string tostr string gen java compar genjavacompareto string fname gen java compar genjavacompareto fname peer fname string gen java compar wrapper genjavacomparetowrapp string fname string gen java compar genjavacompareto fname string gen java equal genjavaequ string fname string peer ret org apach jute util buf equal bufequ fname peer string gen java hash code genjavahashcod string fname ret java util arrai string tostr fname hash code hashcod string gen java slurp byte genjavaslurpbyt string string string string builder stringbuild sb string builder stringbuild sb append sb append org apach jute util read readvint sb append writabl util writableutil get size getvints sb append sb append sb string tostr string gen java compar byte genjavacomparebyt string builder stringbuild sb string builder stringbuild sb append sb append i1 org apach jute util read readvint b1 s1 sb append i2 org apach jute util read readvint b2 s2 sb append z1 writabl util writableutil get size getvints i1 sb append z2 writabl util writableutil get size getvints i2 sb append s1 z1 s2 z2 l1 z1 l2 z2 sb append r1 org apach jute util compar byte comparebyt b1 s1 l1 b2 s2 l2 sb append r1 r1 sb append s1 i1 s2 i2 l1 i1 l1 i2 sb append sb string tostr 

async callback asynccallback stat callback statcallback async callback asynccallback process result processresult rc string path object ctx stat stat data callback datacallback async callback asynccallback process result processresult rc string path object ctx data stat stat acl callback aclcallback async callback asynccallback process result processresult rc string path object ctx list acl acl stat stat children callback childrencallback async callback asynccallback process result processresult rc string path object ctx list string children children2 callback children2callback async callback asynccallback process result processresult rc string path object ctx list string children stat stat string callback stringcallback async callback asynccallback process result processresult rc string path object ctx string name callback voidcallback async callback asynccallback process result processresult rc string path object ctx 

stat callback statcallback async callback asynccallback process result processresult rc string path object ctx stat stat 

data callback datacallback async callback asynccallback process result processresult rc string path object ctx data stat stat 

acl callback aclcallback async callback asynccallback process result processresult rc string path object ctx list acl acl stat stat 

children callback childrencallback async callback asynccallback process result processresult rc string path object ctx list string children 

children2 callback children2callback async callback asynccallback process result processresult rc string path object ctx list string children stat stat 

string callback stringcallback async callback asynccallback process result processresult rc string path object ctx string name 

callback voidcallback async callback asynccallback process result processresult rc string path object ctx 

data tree test datatreetest zk test zktestcas logger log logger factori loggerfactori get logger getlogg data tree test datatreetest data tree datatre dt befor set up setup except dt data tree datatre after tear down teardown except dt test test root watch trigger testrootwatchtrigg except watcher mywatch watcher fire process watch event watchedev event event get path getpath equal fire watcher mywatch watcher watcher mywatch set watch root node dt get children getchildren stat watcher add node trigger watch dt creat node createnod xyz dt get node getnod stat get cversion getcvers assertfals root node watch trigger watcher fire zookeep 1046 test cversion get increment correctli test test increment cversion testincrementcvers except dt creat node createnod test dt get node getnod stat get cversion getcvers data node datanod zk dt get node getnod test prev cversion prevcvers zk stat get cversion getcvers prev pzxid prevpzxid zk stat get pzxid getpzxid dt set cversion pzxid setcversionpzxid test prev cversion prevcvers prev pzxid prevpzxid cversion newcvers zk stat get cversion getcvers pzxid newpzxid zk stat get pzxid getpzxid asserttru cversion pzxid verif fail expect prev cversion prevcvers prev pzxid prevpzxid found cversion newcvers pzxid newpzxid cversion newcvers prev cversion prevcvers pzxid newpzxid prev pzxid prevpzxid 

set max children txn setmaxchildrentxn record string path max set max children txn setmaxchildrentxn set max children txn setmaxchildrentxn string path max path path max max string get path getpath path set path setpath string path get max getmax max set max setmax max serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writeint max max end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path max read readint max end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writeint max max end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set max children txn setmaxchildrentxn cast except classcastexcept compar differ type record set max children txn setmaxchildrentxn peer set max children txn setmaxchildrentxn peer peer ret ret path compar compareto peer path ret ret ret max peer max max peer max ret ret ret equal object peer peer peer peer set max children txn setmaxchildrentxn peer peer set max children txn setmaxchildrentxn peer set max children txn setmaxchildrentxn peer peer ret ret path equal peer path ret ret ret max peer max ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret max result 37 result ret result string signatur set max children txn lsetmaxchildrentxn si 

test stand server run runwith parameter delet test deletetest base logger log logger factori loggerfactori get logger getlogg delet test deletetest string zpath client respons clientrespons statu expect statu expectedstatu watcher mywatch watcher process watch event watchedev event fixm ignor paramet collect object data except string base znode baseznod base creat base node createbaseznod arrai list aslist object base znode baseznod base znode baseznod client respons clientrespons statu content content base znode baseznod base znode baseznod client respons clientrespons statu content content delet test deletetest string path string zpath client respons clientrespons statu statu zpath zpath expect statu expectedstatu statu verifi string type except expect statu expectedstatu client respons clientrespons statu found found zpath zk creat zpath id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti client respons clientrespons cr znodesr path zpath accept type type type delet client respons clientrespons equal assertequ expect statu expectedstatu cr get client respons statu getclientresponsestatu us band method verifi stat stat zk exist zpath assertnul stat test test delet testdelet except log info start get name getnam verifi media type mediatyp applic octet stream applic octet stream verifi media type mediatyp applic json applic json verifi media type mediatyp applic xml applic xml 

watcher mywatch watcher process watch event watchedev event fixm ignor 

sharp gener csharpgener arrai list arraylist record jrecord rec list mreclist file output directori outputdirectori creat instanc sharp gener csharpgener param name possibl full pathnam file param ilist includ file file jfile param rlist list record defin file param output directori outputdirectori sharp gener csharpgener string name arrai list arraylist file jfile ilist arrai list arraylist record jrecord rlist file output directori outputdirectori output directori outputdirectori output directori outputdirectori rec list mreclist rlist gener code method creat request file spit file level element includ statement record level code gener record jrecord gen code gencod io except ioexcept record jrecord rec rec list mreclist rec gen csharp code gencsharpcod output directori outputdirectori 

node viewer displai meta data current select node meta data essenti inform from link stat node node viewer meta data nodeviewermetadata zoo inspector node viewer zooinspectornodeview zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag panel jpanel meta data panel metadatapanel string select node selectednod node viewer meta data nodeviewermetadata set layout setlayout border layout borderlayout meta data panel metadatapanel panel jpanel meta data panel metadatapanel set background setbackground color white scroll pane jscrollpan scroller scroll pane jscrollpan meta data panel metadatapanel add scroller border layout borderlayout center non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview get titl gettitl overrid string get titl gettitl node metadata non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview node select chang nodeselectionchang java util set overrid node select chang nodeselectionchang list string select node selectednod meta data panel metadatapanel remov removeal select node selectednod size select node selectednod select node selectednod get swing worker swingwork map string string worker swing worker swingwork map string string overrid map string string background doinbackground except node viewer meta data nodeviewermetadata zoo inspector manag zooinspectormanag get node meta getnodemeta node viewer meta data nodeviewermetadata select node selectednod overrid done map string string data data get interrupt except interruptedexcept data hash map hashmap string string logger factori loggerfactori get logger getlogg error error retriev meta data node node viewer meta data nodeviewermetadata select node selectednod execut except executionexcept data hash map hashmap string string logger factori loggerfactori get logger getlogg error error retriev meta data node node viewer meta data nodeviewermetadata select node selectednod node viewer meta data nodeviewermetadata meta data panel metadatapanel set layout setlayout grid bag layout gridbaglayout panel jpanel info panel infopanel panel jpanel info panel infopanel set background setbackground color white info panel infopanel set layout setlayout grid bag layout gridbaglayout row po rowpo map entri string string entri data entri set entryset row po rowpo label jlabel label label jlabel entri get kei getkei text field jtextfield text text field jtextfield entri get valu getvalu text set edit setedit grid bag constraint gridbagconstraint c1 grid bag constraint gridbagconstraint c1 gridx c1 gridi row po rowpo c1 gridwidth c1 gridheight c1 weightx c1 weighti c1 anchor grid bag constraint gridbagconstraint west c1 fill grid bag constraint gridbagconstraint horizont c1 inset inset c1 ipadx c1 ipadi info panel infopanel add label c1 grid bag constraint gridbagconstraint c2 grid bag constraint gridbagconstraint c2 gridx c2 gridi row po rowpo c2 gridwidth c2 gridheight c2 weightx c2 weighti c2 anchor grid bag constraint gridbagconstraint west c2 fill grid bag constraint gridbagconstraint horizont c2 inset inset c2 ipadx c2 ipadi info panel infopanel add text c2 grid bag constraint gridbagconstraint grid bag constraint gridbagconstraint gridx gridi row po rowpo gridwidth gridheight weightx weighti anchor grid bag constraint gridbagconstraint northwest fill grid bag constraint gridbagconstraint inset inset ipadx ipadi node viewer meta data nodeviewermetadata meta data panel metadatapanel add info panel infopanel node viewer meta data nodeviewermetadata meta data panel metadatapanel revalid node viewer meta data nodeviewermetadata meta data panel metadatapanel repaint worker execut non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview set zoo inspector manag setzooinspectormanag org apach zookeep inspector manag zoo inspector node manag zooinspectornodemanag overrid set zoo inspector manag setzooinspectormanag zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag 

processor begin read zoo keeper server readonlyzookeeperserv processor chain pass read oper op code opcod get data getdata op code opcod exist next processor drop state chang oper op code opcod creat op code opcod set data setdata read request processor readonlyrequestprocessor thread request processor requestprocessor logger log logger factori loggerfactori get logger getlogg read request processor readonlyrequestprocessor link block queue linkedblockingqueu request queu request queuedrequest link block queue linkedblockingqueu request finish request processor requestprocessor next processor nextprocessor zoo keeper server zookeeperserv zk read request processor readonlyrequestprocessor zoo keeper server zookeeperserv zk request processor requestprocessor next processor nextprocessor read request processor readonlyrequestprocessor zk get server id getserverid zk zk next processor nextprocessor next processor nextprocessor run finish request request queu request queuedrequest log request trace mask tracemask zoo trace zootrac client request trace mask client request trace mask request type op code opcod ping trace mask tracemask zoo trace zootrac client ping trace mask client ping trace mask log trace enabl istraceen zoo trace zootrac log request logrequest log trace mask tracemask request request request death requestofdeath request filter read request request type op code opcod sync op code opcod creat op code opcod delet op code opcod set data setdata op code opcod set acl setacl repli header replyhead hdr repli header replyhead request cxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid code notreadonli valu intvalu request cnxn send respons sendrespons hdr io except ioexcept log error io except send respons proce next processor next processor nextprocessor next processor nextprocessor process request processrequest request interrupt except interruptedexcept log error unexpect interrupt request processor except requestprocessorexcept get caus getcaus xid rollov except xidrolloverexcept log info get caus getcaus get messag getmessag log error unexpect except except log error unexpect except log info read request processor readonlyrequestprocessor exit loop overrid process request processrequest request request finish queu request queuedrequest add request overrid shutdown finish queu request queuedrequest clear queu request queuedrequest add request request death requestofdeath next processor nextprocessor shutdown 

zab1 test zab1 0test logger log logger factori loggerfactori get logger getlogg zab1 test zab1 0test lead thread leadthread thread leader leader lead thread leadthread leader leader leader leader run leader lead interrupt except interruptedexcept log info leader thread interrupt except log warn unexpect except leader thread leader shutdown lead end mock leader mocklead leader mock leader mocklead quorum peer quorump qp leader zoo keeper server leaderzookeeperserv zk io except ioexcept qp zk method return valu variabl hold epoch propos ha propos depend point execut call epoch get current epoch propos getcurrentepochtopropos epoch follow mock thread followermockthread thread leader leader follow sid followersid epoch string msg get epoch propos onlygetepochtopropos follow mock thread followermockthread follow sid followersid leader leader get epoch propos onlygetepochtopropos leader leader follow sid followersid follow sid followersid get epoch propos onlygetepochtopropos get epoch propos onlygetepochtopropos run get epoch propos onlygetepochtopropos epoch leader get epoch propos getepochtopropos follow sid followersid except leader wait epoch ack waitforepochack follow sid followersid state summari statesummari msg follow mock thread followermockthread id follow sid followersid return from wait epoch ack waitforepochack except test test leader connect follow testleaderinconnectingfollow except file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir leader leader quorum peer quorump peer creat quorum peer createquorump tmp dir tmpdir leader creat leader createlead tmp dir tmpdir peer peer leader leader peer set accept epoch setacceptedepoch follow mock thread followermockthread f1 follow mock thread followermockthread leader follow mock thread followermockthread f2 follow mock thread followermockthread leader f1 start f2 start wait follow time get epoch propos getepochtopropos shouldn leader didn execut get epoch propos getepochtopropos epoch account f1 join leader self get init limit getinitlimit leader self get tick time getticktim 5000 f2 join leader self get init limit getinitlimit leader self get tick time getticktim 5000 even follow time id connect follow connectingfollow epoch account leader block start accept epoch epoch leader get epoch propos getepochtopropos leader self get id getid leader self get accept epoch getacceptedepoch equal assertequ leader wrong epoch from get epoch propos getepochtopropos epoch except fail leader time get epoch propos getepochtopropos leader leader shutdown end test recurs delet recursivedelet tmp dir tmpdir test leader set last accept epoch call get epoch propos getepochtopropos set epoch wait follow execut get epoch propos getepochtopropos don check last accept epoch lastacceptedepoch epoch call from subsequ follow last accept epoch lastacceptedepoch doesn chang valu epoch test fail pass fix predic link http issu apach org jira brows zookeep 1343 except test test last accept epoch testlastacceptedepoch except file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir leader leader lead thread leadthread lead thread leadthread quorum peer quorump peer creat quorum peer createquorump tmp dir tmpdir leader creat mock leader createmocklead tmp dir tmpdir peer peer leader leader peer set accept epoch setacceptedepoch lead thread leadthread lead thread leadthread leader lead thread leadthread start mock leader mocklead leader get current epoch propos getcurrentepochtopropos thread sleep 20 epoch leader get epoch propos getepochtopropos equal assertequ propos epoch wrong epoch except fail time get epoch propos getepochtopropos leader leader shutdown end test lead thread leadthread lead thread leadthread interrupt lead thread leadthread join recurs delet recursivedelet tmp dir tmpdir test test leader elect follow testleaderinelectingfollow except file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir leader leader quorum peer quorump peer creat quorum peer createquorump tmp dir tmpdir leader creat leader createlead tmp dir tmpdir peer peer leader leader follow mock thread followermockthread f1 follow mock thread followermockthread leader follow mock thread followermockthread f2 follow mock thread followermockthread leader thing need wait epoch ack waitforepochack run leader lead run leader here leader readi start readytostart leader leader state summari leaderstatesummari state summari statesummari leader self get current epoch getcurrentepoch leader zk get last process zxid getlastprocessedzxid f1 start f2 start wait follow time wait epoch ack waitforepochack shouldn leader didn execut wait epoch ack waitforepochack f1 join leader self get init limit getinitlimit leader self get tick time getticktim 5000 f2 join leader self get init limit getinitlimit leader self get tick time getticktim 5000 make time didn asserttru f1 msg wait leader f1 msg asserttru f2 msg wait leader f2 msg leader leader shutdown end test recurs delet recursivedelet tmp dir tmpdir server cnxn factori nullservercnxnfactori server cnxn factori servercnxnfactori startup zoo keeper server zookeeperserv zk server zkserver io except ioexcept interrupt except interruptedexcept start shutdown set max client cnxn host setmaxclientcnxnsperhost max join interrupt except interruptedexcept get max client cnxn host getmaxclientcnxnsperhost get local port getlocalport inet socket address inetsocketaddress get local address getlocaladdress iter server cnxn servercnxn get connect getconnect configur inet socket address inetsocketaddress addr max client cnxn maxclientcnxn io except ioexcept close session closesess session id sessionid close closeal overrid get num aliv connect getnumaliveconnect socket get socket pair getsocketpair io except ioexcept server socket serversocket ss server socket serversocket ss bind inet socket address inetsocketaddress end point endpoint inet socket address inetsocketaddress ss get local socket address getlocalsocketaddress socket socket end point endpoint get address getaddress end point endpoint get port getport socket ss accept read packet skip ping readpacketskippingp input archiv inputarch ia quorum packet quorumpacket qp io except ioexcept ia read record readrecord qp qp get type gettyp leader ping leader convers leaderconvers convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader except popul leader convers populatedleaderconvers convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader zxid except follow convers followerconvers convers follow conversewithfollow input archiv inputarch ia output archiv outputarch oa follow except test leader convers testleaderconvers leader convers leaderconvers convers except socket pair get socket pair getsocketpair socket leader socket leadersocket pair socket follow socket followersocket pair file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir lead thread leadthread lead thread leadthread leader leader quorum peer quorump peer creat quorum peer createquorump tmp dir tmpdir leader creat leader createlead tmp dir tmpdir peer peer leader leader lead thread leadthread lead thread leadthread leader lead thread leadthread start leader readi start readytostart thread sleep 20 learner handler learnerhandl lh learner handler learnerhandl leader socket leadersocket leader lh start leader socket leadersocket set timeout setsotimeout 4000 input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch follow socket followersocket get input stream getinputstream output archiv outputarch oa binari output archiv binaryoutputarch get archiv getarch follow socket followersocket get output stream getoutputstream convers convers leader conversewithlead ia oa leader leader leader shutdown end test lead thread leadthread lead thread leadthread interrupt lead thread leadthread join recurs delet recursivedelet tmp dir tmpdir test popul leader convers testpopulatedleaderconvers popul leader convers populatedleaderconvers convers op except socket pair get socket pair getsocketpair socket leader socket leadersocket pair socket follow socket followersocket pair file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir lead thread leadthread lead thread leadthread leader leader setup databas two znode file txn snap log filetxnsnaplog snap log snaplog file txn snap log filetxnsnaplog tmp dir tmpdir tmp dir tmpdir zk databas zkdatabas zk db zkdb zk databas zkdatabas snap log snaplog asserttru op zxid zxid util zxidutil make zxid makezxid op zxid zxid util zxidutil make zxid makezxid string path foo zk db zkdb process txn processtxn txn header txnheader 13 1000 zxid 30 zoo def zoodef op code opcod creat creat txn createtxn path fpjwasalsoher get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf stat stat stat equal assertequ fpjwasalsoher string zk db zkdb get data getdata path stat asserttru zxid zxid util zxidutil make zxid makezxid gener snapshot close file snap log snaplog save zk db zkdb get data tree getdatatre zk db zkdb get session time out getsessionwithtimeout snap log snaplog close quorum peer quorump peer creat quorum peer createquorump tmp dir tmpdir leader creat leader createlead tmp dir tmpdir peer peer leader leader set last accept epoch current epoch peer set accept epoch setacceptedepoch peer set current epoch setcurrentepoch lead thread leadthread lead thread leadthread leader lead thread leadthread start leader cnx acceptor cnxacceptor leader cnx acceptor cnxacceptor aliv isal thread sleep 20 learner handler learnerhandl lh learner handler learnerhandl leader socket leadersocket leader lh start leader socket leadersocket set timeout setsotimeout 4000 input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch follow socket followersocket get input stream getinputstream output archiv outputarch oa binari output archiv binaryoutputarch get archiv getarch follow socket followersocket get output stream getoutputstream convers convers leader conversewithlead ia oa leader zxid leader leader shutdown end test lead thread leadthread lead thread leadthread interrupt lead thread leadthread join recurs delet recursivedelet tmp dir tmpdir test follow convers testfollowerconvers follow convers followerconvers convers except file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir thread follow thread followerthread convers follow conversablefollow follow quorum peer quorump peer peer creat quorum peer createquorump tmp dir tmpdir follow creat follow createfollow tmp dir tmpdir peer peer follow follow server socket serversocket ss server socket serversocket ss bind follow set leader socket address setleadersocketaddress inet socket address inetsocketaddress ss get local socket address getlocalsocketaddress follow follow thread followerforthread follow follow thread followerthread thread run follow thread followerforthread follow leader followlead interrupt except interruptedexcept log info follow thread interrupt except log warn unexpect except follow thread follow thread followerthread start socket leader socket leadersocket ss accept input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch leader socket leadersocket get input stream getinputstream output archiv outputarch oa binari output archiv binaryoutputarch get archiv getarch leader socket leadersocket get output stream getoutputstream convers convers follow conversewithfollow ia oa follow follow follow shutdown follow thread followerthread follow thread followerthread interrupt follow thread followerthread join peer peer shutdown recurs delet recursivedelet tmp dir tmpdir test test unnecessari snap testunnecessarysnap except test popul leader convers testpopulatedleaderconvers popul leader convers populatedleaderconvers overrid convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader zxid except equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch test normal run work learner info learnerinfo li learner info learnerinfo x10000 0x10000 li byte libyt 12 buffer output stream bytebufferoutputstream record2 buffer record2bytebuff li buffer bytebuff wrap li byte libyt quorum packet quorumpacket qp quorum packet quorumpacket leader followerinfo li byte libyt oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader leaderinfo qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid equal assertequ buffer bytebuff wrap qp get data getdata get getint x10000 0x10000 equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch epoch byte epochbyt buffer bytebuff wrap epoch byte wrappedepochbyt buffer bytebuff wrap epoch byte epochbyt wrap epoch byte wrappedepochbyt put putint qp quorum packet quorumpacket leader ackepoch zxid epoch byte epochbyt oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader diff qp get type gettyp test test normal follow run testnormalfollowerrun except test follow convers testfollowerconvers follow convers followerconvers overrid convers follow conversewithfollow input archiv inputarch ia output archiv outputarch oa follow except file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir file log dir logdir fzk get txn log factori gettxnlogfactori get data dir getdatadir get parent file getparentfil file snap dir snapdir fzk get txn log factori gettxnlogfactori get snap dir getsnapdir get parent file getparentfil equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch setup databas singl foo node zk databas zkdatabas zk db zkdb zk databas zkdatabas file txn snap log filetxnsnaplog tmp dir tmpdir tmp dir tmpdir first zxid firstzxid zxid util zxidutil make zxid makezxid zk db zkdb process txn processtxn txn header txnheader 13 1313 first zxid firstzxid 33 zoo def zoodef op code opcod creat creat txn createtxn foo data1 get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf stat stat stat equal assertequ data1 string zk db zkdb get data getdata foo stat quorum packet quorumpacket qp quorum packet quorumpacket read packet skip ping readpacketskippingp ia qp equal assertequ leader followerinfo qp get type gettyp equal assertequ qp get zxid getzxid learner info learnerinfo learn info learninfo learner info learnerinfo buffer input stream bytebufferinputstream buffer2 record bytebuffer2record buffer bytebuff wrap qp get data getdata learn info learninfo equal assertequ learn info learninfo get protocol version getprotocolvers x10000 0x10000 equal assertequ learn info learninfo get serverid getserverid simul establish leader epoch qp set type settyp leader leaderinfo qp set zxid setzxid zxid util zxidutil make zxid makezxid proto byte protobyt buffer bytebuff wrap proto byte protobyt put putint x10000 0x10000 qp set data setdata proto byte protobyt oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader ackepoch qp get type gettyp equal assertequ qp get zxid getzxid equal assertequ zxid util zxidutil make zxid makezxid buffer bytebuff wrap qp get data getdata get getint equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch send snapshot creat earlier qp set type settyp leader snap qp set data setdata qp set zxid setzxid zk db zkdb get data tree last process zxid getdatatreelastprocessedzxid oa write record writerecord qp zk db zkdb serial snapshot serializesnapshot oa oa write string writestr ben here benwasher qp set type settyp leader newlead qp set zxid setzxid zxid util zxidutil make zxid makezxid oa write record writerecord qp get ack leader read packet skip ping readpacketskippingp ia qp equal assertequ leader ack qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch equal assertequ first zxid firstzxid fzk get last process zxid getlastprocessedzxid make data record filesystem zk databas zkdatabas zk db2 zkdb2 zk databas zkdatabas file txn snap log filetxnsnaplog log dir logdir snap dir snapdir last zxid lastzxid zk db2 zkdb2 load data base loaddatabas equal assertequ data1 string zk db2 zkdb2 get data getdata foo stat equal assertequ first zxid firstzxid last zxid lastzxid propos updat propos zxid proposalzxid zxid util zxidutil make zxid makezxid 1000 propos set data proposesetdata qp propos zxid proposalzxid data2 oa write record writerecord qp track chang callback depend time tracker watcher trackerwatch watcher chang wait chang waitforchang interrupt except interruptedexcept chang wait overrid process watch event watchedev event event get type gettyp event type eventtyp node data chang nodedatachang chang notifi notifyal chang chang tracker watcher trackerwatch watcher tracker watcher trackerwatch chang happen haven commit equal assertequ data1 string fzk get zk databas getzkdatabas get data getdata foo stat watcher chang happen qp set type settyp leader commit qp set zxid setzxid propos zxid proposalzxid oa write record writerecord qp qp set type settyp leader uptod qp set zxid setzxid oa write record writerecord qp read uptod ack read packet skip ping readpacketskippingp ia qp equal assertequ leader ack qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid read packet skip ping readpacketskippingp ia qp equal assertequ leader ack qp get type gettyp equal assertequ propos zxid proposalzxid qp get zxid getzxid watcher wait chang waitforchang equal assertequ data2 string fzk get zk databas getzkdatabas get data getdata foo stat check make chang persist zk db2 zkdb2 zk databas zkdatabas file txn snap log filetxnsnaplog log dir logdir snap dir snapdir last zxid lastzxid zk db2 zkdb2 load data base loaddatabas equal assertequ data2 string zk db2 zkdb2 get data getdata foo stat equal assertequ propos zxid proposalzxid last zxid lastzxid recurs delet recursivedelet tmp dir tmpdir propos set data proposesetdata quorum packet quorumpacket qp zxid string data version io except ioexcept qp set type settyp leader propos qp set zxid setzxid zxid txn header txnheader hdr txn header txnheader 1414 qp get zxid getzxid 55 zoo def zoodef op code opcod set data setdata set data txn setdatatxn sdt set data txn setdatatxn foo data get byte getbyt version arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream output archiv outputarch boa binari output archiv binaryoutputarch get archiv getarch bao boa write record writerecord hdr boa write record writerecord sdt qp set data setdata bao arrai tobytearrai test test normal follow run diff testnormalfollowerrunwithdiff except test follow convers testfollowerconvers follow convers followerconvers overrid convers follow conversewithfollow input archiv inputarch ia output archiv outputarch oa follow except file tmp dir tmpdir file creat temp file createtempfil test dir tmp dir tmpdir delet tmp dir tmpdir mkdir file log dir logdir fzk get txn log factori gettxnlogfactori get data dir getdatadir get parent file getparentfil file snap dir snapdir fzk get txn log factori gettxnlogfactori get snap dir getsnapdir get parent file getparentfil equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch setup databas singl foo node zk databas zkdatabas zk db zkdb zk databas zkdatabas file txn snap log filetxnsnaplog tmp dir tmpdir tmp dir tmpdir first zxid firstzxid zxid util zxidutil make zxid makezxid zk db zkdb process txn processtxn txn header txnheader 13 1313 first zxid firstzxid 33 zoo def zoodef op code opcod creat creat txn createtxn foo data1 get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf stat stat stat equal assertequ data1 string zk db zkdb get data getdata foo stat quorum packet quorumpacket qp quorum packet quorumpacket read packet skip ping readpacketskippingp ia qp equal assertequ leader followerinfo qp get type gettyp equal assertequ qp get zxid getzxid learner info learnerinfo learn info learninfo learner info learnerinfo buffer input stream bytebufferinputstream buffer2 record bytebuffer2record buffer bytebuff wrap qp get data getdata learn info learninfo equal assertequ learn info learninfo get protocol version getprotocolvers x10000 0x10000 equal assertequ learn info learninfo get serverid getserverid simul establish leader epoch qp set type settyp leader leaderinfo qp set zxid setzxid zxid util zxidutil make zxid makezxid proto byte protobyt buffer bytebuff wrap proto byte protobyt put putint x10000 0x10000 qp set data setdata proto byte protobyt oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader ackepoch qp get type gettyp equal assertequ qp get zxid getzxid equal assertequ zxid util zxidutil make zxid makezxid buffer bytebuff wrap qp get data getdata get getint equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch send diff qp set type settyp leader diff qp set data setdata qp set zxid setzxid zk db zkdb get data tree last process zxid getdatatreelastprocessedzxid oa write record writerecord qp creat session zxid createsessionzxid zxid util zxidutil make zxid makezxid propos session proposenewsess qp creat session zxid createsessionzxid x333 0x333 oa write record writerecord qp qp set type settyp leader commit qp set zxid setzxid creat session zxid createsessionzxid oa write record writerecord qp qp set type settyp leader newlead qp set zxid setzxid zxid util zxidutil make zxid makezxid oa write record writerecord qp qp set type settyp leader uptod qp set zxid setzxid oa write record writerecord qp read uptod ack read packet skip ping readpacketskippingp ia qp equal assertequ leader ack qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid get ack leader read packet skip ping readpacketskippingp ia qp equal assertequ leader ack qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch equal assertequ creat session zxid createsessionzxid fzk get last process zxid getlastprocessedzxid make data record filesystem zk databas zkdatabas zk db2 zkdb2 zk databas zkdatabas file txn snap log filetxnsnaplog log dir logdir snap dir snapdir zk db2 zkdb2 load data base loaddatabas log info zkdb2 session zk db2 zkdb2 get session getsess assertnotnul zk db2 zkdb2 get session time out getsessionwithtimeout get 4l recurs delet recursivedelet tmp dir tmpdir propos session proposenewsess quorum packet quorumpacket qp zxid session id sessionid io except ioexcept qp set type settyp leader propos qp set zxid setzxid zxid txn header txnheader hdr txn header txnheader 1414 qp get zxid getzxid 55 zoo def zoodef op code opcod creat session createsess creat session txn createsessiontxn cst creat session txn createsessiontxn 30000 arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream output archiv outputarch boa binari output archiv binaryoutputarch get archiv getarch bao boa write record writerecord hdr boa write record writerecord cst qp set data setdata bao arrai tobytearrai test test normal run testnormalrun except test leader convers testleaderconvers leader convers leaderconvers convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader io except ioexcept equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch test normal run work learner info learnerinfo li learner info learnerinfo x10000 0x10000 li byte libyt 12 buffer output stream bytebufferoutputstream record2 buffer record2bytebuff li buffer bytebuff wrap li byte libyt quorum packet quorumpacket qp quorum packet quorumpacket leader followerinfo li byte libyt oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader leaderinfo qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid equal assertequ buffer bytebuff wrap qp get data getdata get getint x10000 0x10000 equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch qp quorum packet quorumpacket leader ackepoch oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader diff qp get type gettyp read packet skip ping readpacketskippingp ia qp equal assertequ leader newlead qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch qp quorum packet quorumpacket leader ack qp get zxid getzxid oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader newlead qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid equal assertequ self get accept epoch getacceptedepoch equal assertequ self get current epoch getcurrentepoch qp quorum packet quorumpacket leader ack qp get zxid getzxid oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader uptod qp get type gettyp deseri snapshot deserializesnapshot input archiv inputarch ia io except ioexcept zk databas zkdatabas zkdb zk databas zkdatabas zkdb deseri snapshot deserializesnapshot ia string signatur ia read string readstr signatur equal assertequ ben here benwasher signatur test test leader testleaderbehind except test leader convers testleaderconvers leader convers leaderconvers convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader io except ioexcept test normal run work learner info learnerinfo li learner info learnerinfo x10000 0x10000 li byte libyt 12 buffer output stream bytebufferoutputstream record2 buffer record2bytebuff li buffer bytebuff wrap li byte libyt last ack epoch 20 quorum packet quorumpacket qp quorum packet quorumpacket leader followerinfo zxid util zxidutil make zxid makezxid 20 li byte libyt oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader leaderinfo qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid 21 qp get zxid getzxid equal assertequ buffer bytebuff wrap qp get data getdata get getint x10000 0x10000 qp quorum packet quorumpacket leader ackepoch oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader diff qp get type gettyp read packet skip ping readpacketskippingp ia qp equal assertequ leader newlead qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid 21 qp get zxid getzxid qp quorum packet quorumpacket leader ack qp get zxid getzxid oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader newlead qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid 21 qp get zxid getzxid qp quorum packet quorumpacket leader ack qp get zxid getzxid oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader uptod qp get type gettyp test quorum follow send learner info learnerinfo ack epoch sent leader receipt learner info learnerinfo from quorum leader start epoch normal quorum ack epoch test zk 1192 except test test abandon befor ack epoch testabandonbeforeackepoch except test leader convers testleaderconvers leader convers leaderconvers convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader io except ioexcept interrupt except interruptedexcept test normal run work learner info learnerinfo li learner info learnerinfo x10000 0x10000 li byte libyt 12 buffer output stream bytebufferoutputstream record2 buffer record2bytebuff li buffer bytebuff wrap li byte libyt quorum packet quorumpacket qp quorum packet quorumpacket leader followerinfo li byte libyt oa write record writerecord qp read packet skip ping readpacketskippingp ia qp equal assertequ leader leaderinfo qp get type gettyp equal assertequ zxid util zxidutil make zxid makezxid qp get zxid getzxid equal assertequ buffer bytebuff wrap qp get data getdata get getint x10000 0x10000 thread sleep self get init limit getinitlimit self get tick time getticktim 5000 leader didn get quorum ack make leader current epoch advanc equal assertequ self get current epoch getcurrentepoch recurs delet recursivedelet file file file file isfil file delet delet from file file file list file listfil file file file recurs delet recursivedelet file delet leader creat leader createlead file tmp dir tmpdir quorum peer quorump peer io except ioexcept field except nosuchfieldexcept illeg access except illegalaccessexcept leader zoo keeper server leaderzookeeperserv zk prepar leader preparelead tmp dir tmpdir peer leader peer zk leader creat mock leader createmocklead file tmp dir tmpdir quorum peer quorump peer io except ioexcept field except nosuchfieldexcept illeg access except illegalaccessexcept leader zoo keeper server leaderzookeeperserv zk prepar leader preparelead tmp dir tmpdir peer mock leader mocklead peer zk leader zoo keeper server leaderzookeeperserv prepar leader preparelead file tmp dir tmpdir quorum peer quorump peer io except ioexcept field except nosuchfieldexcept illeg access except illegalaccessexcept file txn snap log filetxnsnaplog log factori logfactori file txn snap log filetxnsnaplog tmp dir tmpdir tmp dir tmpdir peer set txn factori settxnfactori log factori logfactori field addr field addrfield peer get getclass get declar field getdeclaredfield quorum addr myquorumaddr addr field addrfield set access setaccess addr field addrfield set peer inet socket address inetsocketaddress 33556 zk databas zkdatabas zk db zkdb zk databas zkdatabas log factori logfactori leader zoo keeper server leaderzookeeperserv zk leader zoo keeper server leaderzookeeperserv log factori logfactori peer zoo keeper server zookeeperserv basic data tree builder basicdatatreebuild zk db zkdb zk convers follow conversablefollow follow convers follow conversablefollow quorum peer quorump self follow zoo keeper server followerzookeeperserv zk self zk inet socket address inetsocketaddress leader addr leaderaddr set leader socket address setleadersocketaddress inet socket address inetsocketaddress addr leader addr leaderaddr addr overrid inet socket address inetsocketaddress find leader findlead leader addr leaderaddr convers follow conversablefollow creat follow createfollow file tmp dir tmpdir quorum peer quorump peer io except ioexcept file txn snap log filetxnsnaplog log factori logfactori file txn snap log filetxnsnaplog tmp dir tmpdir tmp dir tmpdir peer set txn factori settxnfactori log factori logfactori zk databas zkdatabas zk db zkdb zk databas zkdatabas log factori logfactori follow zoo keeper server followerzookeeperserv zk follow zoo keeper server followerzookeeperserv log factori logfactori peer zoo keeper server zookeeperserv basic data tree builder basicdatatreebuild zk db zkdb peer set zk databas setzkdatabas zk db zkdb convers follow conversablefollow peer zk quorum peer quorump creat quorum peer createquorump file tmp dir tmpdir io except ioexcept file found except filenotfoundexcept quorum peer quorump peer quorum peer quorump peer sync limit synclimit peer init limit initlimit peer tick time ticktim 2000 peer quorum peer quorump hash map hashmap quorum server quorumserv peer quorum peer quorump put 1l quorum server quorumserv inet socket address inetsocketaddress 33221 peer quorum peer quorump put 1l quorum server quorumserv inet socket address inetsocketaddress 33223 peer set quorum verifi setquorumverifi quorum maj quorummaj peer set cnxn factori setcnxnfactori server cnxn factori nullservercnxnfactori file version2 file tmp dir tmpdir version version2 mkdir file output stream fileoutputstream file version2 current epoch currentepoch write get byte getbyt file output stream fileoutputstream file version2 accept epoch acceptedepoch write get byte getbyt peer 

lead thread leadthread thread leader leader lead thread leadthread leader leader leader leader run leader lead interrupt except interruptedexcept log info leader thread interrupt except log warn unexpect except leader thread leader shutdown lead end 

mock leader mocklead leader mock leader mocklead quorum peer quorump qp leader zoo keeper server leaderzookeeperserv zk io except ioexcept qp zk method return valu variabl hold epoch propos ha propos depend point execut call epoch get current epoch propos getcurrentepochtopropos epoch 

follow mock thread followermockthread thread leader leader follow sid followersid epoch string msg get epoch propos onlygetepochtopropos follow mock thread followermockthread follow sid followersid leader leader get epoch propos onlygetepochtopropos leader leader follow sid followersid follow sid followersid get epoch propos onlygetepochtopropos get epoch propos onlygetepochtopropos run get epoch propos onlygetepochtopropos epoch leader get epoch propos getepochtopropos follow sid followersid except leader wait epoch ack waitforepochack follow sid followersid state summari statesummari msg follow mock thread followermockthread id follow sid followersid return from wait epoch ack waitforepochack except 

server cnxn factori nullservercnxnfactori server cnxn factori servercnxnfactori startup zoo keeper server zookeeperserv zk server zkserver io except ioexcept interrupt except interruptedexcept start shutdown set max client cnxn host setmaxclientcnxnsperhost max join interrupt except interruptedexcept get max client cnxn host getmaxclientcnxnsperhost get local port getlocalport inet socket address inetsocketaddress get local address getlocaladdress iter server cnxn servercnxn get connect getconnect configur inet socket address inetsocketaddress addr max client cnxn maxclientcnxn io except ioexcept close session closesess session id sessionid close closeal overrid get num aliv connect getnumaliveconnect 

leader convers leaderconvers convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader except 

popul leader convers populatedleaderconvers convers leader conversewithlead input archiv inputarch ia output archiv outputarch oa leader zxid except 

follow convers followerconvers convers follow conversewithfollow input archiv inputarch ia output archiv outputarch oa follow except 

convers follow conversablefollow follow convers follow conversablefollow quorum peer quorump self follow zoo keeper server followerzookeeperserv zk self zk inet socket address inetsocketaddress leader addr leaderaddr set leader socket address setleadersocketaddress inet socket address inetsocketaddress addr leader addr leaderaddr addr overrid inet socket address inetsocketaddress find leader findlead leader addr leaderaddr 

run test nio client netti server run runwith suit nio netti suit base nionettysuitebas befor beforeclass set up setup set properti setproperti server cnxn factori servercnxnfactori zookeep server cnxn factori zookeep server cnxn factori netti server cnxn factori nettyservercnxnfactori get name getnam after afterclass tear down teardown clear properti clearproperti server cnxn factori servercnxnfactori zookeep server cnxn factori zookeep server cnxn factori 

describ data encrypt decrypt data encrypt manag dataencryptionmanag param data data encrypt encrypt data except encrypt data encryptdata string data except param encrypt data decrypt decrypt data except string decrypt data decryptdata encrypt except 

bean mbean repres client connect connect mx bean connectionmxbean sourc client ip address string get sourc ip getsourceip client session id string get session id getsessionid time connect start string get start time getstartedtim number ephemer node own connect string get ephemer node getephemeralnod packet receiv from client get packet receiv getpacketsreceiv number packet sent client get packet sent getpacketss number requet process get outstand request getoutstandingrequest session timeout ms get session timeout getsessiontimeout termin client session client reconnect differ session id termin session terminatesess termin thei client connect client immedi attempt reconnect session id termin connect terminateconnect min latenc ms get min latenc getminlat averag latenc ms get avg latenc getavglat max latenc ms get max latenc getmaxlat last oper perform connect string get last oper getlastoper last cxid connect string get last cxid getlastcxid last zxid connect string get last zxid getlastzxid last time server sent respons client connect string get last respons time getlastresponsetim latenc last respons client connect ms get last latenc getlastlat reset counter reset counter resetcount 

most simpl host provid hostprovid resolv instanti host provid statichostprovid host provid hostprovid logger log logger factori loggerfactori get logger getlogg host provid statichostprovid list inet socket address inetsocketaddress server address serveraddress arrai list arraylist inet socket address inetsocketaddress last index lastindex current index currentindex construct simpl host set simplehostset param server address serveraddress possibl unresolv zoo keeper zookeep server address unknown host except unknownhostexcept illeg argument except illegalargumentexcept server address serveraddress empti resolv empti list host provid statichostprovid collect inet socket address inetsocketaddress server address serveraddress unknown host except unknownhostexcept inet socket address inetsocketaddress address server address serveraddress inet address inetaddress resolv address resolvedaddress inet address inetaddress get name getallbynam address get host name gethostnam inet address inetaddress resolv address resolvedaddress resolv address resolvedaddress server address serveraddress add inet socket address inetsocketaddress resolv address resolvedaddress get host address gethostaddress address get port getport server address serveraddress empti isempti illeg argument except illegalargumentexcept host provid hostprovid empti collect shuffl server address serveraddress size server address serveraddress size inet socket address inetsocketaddress next spin delai spindelai current index currentindex current index currentindex server address serveraddress size current index currentindex current index currentindex last index lastindex spin delai spindelai thread sleep spin delai spindelai interrupt except interruptedexcept log warn unexpect except last index lastindex don sleep first connect attempt last index lastindex server address serveraddress get current index currentindex connect onconnect last index lastindex current index currentindex 

pars handl kerbero princip name split translat down local oper name kerbero name kerberosnam first compon name string servic name servicenam second compon name string host name hostnam realm name string realm pattern match kerbero name most compon pattern name parser namepars pattern compil pattern match string singl paramet pattern paramet pattern parameterpattern pattern compil pattern pars auth local auth local rule pattern rule parser rulepars pattern compil rule pattern recogn simpl non simpl name pattern non simpl pattern nonsimplepattern pattern compil list translat rule list rule rule string realm defaultrealm realm defaultrealm kerbero util kerberosutil get realm getdefaultrealm except ke get properti getproperti zookeep requir kerbero config requirekerberosconfig get properti getproperti zookeep requir kerbero config requirekerberosconfig equal illeg argument except illegalargumentexcept get kerbero configur ke realm defaultrealm set configur setconfigur work even fail miss kerbero configur zookeep requir kerbero config requirekerberosconfig set allow execut reach here throw illeg argument except illegalargumentexcept set configur setconfigur io except ioexcept illeg argument except illegalargumentexcept configur kerbero princip name map creat name from full kerbero princip name param name kerbero name kerberosnam string name matcher match name parser namepars matcher name match match name contain illeg argument except illegalargumentexcept malform kerbero name name servic name servicenam name host name hostnam realm servic name servicenam match group host name hostnam match group realm match group get configur realm realm from krb5 conf string get realm getdefaultrealm realm defaultrealm put name back from part overrid string string tostr string builder stringbuild result string builder stringbuild result append servic name servicenam host name hostnam result append result append host name hostnam realm result append result append realm result string tostr get first compon name first section kerbero princip name string get servic name getservicenam servic name servicenam get second compon name second section kerbero princip name string get host name gethostnam host name hostnam get realm name realm name string get realm getrealm realm encod rule translat kerbero name rule isdefault num compon numofcompon string format pattern match pattern from pattern frompattern string pattern topattern repeat rule isdefault num compon numofcompon format match from pattern frompattern pattern topattern repeat rule num compon numofcompon string format string match string from pattern frompattern string pattern topattern repeat isdefault num compon numofcompon num compon numofcompon format format match match pattern compil match from pattern frompattern from pattern frompattern pattern compil from pattern frompattern pattern topattern pattern topattern repeat repeat overrid string string tostr string builder stringbuild buf string builder stringbuild isdefault buf append buf append rule buf append num compon numofcompon buf append buf append format buf append match buf append buf append match buf append from pattern frompattern buf append buf append from pattern frompattern buf append buf append pattern topattern buf append repeat buf append buf string tostr replac number paramet form from length param normal text copi directli replac paramet param format string replac paramet param param list paramet gener string paramet refer replac bad format string badformatstr string replac paramet replaceparamet string format string param bad format string badformatstr matcher match paramet pattern parameterpattern matcher format start string builder stringbuild result string builder stringbuild start format length match find start result append match group string param num paramnum match group param num paramnum num integ pars parseint param num paramnum num num param length bad format string badformatstr index num from format valid rang param length result append param num number format except numberformatexcept nfe bad format string badformatstr bad format usernam map param num paramnum nfe start match end result string tostr replac match from pattern base string valu string param base string transform param from pattern base string param string replac match pattern param repeat substitut repeat string replac substitut replacesubstitut string base pattern from string repeat matcher match from matcher base repeat match replac replaceal match replac first replacefirst appli rule name repres paramet arrai param param first element realm second element compon name foo foo name rule appli io except ioexcept wrong rule string appli string param io except ioexcept string result isdefault realm defaultrealm equal param result param param length num compon numofcompon string base replac paramet replaceparamet format param match match matcher base match from pattern frompattern result base result replac substitut replacesubstitut base from pattern frompattern pattern topattern repeat result non simpl pattern nonsimplepattern matcher result find match rule nomatchingrul non simpl name result after auth local auth local rule result list rule pars rule parserul string rule list rule result arrai list arraylist rule string remain rule trim remain length matcher matcher rule parser rulepars matcher remain matcher lookingat illeg argument except illegalargumentexcept invalid rule remain matcher group result add rule result add rule integ pars parseint matcher group matcher group matcher group matcher group matcher group 10 equal matcher group 11 remain remain substr matcher end result set configur get rule param conf configur io except ioexcept set configur setconfigur io except ioexcept string rule string rulestr get properti getproperti zookeep secur auth local auth local rule pars rule parserul rule string rulestr suppress warn suppresswarn serial bad format string badformatstr io except ioexcept bad format string badformatstr string msg msg bad format string badformatstr string msg throwabl err msg err suppress warn suppresswarn serial match rule nomatchingrul io except ioexcept match rule nomatchingrul string msg msg get translat princip name oper user name name io except ioexcept string get name getshortnam io except ioexcept string param host name hostnam simpl realm servic name servicenam param string realm servic name servicenam param string realm servic name servicenam host name hostnam rule rule string result appli param result result match rule nomatchingrul rule appli string tostr print rule printrul io except ioexcept rule rule println main string arg except string arg arg kerbero name kerberosnam name kerbero name kerberosnam arg println name name name get name getshortnam 

encod rule translat kerbero name rule isdefault num compon numofcompon string format pattern match pattern from pattern frompattern string pattern topattern repeat rule isdefault num compon numofcompon format match from pattern frompattern pattern topattern repeat rule num compon numofcompon string format string match string from pattern frompattern string pattern topattern repeat isdefault num compon numofcompon num compon numofcompon format format match match pattern compil match from pattern frompattern from pattern frompattern pattern compil from pattern frompattern pattern topattern pattern topattern repeat repeat overrid string string tostr string builder stringbuild buf string builder stringbuild isdefault buf append buf append rule buf append num compon numofcompon buf append buf append format buf append match buf append buf append match buf append from pattern frompattern buf append buf append from pattern frompattern buf append buf append pattern topattern buf append repeat buf append buf string tostr replac number paramet form from length param normal text copi directli replac paramet param format string replac paramet param param list paramet gener string paramet refer replac bad format string badformatstr string replac paramet replaceparamet string format string param bad format string badformatstr matcher match paramet pattern parameterpattern matcher format start string builder stringbuild result string builder stringbuild start format length match find start result append match group string param num paramnum match group param num paramnum num integ pars parseint param num paramnum num num param length bad format string badformatstr index num from format valid rang param length result append param num number format except numberformatexcept nfe bad format string badformatstr bad format usernam map param num paramnum nfe start match end result string tostr replac match from pattern base string valu string param base string transform param from pattern base string param string replac match pattern param repeat substitut repeat string replac substitut replacesubstitut string base pattern from string repeat matcher match from matcher base repeat match replac replaceal match replac first replacefirst appli rule name repres paramet arrai param param first element realm second element compon name foo foo name rule appli io except ioexcept wrong rule string appli string param io except ioexcept string result isdefault realm defaultrealm equal param result param param length num compon numofcompon string base replac paramet replaceparamet format param match match matcher base match from pattern frompattern result base result replac substitut replacesubstitut base from pattern frompattern pattern topattern repeat result non simpl pattern nonsimplepattern matcher result find match rule nomatchingrul non simpl name result after auth local auth local rule result 

suppress warn suppresswarn serial bad format string badformatstr io except ioexcept bad format string badformatstr string msg msg bad format string badformatstr string msg throwabl err msg err 

suppress warn suppresswarn serial match rule nomatchingrul io except ioexcept match rule nomatchingrul string msg msg 

arg arg type argtyp type valu arg arg type argtyp type type type arg type argtyp get type gettyp type get valu getvalu valu string string tostr type valu 

leader elect support test leaderelectionsupporttest client base clientbas logger logger logger factori loggerfactori get logger getlogg leader elect support test leaderelectionsupporttest string test root node testrootnod current time milli currenttimemilli zoo keeper zookeep zoo keeper zookeep befor set up setup except set up setup zoo keeper zookeep creat client createcli zoo keeper zookeep creat test root node testrootnod thread current thread currentthread get id getid zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist after tear down teardown except zoo keeper zookeep zoo keeper zookeep delet test root node testrootnod thread current thread currentthread get id getid tear down teardown test test node testnod io except ioexcept interrupt except interruptedexcept keeper except keeperexcept leader elect support leaderelectionsupport elect support electionsupport creat leader elect support createleaderelectionsupport elect support electionsupport start thread sleep 3000 elect support electionsupport stop test test nodes3 testnodes3 io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test iter testiter count down latch countdownlatch latch count down latch countdownlatch test iter testiter atom integ atomicinteg failur counter failurecount atom integ atomicinteg test iter testiter run elect support thread runelectionsupportthread latch failur counter failurecount equal assertequ failur counter failurecount get latch await 10 time unit timeunit second logger info wait thread start time failur failur counter failurecount test test nodes9 testnodes9 io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test iter testiter count down latch countdownlatch latch count down latch countdownlatch test iter testiter atom integ atomicinteg failur counter failurecount atom integ atomicinteg test iter testiter run elect support thread runelectionsupportthread latch failur counter failurecount equal assertequ failur counter failurecount get latch await 10 time unit timeunit second logger info wait thread start time failur failur counter failurecount test test nodes20 testnodes20 io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test iter testiter 20 count down latch countdownlatch latch count down latch countdownlatch test iter testiter atom integ atomicinteg failur counter failurecount atom integ atomicinteg test iter testiter run elect support thread runelectionsupportthread latch failur counter failurecount equal assertequ failur counter failurecount get latch await 10 time unit timeunit second logger info wait thread start time failur failur counter failurecount test test nodes100 testnodes100 io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test iter testiter 100 count down latch countdownlatch latch count down latch countdownlatch test iter testiter atom integ atomicinteg failur counter failurecount atom integ atomicinteg test iter testiter run elect support thread runelectionsupportthread latch failur counter failurecount equal assertequ failur counter failurecount get latch await 20 time unit timeunit second logger info wait thread start time failur failur counter failurecount test test offer shuffl testoffershuffl interrupt except interruptedexcept test iter testiter 10 count down latch countdownlatch latch count down latch countdownlatch test iter testiter atom integ atomicinteg failur counter failurecount atom integ atomicinteg list thread thread arrai list arraylist thread test iter testiter test iter testiter thread add run elect support thread runelectionsupportthread latch failur counter failurecount math min 1200 10000 latch await 60 time unit timeunit second logger info wait thread start time failur failur counter failurecount test test get leader host name testgetleaderhostnam keeper except keeperexcept interrupt except interruptedexcept leader elect support leaderelectionsupport elect support electionsupport creat leader elect support createleaderelectionsupport elect support electionsupport start sketchi assum leader second thread sleep 3000 string leader host name leaderhostnam elect support electionsupport get leader host name getleaderhostnam assertnotnul leader host name leaderhostnam equal assertequ foohost leader host name leaderhostnam elect support electionsupport stop leader elect support leaderelectionsupport creat leader elect support createleaderelectionsupport leader elect support leaderelectionsupport elect support electionsupport leader elect support leaderelectionsupport elect support electionsupport set zoo keeper setzookeep zoo keeper zookeep elect support electionsupport set root node name setrootnodenam test root node testrootnod thread current thread currentthread get id getid elect support electionsupport set host name sethostnam foohost elect support electionsupport thread run elect support thread runelectionsupportthread count down latch countdownlatch latch atom integ atomicinteg failur counter failurecount run elect support thread runelectionsupportthread latch failur counter failurecount 3000 thread run elect support thread runelectionsupportthread count down latch countdownlatch latch atom integ atomicinteg failur counter failurecount sleep durat sleepdur leader elect support leaderelectionsupport elect support electionsupport creat leader elect support createleaderelectionsupport thread thread overrid run elect support electionsupport start thread sleep sleep durat sleepdur elect support electionsupport stop latch count down countdown except logger warn fail run leader elect get messag getmessag failur counter failurecount increment get incrementandget start 

alll serial implement output archiv outputarch write writebyt string tag io except ioexcept write writebool string tag io except ioexcept write writeint string tag io except ioexcept write writelong string tag io except ioexcept write writefloat string tag io except ioexcept write writedoubl string tag io except ioexcept write string writestr string string tag io except ioexcept write buffer writebuff buf string tag io except ioexcept write record writerecord record string tag io except ioexcept start record startrecord record string tag io except ioexcept end record endrecord record string tag io except ioexcept start vector startvector list string tag io except ioexcept end vector endvector list string tag io except ioexcept start map startmap tree map treemap string tag io except ioexcept end map endmap tree map treemap string tag io except ioexcept 

standard zoo keeper server zookeeperserv replac request processor follow request processor followerrequestprocessor commit processor commitprocessor request processor finalrequestprocessor sync request processor syncrequestprocessor spawn log propos from leader follow zoo keeper server followerzookeeperserv learner zoo keeper server learnerzookeeperserv logger log logger factori loggerfactori get logger getlogg follow zoo keeper server followerzookeeperserv commit processor commitprocessor commit processor commitprocessor sync request processor syncrequestprocessor sync processor syncprocessor pend sync request concurr link queue concurrentlinkedqueu request pend sync pendingsync param port param data dir datadir io except ioexcept follow zoo keeper server followerzookeeperserv file txn snap log filetxnsnaplog log factori logfactori quorum peer quorump self data tree builder datatreebuild tree builder treebuild zk databas zkdatabas zk db zkdb io except ioexcept log factori logfactori self tick time ticktim self min session timeout minsessiontimeout self max session timeout maxsessiontimeout tree builder treebuild zk db zkdb self pend sync pendingsync concurr link queue concurrentlinkedqueu request follow get follow getfollow self follow overrid setup request processor setuprequestprocessor request processor requestprocessor processor finalprocessor request processor finalrequestprocessor commit processor commitprocessor commit processor commitprocessor processor finalprocessor string tostr get server id getserverid commit processor commitprocessor start first processor firstprocessor follow request processor followerrequestprocessor commit processor commitprocessor follow request processor followerrequestprocessor first processor firstprocessor start sync processor syncprocessor sync request processor syncrequestprocessor send ack request processor sendackrequestprocessor learner get follow getfollow sync processor syncprocessor start link block queue linkedblockingqueu request pend txn pendingtxn link block queue linkedblockingqueu request log request logrequest txn header txnheader hdr record txn request request request hdr get client id getclientid hdr get cxid getcxid hdr get type gettyp request hdr hdr request txn txn request zxid hdr get zxid getzxid request zxid xffffffffl 0xffffffffl pend txn pendingtxn add request sync processor syncprocessor process request processrequest request commit messag receiv eventu method call match up zxid from commit head pend txn pendingtxn queue hand commit processor commitprocessor commit param zxid correspond head pend txn pendingtxn exist commit zxid pend txn pendingtxn size log warn commit hex string tohexstr zxid txn first element zxid firstelementzxid pend txn pendingtxn element zxid first element zxid firstelementzxid zxid log error commit zxid 0x hex string tohexstr zxid next pend txn 0x hex string tohexstr first element zxid firstelementzxid exit 12 request request pend txn pendingtxn remov commit processor commitprocessor commit request sync pend sync pendingsync size log warn expect sync request pend sync pendingsync remov commit processor commitprocessor commit overrid get global outstand limit getglobaloutstandinglimit get global outstand limit getglobaloutstandinglimit self get quorum size getquorums overrid shutdown log info shut down shutdown except log warn ignor unexpect except shutdown sync processor syncprocessor sync processor syncprocessor shutdown except log warn ignor unexpect except syncprocessor shutdown overrid string get state getstat follow overrid learner get learner getlearn get follow getfollow 

test stand server run runwith parameter get test gettest base logger log logger factori loggerfactori get logger getlogg get test gettest string accept string path string encod client respons clientrespons statu expect statu expectedstatu stat zstat expect stat expectedstat paramet collect object data except string base znode baseznod base creat base node createbaseznod arrai list aslist object media type mediatyp applic json applic json base znode baseznod utf8 client respons clientrespons statu stat zstat base znode baseznod media type mediatyp applic json applic json base znode baseznod utf8 client respons clientrespons statu stat zstat base znode baseznod media type mediatyp applic json applic json base znode baseznod utf8 client respons clientrespons statu stat zstat base znode baseznod foo media type mediatyp applic json applic json base znode baseznod base64 client respons clientrespons statu stat zstat base znode baseznod media type mediatyp applic json applic json base znode baseznod base64 client respons clientrespons statu stat zstat base znode baseznod get byte getbyt media type mediatyp applic json applic json base znode baseznod base64 client respons clientrespons statu stat zstat base znode baseznod get byte getbyt media type mediatyp applic json applic json base znode baseznod base64 client respons clientrespons statu stat zstat base znode baseznod foo get byte getbyt media type mediatyp applic json applic json base znode baseznod abaddkdk utf8 client respons clientrespons statu found found media type mediatyp applic json applic json base znode baseznod abaddkdk base64 client respons clientrespons statu found found media type mediatyp applic xml applic xml base znode baseznod utf8 client respons clientrespons statu stat zstat base znode baseznod foo media type mediatyp applic xml applic xml base znode baseznod base64 client respons clientrespons statu stat zstat base znode baseznod foo get byte getbyt media type mediatyp applic xml applic xml base znode baseznod abaddkdk utf8 client respons clientrespons statu found found media type mediatyp applic xml applic xml base znode baseznod abaddkdk base64 client respons clientrespons statu found found get test gettest string accept string path string encod client respons clientrespons statu statu stat zstat stat accept accept path path encod encod expect statu expectedstatu statu expect stat expectedstat stat test test get testget except log info start get name getnam expect stat expectedstat expect stat expectedstat data64 expect stat expectedstat data utf8 datautf8 zk set data setdata expect stat expectedstat path expect stat expectedstat data64 zk set data setdata expect stat expectedstat path expect stat expectedstat data utf8 datautf8 get byte getbyt client respons clientrespons cr znodesr path path queri param queryparam dataformat encod accept accept get client respons clientrespons equal assertequ expect statu expectedstatu cr get client respons statu getclientresponsestatu expect stat expectedstat stat zstat zstat cr get entiti getent stat zstat equal assertequ expect stat expectedstat zstat equal assertequ znodesr path path string tostr zstat uri 

node viewer displai acl current appli select node node viewer acl nodevieweracl zoo inspector node viewer zooinspectornodeview zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag panel jpanel acl data panel acldatapanel string select node selectednod node viewer acl nodevieweracl set layout setlayout border layout borderlayout acl data panel acldatapanel panel jpanel acl data panel acldatapanel set background setbackground color white scroll pane jscrollpan scroller scroll pane jscrollpan acl data panel acldatapanel add scroller border layout borderlayout center non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview get titl gettitl overrid string get titl gettitl node acl non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview node select chang nodeselectionchang java util set overrid node select chang nodeselectionchang list string select node selectednod acl data panel acldatapanel remov removeal select node selectednod size select node selectednod select node selectednod get swing worker swingwork list map string string worker swing worker swingwork list map string string overrid list map string string background doinbackground except node viewer acl nodevieweracl zoo inspector manag zooinspectormanag get acl getacl node viewer acl nodevieweracl select node selectednod overrid done list map string string acl acl get interrupt except interruptedexcept acl arrai list arraylist map string string logger factori loggerfactori get logger getlogg error error retriev acl inform node node viewer acl nodevieweracl select node selectednod execut except executionexcept acl arrai list arraylist map string string logger factori loggerfactori get logger getlogg error error retriev acl inform node node viewer acl nodevieweracl select node selectednod acl data panel acldatapanel set layout setlayout grid bag layout gridbaglayout map string string data acl row po rowpo panel jpanel acl panel aclpanel panel jpanel acl panel aclpanel set border setbord border factori borderfactori creat line border createlinebord color black acl panel aclpanel set background setbackground color white acl panel aclpanel set layout setlayout grid bag layout gridbaglayout map entri string string entri data entri set entryset row po acl rowposacl label jlabel label label jlabel entri get kei getkei text field jtextfield text text field jtextfield entri get valu getvalu text set edit setedit grid bag constraint gridbagconstraint c1 grid bag constraint gridbagconstraint c1 gridx c1 gridi row po acl rowposacl c1 gridwidth c1 gridheight c1 weightx c1 weighti c1 anchor grid bag constraint gridbagconstraint northwest c1 fill grid bag constraint gridbagconstraint c1 inset inset c1 ipadx c1 ipadi acl panel aclpanel add label c1 grid bag constraint gridbagconstraint c2 grid bag constraint gridbagconstraint c2 gridx c2 gridi row po acl rowposacl c2 gridwidth c2 gridheight c2 weightx c2 weighti c2 anchor grid bag constraint gridbagconstraint northwest c2 fill grid bag constraint gridbagconstraint c2 inset inset c2 ipadx c2 ipadi acl panel aclpanel add text c2 grid bag constraint gridbagconstraint grid bag constraint gridbagconstraint gridx gridi row po rowpo gridwidth gridheight weightx weighti anchor grid bag constraint gridbagconstraint northwest fill grid bag constraint gridbagconstraint inset inset ipadx ipadi acl data panel acldatapanel add acl panel aclpanel node viewer acl nodevieweracl acl data panel acldatapanel revalid node viewer acl nodevieweracl acl data panel acldatapanel repaint worker execut non javadoc org apach zookeep inspector gui nodeview zoo inspector node viewer zooinspectornodeview set zoo inspector manag setzooinspectormanag org apach zookeep inspector manag zoo inspector node manag zooinspectornodemanag overrid set zoo inspector manag setzooinspectormanag zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag 

transact entri transactionentri log entri logentri transact entri transactionentri timestamp client id clientid cxid zxid string op timestamp client id clientid cxid zxid op transact entri transactionentri timestamp client id clientid cxid zxid string op string extra timestamp set attribut setattribut client id client id clientid set attribut setattribut cxid cxid set attribut setattribut zxid zxid set attribut setattribut oper op set attribut setattribut extra extra get client id getclientid get attribut getattribut client id get cxid getcxid get attribut getattribut cxid get zxid getzxid get attribut getattribut zxid string get op getop string get attribut getattribut oper string get extra getextra string get attribut getattribut extra string string tostr get timestamp gettimestamp session 0x hex string tohexstr get client id getclientid cxid 0x hex string tohexstr get cxid getcxid zxid 0x hex string tohexstr get zxid getzxid op get op getop extra get extra getextra type get type gettyp log entri logentri type txn 

gener load generateload logger log logger factori loggerfactori get logger getlogg gener load generateload server socket serversocket ss set slave thread slavethread slave collect set synchronizedset hash set hashset slave thread slavethread map total time totalbytim hash map hashmap current interv currentinterv last chang lastchang print stream printstream sf print stream printstream tf tf print stream printstream file output stream fileoutputstream trace file found except filenotfoundexcept print stack trace printstacktrac interv 6000 add time count socket interv time interv current interv currentinterv current interv currentinterv interv println drop count date time current interv currentinterv interv track total second total total time totalbytim get interv total total time totalbytim put interv count total time totalbytim put interv total valu longvalu count tf println interv count remov interv total total time totalbytim remov interv total total slave thread slavethread thread socket slave thread slavethread socket set daemon setdaemon start run println connect buffer reader bufferedread buffer reader bufferedread input stream reader inputstreamread get input stream getinputstream string result result read line readlin string time percent count timepercentcount result split time percent count timepercentcount length err println result from exitng io except ioexcept result time pars parselong time percent count timepercentcount percent integ pars parseint time percent count timepercentcount count integ pars parseint time percent count timepercentcount err integ pars parseint time percent count timepercentcount err println error err add time count except print stack trace printstacktrac close send percentag get output stream getoutputstream write percentag get byte getbyt io except ioexcept print stack trace printstacktrac close err println close slave remov close io except ioexcept print stack trace printstacktrac acceptor thread acceptorthread thread acceptor thread acceptorthread set daemon setdaemon start run socket ss accept err println accept connect from slave add slave thread slavethread io except ioexcept print stack trace printstacktrac iter slave thread slavethread slave iter ha next hasnext slave thread slavethread st next remov st close report thread reporterthread thread percentag report thread reporterthread set daemon setdaemon start run current interv currentinterv current time milli currenttimemilli interv thing time report thread sleep interv min 99999 max total number current time milli currenttimemilli last interv lastinterv current interv currentinterv current interv currentinterv count remov last interv lastinterv count count 1000 interv multipli 1000 get req sec last chang lastchang last chang lastchang interv print thing chanc chang count min min count count max max count total count number calendar calendar calendar get instanc getinst calendar set time milli settimeinmilli last interv lastinterv interv string report last interv lastinterv calendar get calendar hour dai hour dai calendar get calendar minut calendar get calendar second percentag count min total number max err println report sf sf println report max total min 999999999 number thread sleep interv except print stack trace printstacktrac send chang sendchang percentag current time milli currenttimemilli start report thread reporterthread percentag percentag slave thread slavethread st slave arrai toarrai slave thread slavethread st send percentag current time milli currenttimemilli delai start delai 1000 println delai delai send percentag last chang lastchang gener instanc generatorinst instanc byte percentag error object stat sync statsync object finish read write rlatenc wlatenc outstand aliv zoo keeper thread zookeeperthread thread watcher data callback datacallback stat callback statcallback string host zoo keeper thread zookeeperthread string host set daemon setdaemon aliv host host start outstand limit outstandinglimit 100 outstand incoutstand interrupt except interruptedexcept outstand outstand outstand limit outstandinglimit wait dec outstand decoutstand outstand notifi notifyal random random string path zoo keeper zookeep zk connect run zk zoo keeper zookeep host 60000 connect wait 20000 300 thread sleep 100 path zk creat client 16 id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti keeper except keeperexcept log error keeper except thrown path err println couldn creat node aliv next nextint 100 percentag zk set data setdata path byte current time milli currenttimemilli zk get data getdata path current time milli currenttimemilli outstand incoutstand except print stack trace printstacktrac aliv zk close interrupt except interruptedexcept print stack trace printstacktrac process watch event watchedev event err println event event get type gettyp event type eventtyp connect event get state getstat keeper state keeperst sync connect syncconnect notifi notifyal process result processresult rc string path object ctx data stat stat dec outstand decoutstand stat sync statsync aliv rc err println rc rc error finish rlatenc current time milli currenttimemilli ctx read process result processresult rc string path object ctx stat stat dec outstand decoutstand stat sync statsync rc err println rc rc error finish wlatenc current time milli currenttimemilli ctx write sender thread senderthread thread socket sender thread senderthread socket set daemon setdaemon start run output stream outputstream os get output stream getoutputstream finish error aliv thread sleep 300 percentag finish error string report current time milli currenttimemilli percentag finish error outstand string subreport read rlatenc read write wlatenc write stat sync statsync finish error read write rlatenc wlatenc os write report get byte getbyt println report report subreport except print stack trace printstacktrac socket zoo keeper thread zookeeperthread zk thread zkthread sender thread senderthread send thread sendthread report configur string param err println param thread run string part param split string host port hostport part split byte size bytess 1024 part length byte size bytess integ pars parseint part except err println integ part byte byte size bytess socket host port hostport integ pars parseint host port hostport zk thread zkthread zoo keeper thread zookeeperthread part send thread sendthread sender thread senderthread buffer reader bufferedread buffer reader bufferedread input stream reader inputstreamread get input stream getinputstream string line line read line readlin percentag integ pars parseint line except print stack trace printstacktrac start set report setreport report start report start except print stack trace printstacktrac stop aliv zk thread zkthread interrupt send thread sendthread interrupt zk thread zkthread join interrupt except interruptedexcept print stack trace printstacktrac send thread sendthread join interrupt except interruptedexcept print stack trace printstacktrac report stop except print stack trace printstacktrac close io except ioexcept print stack trace printstacktrac statu watcher statuswatch watcher connect process watch event watchedev event event get type gettyp watcher event event type eventtyp connect event get state getstat watcher event keeper state keeperst sync connect syncconnect notifi notifyal connect isconnect connect wait connect waitconnect timeout interrupt except interruptedexcept end time endtim current time milli currenttimemilli timeout connect current time milli currenttimemilli end time endtim wait end time endtim current time milli currenttimemilli connect leader leaderonli leader serv leaderserv string process option processopt string arg arrai list arraylist string arg newarg arrai list arraylist string string arg equal leader leaderonli leader leaderonli leader serv leaderserv equal leader serv leaderserv leader serv leaderserv arg newarg add arg newarg arrai toarrai string param arg interrupt except interruptedexcept keeper except keeperexcept duplic name except duplicatenameexcept avail contain noavailablecontain assign except noassignmentexcept main string arg interrupt except interruptedexcept keeper except keeperexcept avail contain noavailablecontain duplic name except duplicatenameexcept assign except noassignmentexcept arg process option processopt arg arg length statu watcher statuswatch statu watcher statuswatch statu watcher statuswatch zoo keeper zookeep zk zoo keeper zookeep arg 15000 statu watcher statuswatch statu watcher statuswatch wait connect waitconnect 5000 err println connect arg instanc manag instancemanag im instanc manag instancemanag zk arg ss server socket serversocket port ss get local port getlocalport server count servercount integ pars parseint arg client count clientcount integ pars parseint arg string builder stringbuild quorum host port quorumhostport string builder stringbuild string builder stringbuild zk host port zkhostport string builder stringbuild server count servercount string quorum peer instanc quorumpeerinst creat server createserv im leader serv leaderserv quorum host port quorumhostport append zk host port zkhostport append zk host port zkhostport append quorum host port quorumhostport append server count servercount quorum peer instanc quorumpeerinst start instanc startinst im quorum host port quorumhostport string tostr leader leaderonli outer thread sleep 1000 io except ioexcept last except lastexcept string part zk host port zkhostport string tostr split part length string mode get mode getmod part mode equal leader zk host port zkhostport string builder stringbuild part println connect exclus zk host port zkhostport string tostr outer io except ioexcept last except lastexcept last except lastexcept client count clientcount im assign instanc assigninst client gener instanc generatorinst zk host port zkhostport string tostr inet address inetaddress get local host getlocalhost get canon host name getcanonicalhostnam port acceptor thread acceptorthread report thread reporterthread buffer reader bufferedread buffer reader bufferedread input stream reader inputstreamread string line line read line readlin string cmd number cmdnumber line split cmd number cmdnumber equal percentag cmd number cmdnumber length number integ pars parseint cmd number cmdnumber number number 100 number format except numberformatexcept 100 send chang sendchang number cmd number cmdnumber equal sleep cmd number cmdnumber length number integ pars parseint cmd number cmdnumber thread sleep number 1000 cmd number cmdnumber equal save cmd number cmdnumber length sf print stream printstream cmd number cmdnumber err println command err println tpercentag write percentag write percentag err println tsleep second sleep second sleep err println tsave file save output file save output number format except numberformatexcept println valid number get messag getmessag number format except numberformatexcept usag dousag io except ioexcept print stack trace printstacktrac exit usag dousag string get mode getmod string host port hostport number format except numberformatexcept unknown host except unknownhostexcept io except ioexcept string part host port hostport split socket socket part integ pars parseint part get output stream getoutputstream write stat get byte getbyt buffer reader bufferedread br buffer reader bufferedread input stream reader inputstreamread get input stream getinputstream string line line br read line readlin line start startswith mode line substr unknown usag dousag err println usag gener load generateload get name getnam leader leaderonli leader serv leaderserv zookeep host zookeep host port contain prefix containerprefix server ofserv client ofclient request size requests exit 

slave thread slavethread thread socket slave thread slavethread socket set daemon setdaemon start run println connect buffer reader bufferedread buffer reader bufferedread input stream reader inputstreamread get input stream getinputstream string result result read line readlin string time percent count timepercentcount result split time percent count timepercentcount length err println result from exitng io except ioexcept result time pars parselong time percent count timepercentcount percent integ pars parseint time percent count timepercentcount count integ pars parseint time percent count timepercentcount err integ pars parseint time percent count timepercentcount err println error err add time count except print stack trace printstacktrac close send percentag get output stream getoutputstream write percentag get byte getbyt io except ioexcept print stack trace printstacktrac close err println close slave remov close io except ioexcept print stack trace printstacktrac 

acceptor thread acceptorthread thread acceptor thread acceptorthread set daemon setdaemon start run socket ss accept err println accept connect from slave add slave thread slavethread io except ioexcept print stack trace printstacktrac iter slave thread slavethread slave iter ha next hasnext slave thread slavethread st next remov st close 

report thread reporterthread thread percentag report thread reporterthread set daemon setdaemon start run current interv currentinterv current time milli currenttimemilli interv thing time report thread sleep interv min 99999 max total number current time milli currenttimemilli last interv lastinterv current interv currentinterv current interv currentinterv count remov last interv lastinterv count count 1000 interv multipli 1000 get req sec last chang lastchang last chang lastchang interv print thing chanc chang count min min count count max max count total count number calendar calendar calendar get instanc getinst calendar set time milli settimeinmilli last interv lastinterv interv string report last interv lastinterv calendar get calendar hour dai hour dai calendar get calendar minut calendar get calendar second percentag count min total number max err println report sf sf println report max total min 999999999 number thread sleep interv except print stack trace printstacktrac 

gener instanc generatorinst instanc byte percentag error object stat sync statsync object finish read write rlatenc wlatenc outstand aliv zoo keeper thread zookeeperthread thread watcher data callback datacallback stat callback statcallback string host zoo keeper thread zookeeperthread string host set daemon setdaemon aliv host host start outstand limit outstandinglimit 100 outstand incoutstand interrupt except interruptedexcept outstand outstand outstand limit outstandinglimit wait dec outstand decoutstand outstand notifi notifyal random random string path zoo keeper zookeep zk connect run zk zoo keeper zookeep host 60000 connect wait 20000 300 thread sleep 100 path zk creat client 16 id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti keeper except keeperexcept log error keeper except thrown path err println couldn creat node aliv next nextint 100 percentag zk set data setdata path byte current time milli currenttimemilli zk get data getdata path current time milli currenttimemilli outstand incoutstand except print stack trace printstacktrac aliv zk close interrupt except interruptedexcept print stack trace printstacktrac process watch event watchedev event err println event event get type gettyp event type eventtyp connect event get state getstat keeper state keeperst sync connect syncconnect notifi notifyal process result processresult rc string path object ctx data stat stat dec outstand decoutstand stat sync statsync aliv rc err println rc rc error finish rlatenc current time milli currenttimemilli ctx read process result processresult rc string path object ctx stat stat dec outstand decoutstand stat sync statsync rc err println rc rc error finish wlatenc current time milli currenttimemilli ctx write sender thread senderthread thread socket sender thread senderthread socket set daemon setdaemon start run output stream outputstream os get output stream getoutputstream finish error aliv thread sleep 300 percentag finish error string report current time milli currenttimemilli percentag finish error outstand string subreport read rlatenc read write wlatenc write stat sync statsync finish error read write rlatenc wlatenc os write report get byte getbyt println report report subreport except print stack trace printstacktrac socket zoo keeper thread zookeeperthread zk thread zkthread sender thread senderthread send thread sendthread report configur string param err println param thread run string part param split string host port hostport part split byte size bytess 1024 part length byte size bytess integ pars parseint part except err println integ part byte byte size bytess socket host port hostport integ pars parseint host port hostport zk thread zkthread zoo keeper thread zookeeperthread part send thread sendthread sender thread senderthread buffer reader bufferedread buffer reader bufferedread input stream reader inputstreamread get input stream getinputstream string line line read line readlin percentag integ pars parseint line except print stack trace printstacktrac start set report setreport report start report start except print stack trace printstacktrac stop aliv zk thread zkthread interrupt send thread sendthread interrupt zk thread zkthread join interrupt except interruptedexcept print stack trace printstacktrac send thread sendthread join interrupt except interruptedexcept print stack trace printstacktrac report stop except print stack trace printstacktrac close io except ioexcept print stack trace printstacktrac 

zoo keeper thread zookeeperthread thread watcher data callback datacallback stat callback statcallback string host zoo keeper thread zookeeperthread string host set daemon setdaemon aliv host host start outstand limit outstandinglimit 100 outstand incoutstand interrupt except interruptedexcept outstand outstand outstand limit outstandinglimit wait dec outstand decoutstand outstand notifi notifyal random random string path zoo keeper zookeep zk connect run zk zoo keeper zookeep host 60000 connect wait 20000 300 thread sleep 100 path zk creat client 16 id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti keeper except keeperexcept log error keeper except thrown path err println couldn creat node aliv next nextint 100 percentag zk set data setdata path byte current time milli currenttimemilli zk get data getdata path current time milli currenttimemilli outstand incoutstand except print stack trace printstacktrac aliv zk close interrupt except interruptedexcept print stack trace printstacktrac process watch event watchedev event err println event event get type gettyp event type eventtyp connect event get state getstat keeper state keeperst sync connect syncconnect notifi notifyal process result processresult rc string path object ctx data stat stat dec outstand decoutstand stat sync statsync aliv rc err println rc rc error finish rlatenc current time milli currenttimemilli ctx read process result processresult rc string path object ctx stat stat dec outstand decoutstand stat sync statsync rc err println rc rc error finish wlatenc current time milli currenttimemilli ctx write 

sender thread senderthread thread socket sender thread senderthread socket set daemon setdaemon start run output stream outputstream os get output stream getoutputstream finish error aliv thread sleep 300 percentag finish error string report current time milli currenttimemilli percentag finish error outstand string subreport read rlatenc read write wlatenc write stat sync statsync finish error read write rlatenc wlatenc os write report get byte getbyt println report report subreport except print stack trace printstacktrac 

statu watcher statuswatch watcher connect process watch event watchedev event event get type gettyp watcher event event type eventtyp connect event get state getstat watcher event keeper state keeperst sync connect syncconnect notifi notifyal connect isconnect connect wait connect waitconnect timeout interrupt except interruptedexcept end time endtim current time milli currenttimemilli timeout connect current time milli currenttimemilli end time endtim wait end time endtim current time milli currenttimemilli connect 

dialog applic zoo inspector dialog zooinspectoraboutdialog dialog jdialog param frame frame from dialog displai zoo inspector dialog zooinspectoraboutdialog frame frame frame set layout setlayout border layout borderlayout set icon imag seticonimag zoo inspector icon resourc zooinspectoriconresourc get inform icon getinformationicon get imag getimag set titl settitl zoo inspector zooinspector set modal setmod set setalwaysontop set resiz setresiz panel jpanel panel panel jpanel panel set layout setlayout border layout borderlayout editor pane jeditorpan pane aboutpan editor pane jeditorpan pane aboutpan set edit setedit pane aboutpan set opaqu setopaqu java net url url abouturl zoo inspector dialog zooinspectoraboutdialog get resourc getresourc html pane aboutpan set page setpag url abouturl io except ioexcept logger factori loggerfactori get logger getlogg error error load html file corrupt panel add pane aboutpan border layout borderlayout center panel set prefer size setpreferreds dimens 600 200 panel jpanel button panel buttonspanel panel jpanel button panel buttonspanel set layout setlayout flow layout flowlayout flow layout flowlayout center 10 10 button jbutton button okbutton button jbutton button okbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector dialog zooinspectoraboutdialog dispos button panel buttonspanel add button okbutton add panel border layout borderlayout center add button panel buttonspanel border layout borderlayout south pack 

request processor requestprocessor chain process transact request process order standalon server follow leader slightli differ request processor requestprocessor chain request move forward chain request processor requestprocessor request pass request processor requestprocessor process request processrequest gener method invok singl thread shutdown call request request processor requestprocessor shutdown request processor requestprocessor connect request processor requestprocessor suppress warn suppresswarn serial request processor except requestprocessorexcept except request processor except requestprocessorexcept string msg throwabl msg process request processrequest request request request processor except requestprocessorexcept shutdown 

suppress warn suppresswarn serial request processor except requestprocessorexcept except request processor except requestprocessorexcept string msg throwabl msg 

profil logger log logger factori loggerfactori get logger getlogg profil oper execut except profil oper op timeout string messag except start current time milli currenttimemilli re op execut end current time milli currenttimemilli end start timeout log info elaps end start ms messag re 

oper execut except 

contain data node data tree data node contain refer parent arrai data arrai acl stat object set children path data node v1 datanodev1 record data node v1 datanodev1 constructor data node v1 datanodev1 data node v1 datanodev1 parent data list acl acl stat persist v1 statpersistedv1 stat parent parent data data acl acl stat stat children hash set hashset string conveni method creat data node datanod fulli param children set children setchildren hash set hashset string children children children conveni method get children children datanod hash set hashset string get children getchildren children data node v1 datanodev1 parent data list acl acl stat persist v1 statpersistedv1 stat hash set hashset string children hash set hashset string copi stat copystat stat set avers setavers stat get avers getavers set ctime setctim stat get ctime getctim set cversion setcvers stat get cversion getcvers set czxid setczxid stat get czxid getczxid set mtime setmtim stat get mtime getmtim set mzxid setmzxid stat get mzxid getmzxid set version setvers stat get version getvers set ephemer owner setephemeralown stat get ephemer owner getephemeralown set data length setdatalength data length set num children setnumchildren children size deseri input archiv inputarch archiv string tag io except ioexcept archiv start record startrecord node data archiv read buffer readbuff data index archiv start vector startvector acl acl arrai list arraylist acl done acl acl deseri archiv acl entri aclentri acl add incr archiv end vector endvector acl stat stat persist v1 statpersistedv1 stat deseri archiv stat archiv end record endrecord node serial output archiv outputarch archiv string tag io except ioexcept archiv start record startrecord node archiv write buffer writebuff data data archiv start vector startvector acl acl acl acl acl serial archiv acl entri aclentri archiv end vector endvector acl acl stat serial archiv stat archiv end record endrecord node 

sync respons syncrespons record string path sync respons syncrespons sync respons syncrespons string path path path string get path getpath path set path setpath string path serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer sync respons syncrespons cast except classcastexcept compar differ type record sync respons syncrespons peer sync respons syncrespons peer peer ret ret path compar compareto peer path ret ret ret equal object peer peer peer peer sync respons syncrespons peer peer sync respons syncrespons peer sync respons syncrespons peer peer ret ret path equal peer path ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret result string signatur sync respons lsyncrespons 

watcher func test watcherfunctest client base clientbas simpl watcher simplewatch watcher link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev count down latch countdownlatch latch simpl watcher simplewatch count down latch countdownlatch latch latch latch process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect latch latch count down countdown event get type gettyp event type eventtyp event put event interrupt except interruptedexcept asserttru interrupt unexpect verifi list event type eventtyp expect interrupt except interruptedexcept watch event watchedev event count count expect size event event poll 30 time unit timeunit second equal assertequ expect get count event get type gettyp count equal assertequ expect size count event clear simpl watcher simplewatch client dwatch client dwatch count down latch countdownlatch client latch client latch zoo keeper zookeep client simpl watcher simplewatch lsnr dwatch lsnr dwatch count down latch countdownlatch lsnr latch lsnr latch zoo keeper zookeep lsnr list event type eventtyp expect overrid set up setup except set up setup client latch client latch count down latch countdownlatch client dwatch client dwatch simpl watcher simplewatch client latch client latch client creat client createcli client dwatch client dwatch client latch client latch lsnr latch lsnr latch count down latch countdownlatch lsnr dwatch lsnr dwatch simpl watcher simplewatch lsnr latch lsnr latch lsnr creat client createcli lsnr dwatch lsnr dwatch lsnr latch lsnr latch expect arrai list arraylist event type eventtyp overrid tear down teardown except client close lsnr close tear down teardown zoo keeper zookeep creat client createcli watcher watcher count down latch countdownlatch latch io except ioexcept interrupt except interruptedexcept zoo keeper zookeep zk zoo keeper zookeep host port hostport connect timeout connect timeout watcher latch await connect timeout connect timeout time unit timeunit millisecond fail unabl connect server zk verifi interrupt except interruptedexcept lsnr dwatch lsnr dwatch verifi expect expect clear test test exist sync testexistssync io except ioexcept interrupt except interruptedexcept keeper except keeperexcept assertnul lsnr exist foo assertnul lsnr exist foo bar client creat foo parent get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist expect add event type eventtyp node creat nodecr client creat foo bar child get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist expect add event type eventtyp node creat nodecr verifi assertnotnul lsnr exist foo assertnotnul lsnr exist foo bar assertnul lsnr exist car client set data setdata car miss get byte getbyt fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ car get path getpath assertnul lsnr exist foo car client set data setdata foo car miss get byte getbyt fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo car get path getpath client set data setdata foo parent get byte getbyt expect add event type eventtyp node data chang nodedatachang client set data setdata foo bar child get byte getbyt expect add event type eventtyp node data chang nodedatachang verifi assertnotnul lsnr exist foo assertnotnul lsnr exist foo bar client delet foo bar expect add event type eventtyp node delet nodedelet client delet foo expect add event type eventtyp node delet nodedelet verifi test test get data sync testgetdatasync io except ioexcept interrupt except interruptedexcept keeper except keeperexcept lsnr get data getdata foo fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo get path getpath lsnr get data getdata foo bar fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo bar get path getpath client creat foo parent get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist assertnotnul lsnr get data getdata foo client creat foo bar child get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist assertnotnul lsnr get data getdata foo bar client set data setdata foo parent get byte getbyt expect add event type eventtyp node data chang nodedatachang client set data setdata foo bar child get byte getbyt expect add event type eventtyp node data chang nodedatachang verifi assertnotnul lsnr get data getdata foo assertnotnul lsnr get data getdata foo bar client delet foo bar expect add event type eventtyp node delet nodedelet client delet foo expect add event type eventtyp node delet nodedelet verifi test test get children sync testgetchildrensync io except ioexcept interrupt except interruptedexcept keeper except keeperexcept lsnr get children getchildren foo fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo get path getpath lsnr get children getchildren foo bar fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo bar get path getpath client creat foo parent get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist assertnotnul lsnr get children getchildren foo client creat foo bar child get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist expect add event type eventtyp node children chang nodechildrenchang foo assertnotnul lsnr get children getchildren foo bar client set data setdata foo parent get byte getbyt client set data setdata foo bar child get byte getbyt assertnotnul lsnr exist foo assertnotnul lsnr get children getchildren foo assertnotnul lsnr get children getchildren foo bar client delet foo bar expect add event type eventtyp node delet nodedelet foo bar childwatch expect add event type eventtyp node children chang nodechildrenchang foo client delet foo expect add event type eventtyp node delet nodedelet verifi test test exist sync obj testexistssyncwobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept simpl watcher simplewatch w1 simpl watcher simplewatch simpl watcher simplewatch w2 simpl watcher simplewatch simpl watcher simplewatch w3 simpl watcher simplewatch simpl watcher simplewatch w4 simpl watcher simplewatch list event type eventtyp e2 arrai list arraylist event type eventtyp assertnul lsnr exist foo assertnul lsnr exist foo w1 assertnul lsnr exist foo bar w2 assertnul lsnr exist foo bar w3 assertnul lsnr exist foo bar w3 assertnul lsnr exist foo bar w4 client creat foo parent get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist expect add event type eventtyp node creat nodecr client creat foo bar child get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist e2 add event type eventtyp node creat nodecr lsnr dwatch lsnr dwatch verifi expect w1 verifi expect w2 verifi e2 w3 verifi e2 w4 verifi e2 expect clear e2 clear regist assertnotnul lsnr exist foo w1 assertnotnul lsnr exist foo bar w2 assertnotnul lsnr exist foo bar w3 assertnotnul lsnr exist foo bar w4 assertnotnul lsnr exist foo bar w4 client set data setdata foo parent get byte getbyt expect add event type eventtyp node data chang nodedatachang client set data setdata foo bar child get byte getbyt e2 add event type eventtyp node data chang nodedatachang lsnr dwatch lsnr dwatch verifi arrai list arraylist event type eventtyp reg w1 verifi expect w2 verifi e2 w3 verifi e2 w4 verifi e2 expect clear e2 clear assertnotnul lsnr exist foo assertnotnul lsnr exist foo w1 assertnotnul lsnr exist foo w1 assertnotnul lsnr exist foo bar w2 assertnotnul lsnr exist foo bar w2 assertnotnul lsnr exist foo bar w3 assertnotnul lsnr exist foo bar w4 client delet foo bar expect add event type eventtyp node delet nodedelet client delet foo e2 add event type eventtyp node delet nodedelet lsnr dwatch lsnr dwatch verifi expect w1 verifi expect w2 verifi e2 w3 verifi e2 w4 verifi e2 expect clear e2 clear test test get data sync obj testgetdatasyncwobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept simpl watcher simplewatch w1 simpl watcher simplewatch simpl watcher simplewatch w2 simpl watcher simplewatch simpl watcher simplewatch w3 simpl watcher simplewatch simpl watcher simplewatch w4 simpl watcher simplewatch list event type eventtyp e2 arrai list arraylist event type eventtyp lsnr get data getdata foo w1 fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo get path getpath lsnr get data getdata foo bar w2 fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo bar get path getpath client creat foo parent get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist assertnotnul lsnr get data getdata foo assertnotnul lsnr get data getdata foo w1 client creat foo bar child get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist assertnotnul lsnr get data getdata foo bar w2 assertnotnul lsnr get data getdata foo bar w3 assertnotnul lsnr get data getdata foo bar w4 assertnotnul lsnr get data getdata foo bar w4 client set data setdata foo parent get byte getbyt expect add event type eventtyp node data chang nodedatachang client set data setdata foo bar child get byte getbyt e2 add event type eventtyp node data chang nodedatachang lsnr dwatch lsnr dwatch verifi expect w1 verifi expect w2 verifi e2 w3 verifi e2 w4 verifi e2 expect clear e2 clear assertnotnul lsnr get data getdata foo assertnotnul lsnr get data getdata foo w1 assertnotnul lsnr get data getdata foo bar w2 assertnotnul lsnr get data getdata foo bar w3 assertnotnul lsnr get data getdata foo bar w3 assertnotnul lsnr get data getdata foo bar w4 client delet foo bar expect add event type eventtyp node delet nodedelet client delet foo e2 add event type eventtyp node delet nodedelet lsnr dwatch lsnr dwatch verifi expect w1 verifi expect w2 verifi e2 w3 verifi e2 w4 verifi e2 expect clear e2 clear test test get children sync obj testgetchildrensyncwobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept simpl watcher simplewatch w1 simpl watcher simplewatch simpl watcher simplewatch w2 simpl watcher simplewatch simpl watcher simplewatch w3 simpl watcher simplewatch simpl watcher simplewatch w4 simpl watcher simplewatch list event type eventtyp e2 arrai list arraylist event type eventtyp lsnr get children getchildren foo fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo get path getpath lsnr get children getchildren foo bar fail keeper except keeperexcept equal assertequ keeper except keeperexcept code nonod code equal assertequ foo bar get path getpath client creat foo parent get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist assertnotnul lsnr get children getchildren foo assertnotnul lsnr get children getchildren foo w1 client creat foo bar child get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist expect add event type eventtyp node children chang nodechildrenchang foo assertnotnul lsnr get children getchildren foo bar w2 assertnotnul lsnr get children getchildren foo bar w2 assertnotnul lsnr get children getchildren foo bar w3 assertnotnul lsnr get children getchildren foo bar w4 client set data setdata foo parent get byte getbyt client set data setdata foo bar child get byte getbyt assertnotnul lsnr exist foo assertnotnul lsnr exist foo w1 assertnotnul lsnr exist foo assertnotnul lsnr exist foo w1 assertnotnul lsnr get children getchildren foo assertnotnul lsnr get children getchildren foo w1 assertnotnul lsnr get children getchildren foo bar w2 assertnotnul lsnr get children getchildren foo bar w3 assertnotnul lsnr get children getchildren foo bar w4 assertnotnul lsnr get children getchildren foo bar w4 client delet foo bar e2 add event type eventtyp node delet nodedelet foo bar childwatch expect add event type eventtyp node children chang nodechildrenchang foo client delet foo expect add event type eventtyp node delet nodedelet lsnr dwatch lsnr dwatch verifi expect w1 verifi expect w2 verifi e2 w3 verifi e2 w4 verifi e2 expect clear e2 clear 

simpl watcher simplewatch watcher link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev count down latch countdownlatch latch simpl watcher simplewatch count down latch countdownlatch latch latch latch process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect latch latch count down countdown event get type gettyp event type eventtyp event put event interrupt except interruptedexcept asserttru interrupt unexpect verifi list event type eventtyp expect interrupt except interruptedexcept watch event watchedev event count count expect size event event poll 30 time unit timeunit second equal assertequ expect get count event get type gettyp count equal assertequ expect size count event clear 

ip authent provid ipauthenticationprovid authent provid authenticationprovid string get scheme getschem ip keeper except keeperexcept code handl authent handleauthent server cnxn servercnxn cnxn auth data authdata string id cnxn get remot socket address getremotesocketaddress get address getaddress get host address gethostaddress cnxn add auth info addauthinfo id get scheme getschem id keeper except keeperexcept code bit weird address number byte distinguish pv4 ipv4 pv6 ipv6 addr2 byte addr2byt string addr v4 addr2 byte v4addr2byt addr todo write v6 addr2 byte v6addr2byt v4 addr2 byte v4addr2byt string addr string part addr split part length integ pars parseint part 255 number format except numberformatexcept mask bit start bit start mask startmask bit start mask startmask start mask startmask start length start start mask startmask start mask startmask start match string id string acl expr aclexpr string part acl expr aclexpr split acl addr acladdr addr2 byte addr2byt part acl addr acladdr bit acl addr acladdr length part length bit integ pars parseint part bit bit acl addr acladdr length number format except numberformatexcept mask acl addr acladdr bit remot addr remoteaddr addr2 byte addr2byt id remot addr remoteaddr mask remot addr remoteaddr bit remot addr remoteaddr length remot addr remoteaddr acl addr acladdr authent isauthent valid isvalid string id addr2 byte addr2byt id 

serial perf test serializationperftest zk test zktestcas logger log logger factori loggerfactori get logger getlogg serial perf test serializationperftest output stream nulloutputstream output stream outputstream write exclud persist from perf creat node createnod data tree datatre tree string path depth childcount parent version parentcvers data keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept path node depth tree creat node createnod path data parent version parentcvers depth path count childcount count creat node createnod tree path depth childcount data count serial tree serializetre depth width len interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept data tree datatre tree data tree datatre creat node createnod tree depth width tree get node getnod stat get cversion getcvers len count tree get node count getnodecount binari output archiv binaryoutputarch oa binari output archiv binaryoutputarch get archiv getarch output stream nulloutputstream gc start nano time nanotim tree serial oa test end nano time nanotim durationm end start 1000000l pernodeu end start 1000l count log info serial count node durationm ms pernodeu node depth depth width width datalen len test test singl serial testsingleseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 20 test test wide serial testwideseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 10000 20 test test deep serial testdeepseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 400 20 test test10 wide5 deep serial test10wide5deepseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 10 20 test test15 wide5 deep serial test15wide5deepseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 15 20 test test25 wide4 deep serial test25wide4deepseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 25 20 test test40 wide4 deep serial test40wide4deepseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 40 20 test test300 wide3 deep serial test300wide3deepseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept serial tree serializetre 300 20 

output stream nulloutputstream output stream outputstream write exclud persist from perf 

manag interact applic zookeep instanc zoo inspector manag zooinspectormanag zoo inspector node manag zooinspectornodemanag zoo inspector node tree manag zooinspectornodetreemanag param connect prop connectionprop successfulli connect connect properti connect prop connectionprop successfulli disconnect disconnect link pair contain follow ul li link map properti kei list valu list size valu valu link text field jtextfield list size greater valu option show link combo box jcombobox first select li li link map properti kei label show ui li ul pair map string list string map string string get connect properti getconnectionpropertiestempl param select node selectednod node add watcher param node listen nodelisten node listen watcher add watcher addwatch collect string select node selectednod node listen nodelisten node listen nodelisten param select node selectednod node remov watcher from remov watcher removewatch collect string select node selectednod param select file selectedfil file load contain node viewer configur node viewer nodeview name node viewer from configur io except ioexcept configur file load list string load node viewer file loadnodeviewersfil file select file selectedfil io except ioexcept param select file selectedfil file save configur param node viewer name nodeviewersclassnam name node viewer io except ioexcept configur file save save node viewer file savenodeviewersfil file select file selectedfil list string node viewer name nodeviewersclassnam io except ioexcept param node viewer name nodeviewersclassnam name node viewer io except ioexcept configur file load set node viewer configur setdefaultnodeviewerconfigur list string node viewer name nodeviewersclassnam io except ioexcept node viewer nodeview name node viewer from configur io except ioexcept configur file load list string get node viewer configur getdefaultnodeviewerconfigur io except ioexcept param connect prop connectionprop connect properti last us connect zookeeep instanc set last connect prop setlastconnectionprop properti connect prop connectionprop last connect properti connect properti last us connect zookeeep instanc properti get last connect prop getlastconnectionprop param prop properti us connect set io except ioexcept configur file save save connect file savedefaultconnectionfil properti prop io except ioexcept 

integr check integritycheck watcher stat callback statcallback data callback datacallback logger log logger factori loggerfactori get logger getlogg integr check integritycheck zoo keeper zookeep zk hash map hashmap string last valu lastvalu hash map hashmap string count string path iter outstand error count errorcount outstand incoutstand outstand dec outstand decoutstand outstand notifi notifyal wait outstand waitoutstand interrupt except interruptedexcept outstand wait integr check integritycheck string host port hostport string path count io except ioexcept zk zoo keeper zookeep host port hostport 30000 path path count count run interrupt except interruptedexcept keeper except keeperexcept log warn creat znode path creat docreat log warn stare test loop path log warn stare write cycl path popul dopopul wait outstand waitoutstand log warn stare read cycl path read readal wait outstand waitoutstand log warn test loop termin path read readal count string cpath path zk get data getdata cpath outstand incoutstand creat docreat interrupt except interruptedexcept keeper except keeperexcept creat level znode zk creat path zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept node exist except nodeexistsexcept ignor duplic creat iter iter get byte getbyt creat child znode count string cpath path 10 log warn creat znode cpath zk creat cpath zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept node exist except nodeexistsexcept ignor duplic creat last valu lastvalu put cpath popul dopopul iter iter get byte getbyt count string cpath path zk set data setdata cpath outstand incoutstand watcher callback process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect notifi notifyal ensur connect ensureconnect zk get state getstat zoo keeper zookeep state connect wait interrupt except interruptedexcept param arg main string arg arg length err println usag integr check integritycheck zookeep host port zookeeperhostport znode children children count childrencount children count childrencount integ pars parseint arg number format except numberformatexcept print stack trace printstacktrac exit integr check integritycheck ctest integr check integritycheck arg arg children count childrencount runtim get runtim getruntim add shutdown hook addshutdownhook thread run println date string tostr error count ctest error count errorcount ctest ensur connect ensureconnect ctest run except print stack trace printstacktrac except print stack trace printstacktrac exit process result processresult rc string path object ctx stat stat rc last valu lastvalu put path ctx dec outstand decoutstand process result processresult rc string path object ctx data stat stat rc string string string data string last string laststr last valu lastvalu get path last string laststr string last string laststr integ pars parseint string integ pars parseint last string laststr log error error string expect last string laststr error count errorcount last valu lastvalu put path ctx dec outstand decoutstand 

netti server cnxn nettyservercnxn server cnxn servercnxn logger log logger factori loggerfactori get logger getlogg netti server cnxn nettyservercnxn channel channel channel buffer channelbuff queu buffer queuedbuff throttl buffer bytebuff bb buffer bytebuff bb len bblen buffer bytebuff alloc session id sessionid session timeout sessiontimeout atom atomiclong outstand count outstandingcount atom atomiclong zoo keeper server zookeeperserv connect server current serv request exampl server activ quorum particip zoo keeper server zookeeperserv zk server zkserver netti server cnxn factori nettyservercnxnfactori factori initi netti server cnxn nettyservercnxn channel channel zoo keeper server zookeeperserv zk netti server cnxn factori nettyservercnxnfactori factori channel channel zk server zkserver zk factori factori factori login zoo keeper sasl server zookeepersaslserv zoo keeper sasl server zookeepersaslserv factori login overrid close log debug enabl isdebugen log debug close call sessionid 0x hex string tohexstr session id sessionid factori cnxn cnxn close factori cnxn remov log debug enabl isdebugen log debug cnxn size factori cnxn size log debug enabl isdebugen log debug close progress sessionid 0x hex string tohexstr session id sessionid factori ip map ipmap set netti server cnxn nettyservercnxn factori ip map ipmap get inet socket address inetsocketaddress channel get remot address getremoteaddress get address getaddress remov channel open isopen channel close factori unregist connect unregisterconnect overrid get session id getsessionid session id sessionid overrid get session timeout getsessiontimeout session timeout sessiontimeout overrid process watch event watchedev event repli header replyhead repli header replyhead 1l log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac event deliveri trace mask event deliveri trace mask deliv event event 0x hex string tohexstr session id sessionid convert watch event watchedev type sent wire watcher event watcherev event get wrapper getwrapp send respons sendrespons notif io except ioexcept e1 log debug enabl isdebugen log debug problem send get remot socket address getremotesocketaddress e1 close four byte fourbyt resum messag event resumemessageev messag event messageev channel channel resum messag event resumemessageev channel channel channel channel object get messag getmessag socket address socketaddress get remot address getremoteaddress channel get channel getchannel channel channel futur channelfutur get futur getfutur overrid send respons sendrespons repli header replyhead record string tag io except ioexcept channel open isopen arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream make space length binari output archiv binaryoutputarch bo binari output archiv binaryoutputarch get archiv getarch bao bao write four byte fourbyt bo write record writerecord header bo write record writerecord tag bao close io except ioexcept log error error serial respons bao arrai tobytearrai buffer bytebuff bb buffer bytebuff wrap bb put putint length rewind send buffer sendbuff bb get xid getxid zk here zk server zkserver throttl shouldthrottl outstand count outstandingcount decrement get decrementandget enabl recv enablerecv overrid set session id setsessionid session id sessionid session id sessionid session id sessionid overrid enabl recv enablerecv throttl throttl log debug enabl isdebugen log debug send unthrottl event channel get pipelin getpipelin send upstream sendupstream resum messag event resumemessageev channel overrid send buffer sendbuff buffer bytebuff send buffer sendbuff send buffer sendbuff server cnxn factori servercnxnfactori close conn closeconn channel close channel write wrap buffer wrappedbuff send buffer sendbuff packet sent packets clean up socket relat command make flush data befor param pwriter pwriter command socket cleanup writer socket cleanupwritersocket print writer printwrit pwriter pwriter pwriter flush pwriter close except log info error close print writer printwrit close except log error error close command socket wrap send buffer sendbuff method nio server cnxn nioservercnxn respons chunk up respons client con ing up respons fulli memori larg command chunk up result send buffer writer sendbufferwrit writer string buffer stringbuff sb string buffer stringbuff check readi send chunk param forc forc send even full chunk check flush checkflush forc forc sb length sb length 2048 send buffer sendbuff buffer bytebuff wrap sb string tostr get byte getbyt clear intern buffer sb set length setlength overrid close io except ioexcept sb check flush checkflush sb clear ref ensur reus overrid flush io except ioexcept check flush checkflush overrid write cbuf len io except ioexcept sb append cbuf len check flush checkflush string zk serv zk serv zoo keeper zookeep instanc current serv request set thread commmand port letter command run thread map correspod letter command command thread commandthread abstract from inherit abstract command thread commandthread thread print writer printwrit pw command thread commandthread print writer printwrit pw pw pw start run run command run commandrun io except ioexcept log error error run command cleanup writer socket cleanupwritersocket pw abstract command run commandrun io except ioexcept ruok command ruokcommand command thread commandthread ruok command ruokcommand print writer printwrit pw pw overrid command run commandrun pw print imok trace mask command tracemaskcommand command thread commandthread trace mask command tracemaskcommand print writer printwrit pw pw overrid command run commandrun trace mask tracemask zoo trace zootrac get text trace level gettexttracelevel pw print trace mask tracemask set trace mask command settracemaskcommand command thread commandthread trace set trace mask command settracemaskcommand print writer printwrit pw trace pw trace trace overrid command run commandrun pw print trace env command envcommand command thread commandthread env command envcommand print writer printwrit pw pw overrid command run commandrun list environ entri env environ list pw println environ environ entri env pw print get kei getkei pw print pw println get valu getvalu conf command confcommand command thread commandthread conf command confcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver dump conf dumpconf pw stat reset command statresetcommand command thread commandthread stat reset command statresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver server stat serverstat reset pw println server stat reset cnxn stat reset command cnxnstatresetcommand command thread commandthread cnxn stat reset command cnxnstatresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv factori cnxn server cnxn servercnxn factori cnxn reset stat resetstat pw println connect stat reset dump command dumpcommand command thread commandthread dump command dumpcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv pw println session tracker sessiontrack dump zk server zkserver session tracker sessiontrack dump session dumpsess pw pw println ephemer node dump zk server zkserver dump ephemer dumpephemer pw stat command statcommand command thread commandthread len stat command statcommand print writer printwrit pw len pw len len overrid command run commandrun zk server zkserver pw println zk serv zk serv pw print zookeep version pw println version get full version getfullvers zk server zkserver read zoo keeper server readonlyzookeeperserv pw println read mode serv read client len stat cmd statcmd log info stat command output pw println client clone faster iter up cnxn lock faster hash set hashset server cnxn servercnxn cnxn factori cnxn cnxn hash set hashset server cnxn servercnxn factori cnxn server cnxn servercnxn cnxn dump connect info dumpconnectioninfo pw pw println pw println pw print zk server zkserver server stat serverstat string tostr pw print node count pw println zk server zkserver get zk databas getzkdatabas get node count getnodecount con command conscommand command thread commandthread con command conscommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv clone faster iter up cnxn lock faster abstract set abstractset server cnxn servercnxn cnxn factori cnxn cnxn hash set hashset server cnxn servercnxn factori cnxn server cnxn servercnxn cnxn dump connect info dumpconnectioninfo pw pw println pw println watch command watchcommand command thread commandthread len watch command watchcommand print writer printwrit pw len pw len len overrid command run commandrun zk server zkserver pw println zk serv zk serv data tree datatre dt zk server zkserver get zk databas getzkdatabas get data tree getdatatre len wch cmd wchscmd dt dump watch summari dumpwatchessummari pw len wchp cmd wchpcmd dt dump watch dumpwatch pw dt dump watch dumpwatch pw pw println monitor command monitorcommand command thread commandthread monitor command monitorcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk databas zkdatabas zkdb zk server zkserver get zk databas getzkdatabas server stat serverstat stat zk server zkserver server stat serverstat print version version get full version getfullvers print avg latenc avg latenc stat get avg latenc getavglat print max latenc max latenc stat get max latenc getmaxlat print min latenc min latenc stat get min latenc getminlat print packet receiv packet receiv stat get packet receiv getpacketsreceiv print packet sent packet sent stat get packet sent getpacketss print num aliv connect num aliv connect stat get num aliv client connect getnumaliveclientconnect print outstand request outstand request stat get outstand request getoutstandingrequest print server state server state stat get server state getserverst print znode count znode count zkdb get node count getnodecount print watch count watch count zkdb get data tree getdatatre get watch count getwatchcount print ephemer count ephemer count zkdb get data tree getdatatre get ephemer count getephemeralscount print approxim data size approxim data size zkdb get data tree getdatatre approxim data size approximatedatas oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean print open file descriptor count open file descriptor count unixo get open file descriptor count getopenfiledescriptorcount print max file descriptor count max file descriptor count unixo get max file descriptor count getmaxfiledescriptorcount stat get server state getserverst equal leader leader leader leader zoo keeper server leaderzookeeperserv zk server zkserver get leader getlead print follow leader get learner getlearn size print sync follow sync follow leader get forward follow getforwardingfollow size print pend sync pend sync leader get num pend sync getnumpendingsync print string kei number print kei number print string kei string valu pw print zk zk pw print kei pw print pw println valu isro command isrocommand command thread commandthread isro command isrocommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw print zk server zkserver read zoo keeper server readonlyzookeeperserv pw print ro pw print rw four letter word found respond otw check four letter word checkfourletterword channel channel channel buffer channelbuff messag len io except ioexcept advantag limit size length cmd byte fit insid string cmd cmd2 string cmd2string get len cmd channel set interest op setinterestop await uninterrupt awaituninterrupt log info process cmd command from channel get remot address getremoteaddress packet receiv packetreceiv print writer printwrit pwriter print writer printwrit buffer writer bufferedwrit send buffer writer sendbufferwrit len ruok cmd ruokcmd ruok command ruokcommand ruok ruok command ruokcommand pwriter ruok start len get trace mask cmd gettracemaskcmd trace mask command tracemaskcommand tmask trace mask command tracemaskcommand pwriter tmask start len set trace mask cmd settracemaskcmd buffer bytebuff mask buffer bytebuff alloc messag read byte readbyt mask bb flip trace mask tracemask mask get getlong zoo trace zootrac set text trace level settexttracelevel trace mask tracemask set trace mask command settracemaskcommand set mask setmask set trace mask command settracemaskcommand pwriter trace mask tracemask set mask setmask start len envi cmd envicmd env command envcommand env env command envcommand pwriter env start len conf cmd confcmd conf command confcommand ccmd conf command confcommand pwriter ccmd start len srst cmd srstcmd stat reset command statresetcommand strst stat reset command statresetcommand pwriter strst start len crst cmd crstcmd cnxn stat reset command cnxnstatresetcommand crst cnxn stat reset command cnxnstatresetcommand pwriter crst start len dump cmd dumpcmd dump command dumpcommand dump dump command dumpcommand pwriter dump start len stat cmd statcmd len srvr cmd srvrcmd stat command statcommand stat stat command statcommand pwriter len stat start len con cmd conscmd con command conscommand con con command conscommand pwriter con start len wchp cmd wchpcmd len wchc cmd wchccmd len wch cmd wchscmd watch command watchcommand wcmd watch command watchcommand pwriter len wcmd start len mntr cmd mntrcmd monitor command monitorcommand mntr monitor command monitorcommand pwriter mntr start len isro cmd isrocmd isro command isrocommand isro isro command isrocommand pwriter isro start receiv messag receivemessag channel buffer channelbuff messag messag readabl throttl bb log trace enabl istraceen log trace messag readabl messag readabl byte readablebyt bb len bb remain bb buffer bytebuff dat bb duplic dat flip log trace hex string tohexstr session id sessionid bb 0x channel buffer channelbuff hex dump hexdump channel buffer channelbuff copi buffer copiedbuff dat bb remain messag readabl byte readablebyt limit newlimit bb posit messag readabl byte readablebyt bb limit limit newlimit messag read byte readbyt bb bb limit bb capac log trace enabl istraceen log trace after read byte readbyt messag readabl messag readabl byte readablebyt bb len bb remain bb buffer bytebuff dat bb duplic dat flip log trace after readbyt hex string tohexstr session id sessionid bb 0x channel buffer channelbuff hex dump hexdump channel buffer channelbuff copi buffer copiedbuff dat bb remain packet receiv packetreceiv bb flip zoo keeper server zookeeperserv zk zk server zkserver zk io except ioexcept zk down initi zk process packet processpacket bb zk throttl shouldthrottl outstand count outstandingcount increment get incrementandget disabl recv disablerecv log debug conn req request from get remot socket address getremotesocketaddress zk process connect request processconnectrequest bb initi bb log trace enabl istraceen log trace messag readabl messag readabl byte readablebyt bblenrem bb len bblen remain buffer bytebuff dat bb len bblen duplic dat flip log trace hex string tohexstr session id sessionid bb len bblen 0x channel buffer channelbuff hex dump hexdump channel buffer channelbuff copi buffer copiedbuff dat messag readabl byte readablebyt bb len bblen remain bb len bblen limit bb len bblen posit messag readabl byte readablebyt messag read byte readbyt bb len bblen bb len bblen limit bb len bblen capac bb len bblen remain bb len bblen flip log trace enabl istraceen log trace hex string tohexstr session id sessionid bb len bblen 0x channel buffer channelbuff hex dump hexdump channel buffer channelbuff copi buffer copiedbuff bb len bblen len bb len bblen get getint log trace enabl istraceen log trace hex string tohexstr session id sessionid bb len bblen len len bb len bblen clear initi check four letter word checkfourletterword channel messag len len len binari input archiv binaryinputarch max buffer maxbuff io except ioexcept len error len bb buffer bytebuff alloc len io except ioexcept log warn close connect get remot socket address getremotesocketaddress close overrid disabl recv disablerecv throttl log debug enabl isdebugen log debug throttl disabl recv channel set readabl setread await uninterrupt awaituninterrupt overrid get outstand request getoutstandingrequest outstand count outstandingcount valu longvalu overrid set session timeout setsessiontimeout session timeout sessiontimeout session timeout sessiontimeout session timeout sessiontimeout overrid get interest op getinterestop channel get interest op getinterestop overrid inet socket address inetsocketaddress get remot socket address getremotesocketaddress inet socket address inetsocketaddress channel get remot address getremoteaddress send close connect packet client send close session sendclosesess send buffer sendbuff server cnxn factori servercnxnfactori close conn closeconn overrid server stat serverstat server stat serverstat zk server zkserver zk server zkserver server stat serverstat 

resum messag event resumemessageev messag event messageev channel channel resum messag event resumemessageev channel channel channel channel object get messag getmessag socket address socketaddress get remot address getremoteaddress channel get channel getchannel channel channel futur channelfutur get futur getfutur 

wrap send buffer sendbuff method nio server cnxn nioservercnxn respons chunk up respons client con ing up respons fulli memori larg command chunk up result send buffer writer sendbufferwrit writer string buffer stringbuff sb string buffer stringbuff check readi send chunk param forc forc send even full chunk check flush checkflush forc forc sb length sb length 2048 send buffer sendbuff buffer bytebuff wrap sb string tostr get byte getbyt clear intern buffer sb set length setlength overrid close io except ioexcept sb check flush checkflush sb clear ref ensur reus overrid flush io except ioexcept check flush checkflush overrid write cbuf len io except ioexcept sb append cbuf len check flush checkflush 

set thread commmand port letter command run thread map correspod letter command command thread commandthread abstract from inherit abstract command thread commandthread thread print writer printwrit pw command thread commandthread print writer printwrit pw pw pw start run run command run commandrun io except ioexcept log error error run command cleanup writer socket cleanupwritersocket pw abstract command run commandrun io except ioexcept 

ruok command ruokcommand command thread commandthread ruok command ruokcommand print writer printwrit pw pw overrid command run commandrun pw print imok 

trace mask command tracemaskcommand command thread commandthread trace mask command tracemaskcommand print writer printwrit pw pw overrid command run commandrun trace mask tracemask zoo trace zootrac get text trace level gettexttracelevel pw print trace mask tracemask 

set trace mask command settracemaskcommand command thread commandthread trace set trace mask command settracemaskcommand print writer printwrit pw trace pw trace trace overrid command run commandrun pw print trace 

env command envcommand command thread commandthread env command envcommand print writer printwrit pw pw overrid command run commandrun list environ entri env environ list pw println environ environ entri env pw print get kei getkei pw print pw println get valu getvalu 

conf command confcommand command thread commandthread conf command confcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver dump conf dumpconf pw 

stat reset command statresetcommand command thread commandthread stat reset command statresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver server stat serverstat reset pw println server stat reset 

cnxn stat reset command cnxnstatresetcommand command thread commandthread cnxn stat reset command cnxnstatresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv factori cnxn server cnxn servercnxn factori cnxn reset stat resetstat pw println connect stat reset 

dump command dumpcommand command thread commandthread dump command dumpcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv pw println session tracker sessiontrack dump zk server zkserver session tracker sessiontrack dump session dumpsess pw pw println ephemer node dump zk server zkserver dump ephemer dumpephemer pw 

stat command statcommand command thread commandthread len stat command statcommand print writer printwrit pw len pw len len overrid command run commandrun zk server zkserver pw println zk serv zk serv pw print zookeep version pw println version get full version getfullvers zk server zkserver read zoo keeper server readonlyzookeeperserv pw println read mode serv read client len stat cmd statcmd log info stat command output pw println client clone faster iter up cnxn lock faster hash set hashset server cnxn servercnxn cnxn factori cnxn cnxn hash set hashset server cnxn servercnxn factori cnxn server cnxn servercnxn cnxn dump connect info dumpconnectioninfo pw pw println pw println pw print zk server zkserver server stat serverstat string tostr pw print node count pw println zk server zkserver get zk databas getzkdatabas get node count getnodecount 

con command conscommand command thread commandthread con command conscommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv clone faster iter up cnxn lock faster abstract set abstractset server cnxn servercnxn cnxn factori cnxn cnxn hash set hashset server cnxn servercnxn factori cnxn server cnxn servercnxn cnxn dump connect info dumpconnectioninfo pw pw println pw println 

watch command watchcommand command thread commandthread len watch command watchcommand print writer printwrit pw len pw len len overrid command run commandrun zk server zkserver pw println zk serv zk serv data tree datatre dt zk server zkserver get zk databas getzkdatabas get data tree getdatatre len wch cmd wchscmd dt dump watch summari dumpwatchessummari pw len wchp cmd wchpcmd dt dump watch dumpwatch pw dt dump watch dumpwatch pw pw println 

monitor command monitorcommand command thread commandthread monitor command monitorcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk databas zkdatabas zkdb zk server zkserver get zk databas getzkdatabas server stat serverstat stat zk server zkserver server stat serverstat print version version get full version getfullvers print avg latenc avg latenc stat get avg latenc getavglat print max latenc max latenc stat get max latenc getmaxlat print min latenc min latenc stat get min latenc getminlat print packet receiv packet receiv stat get packet receiv getpacketsreceiv print packet sent packet sent stat get packet sent getpacketss print num aliv connect num aliv connect stat get num aliv client connect getnumaliveclientconnect print outstand request outstand request stat get outstand request getoutstandingrequest print server state server state stat get server state getserverst print znode count znode count zkdb get node count getnodecount print watch count watch count zkdb get data tree getdatatre get watch count getwatchcount print ephemer count ephemer count zkdb get data tree getdatatre get ephemer count getephemeralscount print approxim data size approxim data size zkdb get data tree getdatatre approxim data size approximatedatas oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean print open file descriptor count open file descriptor count unixo get open file descriptor count getopenfiledescriptorcount print max file descriptor count max file descriptor count unixo get max file descriptor count getmaxfiledescriptorcount stat get server state getserverst equal leader leader leader leader zoo keeper server leaderzookeeperserv zk server zkserver get leader getlead print follow leader get learner getlearn size print sync follow sync follow leader get forward follow getforwardingfollow size print pend sync pend sync leader get num pend sync getnumpendingsync print string kei number print kei number print string kei string valu pw print zk zk pw print kei pw print pw println valu 

isro command isrocommand command thread commandthread isro command isrocommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw print zk server zkserver read zoo keeper server readonlyzookeeperserv pw print ro pw print rw 

crc test crctest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg crc test crctest string hostport 127 port assign portassign uniqu count down latch countdownlatch start signal startsign corrupt file write 500 offset param file file corrupt io except ioexcept corrupt file corruptfil file file io except ioexcept corrupt logfil random access file randomaccessfil raf random access file randomaccessfil file rw mahadev get byte getbyt write len writelen 500l raf seek write len writelen corrupt data raf write raf close checksum match snapshot get check sum getchecksum file snap filesnap snap file snap file snapfil io except ioexcept data tree datatre dt data tree datatre map integ session concurr hash map concurrenthashmap integ input stream inputstream snap snapi buffer input stream bufferedinputstream file input stream fileinputstream snap file snapfil check input stream checkedinputstream crc crcin check input stream checkedinputstream snap snapi adler32 input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch crc crcin snap deseri dt session ia io except ioexcept fail most recent snapshot incomplet read next on after corrupt snap snapi close crc crcin close checksum crc crcin get checksum getchecksum get valu getvalu val ia read readlong val snap snapi close crc crcin close val checksum test checksum log snapshot reader fail read corrupt snapshot corrupt log file except test test checksum testchecksum except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 150 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk log info start up zookeep server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout 2000 zk creat crctest crctest get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk close shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport client base clientbas connect timeout connect timeout file version dir versiondir file tmp dir tmpdir version file list version dir versiondir list file listfil two file on snapshot log file logfil file snap file snapfil file log file logfil file file list log info file file file get name getnam start startswith log log file logfil file corrupt file corruptfil log file logfil file txn log filetxnlog flog file txn log filetxnlog version dir versiondir txn iter txniter itr flog read get checksum failur itr next asserttru io except ioexcept log info crc corrupt itr close find last snapshot file snap filesnap snap file snap filesnap version dir versiondir list file snap file snapfil snap find recent snapshot findnrecentsnapshot snap file snapfil snap file snapfil get corrupt file corruptfil snap file snapfil cfile cfile get check sum getchecksum snap snap file snapfil io except ioexcept last snapshot incompelt corrupt last on us snap file snapfil snap file snapfil get corrupt file corruptfil snap file snapfil cfile get check sum getchecksum snap snap file snapfil asserttru cfile process watch event watchedev event log info event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount start signal startsign count down countdown 

util quorum test setup 2n peer allow start stop peer peer peer quorum util quorumutil todo partit peer client todo refactor quorum base quorumbas special logger log logger factori loggerfactori get logger getlogg quorum util quorumutil peer peerstruct id quorum peer quorump peer file data dir datadir client port clientport map quorum server quorumserv peer view peersview hash map hashmap quorum server quorumserv map integ peer peerstruct peer hash map hashmap integ peer peerstruct string host port hostport tick time ticktim init limit initlimit sync limit synclimit elect alg electionalg initi 2n quorum peer form zoo keeper zookeep ensembl param number peer ensembl 2n quorum util quorumutil runtim except runtimeexcept client base clientbas setup test env setuptestenv jmx env jmxenv set up setup tick time ticktim 2000 init limit initlimit sync limit synclimit elect alg electionalg host port hostport peer peerstruct ps peer peerstruct ps id ps data dir datadir client base clientbas creat tmp dir createtmpdir ps client port clientport port assign portassign uniqu peer put ps peer view peersview put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 ps client port clientport 1000 inet socket address inetsocketaddress 127 port assign portassign uniqu 1000 learner type learnertyp particip host port hostport 127 ps client port clientport peer peerstruct ps peer get log info creat quorum peer quorump port ps client port clientport ps peer quorum peer quorump peer view peersview ps data dir datadir ps data dir datadir ps client port clientport elect alg electionalg ps id tick time ticktim init limit initlimit sync limit synclimit equal assertequ ps client port clientport ps peer get client port getclientport except runtim except runtimeexcept peer peerstruct get peer getpeer id peer get id start startal io except ioexcept shutdown shutdownal start log info start quorum peer quorump log info check port host port hostport string hp host port hostport split asserttru wait server up client base clientbas wait server up waitforserverup hp client base clientbas connect timeout connect timeout log info hp accept client connect interest jmx env jmxenv dump make server list set string ensur name ensurenam link hash set linkedhashset string ensur name ensurenam add memori data tree inmemorydatatre ensur name ensurenam add name0 replic server id replicatedserv id name1 replica name2 ensur name ensurenam add name0 replic server id replicatedserv id name1 replica ensur name ensurenam add name0 replic server id replicatedserv id jmx env jmxenv ensur ensureal ensur name ensurenam arrai toarrai string ensur name ensurenam size io except ioexcept log warn io except ioexcept jmx env jmxenv oper start first peer start quorum startquorum io except ioexcept shutdown shutdownal start asserttru wait server up client base clientbas wait server up waitforserverup 127 get peer getpeer client port clientport client base clientbas connect timeout connect timeout start id io except ioexcept peer peerstruct ps get peer getpeer id log info creat quorum peer quorump ps id port ps client port clientport ps peer quorum peer quorump peer view peersview ps data dir datadir ps data dir datadir ps client port clientport elect alg electionalg ps id tick time ticktim init limit initlimit sync limit synclimit equal assertequ ps client port clientport ps peer get client port getclientport ps peer start restart id io except ioexcept start id asserttru wait server up client base clientbas wait server up waitforserverup 127 get peer getpeer id client port clientport client base clientbas connect timeout connect timeout start shutdown startthenshutdown id io except ioexcept peer peerstruct ps get peer getpeer id log info creat quorum peer quorump ps id port ps client port clientport ps peer quorum peer quorump peer view peersview ps data dir datadir ps data dir datadir ps client port clientport elect alg electionalg ps id tick time ticktim init limit initlimit sync limit synclimit equal assertequ ps client port clientport ps peer get client port getclientport ps peer start asserttru wait server up client base clientbas wait server up waitforserverup 127 get peer getpeer id client port clientport client base clientbas connect timeout connect timeout shutdown id shutdown shutdownal shutdown string hp host port hostport split asserttru wait server down client base clientbas wait server down waitforserverdown hp client base clientbas connect timeout connect timeout log info hp longer accept client connect shutdown id quorum peer quorump qp get peer getpeer id peer log info shut down quorum peer qp get name getnam qp shutdown elect qp get elect alg getelectionalg log info shut down leader elect qp get name getnam shutdown log info elect avail shutdown qp get name getnam log info wait qp get name getnam exit thread qp join 30000 qp aliv isal fail qp fail shutdown 30 second qp get name getnam interrupt except interruptedexcept log debug qp interrupt qp get name getnam string get conn string getconnstr host port hostport tear down teardown except log info tear down teardown start oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean log info fdcount after test unixo get open file descriptor count getopenfiledescriptorcount shutdown shutdownal jmx env jmxenv tear down teardown 

peer peerstruct id quorum peer quorump peer file data dir datadir client port clientport 

code origin from hdf similarli name file bug fix histori file output stream fileoutputstream ha properti show up destin ha written flush disk written us tmp suffix output stream close flush fsync move place overwrit file exist locat note window platform atom replac target file target file delet befor on move place atom file output stream atomicfileoutputstream filter output stream filteroutputstream string tmp extens tmp extens tmp logger log logger factori loggerfactori get logger getlogg atom file output stream atomicfileoutputstream file orig file origfil file tmp file tmpfile atom file output stream atomicfileoutputstream file file found except filenotfoundexcept code duplic assign befor call file output stream fileoutputstream file get parent file getparentfil get name getnam tmp extens tmp extens orig file origfil get absolut file getabsolutefil tmp file tmpfile file get parent file getparentfil get name getnam tmp extens tmp extens get absolut file getabsolutefil overrid close io except ioexcept close triedtoclos success flush file output stream fileoutputstream get channel getchannel forc close triedtoclos close success success renam tmp file tmpfile renam renameto orig file origfil renam window renam renameto replac orig file origfil delet tmp file tmpfile renam renameto orig file origfil io except ioexcept renam temporari file tmp file tmpfile orig file origfil close triedtoclos fail flush close leak fd io util ioutil close stream closestream close wasn success delet tmp file tmp file tmpfile delet log warn unabl delet tmp file tmp file tmpfile close atom file commit temporari file destin us failur write abort close io except ioexcept ioe log warn unabl abort file tmp file tmpfile ioe tmp file tmpfile delet log warn unabl delet tmp file abort tmp file tmpfile 

buffer output stream bytebufferoutputstream output stream outputstream buffer bytebuff bb buffer output stream bytebufferoutputstream buffer bytebuff bb bb bb overrid write io except ioexcept bb put overrid write io except ioexcept bb put overrid write len io except ioexcept bb put len record2 buffer record2bytebuff record record buffer bytebuff bb io except ioexcept binari output archiv binaryoutputarch oa oa binari output archiv binaryoutputarch get archiv getarch buffer output stream bytebufferoutputstream bb record serial oa request 

leader offer numer id path pair id sequenti node id assign zoo keeper zookeep path absolut path node znode leader offer leaderoff integ id string node path nodepath string host name hostnam leader offer leaderoff constructor leader offer leaderoff integ id string node path nodepath string host name hostnam id id node path nodepath node path nodepath host name hostnam host name hostnam overrid string string tostr id id node path nodepath node path nodepath host name hostnam host name hostnam integ get id getid id set id setid integ id id id string get node path getnodepath node path nodepath set node path setnodepath string node path nodepath node path nodepath node path nodepath string get host name gethostnam host name hostnam set host name sethostnam string host name hostnam host name hostnam host name hostnam compar two instanc link leader offer leaderoff code id code member id compar idcompar compar leader offer leaderoff overrid compar leader offer leaderoff o1 leader offer leaderoff o2 o1 get id getid compar compareto o2 get id getid 

compar two instanc link leader offer leaderoff code id code member id compar idcompar compar leader offer leaderoff overrid compar leader offer leaderoff o1 leader offer leaderoff o2 o1 get id getid compar compareto o2 get id getid 

stat record czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown data length datalength num children numchildren pzxid stat stat czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown data length datalength num children numchildren pzxid czxid czxid mzxid mzxid ctime ctime mtime mtime version version cversion cversion avers avers ephemer owner ephemeralown ephemer owner ephemeralown data length datalength data length datalength num children numchildren num children numchildren pzxid pzxid get czxid getczxid czxid set czxid setczxid czxid get mzxid getmzxid mzxid set mzxid setmzxid mzxid get ctime getctim ctime set ctime setctim ctime get mtime getmtim mtime set mtime setmtim mtime get version getvers version set version setvers version get cversion getcvers cversion set cversion setcvers cversion get avers getavers avers set avers setavers avers get ephemer owner getephemeralown ephemer owner ephemeralown set ephemer owner setephemeralown ephemer owner ephemeralown get data length getdatalength data length datalength set data length setdatalength data length datalength get num children getnumchildren num children numchildren set num children setnumchildren num children numchildren get pzxid getpzxid pzxid set pzxid setpzxid pzxid serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writelong czxid czxid write writelong mzxid mzxid write writelong ctime ctime write writelong mtime mtime write writeint version version write writeint cversion cversion write writeint avers avers write writelong ephemer owner ephemeralown ephemer owner ephemeralown write writeint data length datalength data length datalength write writeint num children numchildren num children numchildren write writelong pzxid pzxid end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag czxid read readlong czxid mzxid read readlong mzxid ctime read readlong ctime mtime read readlong mtime version read readint version cversion read readint cversion avers read readint avers ephemer owner ephemeralown read readlong ephemer owner ephemeralown data length datalength read readint data length datalength num children numchildren read readint num children numchildren pzxid read readlong pzxid end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writelong czxid czxid write writelong mzxid mzxid write writelong ctime ctime write writelong mtime mtime write writeint version version write writeint cversion cversion write writeint avers avers write writelong ephemer owner ephemeralown ephemer owner ephemeralown write writeint data length datalength data length datalength write writeint num children numchildren num children numchildren write writelong pzxid pzxid end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer stat cast except classcastexcept compar differ type record stat peer stat peer peer ret ret czxid peer czxid czxid peer czxid ret ret ret mzxid peer mzxid mzxid peer mzxid ret ret ret ctime peer ctime ctime peer ctime ret ret ret mtime peer mtime mtime peer mtime ret ret ret version peer version version peer version ret ret ret cversion peer cversion cversion peer cversion ret ret ret avers peer avers avers peer avers ret ret ret ephemer owner ephemeralown peer ephemer owner ephemeralown ephemer owner ephemeralown peer ephemer owner ephemeralown ret ret ret data length datalength peer data length datalength data length datalength peer data length datalength ret ret ret num children numchildren peer num children numchildren num children numchildren peer num children numchildren ret ret ret pzxid peer pzxid pzxid peer pzxid ret ret ret equal object peer peer peer peer stat peer peer stat peer stat peer peer ret ret czxid peer czxid ret ret ret mzxid peer mzxid ret ret ret ctime peer ctime ret ret ret mtime peer mtime ret ret ret version peer version ret ret ret cversion peer cversion ret ret ret avers peer avers ret ret ret ephemer owner ephemeralown peer ephemer owner ephemeralown ret ret ret data length datalength peer data length datalength ret ret ret num children numchildren peer num children numchildren ret ret ret pzxid peer pzxid ret ret ret hash code hashcod result 17 ret ret czxid czxid 32 result 37 result ret ret mzxid mzxid 32 result 37 result ret ret ctime ctime 32 result 37 result ret ret mtime mtime 32 result 37 result ret ret version result 37 result ret ret cversion result 37 result ret ret avers result 37 result ret ret ephemer owner ephemeralown ephemer owner ephemeralown 32 result 37 result ret ret data length datalength result 37 result ret ret num children numchildren result 37 result ret ret pzxid pzxid 32 result 37 result ret result string signatur stat lstat lllliiiliil 

share util manag util managedutil log4j jmx mbean set environ variabl zookeep jmx log4j disabl disabl registr http log apach org log4j apidoc index html org apach log4j jmx summari html jm except jmexcept registr fail log4 bean registerlog4jmbean jm except jmexcept get getboolean zookeep jmx log4j disabl bean server mbeanserv mb bean registri mbeanregistri get instanc getinst get platform bean server getplatformmbeanserv creat level log4j bean mbean hierarchi dynam bean hierarchydynamicmbean hdm hierarchi dynam bean hierarchydynamicmbean object name objectnam mbo object name objectnam log4j hiearchi mb bean registermbean hdm mbo add root logger hierarchi bean mbean logger root logger rootlogg logger get root logger getrootlogg hdm add logger bean addloggermbean root logger rootlogg get name getnam get logger from log4j repositori add hierarchi bean mbean creat logger repositori loggerrepositori log manag logmanag get logger repositori getloggerrepositori enumer enum get current logger getcurrentlogg logger logger enum ha more element hasmoreel logger logger enum next element nextel hdm add logger bean addloggermbean logger get name getnam 

base run unix command code shell code us run unix command code du code code df code offer facil gate command time interv abstract shell logger log logger get logger getlogg shell unix command get current user name string user name command user name command whoami unix command get current user group list string get group command getgroupscommand string bash group unix command get user group list string get group user command getgroupsforusercommand string user group usernam command non consist differ unix string bash id gn user unix command set permiss string set permiss command set permiss command chmod unix command set owner string set owner command set owner command chown string set group command set group command chgrp unix command get permiss inform string get get permiss command getget permiss command forc bin ls window string window ls bin ls ld time after execut script timedout time interv timeoutinterv 0l script time atom atomicboolean time timedout unix command get ulimit process string ulimit command ulimit command ulimit get unix command set maximum memori avail child process relev fork process from mapper reduc implement hadoop pipe hadoop stream check ensur run nix platform cygwin window return code code param memori limit memorylimit memori limit code string code ulimit command argument code code run non nix platform limit unspecifi string get ulimit memori command getulimitmemorycommand memori limit memorylimit ulimit isn support window window string ulimit command ulimit command string valu valueof memori limit memorylimit set window platform window borrow from path window get properti getproperti os name start startswith window interv refresh interv msec last time lasttim last time command perform map string string environ env command execut file dir process process sub process us execut command exit code exitcod script finish execut atom atomicboolean complet shell 0l param interv minimum durat wait befor execut command shell interv interv interv last time lasttim interv interv set environ command param env map environ variabl set environ setenviron map string string env environ env set work directori param dir directori command execut set work directori setworkingdirectori file dir dir dir check command execut execut need run io except ioexcept last time lasttim interv current time milli currenttimemilli exit code exitcod reset next run run command runcommand run command run command runcommand io except ioexcept process builder processbuild builder process builder processbuild get exec string getexecstr timer time timer timeouttim shell timeout timer task shelltimeouttimertask timeout timer task timeouttimertask time timedout atom atomicboolean complet atom atomicboolean environ builder environ put putal environ dir builder directori dir process builder start time interv timeoutinterv time timer timeouttim timer timeout timer task timeouttimertask shell timeout timer task shelltimeouttimertask on time schedul time timer timeouttim schedul timeout timer task timeouttimertask time interv timeoutinterv buffer reader bufferedread err reader errread buffer reader bufferedread input stream reader inputstreamread process get error stream geterrorstream buffer reader bufferedread reader inread buffer reader bufferedread input stream reader inputstreamread process get input stream getinputstream string buffer stringbuff err msg errmsg string buffer stringbuff read error input stream free up buffer free error stream buffer thread err thread errthread thread overrid run string line err reader errread read line readlin line interrupt isinterrupt err msg errmsg append line err msg errmsg append get properti getproperti line separ line err reader errread read line readlin io except ioexcept ioe log warn error read error stream ioe err thread errthread start illeg state except illegalstateexcept is pars exec result parseexecresult reader inread pars output clear input stream buffer string line reader inread read line readlin line line reader inread read line readlin wait process finish check exit code exit code exitcod process wait waitfor make error thread exit err thread errthread join interrupt except interruptedexcept log warn interrupt read error stream complet set timeout thread handl care block exit code exitcod exit code except exitcodeexcept exit code exitcod err msg errmsg string tostr interrupt except interruptedexcept io except ioexcept string tostr time timer timeouttim time timedout get time timer timeouttim cancel close input stream reader inread close io except ioexcept ioe log warn error close input stream ioe complet get err thread errthread interrupt err reader errread close io except ioexcept ioe log warn error close error stream ioe process destroi last time lasttim current time milli currenttimemilli arrai contain command name paramet abstract string get exec string getexecstr pars execut result abstract pars exec result parseexecresult buffer reader bufferedread line io except ioexcept get current sub process execut command process execut command process get process getprocess process get exit code exit code process get exit code getexitcod exit code exitcod io except ioexcept exit code ad exit code except exitcodeexcept io except ioexcept exit code exitcod exit code except exitcodeexcept exit code exitcod string messag messag exit code exitcod exit code exitcod get exit code getexitcod exit code exitcod simpl shell command executor code shell command executor shellcommandexecutor code us case output command pars command work directori environ remain unchang output command store expect small shell command executor shellcommandexecutor shell string command string buffer stringbuff output shell command executor shellcommandexecutor string exec string execstr exec string execstr shell command executor shellcommandexecutor string exec string execstr file dir exec string execstr dir shell command executor shellcommandexecutor string exec string execstr file dir map string string env exec string execstr dir env 0l creat instanc shell command executor shellcommandexecutor execut command param exec string execstr command execut argument param dir specifi directori set current work directori command current work directori modifi param env environ command includ kei valu pair specifi map current environ modifi param timeout specifi time millisecond after command kill statu mark timedout command time shell command executor shellcommandexecutor string exec string execstr file dir map string string env timeout command exec string execstr clone dir set work directori setworkingdirectori dir env set environ setenviron env time interv timeoutinterv timeout execut shell command execut io except ioexcept run string get exec string getexecstr command pars exec result parseexecresult buffer reader bufferedread line io except ioexcept output string buffer stringbuff buf 512 read nread read nread line read buf buf length output append buf read nread get output shell command string get output getoutput output output string tostr return command instanc argument space present quot round argument present raw string represent object string string tostr string builder stringbuild builder string builder stringbuild string arg get exec string getexecstr string arg index indexof builder append append append builder append builder append builder string tostr check pass script shell command executor time script time time istimedout time timedout get set command ha time set time settimedout time timedout set method execut shell command cover most simpl case requir user implement code shell code param cmd shell command execut output execut command string exec command execcommand string cmd io except ioexcept exec command execcommand cmd 0l method execut shell command cover most simpl case requir user implement code shell code param env map environ kei valu param cmd shell command execut param timeout time millisecond after script mark timeout output execut command string exec command execcommand map string string env string cmd timeout io except ioexcept shell command executor shellcommandexecutor exec shell command executor shellcommandexecutor cmd env timeout exec execut exec get output getoutput method execut shell command cover most simpl case requir user implement code shell code param env map environ kei valu param cmd shell command execut output execut command string exec command execcommand map string string env string cmd io except ioexcept exec command execcommand env cmd 0l timer us timeout script spawn shell shell timeout timer task shelltimeouttimertask timer task timertask shell shell shell timeout timer task shelltimeouttimertask shell shell shell shell overrid run process shell get process getprocess exit valu exitvalu except process ha termin check ha complet destroi shell complet get shell set time settimedout destroi 

io except ioexcept exit code ad exit code except exitcodeexcept io except ioexcept exit code exitcod exit code except exitcodeexcept exit code exitcod string messag messag exit code exitcod exit code exitcod get exit code getexitcod exit code exitcod 

simpl shell command executor code shell command executor shellcommandexecutor code us case output command pars command work directori environ remain unchang output command store expect small shell command executor shellcommandexecutor shell string command string buffer stringbuff output shell command executor shellcommandexecutor string exec string execstr exec string execstr shell command executor shellcommandexecutor string exec string execstr file dir exec string execstr dir shell command executor shellcommandexecutor string exec string execstr file dir map string string env exec string execstr dir env 0l creat instanc shell command executor shellcommandexecutor execut command param exec string execstr command execut argument param dir specifi directori set current work directori command current work directori modifi param env environ command includ kei valu pair specifi map current environ modifi param timeout specifi time millisecond after command kill statu mark timedout command time shell command executor shellcommandexecutor string exec string execstr file dir map string string env timeout command exec string execstr clone dir set work directori setworkingdirectori dir env set environ setenviron env time interv timeoutinterv timeout execut shell command execut io except ioexcept run string get exec string getexecstr command pars exec result parseexecresult buffer reader bufferedread line io except ioexcept output string buffer stringbuff buf 512 read nread read nread line read buf buf length output append buf read nread get output shell command string get output getoutput output output string tostr return command instanc argument space present quot round argument present raw string represent object string string tostr string builder stringbuild builder string builder stringbuild string arg get exec string getexecstr string arg index indexof builder append append append builder append builder append builder string tostr 

timer us timeout script spawn shell shell timeout timer task shelltimeouttimertask timer task timertask shell shell shell timeout timer task shelltimeouttimertask shell shell shell shell overrid run process shell get process getprocess exit valu exitvalu except process ha termin check ha complet destroi shell complet get shell set time settimedout destroi 

snapshot respons store serial deseri right snapshot access snapshot file snap filesnap snap shot snapshot file snap dir snapdir close version db id dbid logger log logger factori loggerfactori get logger getlogg file snap filesnap snap magic snap magic buffer bytebuff wrap zksn get byte getbyt get getint file snap filesnap file snap dir snapdir snap dir snapdir snap dir snapdir deseri data tree from most recent snapshot zxid snapshot deseri data tree datatre dt map integ session io except ioexcept run 100 snapshot get run 100 snapshot up list file snap list snaplist find valid snapshot findnvalidsnapshot 100 snap list snaplist size 1l file snap found valid foundvalid snap list snaplist size snap snap list snaplist get input stream inputstream snap snapi check input stream checkedinputstream crc crcin log info read snapshot snap snap snapi buffer input stream bufferedinputstream file input stream fileinputstream snap crc crcin check input stream checkedinputstream snap snapi adler32 input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch crc crcin deseri dt session ia check sum checksum crc crcin get checksum getchecksum get valu getvalu val ia read readlong val val check sum checksum io except ioexcept crc corrupt snapshot snap found valid foundvalid io except ioexcept log warn problem read snap file snap snap snapi snap snapi close crc crcin crc crcin close found valid foundvalid io except ioexcept abl find valid snapshot snap dir snapdir dt last process zxid lastprocessedzxid util get zxid from name getzxidfromnam snap get name getnam snapshot dt last process zxid lastprocessedzxid deseri datatre from inputarch param dt datatre serial param session session fill up param ia input archiv restor from io except ioexcept deseri data tree datatre dt map integ session input archiv inputarch ia io except ioexcept file header filehead header file header filehead header deseri ia filehead header get magic getmag snap magic snap magic io except ioexcept mismatch magic header header get magic getmag file snap filesnap snap magic snap magic serial util serializeutil deseri snapshot deserializesnapshot dt ia session find most recent snapshot databas file contain most recent snapshot file find most recent snapshot findmostrecentsnapshot io except ioexcept list file file find valid snapshot findnvalidsnapshot file size file get find last valid snapshot minor check valid snapshot check end snapshot mean snapshot valid valid high probabl most recent first list param number most recent snapshot last snapshot number snapshot avail io except ioexcept list file find valid snapshot findnvalidsnapshot io except ioexcept list file file util sort data dir sortdatadir snap dir snapdir list file listfil snapshot count list file list arrai list arraylist file file file except from valid snapshot find valid on util valid snapshot isvalidsnapshot list add count count io except ioexcept log info invalid snapshot list find last snapshot check snapshot valid param number most recent snapshot last snapshot io except ioexcept list file find recent snapshot findnrecentsnapshot io except ioexcept list file file util sort data dir sortdatadir snap dir snapdir list file listfil snapshot list file list arrai list arraylist file file file list add list serial datatre session param dt datatre serial param session session serial param oa output archiv serial param header header snapshot io except ioexcept serial data tree datatre dt map integ session output archiv outputarch oa file header filehead header io except ioexcept programmat error happen runtim header illeg state except illegalstateexcept snapshot open write uniniti header header serial oa filehead serial util serializeutil serial snapshot serializesnapshot dt oa session serial datatre session file snapshot param dt datatre serial param session session serial param snap shot snapshot file store snapshot serial data tree datatre dt map integ session file snap shot snapshot io except ioexcept close output stream outputstream sess os sesso buffer output stream bufferedoutputstream file output stream fileoutputstream snap shot snapshot check output stream checkedoutputstream crc crcout check output stream checkedoutputstream sess os sesso adler32 check output stream checkedoutputstream cout check output stream checkedoutputstream output archiv outputarch oa binari output archiv binaryoutputarch get archiv getarch crc crcout file header filehead header file header filehead snap magic snap magic version db id dbid serial dt session oa header val crc crcout get checksum getchecksum get valu getvalu oa write writelong val val oa write string writestr path sess os sesso flush crc crcout close sess os sesso close close serial place close oper block wait till serial done set close flag overrid close io except ioexcept close 

verifi zookeep 1489 caus truncat follow continu append snaplog verifi newli append inform after truncat readabl truncat corrupt test truncatecorruptiontest zk test zktestcas logger log logger factori loggerfactori get logger getlogg truncat corrupt test truncatecorruptiontest check check docheck await check check timeout milli timeoutmilli interrupt except interruptedexcept end current time milli currenttimemilli timeout milli timeoutmilli end current time milli currenttimemilli check check docheck log debug await succeed after current time milli currenttimemilli end timeout milli timeoutmilli thread sleep 50 log debug await fail timeout milli timeoutmilli test test transact log corrupt testtransactionlogcorrupt except configur port test disrupt connect wrapper1 zookeep server wrapper zookeeperserverwrapp wrapper1 zookeep server wrapper zookeeperserverwrapp 7000 zookeep server wrapper zookeeperserverwrapp wrapper2 zookeep server wrapper zookeeperserverwrapp 8000 zookeep server wrapper zookeeperserverwrapp wrapper3 zookeep server wrapper zookeeperserverwrapp 8000 wrapper2 start wrapper3 start wrapper2 await client base clientbas connect timeout connect timeout wrapper3 await client base clientbas connect timeout connect timeout except client base clientbas log stack trace logallstacktrac list port forward portforward pf start forward startforward thread sleep 1000 wrapper1 start wrapper1 await client base clientbas connect timeout connect timeout zoo keeper zookeep zk1 zoo keeper zookeep localhost 8201 client base clientbas connect timeout connect timeout zk watcher zkwatcher zk1 wait connect waitforconnect zk1 zk1 creat test testdata get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist wait littl stuff sync server thread sleep 1000 wrapper2 stop wait reconnect wait connect waitforconnect zk1 zk1 creat test2 testdata get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist stop forc situat trunc event sent follow wrapper3 stop simul interrupt network stop forward stopforward pf log info interrupt network connect wait zk1 zk2 realiz asserttru await check check docheck zk1 get state getstat state connect list string children children zk1 get children getchildren children size keeper except keeperexcept connect loss except connectionlossexcept except silent fail time unit timeunit minut milli tomilli let clean data dir zk3 ensembl advanc forc event get truncat messag wrapper3 clean wrapper2 start wrapper3 start log info wait zk2 zk3 form quorum wrapper2 await client base clientbas connect timeout connect timeout wrapper3 await client base clientbas connect timeout connect timeout zoo keeper zookeep zk2 zoo keeper zookeep localhost 8202 client base clientbas connect timeout connect timeout zk watcher zkwatcher zk2 wait connect waitforconnect zk2 log info establish network connect wait zk1 reconnect pf start forward startforward wait connect waitforconnect zk1 creat more data log info creat node test3 zk1 creat test3 testdata get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist thread sleep 250 log info list children zk2 befor zk1 master list string children2 zk2 get children getchildren log info children2 string tostr log info list children zk1 befor zk1 master list string children1 zk1 get children getchildren log info children1 string tostr caus zk1 master test3 lost log info restart zk2 zk3 clean zk3 enforc zk1 master wrapper2 stop wrapper3 stop wrapper3 clean wrapper3 start wrapper3 await time unit timeunit minut milli tomilli zoo keeper zookeep zk3 zoo keeper zookeep localhost 8203 client base clientbas connect timeout connect timeout zk watcher zkwatcher zk3 wait connect waitforconnect zk3 log info zk1 zk3 quorum start zk2 wrapper2 start wait connect waitforconnect zk2 log info list children zk2 children2 zk2 get children getchildren log info children2 string tostr wait connect waitforconnect zk1 log info list children zk1 children1 zk1 get children getchildren asserttru test3 node miss zk1 children1 contain test3 asserttru test3 node miss zk2 children2 contain test3 equal assertequ children1 children2 stop forward stopforward pf param pf except stop forward stopforward list port forward portforward pf except port forward portforward pf pf pf shutdown io except ioexcept list port forward portforward start forward startforward io except ioexcept list port forward portforward re arrai list arraylist port forward portforward re add port forward portforward 8301 7301 re add port forward portforward 8401 7401 re add port forward portforward 7302 8302 re add port forward portforward 7402 8402 re add port forward portforward 7303 8303 re add port forward portforward 7403 8403 re param zk interrupt except interruptedexcept wait connect waitforconnect zoo keeper zookeep zk interrupt except interruptedexcept asserttru await check check docheck zk get state getstat state connect list string children children zk get children getchildren children size except silent fail time unit timeunit minut milli tomilli zk watcher zkwatcher watcher string client id clientid zk watcher zkwatcher string client id clientid client id clientid client id clientid process watch event watchedev event log info event client id clientid watch event watchedev event zookeep server wrapper zookeeperserverwrapp logger log logger factori loggerfactori get logger getlogg zookeep server wrapper zookeeperserverwrapp main thread mainthread server client port clientport zookeep server wrapper zookeeperserverwrapp server id serverid port base portbas io except ioexcept client port clientport 8200 server id serverid start client port 8200 server id serverid start server portbas 300 400 server id serverid string quorum cfg section quorumcfgsect server 127 port base portbas 301 port base portbas 401 nserver 127 port base portbas 302 port base portbas 402 nserver 127 port base portbas 303 port base portbas 403 server main thread mainthread server id serverid client port clientport quorum cfg section quorumcfgsect start except server start await timeout except deadlin current time milli currenttimemilli timeout string result deadlin current time milli currenttimemilli result four letter word main fourletterwordmain send4 letter word send4letterword 127 client port clientport stat result start startswith zookeep version log info start zookeep server port client port clientport io except ioexcept ignor expect thread sleep 100 interrupt except interruptedexcept ignor log info result except fail connect zookeep server stop server shutdown interrupt except interruptedexcept log info interrupt shut down clean io except ioexcept server clean 

check check docheck 

zk watcher zkwatcher watcher string client id clientid zk watcher zkwatcher string client id clientid client id clientid client id clientid process watch event watchedev event log info event client id clientid watch event watchedev event 

zookeep server wrapper zookeeperserverwrapp logger log logger factori loggerfactori get logger getlogg zookeep server wrapper zookeeperserverwrapp main thread mainthread server client port clientport zookeep server wrapper zookeeperserverwrapp server id serverid port base portbas io except ioexcept client port clientport 8200 server id serverid start client port 8200 server id serverid start server portbas 300 400 server id serverid string quorum cfg section quorumcfgsect server 127 port base portbas 301 port base portbas 401 nserver 127 port base portbas 302 port base portbas 402 nserver 127 port base portbas 303 port base portbas 403 server main thread mainthread server id serverid client port clientport quorum cfg section quorumcfgsect start except server start await timeout except deadlin current time milli currenttimemilli timeout string result deadlin current time milli currenttimemilli result four letter word main fourletterwordmain send4 letter word send4letterword 127 client port clientport stat result start startswith zookeep version log info start zookeep server port client port clientport io except ioexcept ignor expect thread sleep 100 interrupt except interruptedexcept ignor log info result except fail connect zookeep server stop server shutdown interrupt except interruptedexcept log info interrupt shut down clean io except ioexcept server clean 

log4 entri log4jentri log entri logentri log4 entri log4jentri timestamp node string entri timestamp set attribut setattribut log text entri set attribut setattribut node integ node string get entri getentri string get attribut getattribut log text string string tostr get timestamp gettimestamp get node getnod get entri getentri get node getnod integ get attribut getattribut node type get type gettyp log entri logentri type log4j 

sasl server callback handler saslservercallbackhandl callback handler callbackhandl string user prefix user prefix user user logger log logger factori loggerfactori get logger getlogg sasl server callback handler saslservercallbackhandl string sysprop password sysprop password zookeep sasl authent provid saslauthenticationprovid password superpassword string sysprop remov host sysprop remov host zookeep kerbero remov host from princip removehostfromprincip string sysprop remov realm sysprop remov realm zookeep kerbero remov realm from princip removerealmfromprincip string user name usernam map string string credenti hash map hashmap string string sasl server callback handler saslservercallbackhandl configur configur io except ioexcept string server section serversect get properti getproperti zoo keeper sasl server zookeepersaslserv login context name kei login context name kei zoo keeper sasl server zookeepersaslserv login context name login context name app configur entri appconfigurationentri configur entri configurationentri configur get app configur entri getappconfigurationentri server section serversect configur entri configurationentri string error messag errormessag find server entri configur server start log error error messag errormessag io except ioexcept error messag errormessag credenti clear app configur entri appconfigurationentri entri configur entri configurationentri map string option entri get option getopt popul digest md5 user password map jaa configur entri from server section usernam distinguish from option prefix usernam user user prefix map entri string pair option entri set entryset string kei pair get kei getkei kei start startswith user prefix user prefix string user name usernam kei substr user prefix user prefix length credenti put user name usernam string pair get valu getvalu handl callback callback unsupport callback except unsupportedcallbackexcept callback callback callback callback name callback namecallback handl name callback handlenamecallback name callback namecallback callback callback password callback passwordcallback handl password callback handlepasswordcallback password callback passwordcallback callback callback realm callback realmcallback handl realm callback handlerealmcallback realm callback realmcallback callback callback author callback authorizecallback handl author callback handleauthorizecallback author callback authorizecallback callback handl name callback handlenamecallback name callback namecallback nc check user user password databas credenti get nc get name getdefaultnam log warn user nc get name getdefaultnam found list digest md5 authenticat user nc set name setnam nc get name getdefaultnam user name usernam nc get name getdefaultnam handl password callback handlepasswordcallback password callback passwordcallback pc equal user name usernam get properti getproperti sysprop password sysprop password superus us java properti password avail pc set password setpassword get properti getproperti sysprop password sysprop password arrai tochararrai credenti contain kei containskei user name usernam pc set password setpassword credenti get user name usernam arrai tochararrai log warn password found user user name usernam handl realm callback handlerealmcallback realm callback realmcallback rc log debug client suppli realm rc get text getdefaulttext rc set text settext rc get text getdefaulttext handl author callback handleauthorizecallback author callback authorizecallback ac string authent id authenticationid ac get authent id getauthenticationid string author id authorizationid ac get author id getauthorizationid log info successfulli authent client authent id authenticationid authent id authenticationid author id authorizationid author id authorizationid ac set author setauthor canonic author id properti zookeep kerbero remov realm from princip removerealmfromprincip zookeep kerbero remov host from princip removehostfromprincip kerbero name kerberosnam kerbero name kerberosnam kerbero name kerberosnam authent id authenticationid string builder stringbuild user name builder usernamebuild string builder stringbuild kerbero name kerberosnam get name getshortnam append host shouldappendhost kerbero name kerberosnam user name builder usernamebuild append append kerbero name kerberosnam get host name gethostnam append realm shouldappendrealm kerbero name kerberosnam user name builder usernamebuild append append kerbero name kerberosnam get realm getrealm log info set author id authorizedid user name builder usernamebuild ac set author id setauthorizedid user name builder usernamebuild string tostr io except ioexcept log error fail set name base kerbero authent rule append realm shouldappendrealm kerbero name kerberosnam kerbero name kerberosnam properti issystempropertytru sysprop remov realm sysprop remov realm kerbero name kerberosnam get realm getrealm append host shouldappendhost kerbero name kerberosnam kerbero name kerberosnam properti issystempropertytru sysprop remov host sysprop remov host kerbero name kerberosnam get host name gethostnam properti issystempropertytru string properti name propertynam equal get properti getproperti properti name propertynam 

log4 sourc log4jsourc log sourc logsourc logger log logger factori loggerfactori get logger getlogg log4 sourc log4jsourc skipn 10000 string date format date format yyyi mm dd hh mm ss sss log skip list logskiplist skiplist string file starttim endtim serverid size pattern timep overlap rang overlapsrang starttim endtim starttim endtim endtim starttim size size get start time getstarttim starttim get end time getendtim endtim log skip list logskiplist get skip list getskiplist skiplist log4 sourc iter log4jsourceiter log iter logiter random access file reader randomaccessfileread log entri logentri next starttim endtim string buf log4 sourc log4jsourc src skip start skippedatstart simpl date format simpledateformat dateformat filter op filterop filter log4 sourc iter log4jsourceiter log4 sourc log4jsourc src starttim endtim illeg argument except illegalargumentexcept filter except filterexcept src starttim endtim log4 sourc iter log4jsourceiter log4 sourc log4jsourc src starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept dateformat simpl date format simpledateformat date format date format src src starttim starttim endtim endtim file file src file random access file reader randomaccessfileread file found except filenotfoundexcept illeg argument except illegalargumentexcept bad file pass src file open skip offset latest skip point befor starttim log skip list logskiplist mark start src get skip list getskiplist find mark befor findmarkbefor starttim seek start get byte getbyt skip start skippedatstart start get entri skip getentriesskip io except ioexcept ioe skip read from start log entri logentri read next entri readnextentri get timestamp gettimestamp endtim get timestamp gettimestamp starttim filter filter match next skip start skippedatstart filter filter size io except ioexcept log trace enabl istraceen log trace size call endtim src get end time getendtim src size skip start skippedatstart po get posit getposit log trace enabl istraceen log trace save po po log entri logentri log skip list logskiplist mark lastseg src get skip list getskiplist find mark befor findmarkbefor endtim seek lastseg get byte getbyt buf clear buf don get read befor sought number entri skip get end iter number skip get start count lastseg get entri skip getentriesskip skip start skippedatstart read next entri readnextentri log trace enabl istraceen log trace get timestamp gettimestamp endtim count seek po buf log trace enabl istraceen log trace size count count log entri logentri read next entri readnextentri string line read line readlin line matcher src timep matcher line lookingat buf length log entri logentri log4 entri log4jentri src timestamp from text timestampfromtext dateformat buf src get server id getserverid buf buf line buf line buf length buf line eof except eofexcept eof ignor ve simpli end file buf length log entri logentri log4 entri log4jentri src timestamp from text timestampfromtext dateformat buf src get server id getserverid buf buf except log error error read next entri file src file ha next hasnext next log entri logentri next element except nosuchelementexcept log entri logentri ret next log entri logentri read next entri readnextentri filter filter match read next entri readnextentri filter except filterexcept fe element except nosuchelementexcept string tostr get timestamp gettimestamp endtim next next ret remov unsupport oper except unsupportedoperationexcept unsupport oper except unsupportedoperationexcept remov support l4j log close io except ioexcept close string string tostr string size size size string tostr io except ioexcept ioe size unabl read log4 sourc iter log4jsourceiter start starttim end endtim size size log iter logiter iter starttim endtim illeg argument except illegalargumentexcept iter starttim endtim filter except filterexcept fe happen filter except filter log iter logiter iter starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept sanitis start end time endtim starttim illeg argument except illegalargumentexcept end time endtim greater equal starttim starttim log4 sourc iter log4jsourceiter starttim endtim filter log iter logiter iter illeg argument except illegalargumentexcept iter starttim endtim log4 sourc log4jsourc string file io except ioexcept file file timep pattern compil skiplist log skip list logskiplist init timestamp from text timestampfromtext simpl date format simpledateformat format string date format pars pars except parseexcept calendar gregorian calendar gregoriancalendar set time settim get time milli gettimeinmilli init io except ioexcept file file file random access file reader randomaccessfileread random access file reader randomaccessfileread simpl date format simpledateformat dateformat simpl date format simpledateformat date format date format pattern idp pattern compil myid last fp lastfp get posit getposit string line read line readlin matcher read data from file match timep pattern line timep matcher line lookingat starttim timestamp from text timestampfromtext dateformat group io except ioexcept invalid log4j format first line doesn start time count number log entri line start timestamp count entri string lastentri line line timep matcher line lookingat size skipn time timestamp from text timestampfromtext dateformat group skiplist add mark addmark time last fp lastfp size size lastentri line serverid idp matcher line find serverid integ valu valueof group last fp lastfp get posit getposit line read line readlin eof except eofexcept eof ignor simpli end file line caught close timep matcher lastentri lookingat endtim timestamp from text timestampfromtext dateformat group io except ioexcept invalid log4j format last line doesn start time string string tostr log4 sourc log4jsourc file file size size start starttim end endtim id serverid main string arg io except ioexcept log4 sourc log4jsourc log4 sourc log4jsourc arg println log iter logiter iter arg length starttim valu valueof arg endtim valu valueof arg iter iter starttim endtim thread t1 thread run log iter logiter iter iter starttim endtim println iter thread t2 thread run log iter logiter iter iter starttim endtim println iter thread t3 thread run log iter logiter iter iter starttim endtim println iter t1 start t2 start t3 start iter iter iter ha next hasnext println iter next iter close get server id getserverid serverid 

log4 sourc iter log4jsourceiter log iter logiter random access file reader randomaccessfileread log entri logentri next starttim endtim string buf log4 sourc log4jsourc src skip start skippedatstart simpl date format simpledateformat dateformat filter op filterop filter log4 sourc iter log4jsourceiter log4 sourc log4jsourc src starttim endtim illeg argument except illegalargumentexcept filter except filterexcept src starttim endtim log4 sourc iter log4jsourceiter log4 sourc log4jsourc src starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept dateformat simpl date format simpledateformat date format date format src src starttim starttim endtim endtim file file src file random access file reader randomaccessfileread file found except filenotfoundexcept illeg argument except illegalargumentexcept bad file pass src file open skip offset latest skip point befor starttim log skip list logskiplist mark start src get skip list getskiplist find mark befor findmarkbefor starttim seek start get byte getbyt skip start skippedatstart start get entri skip getentriesskip io except ioexcept ioe skip read from start log entri logentri read next entri readnextentri get timestamp gettimestamp endtim get timestamp gettimestamp starttim filter filter match next skip start skippedatstart filter filter size io except ioexcept log trace enabl istraceen log trace size call endtim src get end time getendtim src size skip start skippedatstart po get posit getposit log trace enabl istraceen log trace save po po log entri logentri log skip list logskiplist mark lastseg src get skip list getskiplist find mark befor findmarkbefor endtim seek lastseg get byte getbyt buf clear buf don get read befor sought number entri skip get end iter number skip get start count lastseg get entri skip getentriesskip skip start skippedatstart read next entri readnextentri log trace enabl istraceen log trace get timestamp gettimestamp endtim count seek po buf log trace enabl istraceen log trace size count count log entri logentri read next entri readnextentri string line read line readlin line matcher src timep matcher line lookingat buf length log entri logentri log4 entri log4jentri src timestamp from text timestampfromtext dateformat buf src get server id getserverid buf buf line buf line buf length buf line eof except eofexcept eof ignor ve simpli end file buf length log entri logentri log4 entri log4jentri src timestamp from text timestampfromtext dateformat buf src get server id getserverid buf buf except log error error read next entri file src file ha next hasnext next log entri logentri next element except nosuchelementexcept log entri logentri ret next log entri logentri read next entri readnextentri filter filter match read next entri readnextentri filter except filterexcept fe element except nosuchelementexcept string tostr get timestamp gettimestamp endtim next next ret remov unsupport oper except unsupportedoperationexcept unsupport oper except unsupportedoperationexcept remov support l4j log close io except ioexcept close string string tostr string size size size string tostr io except ioexcept ioe size unabl read log4 sourc iter log4jsourceiter start starttim end endtim size size 

txn record type data txn txn type data type type data data get type gettyp type set type settyp type get data getdata data set data setdata data serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint type type write buffer writebuff data data end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag type read readint type data read buffer readbuff data end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint type type write buffer writebuff data data end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer txn cast except classcastexcept compar differ type record txn peer txn peer peer ret ret type peer type type peer type ret ret data ur peer data ret org apach jute util compar byte comparebyt length ur ur length ret ret ret equal object peer peer peer peer txn peer peer txn peer txn peer peer ret ret type peer type ret ret ret org apach jute util buf equal bufequ data peer data ret ret ret hash code hashcod result 17 ret ret type result 37 result ret ret java util arrai string tostr data hash code hashcod result 37 result ret result string signatur txn ltxn ib 

observ peer part atom broadcast protocol inform success propos leader observ natur act relai point publish propos stream reliev follow connect load observ submit propos vote accept zookeep 368 discuss featur observ learner observ quorum peer quorump self observ zoo keeper server observerzookeeperserv observ zoo keeper server observerzookeeperserv self self zk observ zoo keeper server observerzookeeperserv overrid string string tostr string builder stringbuild sb string builder stringbuild sb append observ append sock sb append pend revalid count pendingrevalidationcount append pend revalid pendingrevalid size sb string tostr main method call observ observ leader interrupt except interruptedexcept observ leader observelead interrupt except interruptedexcept zk jmx registerjmx observ bean observerbean zk self jmx local peer bean jmxlocalpeerbean inet socket address inetsocketaddress addr find leader findlead log info observ addr connect leader connecttolead addr leader zxid newleaderzxid leader registerwithlead leader observerinfo sync leader syncwithlead leader zxid newleaderzxid quorum packet quorumpacket qp quorum packet quorumpacket self run isrun read packet readpacket qp process packet processpacket qp io except ioexcept log warn except observ leader sock close io except ioexcept e1 e1 print stack trace printstacktrac clear pend revalid pend revalid pendingrevalid clear zk unregist jmx unregisterjmx control respons observ receipt quorumpacket param qp io except ioexcept process packet processpacket quorum packet quorumpacket qp io except ioexcept qp get type gettyp leader ping ping qp leader propos log warn ignor propos leader commit log warn ignor commit leader uptod log error receiv uptod messag after observ start leader revalid revalid qp leader sync observ zoo keeper server observerzookeeperserv zk sync leader inform txn header txnheader hdr txn header txnheader record txn serial util serializeutil deseri txn deserializetxn qp get data getdata hdr request request request hdr get client id getclientid hdr get cxid getcxid hdr get type gettyp request txn txn request hdr hdr observ zoo keeper server observerzookeeperserv ob observ zoo keeper server observerzookeeperserv zk ob commit request commitrequest request shutdown observ shutdown log info shutdown call except shutdown observ shutdown 

ha common function test work quorum peer quorump overrid process watch event watchedev implement watcher quorum peer test base quorumpeertestbas zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg quorum peer test base quorumpeertestbas process watch event watchedev event ignor test test qp main testqpmain quorum peer main quorumpeermain shutdown ensur close wait thread exit quorum peer quorump quorum base quorumbas shutdown quorum peer quorump main thread mainthread runnabl file conf file conffil test qp main testqpmain main main thread mainthread myid client port clientport string quorum cfg section quorumcfgsect io except ioexcept file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir log info id myid tmp dir tmpdir tmp dir tmpdir client port clientport client port clientport conf file conffil file tmp dir tmpdir zoo cfg file writer filewrit fwriter file writer filewrit conf file conffil fwriter write tick time ticktim 4000 fwriter write init limit initlimit 10 fwriter write sync limit synclimit file data dir datadir file tmp dir tmpdir data data dir datadir mkdir io except ioexcept unabl mkdir data dir datadir convert window path unix avoid problem string dir data dir datadir string tostr string osnam java lang get properti getproperti os name osnam lower tolowercas contain window dir dir replac fwriter write data dir datadir dir fwriter write client port clientport client port clientport fwriter write quorum cfg section quorumcfgsect fwriter flush fwriter close file myid file myidfil file data dir datadir myid fwriter file writer filewrit myid file myidfil fwriter write integ string tostr myid fwriter flush fwriter close thread current thread currentthread start main test qp main testqpmain current thread currentthread thread current thread currentthread start run string arg string arg conf file conffil string tostr main initi run initializeandrun arg except test fail even log ignor log error unexpect except run current thread currentthread shutdown interrupt except interruptedexcept thread current thread currentthread aliv isal main shutdown join 500 join timeout interrupt except interruptedexcept thread current thread currentthread join timeout aliv isal thread current thread currentthread aliv isal clean client base clientbas recurs delet recursivedelet main quorum peer quorump get txn factori gettxnfactori get data dir getdatadir 

test qp main testqpmain quorum peer main quorumpeermain shutdown ensur close wait thread exit quorum peer quorump quorum base quorumbas shutdown quorum peer quorump 

main thread mainthread runnabl file conf file conffil test qp main testqpmain main main thread mainthread myid client port clientport string quorum cfg section quorumcfgsect io except ioexcept file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir log info id myid tmp dir tmpdir tmp dir tmpdir client port clientport client port clientport conf file conffil file tmp dir tmpdir zoo cfg file writer filewrit fwriter file writer filewrit conf file conffil fwriter write tick time ticktim 4000 fwriter write init limit initlimit 10 fwriter write sync limit synclimit file data dir datadir file tmp dir tmpdir data data dir datadir mkdir io except ioexcept unabl mkdir data dir datadir convert window path unix avoid problem string dir data dir datadir string tostr string osnam java lang get properti getproperti os name osnam lower tolowercas contain window dir dir replac fwriter write data dir datadir dir fwriter write client port clientport client port clientport fwriter write quorum cfg section quorumcfgsect fwriter flush fwriter close file myid file myidfil file data dir datadir myid fwriter file writer filewrit myid file myidfil fwriter write integ string tostr myid fwriter flush fwriter close thread current thread currentthread start main test qp main testqpmain current thread currentthread thread current thread currentthread start run string arg string arg conf file conffil string tostr main initi run initializeandrun arg except test fail even log ignor log error unexpect except run current thread currentthread shutdown interrupt except interruptedexcept thread current thread currentthread aliv isal main shutdown join 500 join timeout interrupt except interruptedexcept thread current thread currentthread join timeout aliv isal thread current thread currentthread aliv isal clean client base clientbas recurs delet recursivedelet main quorum peer quorump get txn factori gettxnfactori get data dir getdatadir 

chroot client test chrootclienttest client test clienttest logger log logger factori loggerfactori get logger getlogg chroot client test chrootclienttest overrid set up setup except string hp host port hostport host port hostport host port hostport chrootclienttest println host port hostport set up setup log info start get test name gettestnam zoo keeper zookeep zk creat client createcli hp zk creat chrootclienttest id open acl unsaf open acl unsaf creat mode createmod persist zk close test test ping testp except necessari repeat expens chroot relat 

front end serial serv factori serial record writer recordwrit output archiv outputarch archiv output archiv outputarch get binari archiv getbinaryarch output stream outputstream binari output archiv binaryoutputarch data output stream dataoutputstream output archiv outputarch get csv archiv getcsvarch output stream outputstream io except ioexcept csv output archiv csvoutputarch unsupport encod except unsupportedencodingexcept ex io except ioexcept unsupport encod utf output archiv outputarch get xml archiv getxmlarch output stream outputstream io except ioexcept xml output archiv xmloutputarch hash map hashmap construct factori constructfactori hash map hashmap factori hash map hashmap param output stream outputstream factori put binari binari output archiv binaryoutputarch get declar method getdeclaredmethod get archiv getarch param factori put csv csv output archiv csvoutputarch get declar method getdeclaredmethod get archiv getarch param factori put xml xml output archiv xmloutputarch get declar method getdeclaredmethod get archiv getarch param secur except securityexcept ex ex print stack trace printstacktrac method except nosuchmethodexcept ex ex print stack trace printstacktrac factori hash map hashmap archiv factori archivefactori construct factori constructfactori output archiv outputarch creat archiv createarch output stream outputstream string format io except ioexcept method factori method archiv factori archivefactori get format factori object param output archiv outputarch factori invok param illeg argument except illegalargumentexcept ex ex print stack trace printstacktrac invoc target except invocationtargetexcept ex ex print stack trace printstacktrac illeg access except illegalaccessexcept ex ex print stack trace printstacktrac creat instanc record writer recordwrit param output stream record serial param format serial format binari xml csv record writer recordwrit output stream outputstream string format io except ioexcept archiv creat archiv createarch format serial record param record serial write record io except ioexcept serial archiv 

async op test asyncopstest client base clientbas logger log logger factori loggerfactori get logger getlogg async op test asyncopstest zoo keeper zookeep zk befor overrid set up setup except set up setup log info creat client get test name gettestnam zk creat client createcli zk add auth info addauthinfo digest ben passwd get byte getbyt after overrid tear down teardown except zk close tear down teardown log info test client shut down test test async creat testasynccr string cb stringcb zk verifi creat verifycr test test async creat three testasynccreatethre count down latch countdownlatch latch count down latch countdownlatch string cb stringcb op1 string cb stringcb zk latch op1 set path setpath op1 string cb stringcb op2 string cb stringcb zk latch op2 set path setpath op2 string cb stringcb op3 string cb stringcb zk latch op3 set path setpath op3 op1 creat op2 creat op3 creat op1 verifi op2 verifi op3 verifi test test async creat failur node exist testasynccreatefailur nodeexist string cb stringcb zk verifi creat failur node exist verifycreatefailur nodeexist test test async delet testasyncdelet cb voidcb zk verifi delet verifydelet test test async delet failur node testasyncdeletefailur nonod cb voidcb zk verifi delet failur node verifydeletefailur nonod test test async sync testasyncsync cb voidcb zk verifi sync verifysync test test async set acl testasyncsetacl stat cb statcb zk verifi set acl verifysetacl test test async set acl failur node testasyncsetaclfailur nonod stat cb statcb zk verifi set acl failur node verifysetaclfailur nonod test test async set data testasyncsetdata stat cb statcb zk verifi set data verifysetdata test test async set data failur node testasyncsetdatafailur nonod stat cb statcb zk verifi set data failur node verifysetdatafailur nonod test test async exist testasyncexist stat cb statcb zk verifi exist verifyexist test test async exist failur node testasyncexistsfailur nonod stat cb statcb zk verifi exist failur node verifyexistsfailur nonod test test async get acl testasyncgetacl aclcb zk verifi get acl verifygetacl test test async get children empti testasyncgetchildrenempti children cb childrencb zk verifi get children empti verifygetchildrenempti test test async get children singl testasyncgetchildrensingl children cb childrencb zk verifi get children singl verifygetchildrensingl test test async get children two testasyncgetchildrentwo children cb childrencb zk verifi get children two verifygetchildrentwo test test async get children failur node testasyncgetchildrenfailur nonod children cb childrencb zk verifi get children failur node verifygetchildrenfailur nonod test test async get children2 empti testasyncgetchildren2empti children cb childrencb zk verifi get children empti verifygetchildrenempti test test async get children2 singl testasyncgetchildren2singl children2 cb children2cb zk verifi get children singl verifygetchildrensingl test test async get children2 two testasyncgetchildren2two children2 cb children2cb zk verifi get children two verifygetchildrentwo test test async get children2 failur node testasyncgetchildren2failur nonod children2 cb children2cb zk verifi get children failur node verifygetchildrenfailur nonod test test async get data testasyncgetdata data cb datacb zk verifi get data verifygetdata test test async get data failur node testasyncgetdatafailur nonod data cb datacb zk verifi get data failur node verifygetdatafailur nonod 

abstract filter op filterop arrai list arraylist filter op filterop sub op subop arrai list arraylist arg arg arg type argtyp string number symbol filter op filterop sub op subop arrai list arraylist filter op filterop arg arrai list arraylist arg filter op filterop op newop string op filter except filterexcept op equal op orop op equal op andop op equal op notop op equal xor xor op xorop op equal equal op equalsop op equal op lessthanop op equal greater op greaterthanop filter except filterexcept invalid oper op add sub op addsubop filter op filterop op sub op subop add op add arg addarg arg arg arg add arg abstract match log entri logentri entri filter except filterexcept string string tostr string op get getclass get name getnam filter op filterop sub op subop op arg arg op op 

arg type argtyp string number symbol 

zoo def zoodef op code opcod notif creat delet exist get data getdata set data setdata get acl getacl set acl setacl get children getchildren sync ping 11 get children2 getchildren2 12 check 13 multi 14 auth 100 set watch setwatch 101 sasl 102 creat session createsess 10 close session closesess 11 error perm read write creat delet admin read write creat delet admin id id repres id id unsaf id unsaf id world id usabl set acl get substitut id client authent id auth id auth id id auth complet open acl arrai list arraylist acl open acl unsaf open acl unsaf arrai list arraylist acl collect singleton list singletonlist acl perm id unsaf id unsaf acl creator authent id permiss arrai list arraylist acl creator acl creator acl arrai list arraylist acl collect singleton list singletonlist acl perm auth id auth id acl world abil read arrai list arraylist acl read acl unsaf read acl unsaf arrai list arraylist acl collect singleton list singletonlist acl perm read id unsaf id unsaf string op name opnam notif creat delet exist get data getdata set data setdata get acl getacl set acl setacl get children getchildren get children2 getchildren2 get max children getmaxchildren set max children setmaxchildren ping 

op code opcod notif creat delet exist get data getdata set data setdata get acl getacl set acl setacl get children getchildren sync ping 11 get children2 getchildren2 12 check 13 multi 14 auth 100 set watch setwatch 101 sasl 102 creat session createsess 10 close session closesess 11 error 

perm read write creat delet admin read write creat delet admin 

id id repres id id unsaf id unsaf id world id usabl set acl get substitut id client authent id auth id auth id id auth complet open acl arrai list arraylist acl open acl unsaf open acl unsaf arrai list arraylist acl collect singleton list singletonlist acl perm id unsaf id unsaf acl creator authent id permiss arrai list arraylist acl creator acl creator acl arrai list arraylist acl collect singleton list singletonlist acl perm auth id auth id acl world abil read arrai list arraylist acl read acl unsaf read acl unsaf arrai list arraylist acl collect singleton list singletonlist acl perm read id unsaf id unsaf 

disconnect zoo keeper disconnectablezookeep zoo keeper zookeep disconnect zoo keeper disconnectablezookeep string host session timeout sessiontimeout watcher watcher io except ioexcept host session timeout sessiontimeout watcher disconnect zoo keeper disconnectablezookeep string host session timeout sessiontimeout watcher watcher session id sessionid session passwd sessionpasswd io except ioexcept host session timeout sessiontimeout watcher session id sessionid session passwd sessionpasswd test here test client disconnect from server send session disconnect end session cleanli server eventu notic client longer ping timeout session disconnect io except ioexcept cnxn disconnect prevent client from automat reconnect connect server lost dont reconnect dontreconnect except java lang reflect field cnxn get getclass get declar field getdeclaredfield close set access setaccess set setboolean cnxn 

stat test stattest client base clientbas zoo keeper zookeep zk overrid set up setup except set up setup zk creat client createcli overrid tear down teardown except tear down teardown zk close creat stat fill dummi valu failur copi client server code stat dummi valu stat stat newstat stat stat stat stat set avers setavers 100 stat set ctime setctim 100 stat set cversion setcvers 100 stat set czxid setczxid 100 stat set data length setdatalength 100 stat set ephemer owner setephemeralown 100 stat set mtime setmtim 100 stat set mzxid setmzxid 100 stat set num children setnumchildren 100 stat set pzxid setpzxid 100 stat set version setvers 100 stat test test basic testbas io except ioexcept keeper except keeperexcept interrupt except interruptedexcept string name foo zk creat name name get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist stat stat stat stat newstat zk get data getdata name stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ stat get ephemer owner getephemeralown equal assertequ name length stat get data length getdatalength equal assertequ stat get num children getnumchildren test test child testchild io except ioexcept keeper except keeperexcept interrupt except interruptedexcept string name foo zk creat name name get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist string childnam name bar zk creat childnam childnam get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer stat stat stat stat newstat zk get data getdata name stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ stat get ephemer owner getephemeralown equal assertequ name length stat get data length getdatalength equal assertequ stat get num children getnumchildren stat stat newstat zk get data getdata childnam stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ zk get session id getsessionid stat get ephemer owner getephemeralown equal assertequ childnam length stat get data length getdatalength equal assertequ stat get num children getnumchildren test test children testchildren io except ioexcept keeper except keeperexcept interrupt except interruptedexcept string name foo zk creat name name get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist 10 string childnam name bar zk creat childnam childnam get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer stat stat stat stat newstat zk get data getdata name stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ stat get ephemer owner getephemeralown equal assertequ name length stat get data length getdatalength equal assertequ stat get num children getnumchildren test test data size chang testdatasizechang io except ioexcept keeper except keeperexcept interrupt except interruptedexcept string name foo zk creat name name get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist stat stat stat stat newstat zk get data getdata name stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ stat get ephemer owner getephemeralown equal assertequ name length stat get data length getdatalength equal assertequ stat get num children getnumchildren zk set data setdata name name name get byte getbyt stat stat newstat zk get data getdata name stat assertnotsam stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid assertnotsam stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ stat get ephemer owner getephemeralown equal assertequ name length stat get data length getdatalength equal assertequ stat get num children getnumchildren 

creat txn v0 createtxnv0 record string path data java util list org apach zookeep data acl acl ephemer creat txn v0 createtxnv0 creat txn v0 createtxnv0 string path data java util list org apach zookeep data acl acl ephemer path path data data acl acl ephemer ephemer string get path getpath path set path setpath string path get data getdata data set data setdata data java util list org apach zookeep data acl get acl getacl acl set acl setacl java util list org apach zookeep data acl acl get ephemer getephemer ephemer set ephemer setephemer ephemer serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write buffer writebuff data data start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writebool ephemer ephemer end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path data read buffer readbuff data index vidx1 start vector startvector acl vidx1 acl java util arrai list arraylist org apach zookeep data acl vidx1 done vidx1 incr org apach zookeep data acl e1 e1 org apach zookeep data acl read record readrecord e1 e1 acl add e1 end vector endvector acl ephemer read readbool ephemer end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write buffer writebuff data data start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writebool ephemer ephemer end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar creat txn v0 createtxnv0 unimpl equal object peer peer peer peer creat txn v0 createtxnv0 peer peer creat txn v0 createtxnv0 peer creat txn v0 createtxnv0 peer peer ret ret path equal peer path ret ret ret org apach jute util buf equal bufequ data peer data ret ret ret acl equal peer acl ret ret ret ephemer peer ephemer ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret java util arrai string tostr data hash code hashcod result 37 result ret ret acl hash code hashcod result 37 result ret ret ephemer result 37 result ret result string signatur creat txn v0 lcreatetxnv0 sb lacl lid ilid ss 

request header requesthead record xid type request header requesthead request header requesthead xid type xid xid type type get xid getxid xid set xid setxid xid get type gettyp type set type settyp type serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint xid xid write writeint type type end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag xid read readint xid type read readint type end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint xid xid write writeint type type end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer request header requesthead cast except classcastexcept compar differ type record request header requesthead peer request header requesthead peer peer ret ret xid peer xid xid peer xid ret ret ret type peer type type peer type ret ret ret equal object peer peer peer peer request header requesthead peer peer request header requesthead peer request header requesthead peer peer ret ret xid peer xid ret ret ret type peer type ret ret ret hash code hashcod result 17 ret ret xid result 37 result ret ret type result 37 result ret result string signatur request header lrequesthead ii 

provid registri providerregistri logger log logger factori loggerfactori get logger getlogg provid registri providerregistri initi hash map hashmap string authent provid authenticationprovid authent provid authenticationprovid hash map hashmap string authent provid authenticationprovid initi provid registri providerregistri initi ip authent provid ipauthenticationprovid ipp ip authent provid ipauthenticationprovid digest authent provid digestauthenticationprovid digp digest authent provid digestauthenticationprovid authent provid authenticationprovid put ipp get scheme getschem ipp authent provid authenticationprovid put digp get scheme getschem digp enumer object en get properti getproperti kei en ha more element hasmoreel string string en next element nextel start startswith zookeep auth provid authprovid string name classnam get properti getproperti zoo keeper server zookeeperserv get loader getclassload load loadclass name classnam authent provid authenticationprovid ap authent provid authenticationprovid instanc newinst authent provid authenticationprovid put ap get scheme getschem ap except log warn problem load name classnam initi authent provid authenticationprovid get provid getprovid string scheme initi initi authent provid authenticationprovid get scheme string list provid listprovid string builder stringbuild sb string builder stringbuild string authent provid authenticationprovid kei set keyset sb append sb string tostr 

symbol arg symbolarg arg string symbol arg symbolarg string valu arg type argtyp symbol valu valu 

implement link zoo inspector manag zooinspectormanag connect zookeep instanc zoo inspector manag impl zooinspectormanagerimpl zoo inspector manag zooinspectormanag string version version acl version string time time creation time string version version children version string czxid creation id string data length data length data length string ephemer owner ephemer owner ephemer owner string time time last modifi time string mzxid modifi id string num children num children number children string pzxid node id string version data version string acl perm acl perm permiss string acl scheme acl scheme scheme string acl id acl id id string session state session state session state string session id session id session id kei us connect string connect properti file string connect string connect string host kei us session timeout connect properti file string session timeout session timeout timeout kei us data encrypt manag connect properti file string data encrypt manag data encrypt manag encrypt manag encryptionmanag file node viewer file defaultnodeviewersfil file config node veiwer defaultnodeveiw cfg file connect file defaultconnectionfil file config connect set defaultconnectionset cfg data encrypt manag dataencryptionmanag encrypt manag encryptionmanag string connect string connectstr session timeout sessiontimeout zoo keeper zookeep zoo keeper zookeep map string node watcher nodewatch watcher hash map hashmap string node watcher nodewatch connect properti last connect prop lastconnectionprop string encrypt manag defaultencryptionmanag string timeout defaulttimeout string host defaulthost io except ioexcept thrown connect set load zoo inspector manag impl zooinspectormanagerimpl io except ioexcept load connect file loaddefaultconnectionfil non javadoc org apach zookeep inspector manag zoo inspector manag zooinspectormanag connect java util properti connect properti connect prop connectionprop zoo keeper zookeep string connect string connectstr connect prop connectionprop get properti getproperti connect string connect string string session timeout sessiontimeout connect prop connectionprop get properti getproperti session timeout session timeout string encrypt manag encryptionmanag connect prop connectionprop get properti getproperti data encrypt manag data encrypt manag connect string connectstr session timeout sessiontimeout illeg argument except illegalargumentexcept connect string session timeout requir encrypt manag encryptionmanag encrypt manag encryptionmanag basic data encrypt manag basicdataencryptionmanag clazz name fornam encrypt manag encryptionmanag arrai list aslist clazz get interfac getinterfac contain data encrypt manag dataencryptionmanag encrypt manag encryptionmanag data encrypt manag dataencryptionmanag name fornam encrypt manag encryptionmanag instanc newinst illeg argument except illegalargumentexcept data encrypt manag implement data encrypt manag dataencryptionmanag connect string connectstr connect string connectstr session timeout sessiontimeout integ valu valueof session timeout sessiontimeout zoo keeper zookeep zoo keeper retri zookeeperretri connect string connectstr integ valu valueof session timeout sessiontimeout watcher process watch event watchedev event event get state getstat keeper state keeperst expir connect zoo keeper retri zookeeperretri zoo keeper zookeep set retri limit setretrylimit 10 connect zoo keeper retri zookeeperretri zoo keeper zookeep test connect testconnect connect except print stack trace printstacktrac connect connect non javadoc org apach zookeep inspector manag zoo inspector manag zooinspectormanag disconnect disconnect zoo keeper zookeep zoo keeper zookeep close zoo keeper zookeep connect remov watcher removewatch watcher kei set keyset except logger factori loggerfactori get logger getlogg error error occur disconnect from zoo keeper zookeep server non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get children getchildren java lang string list string get children getchildren string node path nodepath connect zoo keeper zookeep get children getchildren node path nodepath except logger factori loggerfactori get logger getlogg error error occur retriev children node node path nodepath non javadoc org apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get data getdata java lang string string get data getdata string node path nodepath connect node path nodepath length node path nodepath stat zoo keeper zookeep exist node path nodepath encrypt manag encryptionmanag decrypt data decryptdata zoo keeper zookeep get data getdata node path nodepath except logger factori loggerfactori get logger getlogg error error occur get data node node path nodepath non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get node child getnodechild java lang string string get node child getnodechild string node path nodepath child index childindex connect stat zoo keeper zookeep exist node path nodepath zoo keeper zookeep get children getchildren node path nodepath get child index childindex except logger factori loggerfactori get logger getlogg error error occur retriev child child index childindex node node path nodepath non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get node index getnodeindex java lang string get node index getnodeindex string node path nodepath connect index node path nodepath last index lastindexof index node path nodepath equal node path nodepath charat node path nodepath length illeg argument except illegalargumentexcept invalid node path node path nodepath string parent path parentpath node path nodepath substr index string child node path nodepath substr index parent path parentpath parent path parentpath length list string children get children getchildren parent path parentpath children children index indexof child non javadoc org apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get acl getacl java lang string list map string string get acl getacl string node path nodepath list map string string acl returnacl arrai list arraylist map string string connect node path nodepath length node path nodepath stat zoo keeper zookeep exist node path nodepath list acl acl zoo keeper zookeep get acl getacl node path nodepath acl acl acl map string string acl map aclmap link hash map linkedhashmap string string acl map aclmap put acl scheme acl scheme acl get id getid get scheme getschem acl map aclmap put acl id acl id acl get id getid get id getid string builder stringbuild sb string builder stringbuild perm acl get perm getperm ad perm addedperm perm perm read perm read sb append read ad perm addedperm ad perm addedperm sb append perm perm write perm write sb append write ad perm addedperm ad perm addedperm sb append perm perm creat perm creat sb append creat ad perm addedperm ad perm addedperm sb append perm perm delet perm delet sb append delet ad perm addedperm ad perm addedperm sb append perm perm admin perm admin sb append admin ad perm addedperm acl map aclmap put acl perm acl perm sb string tostr acl returnacl add acl map aclmap interrupt except interruptedexcept logger factori loggerfactori get logger getlogg error error occur retriev acl node node path nodepath keeper except keeperexcept logger factori loggerfactori get logger getlogg error error occur retriev acl node node path nodepath acl returnacl non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get node meta getnodemeta java lang string map string string get node meta getnodemeta string node path nodepath map string string node meta nodemeta link hash map linkedhashmap string string connect node path nodepath length node path nodepath stat zoo keeper zookeep exist node path nodepath node meta nodemeta put version version string valu valueof get avers getavers node meta nodemeta put time time string valu valueof get ctime getctim node meta nodemeta put version version string valu valueof get cversion getcvers node meta nodemeta put czxid string valu valueof get czxid getczxid node meta nodemeta put data length data length string valu valueof get data length getdatalength node meta nodemeta put ephemer owner ephemer owner string valu valueof get ephemer owner getephemeralown node meta nodemeta put time time string valu valueof get mtime getmtim node meta nodemeta put mzxid string valu valueof get mzxid getmzxid node meta nodemeta put num children num children string valu valueof get num children getnumchildren node meta nodemeta put pzxid string valu valueof get pzxid getpzxid node meta nodemeta put version string valu valueof get version getvers except logger factori loggerfactori get logger getlogg error error occur retriev meta data node node path nodepath node meta nodemeta non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get num children getnumchildren java lang string get num children getnumchildren string node path nodepath connect stat zoo keeper zookeep exist node path nodepath get num children getnumchildren except logger factori loggerfactori get logger getlogg error error occur get number children node node path nodepath non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag ha children haschildren java lang string ha children haschildren string node path nodepath get num children getnumchildren node path nodepath non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag allow children isallowschildren java lang string allow children isallowschildren string node path nodepath connect stat zoo keeper zookeep exist node path nodepath get ephemer owner getephemeralown except logger factori loggerfactori get logger getlogg error error occur determin node allow children node path nodepath non javadoc seeorg apach zookeep inspector manag zoo inspector read manag zooinspectorreadonlymanag get session meta getsessionmeta map string string get session meta getsessionmeta map string string session meta sessionmeta link hash map linkedhashmap string string zoo keeper zookeep session meta sessionmeta put session id session id string valu valueof zoo keeper zookeep get session id getsessionid session meta sessionmeta put session state session state string valu valueof zoo keeper zookeep get state getstat string tostr session meta sessionmeta put connect string connect string connect string connectstr session meta sessionmeta put session timeout session timeout string valu valueof session timeout sessiontimeout except logger factori loggerfactori get logger getlogg error error occur retriev session meta data session meta sessionmeta non javadoc org apach zookeep inspector manag zoo inspector node tree manag zooinspectornodetreemanag creat node createnod java lang string java lang string creat node createnod string parent string node name nodenam connect string node element nodeel node name nodenam split string node element nodeel node element nodeel string node parent node element nodeel stat zoo keeper zookeep exist node zoo keeper zookeep creat node encrypt manag encryptionmanag encrypt data encryptdata id open acl unsaf open acl unsaf creat mode createmod persist parent node except logger factori loggerfactori get logger getlogg error error occur creat node parent node name nodenam non javadoc org apach zookeep inspector manag zoo inspector node tree manag zooinspectornodetreemanag delet node deletenod java lang string delet node deletenod string node path nodepath connect stat zoo keeper zookeep exist node path nodepath list string children zoo keeper zookeep get children getchildren node path nodepath string child children string node node path nodepath child delet node deletenod node zoo keeper zookeep delet node path nodepath except logger factori loggerfactori get logger getlogg error error occur delet node node path nodepath non javadoc org apach zookeep inspector manag zoo inspector node manag zooinspectornodemanag set data setdata java lang string java lang string set data setdata string node path nodepath string data connect zoo keeper zookeep set data setdata node path nodepath encrypt manag encryptionmanag encrypt data encryptdata data except logger factori loggerfactori get logger getlogg error error occur set data node node path nodepath non javadoc seeorg apach zookeep inspector manag zoo inspector manag zooinspectormanag get connect properti getconnectionpropertiestempl pair map string list string map string string get connect properti getconnectionpropertiestempl map string list string link hash map linkedhashmap string list string put connect string connect string arrai list aslist string host defaulthost put session timeout session timeout arrai list aslist string timeout defaulttimeout put data encrypt manag data encrypt manag arrai list aslist string encrypt manag defaultencryptionmanag map string string label link hash map linkedhashmap string string label put connect string connect string connect string label put session timeout session timeout session timeout label put data encrypt manag data encrypt manag data encrypt manag pair map string list string map string string label non javadoc org apach zookeep inspector manag zoo inspector manag zooinspectormanag add watcher addwatch java util collect org apach zookeep inspector manag node listen nodelisten add watcher addwatch collect string select node selectednod node listen nodelisten node listen nodelisten add watcher node add node collect watch node connect string node select node selectednod watcher contain kei containskei node watcher put node node watcher nodewatch node node listen nodelisten zoo keeper zookeep except logger factori loggerfactori get logger getlogg error error occur ad node watcher node node non javadoc org apach zookeep inspector manag zoo inspector manag zooinspectormanag remov watcher removewatch java util collect remov watcher removewatch collect string select node selectednod remov watcher node remov node from collect watch node connect string node select node selectednod watcher contain kei containskei node node watcher nodewatch watcher watcher remov node watcher watcher stop watcher add time event fire node watcher nodewatch watcher string node path nodepath node listen nodelisten node listen nodelisten zoo keeper zookeep zookeep close param node path nodepath path node watch param node listen nodelisten link node listen nodelisten node param zookeep link zoo keeper zookeep us access zookeep interrupt except interruptedexcept keeper except keeperexcept node watcher nodewatch string node path nodepath node listen nodelisten node listen nodelisten zoo keeper zookeep zookeep keeper except keeperexcept interrupt except interruptedexcept node path nodepath node path nodepath node listen nodelisten node listen nodelisten zookeep zookeep stat zoo keeper zookeep exist node path nodepath zookeep get children getchildren node path nodepath process watch event watchedev event close event get type gettyp event type eventtyp node delet nodedelet stat zoo keeper zookeep exist node path nodepath zookeep get children getchildren node path nodepath except logger factori loggerfactori get logger getlogg error error occur ad node watcherfor node node path nodepath node listen nodelisten process event processev event get path getpath event get type gettyp name stop close non javadoc seeorg apach zookeep inspector manag zoo inspector manag zooinspectormanag load node viewer file loadnodeviewersfil java io file list string load node viewer file loadnodeviewersfil file select file selectedfil io except ioexcept list string result arrai list arraylist string node viewer file defaultnodeviewersfil exist file reader fileread reader file reader fileread select file selectedfil buffer reader bufferedread buff buffer reader bufferedread reader buff readi string line buff read line readlin line line length result add line buff close reader close result load connect file loaddefaultconnectionfil io except ioexcept connect file defaultconnectionfil exist properti prop properti file reader fileread reader file reader fileread connect file defaultconnectionfil prop load reader reader close encrypt manag defaultencryptionmanag prop get properti getproperti data encrypt manag data encrypt manag org apach zookeep inspector encrypt basic data encrypt manag basicdataencryptionmanag prop get properti getproperti data encrypt manag data encrypt manag timeout defaulttimeout prop get properti getproperti session timeout session timeout 5000 prop get properti getproperti session timeout session timeout host defaulthost prop get properti getproperti connect string connect string localhost 2181 prop get properti getproperti connect string connect string encrypt manag defaultencryptionmanag org apach zookeep inspector encrypt basic data encrypt manag basicdataencryptionmanag timeout defaulttimeout 5000 host defaulthost localhost 2181 non javadoc seeorg apach zookeep inspector manag zoo inspector manag zooinspectormanag save connect file savedefaultconnectionfil java util properti save connect file savedefaultconnectionfil properti prop io except ioexcept file dir defaultdir connect file defaultconnectionfil get parent file getparentfil dir defaultdir exist dir defaultdir mkdir io except ioexcept fail creat configur directori dir defaultdir get absolut path getabsolutepath connect file defaultconnectionfil exist connect file defaultconnectionfil creat file createnewfil io except ioexcept fail creat connect file connect file defaultconnectionfil get absolut path getabsolutepath file writer filewrit writer file writer filewrit connect file defaultconnectionfil prop store writer connect zoo inspector zooinspector writer close non javadoc seeorg apach zookeep inspector manag zoo inspector manag zooinspectormanag save node viewer file savenodeviewersfil java io file java util list save node viewer file savenodeviewersfil file select file selectedfil list string node viewer name nodeviewersclassnam io except ioexcept select file selectedfil exist select file selectedfil creat file createnewfil io except ioexcept fail creat node viewer configur file select file selectedfil get absolut path getabsolutepath file writer filewrit writer file writer filewrit select file selectedfil buffer writer bufferedwrit buff buffer writer bufferedwrit writer string node viewer name nodeviewersclassnam node viewer name nodeviewersclassnam buff append node viewer name nodeviewersclassnam buff append buff flush buff close writer close non javadoc seeorg apach zookeep inspector manag zoo inspector manag zooinspectormanag set node viewer configur setdefaultnodeviewerconfigur java io file java util list set node viewer configur setdefaultnodeviewerconfigur list string node viewer name nodeviewersclassnam io except ioexcept file dir defaultdir node viewer file defaultnodeviewersfil get parent file getparentfil dir defaultdir exist dir defaultdir mkdir io except ioexcept fail creat configur directori dir defaultdir get absolut path getabsolutepath save node viewer file savenodeviewersfil node viewer file defaultnodeviewersfil node viewer name nodeviewersclassnam list string get node viewer configur getdefaultnodeviewerconfigur io except ioexcept load node viewer file loadnodeviewersfil node viewer file defaultnodeviewersfil non javadoc seeorg apach zookeep inspector manag zoo inspector manag zooinspectormanag get last connect prop getlastconnectionprop properti get last connect prop getlastconnectionprop last connect prop lastconnectionprop non javadoc seeorg apach zookeep inspector manag zoo inspector manag zooinspectormanag set last connect prop setlastconnectionprop java util properti set last connect prop setlastconnectionprop properti connect prop connectionprop last connect prop lastconnectionprop connect prop connectionprop 

watcher add time event fire node watcher nodewatch watcher string node path nodepath node listen nodelisten node listen nodelisten zoo keeper zookeep zookeep close param node path nodepath path node watch param node listen nodelisten link node listen nodelisten node param zookeep link zoo keeper zookeep us access zookeep interrupt except interruptedexcept keeper except keeperexcept node watcher nodewatch string node path nodepath node listen nodelisten node listen nodelisten zoo keeper zookeep zookeep keeper except keeperexcept interrupt except interruptedexcept node path nodepath node path nodepath node listen nodelisten node listen nodelisten zookeep zookeep stat zoo keeper zookeep exist node path nodepath zookeep get children getchildren node path nodepath process watch event watchedev event close event get type gettyp event type eventtyp node delet nodedelet stat zoo keeper zookeep exist node path nodepath zookeep get children getchildren node path nodepath except logger factori loggerfactori get logger getlogg error error occur ad node watcherfor node node path nodepath node listen nodelisten process event processev event get path getpath event get type gettyp name stop close 

fle zero weight test flezeroweighttest zk test zktestcas logger log logger factori loggerfactori get logger getlogg hierarch quorum test hierarchicalquorumtest properti qp count hash map hashmap quorum server quorumserv peer arrai list arraylist le thread lethread thread file tmpdir port object obj finalobj vote vote leader di leaderdi leader random rand random befor set up setup except count peer hash map hashmap quorum server quorumserv count thread arrai list arraylist le thread lethread count vote vote count tmpdir file count port count obj finalobj object string config group group group weight weight weight weight weight weight weight weight weight arrai input stream bytearrayinputstream arrai input stream bytearrayinputstream config get byte getbyt qp properti qp load after tear down teardown except thread size le thread lethread le thread lethread thread get shutdown ha explicitli call thread make resourc freed properli fix network port avail test case quorum base quorumbas shutdown le thread lethread peer le thread lethread thread quorum peer quorump peer fail le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote fail peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead log info thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote peer get peer state getpeerst server state serverst lead peer get id getid fail peer get peer state getpeerst server state serverst follow peer get peer state getpeerst server state serverst lead log debug thread vote interrupt except interruptedexcept print stack trace printstacktrac test test zero weight quorum testzeroweightquorum except fast leader elect fastleaderelect le fast leader elect fastleaderelect count log info test zero weight quorum testzeroweightquorum get test name gettestnam count count peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress port assign portassign uniqu inet socket address inetsocketaddress port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port port assign portassign uniqu le length quorum hierarch quorumhierarch hq quorum hierarch quorumhierarch qp quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 hq peer start leader elect startleaderelect le thread lethread thread le thread lethread peer thread start thread add thread log info start thread get test name gettestnam thread size thread get join 15000 thread get aliv isal fail thread didn join thread get fail fail elect zero weight server 

le thread lethread thread quorum peer quorump peer fail le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote fail peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead log info thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote peer get peer state getpeerst server state serverst lead peer get id getid fail peer get peer state getpeerst server state serverst follow peer get peer state getpeerst server state serverst lead log debug thread vote interrupt except interruptedexcept print stack trace printstacktrac 

creat mode test createmodetest zk test zktestcas test test basic creat mode testbasiccreatemod creat mode createmod cm creat mode createmod persist equal assertequ cm flag toflag assertfals cm ephemer isephemer assertfals cm sequenti issequenti cm creat mode createmod ephemer equal assertequ cm flag toflag asserttru cm ephemer isephemer assertfals cm sequenti issequenti cm creat mode createmod persist sequenti persist sequenti equal assertequ cm flag toflag assertfals cm ephemer isephemer asserttru cm sequenti issequenti cm creat mode createmod ephemer sequenti ephemer sequenti equal assertequ cm flag toflag asserttru cm ephemer isephemer asserttru cm sequenti issequenti test test flag convers testflagconvers keeper except keeperexcept ensur get valu back after round trip convers set enumset creat mode createmod mode allmod set enumset allof creat mode createmod creat mode createmod cm mode allmod equal assertequ cm creat mode createmod from flag fromflag cm flag toflag test test invalid flag convers testinvalidflagconvers keeper except keeperexcept creat mode createmod cm creat mode createmod from flag fromflag 99 fail shouldn abl convert 99 creat mode createmod keeper except keeperexcept ke equal assertequ code badargu ke code creat mode createmod cm creat mode createmod from flag fromflag fail shouldn abl convert creat mode createmod keeper except keeperexcept ke equal assertequ code badargu ke code 

deseri perf test deserializationperftest zk test zktestcas logger log logger factori loggerfactori get logger getlogg deseri perf test deserializationperftest deseri tree deserializetre depth width len interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept binari input archiv binaryinputarch ia count data tree datatre tree data tree datatre serial perf test serializationperftest creat node createnod tree depth tree get node getnod stat get cversion getcvers width len count tree get node count getnodecount arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch oa binari output archiv binaryoutputarch get archiv getarch bao tree serial oa test bao flush arrai input stream bytearrayinputstream bai arrai input stream bytearrayinputstream bao arrai tobytearrai ia binari input archiv binaryinputarch get archiv getarch bai data tree datatre dser tree dsertre data tree datatre gc start nano time nanotim dser tree dsertre deseri ia test end nano time nanotim durationm end start 1000000l pernodeu end start 1000l count equal assertequ count dser tree dsertre get node count getnodecount log info deseri count node durationm ms pernodeu node depth depth width width datalen len test test singl deseri testsingledeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 20 test test wide deseri testwidedeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 10000 20 test test deep deseri testdeepdeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 400 20 test test10 wide5 deep deseri test10wide5deepdeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 10 20 test test15 wide5 deep deseri test15wide5deepdeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 15 20 test test25 wide4 deep deseri test25wide4deepdeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 25 20 test test40 wide4 deep deseri test40wide4deepdeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 40 20 test test300 wide3 deep deseri test300wide3deepdeseri interrupt except interruptedexcept io except ioexcept keeper except keeperexcept node exist except nodeexistsexcept keeper except keeperexcept node except nonodeexcept deseri tree deserializetre 300 20 

set sasl respons setsaslrespons record token set sasl respons setsaslrespons set sasl respons setsaslrespons token token token get token gettoken token set token settoken token serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write buffer writebuff token token end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag token read buffer readbuff token end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write buffer writebuff token token end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set sasl respons setsaslrespons cast except classcastexcept compar differ type record set sasl respons setsaslrespons peer set sasl respons setsaslrespons peer peer ret token ur peer token ret org apach jute util compar byte comparebyt length ur ur length ret ret ret equal object peer peer peer peer set sasl respons setsaslrespons peer peer set sasl respons setsaslrespons peer set sasl respons setsaslrespons peer peer ret ret org apach jute util buf equal bufequ token peer token ret ret ret hash code hashcod result 17 ret ret java util arrai string tostr token hash code hashcod result 37 result ret result string signatur set sasl respons lsetsaslrespons 

test hammer testhamm callback voidcallback param arg rep 50000 main string arg start time starttim current time milli currenttimemilli zoo keeper zookeep zk zk zoo keeper zookeep arg 10000 io except ioexcept e1 todo gener block e1 print stack trace printstacktrac runtim except runtimeexcept e1 rep string name zk creat test file testfil 16 id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti zk delet name test hammer testhamm except print stack trace printstacktrac println creat sec rep 1000 current time milli currenttimemilli start time starttim process result processresult rc string path object ctx todo gener method stub 

creat session txn createsessiontxn record time timeout creat session txn createsessiontxn creat session txn createsessiontxn time timeout time timeout time timeout get time gettimeout time timeout set time settimeout time timeout serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint time timeout time timeout end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag time timeout read readint time timeout end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint time timeout time timeout end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer creat session txn createsessiontxn cast except classcastexcept compar differ type record creat session txn createsessiontxn peer creat session txn createsessiontxn peer peer ret ret time timeout peer time timeout time timeout peer time timeout ret ret ret equal object peer peer peer peer creat session txn createsessiontxn peer peer creat session txn createsessiontxn peer creat session txn createsessiontxn peer peer ret ret time timeout peer time timeout ret ret ret hash code hashcod result 17 ret ret time timeout result 37 result ret result string signatur creat session txn lcreatesessiontxn 

learner info learnerinfo record serverid protocol version protocolvers learner info learnerinfo learner info learnerinfo serverid protocol version protocolvers serverid serverid protocol version protocolvers protocol version protocolvers get serverid getserverid serverid set serverid setserverid serverid get protocol version getprotocolvers protocol version protocolvers set protocol version setprotocolvers protocol version protocolvers serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writelong serverid serverid write writeint protocol version protocolvers protocol version protocolvers end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag serverid read readlong serverid protocol version protocolvers read readint protocol version protocolvers end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writelong serverid serverid write writeint protocol version protocolvers protocol version protocolvers end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer learner info learnerinfo cast except classcastexcept compar differ type record learner info learnerinfo peer learner info learnerinfo peer peer ret ret serverid peer serverid serverid peer serverid ret ret ret protocol version protocolvers peer protocol version protocolvers protocol version protocolvers peer protocol version protocolvers ret ret ret equal object peer peer peer peer learner info learnerinfo peer peer learner info learnerinfo peer learner info learnerinfo peer peer ret ret serverid peer serverid ret ret ret protocol version protocolvers peer protocol version protocolvers ret ret ret hash code hashcod result 17 ret ret serverid serverid 32 result 37 result ret ret protocol version protocolvers result 37 result ret result string signatur learner info llearnerinfo li 

port forward portforward thread logger log logger factori loggerfactori get logger getlogg port forward portforward port forward worker portforwardwork runnabl input stream inputstream output stream outputstream socket close toclos socket close2 toclose2 port forward worker portforwardwork socket close toclos socket close2 toclose2 input stream inputstream output stream outputstream io except ioexcept close toclos close toclos close2 toclose2 close2 toclose2 log info start forward close toclos run thread current thread currentthread set name setnam close toclos string tostr close2 toclose2 string tostr buf 1024 read read buf read write buf read io except ioexcept log warn except write close toclos close io except ioexcept ex ignor close2 toclose2 close io except ioexcept ex ignor socket timeout except sockettimeoutexcept log error socket timeout thread sleep interrupt except interruptedexcept log warn interrupt close toclos close io except ioexcept ex ignor close2 toclose2 close io except ioexcept ex ignor silent socket except socketexcept socket close equal get messag getmessag log error unexpect except io except ioexcept log error unexpect except log info shut down forward close toclos stop executor servic executorservic worker executor cach thread pool newcachedthreadpool server socket serversocket server socket serversocket port forward portforward from io except ioexcept server socket serversocket server socket serversocket from server socket serversocket set timeout setsotimeout 30000 start overrid run stop socket sock log info accept socket local server socket serversocket get local port getlocalport sock server socket serversocket accept log info accept local sock get local port getlocalport from sock get port getport socket target retri 10 sock connect isconnect target socket localhost io except ioexcept retri log warn connect fail retri retri local sock get local port getlocalport from sock get port getport thread sleep time unit timeunit second milli tomilli retri log info connect local sock get local port getlocalport from sock get port getport sock set timeout setsotimeout 30000 target set timeout setsotimeout 30000 worker execut port forward worker portforwardwork sock target sock get input stream getinputstream target get output stream getoutputstream worker execut port forward worker portforwardwork target sock target get input stream getinputstream sock get output stream getoutputstream socket timeout except sockettimeoutexcept log warn socket time local sock get local port getlocalport from sock get port getport connect except connectexcept log warn connect except local sock get local port getlocalport from sock get port getport sock close io except ioexcept socket close equal get messag getmessag log warn unexpect except local sock get local port getlocalport from sock get port getport io except ioexcept log error unexpect except interrupt except interruptedexcept log error interrupt shutdown except stop server socket serversocket close worker shutdown shutdownnow worker await termin awaittermin time unit timeunit second except fail stop forward second interrupt except interruptedexcept except fail stop forward join 

port forward worker portforwardwork runnabl input stream inputstream output stream outputstream socket close toclos socket close2 toclose2 port forward worker portforwardwork socket close toclos socket close2 toclose2 input stream inputstream output stream outputstream io except ioexcept close toclos close toclos close2 toclose2 close2 toclose2 log info start forward close toclos run thread current thread currentthread set name setnam close toclos string tostr close2 toclose2 string tostr buf 1024 read read buf read write buf read io except ioexcept log warn except write close toclos close io except ioexcept ex ignor close2 toclose2 close io except ioexcept ex ignor socket timeout except sockettimeoutexcept log error socket timeout thread sleep interrupt except interruptedexcept log warn interrupt close toclos close io except ioexcept ex ignor close2 toclose2 close io except ioexcept ex ignor silent socket except socketexcept socket close equal get messag getmessag log error unexpect except io except ioexcept log error unexpect except log info shut down forward close toclos 

misc place verifi string tostr method make don fail string test tostringtest zk test zktestcas verifi jute ve problem past wrt field test test jute string testjutetostr set data request setdatarequest req set data request setdatarequest assertnotsam error req string tostr 

buffer input stream bytebufferinputstream input stream inputstream buffer bytebuff bb buffer input stream bytebufferinputstream buffer bytebuff bb bb bb overrid read io except ioexcept bb remain bb get xff 0xff overrid avail io except ioexcept bb remain overrid read len io except ioexcept bb remain len bb remain len bb remain bb get len len overrid read io except ioexcept read length overrid skip io except ioexcept po newpo bb posit po newpo bb remain bb remain bb posit bb posit buffer2 record bytebuffer2record buffer bytebuff bb record record io except ioexcept binari input archiv binaryinputarch ia ia binari input archiv binaryinputarch get archiv getarch buffer input stream bytebufferinputstream bb record deseri ia request 

encod result singl part multipl oper commit abstract op result opresult type op result opresult type type type encod type from zoo def zoodef op code opcod us dispatch correct cast need get desir addit result data zoo def zoodef op code opcod integ identifi kind oper result from get type gettyp type result from creat oper kind result allow path retriev creat sequenti creat creat result createresult op result opresult string path creat result createresult string path zoo def zoodef op code opcod creat path path string get path getpath path overrid equal object creat result createresult creat result createresult creat result createresult get type gettyp get type gettyp path equal get path getpath overrid hash code hashcod get type gettyp 35 path hash code hashcod result from delet oper special valu avail delet result deleteresult op result opresult delet result deleteresult zoo def zoodef op code opcod delet overrid equal object delet result deleteresult delet result deleteresult op result opresult delet result deleteresult get type gettyp op result opresult get type gettyp overrid hash code hashcod get type gettyp result from set data setdata oper kind result access stat structur from updat set data result setdataresult op result opresult stat stat set data result setdataresult stat stat zoo def zoodef op code opcod set data setdata stat stat stat get stat getstat stat overrid equal object set data result setdataresult set data result setdataresult set data result setdataresult get type gettyp get type gettyp stat get mzxid getmzxid stat get mzxid getmzxid overrid hash code hashcod get type gettyp 35 stat get mzxid getmzxid result from version check oper special valu avail check result checkresult op result opresult check result checkresult zoo def zoodef op code opcod check overrid equal object check result checkresult check result checkresult check result checkresult get type gettyp get type gettyp overrid hash code hashcod get type gettyp error result from kind oper point error result contain error code help understand happen keeper except keeperexcept code error result errorresult op result opresult err error result errorresult err zoo def zoodef op code opcod error err err get err geterr err overrid equal object error result errorresult error result errorresult error result errorresult get type gettyp get type gettyp err get err geterr overrid hash code hashcod get type gettyp 35 err 

result from creat oper kind result allow path retriev creat sequenti creat creat result createresult op result opresult string path creat result createresult string path zoo def zoodef op code opcod creat path path string get path getpath path overrid equal object creat result createresult creat result createresult creat result createresult get type gettyp get type gettyp path equal get path getpath overrid hash code hashcod get type gettyp 35 path hash code hashcod 

result from delet oper special valu avail delet result deleteresult op result opresult delet result deleteresult zoo def zoodef op code opcod delet overrid equal object delet result deleteresult delet result deleteresult op result opresult delet result deleteresult get type gettyp op result opresult get type gettyp overrid hash code hashcod get type gettyp 

result from set data setdata oper kind result access stat structur from updat set data result setdataresult op result opresult stat stat set data result setdataresult stat stat zoo def zoodef op code opcod set data setdata stat stat stat get stat getstat stat overrid equal object set data result setdataresult set data result setdataresult set data result setdataresult get type gettyp get type gettyp stat get mzxid getmzxid stat get mzxid getmzxid overrid hash code hashcod get type gettyp 35 stat get mzxid getmzxid 

result from version check oper special valu avail check result checkresult op result opresult check result checkresult zoo def zoodef op code opcod check overrid equal object check result checkresult check result checkresult check result checkresult get type gettyp get type gettyp overrid hash code hashcod get type gettyp 

error result from kind oper point error result contain error code help understand happen keeper except keeperexcept code error result errorresult op result opresult err error result errorresult err zoo def zoodef op code opcod error err err get err geterr err overrid equal object error result errorresult error result errorresult error result errorresult get type gettyp get type gettyp err get err geterr overrid hash code hashcod get type gettyp 35 err 

request processor appli transact associ request servic queri end request processor requestprocessor chain name next processor nextprocessor member request processor requestprocessor count zoo keeper server zookeeperserv popul outstand request outstandingrequest member zoo keeper server zookeeperserv request processor finalrequestprocessor request processor requestprocessor logger log logger factori loggerfactori get logger getlogg request processor finalrequestprocessor zoo keeper server zookeeperserv zk request processor finalrequestprocessor zoo keeper server zookeeperserv zk zk zk process request processrequest request request log debug enabl isdebugen log debug process request request request add rq rec addrqrec trace mask tracemask zoo trace zootrac client request trace mask client request trace mask request type op code opcod ping trace mask tracemask zoo trace zootrac server ping trace mask server ping trace mask log trace enabl istraceen zoo trace zootrac log request logrequest log trace mask tracemask request process txn result processtxnresult rc zk outstand chang outstandingchang zk outstand chang outstandingchang empti isempti zk outstand chang outstandingchang get zxid request zxid chang record changerecord cr zk outstand chang outstandingchang remov cr zxid request zxid log warn zxid outstand cr zxid current request zxid zk outstand chang path outstandingchangesforpath get cr path cr zk outstand chang path outstandingchangesforpath remov cr path request hdr txn header txnheader hdr request hdr record txn request txn rc zk process txn processtxn hdr txn add non quorum packet queue request quorum isquorum request type zk get zk databas getzkdatabas add commit propos addcommittedpropos request request hdr request hdr get type gettyp op code opcod close session closesess server cnxn factori servercnxnfactori scxn zk get server cnxn factori getservercnxnfactori plai diff from leader scxn request cnxn call cnxn result client close session respons lost ve close session socket here befor send close session closesess block scxn close session closesess request session id sessionid request cnxn server cnxn servercnxn cnxn request cnxn string last op lastop na zk dec process decinprocess code err code record rsp close session closesess request hdr request hdr get type gettyp op code opcod error keeper except keeperexcept creat keeper except keeperexcept code get error txn errortxn request txn get err geterr keeper except keeperexcept ke request get except getexcept ke request type op code opcod multi ke log debug enabl isdebugen log debug request request type op code opcod ping zk server stat serverstat updat latenc updatelat request creat time createtim last op lastop ping cnxn updat stat respons updatestatsforrespons request cxid request zxid last op lastop request creat time createtim current time milli currenttimemilli cnxn send respons sendrespons repli header replyhead zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid respons op code opcod creat session createsess zk server stat serverstat updat latenc updatelat request creat time createtim last op lastop sess cnxn updat stat respons updatestatsforrespons request cxid request zxid last op lastop request creat time createtim current time milli currenttimemilli zk finish session init finishsessioninit request cnxn op code opcod multi last op lastop mult rsp multi respons multirespons process txn result processtxnresult sub txn result subtxnresult rc multi result multiresult op result opresult sub result subresult sub txn result subtxnresult type op code opcod check sub result subresult check result checkresult op code opcod creat sub result subresult creat result createresult sub txn result subtxnresult path op code opcod delet sub result subresult delet result deleteresult op code opcod set data setdata sub result subresult set data result setdataresult sub txn result subtxnresult stat op code opcod error sub result subresult error result errorresult sub txn result subtxnresult err io except ioexcept invalid type op multi respons multirespons rsp add sub result subresult op code opcod creat last op lastop crea rsp creat respons createrespons rc path err code get rc err op code opcod delet last op lastop dele err code get rc err op code opcod set data setdata last op lastop setd rsp set data respons setdatarespons rc stat err code get rc err op code opcod set acl setacl last op lastop seta rsp set acl respons setaclrespons rc stat err code get rc err op code opcod close session closesess last op lastop clo close session closesess err code get rc err op code opcod sync last op lastop sync sync request syncrequest sync request syncrequest sync request syncrequest buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request sync request syncrequest rsp sync respons syncrespons sync request syncrequest get path getpath op code opcod check last op lastop chec rsp set data respons setdatarespons rc stat err code get rc err op code opcod exist last op lastop exi todo figur secur requir exist request existsrequest exist request existsrequest exist request existsrequest buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request exist request existsrequest string path exist request existsrequest get path getpath path index indexof keeper except keeperexcept bad argument except badargumentsexcept stat stat zk get zk databas getzkdatabas stat node statnod path exist request existsrequest get watch getwatch cnxn rsp exist respons existsrespons stat op code opcod get data getdata last op lastop getd get data request getdatarequest get data request getdatarequest get data request getdatarequest buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request get data request getdatarequest data node datanod zk get zk databas getzkdatabas get node getnod get data request getdatarequest get path getpath keeper except keeperexcept node except nonodeexcept acll acll acl prep request processor preprequestprocessor check acl checkacl zk zk get zk databas getzkdatabas convert convertlong acll zoo def zoodef perm read request auth info authinfo stat stat stat zk get zk databas getzkdatabas get data getdata get data request getdatarequest get path getpath stat get data request getdatarequest get watch getwatch cnxn rsp get data respons getdatarespons stat op code opcod set watch setwatch last op lastop setw set watch setwatch set watch setwatch set watch setwatch xxx request request rewind buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request set watch setwatch rel zxid relativezxid set watch setwatch get rel zxid getrelativezxid zk get zk databas getzkdatabas set watch setwatch rel zxid relativezxid set watch setwatch get data watch getdatawatch set watch setwatch get exist watch getexistwatch set watch setwatch get child watch getchildwatch cnxn op code opcod get acl getacl last op lastop geta get acl request getaclrequest get acl request getaclrequest get acl request getaclrequest buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request get acl request getaclrequest stat stat stat list acl acl zk get zk databas getzkdatabas get acl getacl get acl request getaclrequest get path getpath stat rsp get acl respons getaclrespons acl stat op code opcod get children getchildren last op lastop getc get children request getchildrenrequest get children request getchildrenrequest get children request getchildrenrequest buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request get children request getchildrenrequest data node datanod zk get zk databas getzkdatabas get node getnod get children request getchildrenrequest get path getpath keeper except keeperexcept node except nonodeexcept aclg aclg acl prep request processor preprequestprocessor check acl checkacl zk zk get zk databas getzkdatabas convert convertlong aclg zoo def zoodef perm read request auth info authinfo list string children zk get zk databas getzkdatabas get children getchildren get children request getchildrenrequest get path getpath get children request getchildrenrequest get watch getwatch cnxn rsp get children respons getchildrenrespons children op code opcod get children2 getchildren2 last op lastop getc get children2 request getchildren2request get children2 request getchildren2request get children2 request getchildren2request buffer input stream bytebufferinputstream buffer2 record bytebuffer2record request request get children2 request getchildren2request stat stat stat data node datanod zk get zk databas getzkdatabas get node getnod get children2 request getchildren2request get path getpath keeper except keeperexcept node except nonodeexcept aclg aclg acl prep request processor preprequestprocessor check acl checkacl zk zk get zk databas getzkdatabas convert convertlong aclg zoo def zoodef perm read request auth info authinfo list string children zk get zk databas getzkdatabas get children getchildren get children2 request getchildren2request get path getpath stat get children2 request getchildren2request get watch getwatch cnxn rsp get children2 respons getchildren2respons children stat session move except sessionmovedexcept session move connect level error tear down connect otw zookeep 710 happen client slow follow start renew session fail befor complet fast follow leader success initi renew successfulli fwd process leader result client leader disagre client most recent attach invalid session move gener cnxn send close session sendclosesess keeper except keeperexcept err code except log error level return marshal error user log error fail process request string builder stringbuild sb string builder stringbuild buffer bytebuff bb request request bb rewind bb ha remain hasremain sb append integ hex string tohexstr bb get xff 0xff log error dump request buffer 0x sb string tostr err code marshallingerror last zxid lastzxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid repli header replyhead hdr repli header replyhead request cxid last zxid lastzxid err valu intvalu zk server stat serverstat updat latenc updatelat request creat time createtim cnxn updat stat respons updatestatsforrespons request cxid last zxid lastzxid last op lastop request creat time createtim current time milli currenttimemilli cnxn send respons sendrespons hdr rsp respons close session closesess cnxn send close session sendclosesess io except ioexcept log error fixmsg shutdown link chain log info shutdown request processor complet 

test ver gen vergen us build run runwith parameter ver gen test vergentest zk test zktestcas paramet collect object data arrai list aslist object object dev object dev snapshot object snapshot foo bar 123 object foo bar 123 string input object expect ver gen test vergentest string input object expect input input expect expect test test parser testpars ver gen vergen version ver gen vergen pars version string parseversionstr input equal assertequ expect maj equal assertequ expect min equal assertequ expect micro equal assertequ expect qualifi test test gen file testgenfil except ver gen vergen version ver gen vergen pars version string parseversionstr input file output dir outputdir client base clientbas creat tmp dir createtmpdir ver gen vergen gener file generatefil output dir outputdir nov1 client base clientbas recurs delet recursivedelet output dir outputdir 

xml input archiv xmlinputarch input archiv inputarch valu string type string buffer stringbuff sb valu string type sb string buffer stringbuff add char addchar buf offset len sb append buf offset len string get valu getvalu sb string tostr string get type gettyp type xml parser xmlparser handler defaulthandl char valid charsvalid arrai list arraylist valu val list vallist xml parser xmlparser arrai list arraylist valu vlist val list vallist vlist start document startdocu sax except saxexcept end document enddocu sax except saxexcept start element startel string ns string sname string qname attribut attr sax except saxexcept char valid charsvalid equal qname i4 equal qname equal qname string equal qname equal qname ex i1 equal qname ex i8 equal qname ex equal qname char valid charsvalid val list vallist add valu qname equal qname arrai equal qname val list vallist add valu qname end element endel string ns string sname string qname sax except saxexcept char valid charsvalid equal qname arrai equal qname val list vallist add valu qname charact buf offset len sax except saxexcept char valid charsvalid valu val list vallist get val list vallist size add char addchar buf offset len xml index xmlindex index done valu val list vallist get idx vidx arrai equal get type gettyp val list vallist set idx vidx idx vidx incr arrai list arraylist valu val list vallist len vlen idx vidx valu next io except ioexcept idx vidx len vlen valu val list vallist get idx vidx val list vallist set idx vidx idx vidx io except ioexcept error deseri xml input archiv xmlinputarch get archiv getarch input stream inputstream strm parser configur except parserconfigurationexcept sax except saxexcept io except ioexcept xml input archiv xmlinputarch strm creat instanc binari input archiv binaryinputarch xml input archiv xmlinputarch input stream inputstream parser configur except parserconfigurationexcept sax except saxexcept io except ioexcept val list vallist arrai list arraylist valu handler defaulthandl handler xml parser xmlparser val list vallist sax parser factori saxparserfactori factori sax parser factori saxparserfactori instanc newinst sax parser saxpars parser factori sax parser newsaxpars parser pars handler len vlen val list vallist size idx vidx read readbyt string tag io except ioexcept valu next ex i1 equal get type gettyp io except ioexcept error deseri tag pars parsebyt get valu getvalu read readbool string tag io except ioexcept valu next equal get type gettyp io except ioexcept error deseri tag equal get valu getvalu read readint string tag io except ioexcept valu next i4 equal get type gettyp equal get type gettyp io except ioexcept error deseri tag integ pars parseint get valu getvalu read readlong string tag io except ioexcept valu next ex i8 equal get type gettyp io except ioexcept error deseri tag pars parselong get valu getvalu read readfloat string tag io except ioexcept valu next ex equal get type gettyp io except ioexcept error deseri tag pars parsefloat get valu getvalu read readdoubl string tag io except ioexcept valu next equal get type gettyp io except ioexcept error deseri tag pars parsedoubl get valu getvalu string read string readstr string tag io except ioexcept valu next string equal get type gettyp io except ioexcept error deseri tag util from xml string fromxmlstr get valu getvalu read buffer readbuff string tag io except ioexcept valu next string equal get type gettyp io except ioexcept error deseri tag util from xml buffer fromxmlbuff get valu getvalu read record readrecord record string tag io except ioexcept deseri tag start record startrecord string tag io except ioexcept valu next equal get type gettyp io except ioexcept error deseri tag end record endrecord string tag io except ioexcept valu next equal get type gettyp io except ioexcept error deseri tag index start vector startvector string tag io except ioexcept valu next arrai equal get type gettyp io except ioexcept error deseri tag xml index xmlindex end vector endvector string tag io except ioexcept index start map startmap string tag io except ioexcept start vector startvector tag end map endmap string tag io except ioexcept end vector endvector tag 

valu string type string buffer stringbuff sb valu string type sb string buffer stringbuff add char addchar buf offset len sb append buf offset len string get valu getvalu sb string tostr string get type gettyp type 

xml parser xmlparser handler defaulthandl char valid charsvalid arrai list arraylist valu val list vallist xml parser xmlparser arrai list arraylist valu vlist val list vallist vlist start document startdocu sax except saxexcept end document enddocu sax except saxexcept start element startel string ns string sname string qname attribut attr sax except saxexcept char valid charsvalid equal qname i4 equal qname equal qname string equal qname equal qname ex i1 equal qname ex i8 equal qname ex equal qname char valid charsvalid val list vallist add valu qname equal qname arrai equal qname val list vallist add valu qname end element endel string ns string sname string qname sax except saxexcept char valid charsvalid equal qname arrai equal qname val list vallist add valu qname charact buf offset len sax except saxexcept char valid charsvalid valu val list vallist get val list vallist size add char addchar buf offset len 

xml index xmlindex index done valu val list vallist get idx vidx arrai equal get type gettyp val list vallist set idx vidx idx vidx incr 

data tree unit test datatreeunittest zk test zktestcas data tree datatre dt befor set up setup except dt data tree datatre after tear down teardown except dt test test root watch trigger testrootwatchtrigg except watcher mywatch watcher fire process watch event watchedev event event get path getpath equal fire watcher mywatch watcher watcher mywatch set watch root node dt get children getchildren stat watcher add node trigger watch dt creat node createnod xyz dt get node getnod stat get cversion getcvers assertfals root node watch trigger watcher fire 

greater op greaterthanop filter op filterop match log entri logentri entri filter except filterexcept arg first arg get first filter op filterop arg type argtyp type first get type gettyp type filter op filterop arg type argtyp symbol string kei string first get valu getvalu object entri get attribut getattribut kei string type filter op filterop arg type argtyp string integ type filter op filterop arg type argtyp number filter except filterexcept op lessthanop invalid argument first argument resolv string number object last arg arg object get valu getvalu get type gettyp filter op filterop arg type argtyp symbol string kei string get valu getvalu entri get attribut getattribut kei last type filter op filterop arg type argtyp string string last compar compareto string type filter op filterop arg type argtyp number println last number last valu longvalu number valu longvalu number last valu longvalu number valu longvalu last 

info major minor micro string qualifi revis string build date build date 04 08 2014 14 58 gmt 

path relat util path util pathutil valid provid znode path string param path znode path string param sequenti issequenti path creat sequenti flag illeg argument except illegalargumentexcept path invalid valid path validatepath string path sequenti issequenti illeg argument except illegalargumentexcept valid path validatepath sequenti issequenti path path valid provid znode path string param path znode path string illeg argument except illegalargumentexcept path invalid valid path validatepath string path illeg argument except illegalargumentexcept path illeg argument except illegalargumentexcept path path length illeg argument except illegalargumentexcept path length path charat illeg argument except illegalargumentexcept path start charact path length done check root path charat path length illeg argument except illegalargumentexcept path end charact string reason lastc char path arrai tochararrai char length lastc char char reason charact allow lastc reason empti node name specifi lastc char char length char reason rel path allow char char length char reason rel path allow u0000 u001f u007f u009f ud800 uf8 ff uf8ff ufff0 uffff reason invalid charat reason illeg argument except illegalargumentexcept invalid path string path caus reason 

observ test observertest quorum peer test base quorumpeertestbas watcher logger log logger factori loggerfactori get logger getlogg observ test observertest count down latch countdownlatch latch zoo keeper zookeep zk watch event watchedev last event lastev test ensur two thing observ successfulli proxi request ensembl observ don particip leader elect second test construct ensembl leader elect observ vote except test test observ testobserv except client base clientbas setup test env setuptestenv expect two notif befor latch count down latch countdownlatch port qp1 port qp1 port assign portassign uniqu port qp2 port qp2 port assign portassign uniqu port ob port ob port assign portassign uniqu port qp le1 port qp le1 port assign portassign uniqu port qp le2 port qp le2 port assign portassign uniqu port ob le port ob le port assign portassign uniqu client port qp1 client port qp1 port assign portassign uniqu client port qp2 client port qp2 port assign portassign uniqu client port ob client port ob port assign portassign uniqu string quorum cfg section quorumcfgsect elect alg electionalg server 127 port qp1 port qp1 port qp le1 port qp le1 nserver 127 port qp2 port qp2 port qp le2 port qp le2 nserver 127 port ob port ob port ob le port ob le observ string ob cfg section obscfgsect quorum cfg section quorumcfgsect npeer type npeertyp observ main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect main thread mainthread q2 main thread mainthread client port qp2 client port qp2 quorum cfg section quorumcfgsect main thread mainthread q3 main thread mainthread client port ob client port ob ob cfg section obscfgsect q1 start q2 start q3 start asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp1 client port qp1 connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp2 client port qp2 connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 client port ob client port ob connect timeout connect timeout zk zoo keeper zookeep 127 client port ob client port ob client base clientbas connect timeout connect timeout zk creat obstest test get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist command get forward correctli equal assertequ string zk get data getdata obstest test check command don blow up zk sync zk set data setdata obstest test2 get byte getbyt zk get children getchildren equal assertequ zk get state getstat state connect log info shut down server kill on real server q2 shutdown asserttru wait server shut down client base clientbas wait server down waitforserverdown 127 client port qp2 client port qp2 client base clientbas connect timeout connect timeout log info server down result ensembl shouldn quorat latch await assertnotsam client connect non quorat cluster keeper state keeperst sync connect syncconnect last event lastev get state getstat log info latch return assertfals shouldn get respons cluster quorat string zk get data getdata obstest equal test connect loss except connectionlossexcept log info connect loss except caught ensembl quorat expect latch count down latch countdownlatch log info restart server bring back q2 main thread mainthread client port qp2 client port qp2 quorum cfg section quorumcfgsect q2 start log info wait server up asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp2 client port qp2 connect timeout connect timeout log info server start wait latch latch await session expir show abl talk ensembl asserttru client didn reconnect quorat ensembl state last event lastev get state getstat keeper state keeperst sync connect syncconnect last event lastev get state getstat keeper state keeperst expir last event lastev get state getstat log info shut down server q1 shutdown q2 shutdown q3 shutdown log info close zk client zk close asserttru wait server shut down client base clientbas wait server down waitforserverdown 127 client port qp1 client port qp1 client base clientbas connect timeout connect timeout asserttru wait server shut down client base clientbas wait server down waitforserverdown 127 client port qp2 client port qp2 client base clientbas connect timeout connect timeout asserttru wait server shut down client base clientbas wait server down waitforserverdown 127 client port ob client port ob client base clientbas connect timeout connect timeout implement watcher process watch event watchedev event last event lastev event latch count down countdown log info latch event event test ensur observ elect leader up properli lone member ensembl except test test observ testobserveronli except client base clientbas setup test env setuptestenv client port qp1 client port qp1 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu observ npeer type npeertyp observ main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect q1 start q1 join client base clientbas connect timeout connect timeout assertfals q1 aliv isal ensur observ up proper ensembl configur up standalon server test test observ standlon testobserverwithstandlon except client base clientbas setup test env setuptestenv client port qp1 client port qp1 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu observ server 127 port assign portassign uniqu port assign portassign uniqu npeer type npeertyp observ main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect q1 start q1 join client base clientbas connect timeout connect timeout assertfals q1 aliv isal 

abstract base zoo keeper server zookeeperserv particip quorum abstract quorum zoo keeper server quorumzookeeperserv zoo keeper server zookeeperserv quorum peer quorump self quorum zoo keeper server quorumzookeeperserv file txn snap log filetxnsnaplog log factori logfactori tick time ticktim min session timeout minsessiontimeout max session timeout maxsessiontimeout data tree builder datatreebuild tree builder treebuild zk databas zkdatabas zk db zkdb quorum peer quorump self log factori logfactori tick time ticktim min session timeout minsessiontimeout max session timeout maxsessiontimeout tree builder treebuild zk db zkdb self self overrid dump conf dumpconf print writer printwrit pwriter dump conf dumpconf pwriter pwriter print init limit initlimit pwriter println self get init limit getinitlimit pwriter print sync limit synclimit pwriter println self get sync limit getsynclimit pwriter print elect alg electionalg pwriter println self get elect type getelectiontyp pwriter print elect port electionport pwriter println self quorum peer quorump get self get id getid elect addr electionaddr get port getport pwriter print quorum port quorumport pwriter println self quorum peer quorump get self get id getid addr get port getport pwriter print peer type peertyp pwriter println self get learner type getlearnertyp ordin 

set acl txn setacltxn record string path java util list org apach zookeep data acl acl version set acl txn setacltxn set acl txn setacltxn string path java util list org apach zookeep data acl acl version path path acl acl version version string get path getpath path set path setpath string path java util list org apach zookeep data acl get acl getacl acl set acl setacl java util list org apach zookeep data acl acl get version getvers version set version setvers version serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writeint version version end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path index vidx1 start vector startvector acl vidx1 acl java util arrai list arraylist org apach zookeep data acl vidx1 done vidx1 incr org apach zookeep data acl e1 e1 org apach zookeep data acl read record readrecord e1 e1 acl add e1 end vector endvector acl version read readint version end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writeint version version end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar set acl txn setacltxn unimpl equal object peer peer peer peer set acl txn setacltxn peer peer set acl txn setacltxn peer set acl txn setacltxn peer peer ret ret path equal peer path ret ret ret acl equal peer acl ret ret ret version peer version ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret acl hash code hashcod result 37 result ret ret version result 37 result ret result string signatur set acl txn lsetacltxn lacl lid ilid ss 

csv input archiv csvinputarch input archiv inputarch pushback reader pushbackread stream csv index csvindex index done stream read stream unread io except ioexcept ex incr except error throwexceptiononerror string tag io except ioexcept io except ioexcept error deseri tag string read field readfield string tag io except ioexcept string builder stringbuild buf string builder stringbuild stream read buf string tostr stream unread buf string tostr buf append io except ioexcept ex io except ioexcept error read tag csv input archiv csvinputarch get archiv getarch input stream inputstream strm unsupport encod except unsupportedencodingexcept csv input archiv csvinputarch strm creat instanc csv input archiv csvinputarch csv input archiv csvinputarch input stream inputstream unsupport encod except unsupportedencodingexcept stream pushback reader pushbackread input stream reader inputstreamread utf read readbyt string tag io except ioexcept read readlong tag read readbool string tag io except ioexcept string sval read field readfield tag equal sval read readint string tag io except ioexcept read readlong tag read readlong string tag io except ioexcept string sval read field readfield tag lval pars parselong sval lval number format except numberformatexcept ex io except ioexcept error deseri tag read readfloat string tag io except ioexcept read readdoubl tag read readdoubl string tag io except ioexcept string sval read field readfield tag dval pars parsedoubl sval dval number format except numberformatexcept ex io except ioexcept error deseri tag string read string readstr string tag io except ioexcept string sval read field readfield tag util from csv string fromcsvstr sval read buffer readbuff string tag io except ioexcept string sval read field readfield tag util from csv buffer fromcsvbuff sval read record readrecord record string tag io except ioexcept deseri tag start record startrecord string tag io except ioexcept tag equal tag c1 stream read c2 stream read c1 c2 io except ioexcept error deseri tag end record endrecord string tag io except ioexcept stream read tag equal tag io except ioexcept error deseri record io except ioexcept error deseri tag stream read stream unread index start vector startvector string tag io except ioexcept c1 stream read c2 stream read c1 c2 io except ioexcept error deseri tag csv index csvindex end vector endvector string tag io except ioexcept stream read io except ioexcept error deseri tag stream read stream unread index start map startmap string tag io except ioexcept c1 stream read c2 stream read c1 c2 io except ioexcept error deseri tag csv index csvindex end map endmap string tag io except ioexcept stream read io except ioexcept error deseri tag stream read stream unread 

csv index csvindex index done stream read stream unread io except ioexcept ex incr 

quorum zxid sync test quorumzxidsynctest zk test zktestcas quorum base quorumbas qb quorum base quorumbas befor set up setup except qb set up setup find follow connect leader test test leader testbehindlead except crank up epoch number client base clientbas wait server up waitforserverup qb host port hostport 10000 client base clientbas wait server up waitforserverup qb host port hostport 10000 zoo keeper zookeep zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close qb shutdown server shutdownserv delet file deletefil qb s1 dir s1dir delet file deletefil qb s2 dir s2dir delet file deletefil qb s3 dir s3dir delet file deletefil qb s4 dir s4dir qb setup server setupserv qb s1 start qb s2 start qb s3 start qb s4 start asserttru server didn up client base clientbas wait server up waitforserverup qb host port hostport 10000 qb s5 start string host port hostport 127 qb s5 get client port getclientport assertfals server up shouldn ahead leader client base clientbas wait server up waitforserverup host port hostport 10000 delet file deletefil file file file version file list file listfil delet find latest state snapshot log test test late log testlatelog except crank up epoch number client base clientbas wait server up waitforserverup qb host port hostport 10000 client base clientbas wait server up waitforserverup qb host port hostport 10000 zoo keeper zookeep zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 qb shutdown server shutdownserv delet log deletelog qb s1 dir s1dir delet log deletelog qb s2 dir s2dir delet log deletelog qb s3 dir s3dir delet log deletelog qb s4 dir s4dir delet log deletelog qb s5 dir s5dir qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close qb shutdown server shutdownserv qb start server startserv client base clientbas wait server up waitforserverup qb host port hostport 10000 zk zoo keeper zookeep qb host port hostport 10000 watcher process watch event watchedev event saw2 string child zk get children getchildren child equal saw2 zk close asserttru didn back time saw2 delet log deletelog file file file version file list file listfil get name getnam start startswith log delet after tear down teardown except qb tear down teardown 

measur throughput measurethroughput ms sec ms sec 1000 ms min ms min ms sec ms sec 60 ms hour ms hour ms min ms min 60 main string arg io except ioexcept merg log sourc mergedlogsourc sourc merg log sourc mergedlogsourc arg print stream printstream ps ms ps ms print stream printstream buffer output stream bufferedoutputstream file output stream fileoutputstream throughput ms print stream printstream ps sec ps sec print stream printstream buffer output stream bufferedoutputstream file output stream fileoutputstream throughput sec print stream printstream ps min ps min print stream printstream buffer output stream bufferedoutputstream file output stream fileoutputstream throughput min print stream printstream ps hour ps hour print stream printstream buffer output stream bufferedoutputstream file output stream fileoutputstream throughput hour log iter logiter iter println sourc iter sourc iter currentm currentsec currentmin currenthour hash set hashset zxid ms zxid ms hash set hashset zxid sec zxid sec zxid min zxid min zxid hour zxid hour iter ha next hasnext log entri logentri iter next transact entri transactionentri cxn transact entri transactionentri ms cxn get timestamp gettimestamp sec ms ms sec ms sec min ms ms min ms min hour ms ms hour ms hour currentm ms currentm ps ms ps ms println currentm zxid ms zxid ms size zxid sec zxid sec zxid ms zxid ms size zxid min zxid min zxid ms zxid ms size zxid hour zxid hour zxid ms zxid ms size zxid ms zxid ms clear currentsec sec currentsec ps sec ps sec println currentsec ms sec ms sec zxid sec zxid sec zxid sec zxid sec currentmin min currentmin ps min ps min println currentmin ms min ms min zxid min zxid min zxid min zxid min currenthour hour currenthour ps hour ps hour println currenthour ms hour ms hour zxid hour zxid hour zxid hour zxid hour currentm ms currentsec sec currentmin min currenthour hour zxid ms zxid ms add cxn get zxid getzxid iter close ps ms ps ms close ps sec ps sec close ps min ps min close ps hour ps hour close 

get acl respons getaclrespons record java util list org apach zookeep data acl acl org apach zookeep data stat stat get acl respons getaclrespons get acl respons getaclrespons java util list org apach zookeep data acl acl org apach zookeep data stat stat acl acl stat stat java util list org apach zookeep data acl get acl getacl acl set acl setacl java util list org apach zookeep data acl acl org apach zookeep data stat get stat getstat stat set stat setstat org apach zookeep data stat stat serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write record writerecord stat stat end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag index vidx1 start vector startvector acl vidx1 acl java util arrai list arraylist org apach zookeep data acl vidx1 done vidx1 incr org apach zookeep data acl e1 e1 org apach zookeep data acl read record readrecord e1 e1 acl add e1 end vector endvector acl stat org apach zookeep data stat read record readrecord stat stat end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write record writerecord stat stat end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar get acl respons getaclrespons unimpl equal object peer peer peer peer get acl respons getaclrespons peer peer get acl respons getaclrespons peer get acl respons getaclrespons peer peer ret ret acl equal peer acl ret ret ret stat equal peer stat ret ret ret hash code hashcod result 17 ret ret acl hash code hashcod result 37 result ret ret stat hash code hashcod result 37 result ret result string signatur get acl respons lgetaclrespons lacl lid ilid ss stat lstat lllliiiliil 

manag socket client client cnxn clientcnxn maintain list avail server connect transpar switch server connect need client cnxn clientcnxn logger log logger factori loggerfactori get logger getlogg client cnxn clientcnxn control automat watch reset enabl client automat reset watch session reconnect option allow client turn behavior set environ variabl zookeep disabl watch reset disableautowatchreset disabl watch reset disableautowatchreset var otw easi test disabl watch reset disableautowatchreset get getboolean zookeep disabl watch reset disableautowatchreset log debug enabl isdebugen log debug zookeep disabl watch reset disableautowatchreset disabl watch reset disableautowatchreset auth data authdata auth data authdata string scheme data scheme scheme data data string scheme data copi write arrai set copyonwritearrayset auth data authdata auth info authinfo copi write arrai set copyonwritearrayset auth data authdata packet sent wait respons link list linkedlist packet pend queue pendingqueu link list linkedlist packet packet sent link list linkedlist packet outgo queue outgoingqueu link list linkedlist packet connect timeout connecttimeout timeout ms client negoti server real timeout timeout request client increas decreas server appli bound valu negoti session timeout negotiatedsessiontimeout read timeout readtimeout session timeout sessiontimeout zoo keeper zookeep zoo keeper zookeep client watch manag clientwatchmanag watcher session id sessionid session passwd sessionpasswd 16 connect allow mode field valu sent data session creation handshak server side wire partit ll accept read client read readonli string chroot path chrootpath send thread sendthread send thread sendthread event thread eventthread event thread eventthread set close call latch connect don attempt connect server middl close connect client send session disconnect server part close oper close set zoo keeper zookeep host client connect host provid hostprovid host provid hostprovid set connect server establish first time chang us handl situat client session id sessionid connect read server client receiv fake session id sessionid from read server session id sessionid invalid server client find server send fake session id sessionid connect handshak establish valid session field impli haven server befor non zero session id sessionid fake valid rw server befor seenrwserverbefor zoo keeper sasl client zookeepersaslcli zoo keeper sasl client zookeepersaslcli get session id getsessionid session id sessionid get session passwd getsessionpasswd session passwd sessionpasswd get session timeout getsessiontimeout negoti session timeout negotiatedsessiontimeout overrid string string tostr string builder stringbuild sb string builder stringbuild socket address socketaddress local send thread sendthread get client cnxn socket getclientcnxnsocket get local socket address getlocalsocketaddress socket address socketaddress remot send thread sendthread get client cnxn socket getclientcnxnsocket get remot socket address getremotesocketaddress sb append sessionid 0x append hex string tohexstr get session id getsessionid append local append local append remoteserv append remot append last zxid lastzxid append last zxid lastzxid append xid append xid append sent append send thread sendthread get client cnxn socket getclientcnxnsocket get sent count getsentcount append recv append send thread sendthread get client cnxn socket getclientcnxnsocket get recv count getrecvcount append queuedpkt append outgo queue outgoingqueu size append pendingresp append pend queue pendingqueu size append queuedev append event thread eventthread wait event waitingev size sb string tostr allow pass header relev record packet request header requesthead request header requesthead repli header replyhead repli header replyhead record request record respons buffer bytebuff bb client view path differ chroot string client path clientpath server view path differ chroot string server path serverpath finish async callback asynccallback cb object ctx watch registr watchregistr watch registr watchregistr read readonli conveni ctor packet request header requesthead request header requesthead repli header replyhead repli header replyhead record request record respons watch registr watchregistr watch registr watchregistr request header requesthead repli header replyhead request respons watch registr watchregistr packet request header requesthead request header requesthead repli header replyhead repli header replyhead record request record respons watch registr watchregistr watch registr watchregistr read readonli request header requesthead request header requesthead repli header replyhead repli header replyhead request request respons respons read readonli read readonli watch registr watchregistr watch registr watchregistr creat bb createbb arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao boa write writeint len ll fill request header requesthead request header requesthead serial boa header request connect request connectrequest request serial boa connect append allow readonli flag boa write writebool read readonli read readonli request request serial boa request bao close bb buffer bytebuff wrap bao arrai tobytearrai bb put putint bb capac bb rewind io except ioexcept log warn ignor unexpect except overrid string string tostr string builder stringbuild sb string builder stringbuild sb append client path clientpath client path clientpath sb append server path serverpath server path serverpath sb append finish finish sb append header request header requesthead sb append repli header replyhead repli header replyhead sb append request request sb append respons respons jute string tostr horribl remov unnecessari newlin sb string tostr replac replaceal creat connect object actual network connect doesn get establish need start instanc method call subsequ construct param chroot path chrootpath chroot client remov from zookeep 838 param host provid hostprovid list zoo keeper zookeep server connect param session timeout sessiontimeout timeout connect param zoo keeper zookeep zookeep object connect relat param watcher watcher connect param client cnxn socket clientcnxnsocket socket implement us nio netti param read canbereadonli connect allow read mode partit io except ioexcept client cnxn clientcnxn string chroot path chrootpath host provid hostprovid host provid hostprovid session timeout sessiontimeout zoo keeper zookeep zoo keeper zookeep client watch manag clientwatchmanag watcher client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket read canbereadonli io except ioexcept chroot path chrootpath host provid hostprovid session timeout sessiontimeout zoo keeper zookeep watcher client cnxn socket clientcnxnsocket 16 read canbereadonli creat connect object actual network connect doesn get establish need start instanc method call subsequ construct param chroot path chrootpath chroot client remov from zookeep 838 param host provid hostprovid list zoo keeper zookeep server connect param session timeout sessiontimeout timeout connect param zoo keeper zookeep zookeep object connect relat param watcher watcher connect param client cnxn socket clientcnxnsocket socket implement us nio netti param session id sessionid session id establish session param session passwd sessionpasswd session passwd establish session param read canbereadonli connect allow read mode partit io except ioexcept client cnxn clientcnxn string chroot path chrootpath host provid hostprovid host provid hostprovid session timeout sessiontimeout zoo keeper zookeep zoo keeper zookeep client watch manag clientwatchmanag watcher client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket session id sessionid session passwd sessionpasswd read canbereadonli zoo keeper zookeep zoo keeper zookeep watcher watcher session id sessionid session id sessionid session passwd sessionpasswd session passwd sessionpasswd session timeout sessiontimeout session timeout sessiontimeout host provid hostprovid host provid hostprovid chroot path chrootpath chroot path chrootpath connect timeout connecttimeout session timeout sessiontimeout host provid hostprovid size read timeout readtimeout session timeout sessiontimeout read readonli read canbereadonli send thread sendthread send thread sendthread client cnxn socket clientcnxnsocket event thread eventthread event thread eventthread test us check reset watch reset watch disabl get disabl reset watch getdisableautoresetwatch disabl watch reset disableautowatchreset test us set reset param valu set disabl watch set disabl reset watch setdisableautoresetwatch disabl watch reset disableautowatchreset start send thread sendthread start event thread eventthread start object event death eventofdeath object uncaught except handler uncaughtexceptionhandl uncaught except handler uncaughtexceptionhandl uncaught except handler uncaughtexceptionhandl overrid uncaught except uncaughtexcept thread throwabl log error from get name getnam watcher set event pair watcherseteventpair set watcher watcher watch event watchedev event watcher set event pair watcherseteventpair set watcher watcher watch event watchedev event watcher watcher event event guard creat event thread eventthread event thread eventthread event thread eventthread thread name zoo keeper zookeep object creat from watcher zookeep 795 detail string make thread name makethreadnam string suffix string name thread current thread currentthread get name getnam replac replaceal event thread eventthread name suffix event thread eventthread thread link block queue linkedblockingqueu object wait event waitingev link block queue linkedblockingqueu object queu session state event thread process event hand watcher intent purpos state keeper state keeperst session state sessionst keeper state keeperst disconnect kill waskil run isrun event thread eventthread make thread name makethreadnam event thread eventthread set uncaught except handler setuncaughtexceptionhandl uncaught except handler uncaughtexceptionhandl set daemon setdaemon queue event queueevent watch event watchedev event event get type gettyp event type eventtyp session state sessionst event get state getstat session state sessionst event get state getstat materi watcher base event watcher set event pair watcherseteventpair pair watcher set event pair watcherseteventpair watcher materi event get state getstat event get type gettyp event get path getpath event queue pair watch set event process wait event waitingev add pair queue packet queuepacket packet packet kill waskil wait event waitingev run isrun wait event waitingev add packet process event processev packet wait event waitingev add packet queue event death queueeventofdeath wait event waitingev add event death eventofdeath overrid run run isrun object event wait event waitingev event event death eventofdeath kill waskil process event processev event kill waskil wait event waitingev wait event waitingev empti isempti run isrun interrupt except interruptedexcept log error event thread exit interrupt log info event thread eventthread shut down process event processev object event event watcher set event pair watcherseteventpair watcher process event watcher set event pair watcherseteventpair pair watcher set event pair watcherseteventpair event watcher watcher pair watcher watcher process pair event throwabl log error error call watcher packet packet event rc string client path clientpath client path clientpath repli header replyhead get err geterr rc repli header replyhead get err geterr cb log warn cb event thread eventthread respons exist respons existsrespons respons set data respons setdatarespons respons set acl respons setaclrespons stat callback statcallback cb stat callback statcallback cb rc respons exist respons existsrespons cb process result processresult rc client path clientpath ctx exist respons existsrespons respons get stat getstat respons set data respons setdatarespons cb process result processresult rc client path clientpath ctx set data respons setdatarespons respons get stat getstat respons set acl respons setaclrespons cb process result processresult rc client path clientpath ctx set acl respons setaclrespons respons get stat getstat cb process result processresult rc client path clientpath ctx respons get data respons getdatarespons data callback datacallback cb data callback datacallback cb get data respons getdatarespons rsp get data respons getdatarespons respons rc cb process result processresult rc client path clientpath ctx rsp get data getdata rsp get stat getstat cb process result processresult rc client path clientpath ctx respons get acl respons getaclrespons acl callback aclcallback cb acl callback aclcallback cb get acl respons getaclrespons rsp get acl respons getaclrespons respons rc cb process result processresult rc client path clientpath ctx rsp get acl getacl rsp get stat getstat cb process result processresult rc client path clientpath ctx respons get children respons getchildrenrespons children callback childrencallback cb children callback childrencallback cb get children respons getchildrenrespons rsp get children respons getchildrenrespons respons rc cb process result processresult rc client path clientpath ctx rsp get children getchildren cb process result processresult rc client path clientpath ctx respons get children2 respons getchildren2respons children2 callback children2callback cb children2 callback children2callback cb get children2 respons getchildren2respons rsp get children2 respons getchildren2respons respons rc cb process result processresult rc client path clientpath ctx rsp get children getchildren rsp get stat getstat cb process result processresult rc client path clientpath ctx respons creat respons createrespons string callback stringcallback cb string callback stringcallback cb creat respons createrespons rsp creat respons createrespons respons rc cb process result processresult rc client path clientpath ctx chroot path chrootpath rsp get path getpath rsp get path getpath substr chroot path chrootpath length cb process result processresult rc client path clientpath ctx cb callback voidcallback callback voidcallback cb callback voidcallback cb cb process result processresult rc client path clientpath ctx throwabl log error caught unexpect throwabl finish packet finishpacket packet watch registr watchregistr watch registr watchregistr repli header replyhead get err geterr cb finish notifi notifyal finish event thread eventthread queue packet queuepacket loss packet conlosspacket packet repli header replyhead state auth fail auth fail repli header replyhead set err seterr keeper except keeperexcept code authfail valu intvalu close repli header replyhead set err seterr keeper except keeperexcept code sessionexpir valu intvalu repli header replyhead set err seterr keeper except keeperexcept code connectionloss valu intvalu finish packet finishpacket last zxid lastzxid get last zxid getlastzxid last zxid lastzxid end stream except endofstreamexcept io except ioexcept serial version uid serialversionuid 5438877188796231422l end stream except endofstreamexcept string msg msg overrid string string tostr end stream except endofstreamexcept get messag getmessag session timeout except sessiontimeoutexcept io except ioexcept serial version uid serialversionuid 824482094072071178l session timeout except sessiontimeoutexcept string msg msg session expir except sessionexpiredexcept io except ioexcept serial version uid serialversionuid 1388816932076193249l session expir except sessionexpiredexcept string msg msg rw server found except rwserverfoundexcept io except ioexcept serial version uid serialversionuid 90431199887158758l rw server found except rwserverfoundexcept string msg msg packet len packetlen integ get integ getinteg jute maxbuff 4096 1024 servic outgo request queue gener heart beat spawn read thread readthread send thread sendthread thread last ping sent ns lastpingsentn client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket random random nano time nanotim first connect isfirstconnect read respons readrespons buffer bytebuff incom buffer incomingbuff io except ioexcept buffer input stream bytebufferinputstream bbi buffer input stream bytebufferinputstream incom buffer incomingbuff binari input archiv binaryinputarch bbia binari input archiv binaryinputarch get archiv getarch bbi repli header replyhead repli hdr replyhdr repli header replyhead repli hdr replyhdr deseri bbia header repli hdr replyhdr get xid getxid xid ping log debug enabl isdebugen log debug ping respons sessionid 0x hex string tohexstr session id sessionid after nano time nanotim last ping sent ns lastpingsentn 1000000 ms repli hdr replyhdr get xid getxid xid auth packet authpacket repli hdr replyhdr get err geterr keeper except keeperexcept code authfail valu intvalu state state auth fail auth fail event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp watcher event keeper state keeperst auth fail authfail log debug enabl isdebugen log debug auth sessionid 0x hex string tohexstr session id sessionid repli hdr replyhdr get xid getxid mean notif log debug enabl isdebugen log debug notif sessionid 0x hex string tohexstr session id sessionid watcher event watcherev event watcher event watcherev event deseri bbia respons convert from server path client path chroot path chrootpath string server path serverpath event get path getpath server path serverpath compar compareto chroot path chrootpath event set path setpath server path serverpath length chroot path chrootpath length event set path setpath server path serverpath substr chroot path chrootpath length log warn server path event get path getpath chroot path chroot path chrootpath watch event watchedev watch event watchedev event log debug enabl isdebugen log debug sessionid 0x hex string tohexstr session id sessionid event thread eventthread queue event queueevent sasl authent current progress construct send respons packet immedi queu respons packet client tunnel authent progress clienttunneledauthenticationinprogress get sasl request getsaslrequest request get sasl request getsaslrequest request deseri bbia token zoo keeper sasl client zookeepersaslcli respond server respondtoserv request get token gettoken client cnxn clientcnxn packet packet pend queue pendingqueu pend queue pendingqueu size io except ioexcept queue repli hdr replyhdr get xid getxid packet pend queue pendingqueu remov request process order better get respons first request packet request header requesthead get xid getxid repli hdr replyhdr get xid getxid packet repli header replyhead set err seterr keeper except keeperexcept code connectionloss valu intvalu io except ioexcept xid order xid repli hdr replyhdr get xid getxid err repli hdr replyhdr get err geterr expect xid packet request header requesthead get xid getxid packet detail packet packet repli header replyhead set xid setxid repli hdr replyhdr get xid getxid packet repli header replyhead set err seterr repli hdr replyhdr get err geterr packet repli header replyhead set zxid setzxid repli hdr replyhdr get zxid getzxid repli hdr replyhdr get zxid getzxid last zxid lastzxid repli hdr replyhdr get zxid getzxid packet respons repli hdr replyhdr get err geterr packet respons deseri bbia respons log debug enabl isdebugen log debug read repli sessionid 0x hex string tohexstr session id sessionid packet packet finish packet finishpacket packet send thread sendthread client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket make thread name makethreadnam send thread sendthread state state connect client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket set uncaught except handler setuncaughtexceptionhandl uncaught except handler uncaughtexceptionhandl set daemon setdaemon todo name method get state getstat thread get state getstat exist cleaner make send thread sendthread implement runnabl us client cnxn socket clientcnxnsocket zoo keeper zookeep state get zk state getzkstat state client cnxn socket clientcnxnsocket get client cnxn socket getclientcnxnsocket client cnxn socket clientcnxnsocket prime connect primeconnect io except ioexcept log info socket connect establish client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress initi session first connect isfirstconnect sess id sessid rw server befor seenrwserverbefor session id sessionid connect request connectrequest req conreq connect request connectrequest last zxid lastzxid session timeout sessiontimeout sess id sessid session passwd sessionpasswd outgo queue outgoingqueu add backward push front send pend watch todo here remain us zoo keeper zookeep elimin disabl watch reset disableautowatchreset list string data watch datawatch zoo keeper zookeep get data watch getdatawatch list string exist watch existwatch zoo keeper zookeep get exist watch getexistwatch list string child watch childwatch zoo keeper zookeep get child watch getchildwatch data watch datawatch empti isempti exist watch existwatch empti isempti child watch childwatch empti isempti set watch setwatch sw set watch setwatch last zxid lastzxid prepend chroot prependchroot data watch datawatch prepend chroot prependchroot exist watch existwatch prepend chroot prependchroot child watch childwatch request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod set watch setwatch set xid setxid packet packet packet repli header replyhead sw outgo queue outgoingqueu add first addfirst packet auth data authdata id auth info authinfo outgo queue outgoingqueu add first addfirst packet request header requesthead op code opcod auth auth packet authpacket id scheme id data outgo queue outgoingqueu add first addfirst packet req conreq read readonli client cnxn socket clientcnxnsocket enabl read write enablereadwriteonli log debug enabl isdebugen log debug session establish request sent client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress list string prepend chroot prependchroot list string path chroot path chrootpath path empti isempti path size string client path clientpath path get string server path serverpath handl client path clientpath client path clientpath length server path serverpath chroot path chrootpath server path serverpath chroot path chrootpath client path clientpath path set server path serverpath path send ping sendp last ping sent ns lastpingsentn nano time nanotim request header requesthead request header requesthead op code opcod ping queue packet queuepacket inet socket address inetsocketaddress rw server address rwserveraddress min ping rw timeout minpingrwtimeout 100 max ping rw timeout maxpingrwtimeout 60000 ping rw timeout pingrwtimeout min ping rw timeout minpingrwtimeout set constructor zoo keeper sasl client zookeepersaslcli login except loginexcept start connect startconnect sasl login fail saslloginfail start connect startconnect io except ioexcept state state connect inet socket address inetsocketaddress addr rw server address rwserveraddress addr rw server address rwserveraddress rw server address rwserveraddress addr host provid hostprovid next 1000 set name setnam get name getnam replac replaceal addr get host name gethostnam addr get port getport zoo keeper sasl client zookeepersaslcli zoo keeper sasl client zookeepersaslcli zookeep addr get host name gethostnam login except loginexcept authent error occur sasl client initi kerbero mean client fail authent kdc differ from authent error occur commun zookeep server handl log warn sasl configur fail connect zookeep server sasl authent zookeep server allow event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp watcher event keeper state keeperst auth fail authfail sasl login fail saslloginfail log start connect logstartconnect addr client cnxn socket clientcnxnsocket connect addr log start connect logstartconnect inet socket address inetsocketaddress addr string msg open socket connect server addr zoo keeper sasl client zookeepersaslcli msg zoo keeper sasl client zookeepersaslcli get config statu getconfigstatu log info msg string retri conn msg retri conn msg close socket connect attempt reconnect overrid run client cnxn socket clientcnxnsocket introduc session id sessionid client cnxn socket clientcnxnsocket updat updatenow client cnxn socket clientcnxnsocket updat last send heard updatelastsendandheard last ping rw server lastpingrwserv current time milli currenttimemilli state aliv isal client cnxn socket clientcnxnsocket connect isconnect first connect isfirstconnect thread sleep next nextint 1000 interrupt except interruptedexcept log warn unexpect except don establish connect close close state aliv isal start connect startconnect client cnxn socket clientcnxnsocket updat last send heard updatelastsendandheard state connect isconnect determin send auth fail authfail event zoo keeper sasl client zookeepersaslcli send auth event sendauthev zoo keeper sasl client zookeepersaslcli get sasl state getsaslst zoo keeper sasl client zookeepersaslcli sasl state saslstat initi zoo keeper sasl client zookeepersaslcli initi client cnxn clientcnxn sasl except saslexcept log error sasl authent zookeep quorum member fail state state auth fail auth fail send auth event sendauthev keeper state keeperst auth state authstat zoo keeper sasl client zookeepersaslcli get keeper state getkeeperst auth state authstat auth state authstat keeper state keeperst auth fail authfail authent error occur authent zookeep server state state auth fail auth fail send auth event sendauthev auth state authstat keeper state keeperst sasl authent saslauthent send auth event sendauthev send auth event sendauthev event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp auth state authstat read timeout readtimeout client cnxn socket clientcnxnsocket get idl recv getidlerecv connect timeout connecttimeout client cnxn socket clientcnxnsocket get idl recv getidlerecv session timeout except sessiontimeoutexcept client session time heard from server client cnxn socket clientcnxnsocket get idl recv getidlerecv ms sessionid 0x hex string tohexstr session id sessionid state connect isconnect time next ping timetonextp read timeout readtimeout client cnxn socket clientcnxnsocket get idl send getidlesend time next ping timetonextp send ping sendp client cnxn socket clientcnxnsocket updat last send updatelastsend time next ping timetonextp time next ping timetonextp read mode seek read write server state state connectedreadonli current time milli currenttimemilli idl ping rw server idlepingrwserv last ping rw server lastpingrwserv idl ping rw server idlepingrwserv ping rw timeout pingrwtimeout last ping rw server lastpingrwserv idl ping rw server idlepingrwserv ping rw timeout pingrwtimeout math min ping rw timeout pingrwtimeout max ping rw timeout maxpingrwtimeout ping rw server pingrwserv math min ping rw timeout pingrwtimeout idl ping rw server idlepingrwserv client cnxn socket clientcnxnsocket transport dotransport pend queue pendingqueu outgo queue outgoingqueu client cnxn clientcnxn throwabl close log debug enabl isdebugen close expect log debug except thrown close send thread session 0x hex string tohexstr get session id getsessionid get messag getmessag ugli better speak up session expir except sessionexpiredexcept log info get messag getmessag close socket connect session timeout except sessiontimeoutexcept log info get messag getmessag retri conn msg retri conn msg end stream except endofstreamexcept log info get messag getmessag retri conn msg retri conn msg rw server found except rwserverfoundexcept log info get messag getmessag log warn session 0x hex string tohexstr get session id getsessionid server client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress unexpect error retri conn msg retri conn msg cleanup state aliv isal event thread eventthread queue event queueevent watch event watchedev event event type eventtyp event keeper state keeperst disconnect client cnxn socket clientcnxnsocket updat updatenow client cnxn socket clientcnxnsocket updat last send heard updatelastsendandheard cleanup client cnxn socket clientcnxnsocket close state aliv isal event thread eventthread queue event queueevent watch event watchedev event event type eventtyp event keeper state keeperst disconnect zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac get text trace level gettexttracelevel send thread sendthread exitedloop ping rw server pingrwserv rw server found except rwserverfoundexcept string result inet socket address inetsocketaddress addr host provid hostprovid next log info check server addr timeout ping rw timeout pingrwtimeout socket sock socket addr get host name gethostnam addr get port getport sock set linger setsoling sock set timeout setsotimeout 1000 sock set tcp delai settcpnodelai sock get output stream getoutputstream write isro get byte getbyt sock get output stream getoutputstream flush sock shutdown output shutdownoutput buffer reader bufferedread br buffer reader bufferedread input stream reader inputstreamread sock get input stream getinputstream result br read line readlin sock close br close connect except connectexcept ignor mean server up io except ioexcept unexpect error warn log warn except seek server get messag getmessag rw equal result ping rw timeout pingrwtimeout min ping rw timeout minpingrwtimeout save found address us next connect attempt rw server address rwserveraddress addr rw server found except rwserverfoundexcept major server found addr get host name gethostnam addr get port getport cleanup client cnxn socket clientcnxnsocket cleanup pend queue pendingqueu packet pend queue pendingqueu loss packet conlosspacket pend queue pendingqueu clear outgo queue outgoingqueu packet outgo queue outgoingqueu loss packet conlosspacket outgo queue outgoingqueu clear callback invok client cnxn socket clientcnxnsocket connect ha establish param negoti session timeout negotiatedsessiontimeout param session id sessionid param session passwd sessionpasswd param ro isro io except ioexcept connect onconnect negoti session timeout negotiatedsessiontimeout session id sessionid session passwd sessionpasswd ro isro io except ioexcept negoti session timeout negotiatedsessiontimeout negoti session timeout negotiatedsessiontimeout negoti session timeout negotiatedsessiontimeout state state close event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp watcher event keeper state keeperst expir event thread eventthread queue event death queueeventofdeath session expir except sessionexpiredexcept unabl reconnect zoo keeper zookeep servic session 0x hex string tohexstr session id sessionid ha expir read readonli ro isro log error read write client connect read server read timeout readtimeout negoti session timeout negotiatedsessiontimeout connect timeout connecttimeout negoti session timeout negotiatedsessiontimeout host provid hostprovid size host provid hostprovid connect onconnect session id sessionid session id sessionid session passwd sessionpasswd session passwd sessionpasswd state ro isro state connectedreadonli state connect rw server befor seenrwserverbefor ro isro log info session establish complet server client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress sessionid 0x hex string tohexstr session id sessionid negoti timeout negoti session timeout negotiatedsessiontimeout ro isro read mode keeper state keeperst event state eventst ro isro keeper state keeperst connect read connectedreadonli keeper state keeperst sync connect syncconnect event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp event state eventst close state state close client cnxn socket clientcnxnsocket wakeup cnxn wakeupcnxn testabl close socket testableclosesocket io except ioexcept client cnxn socket clientcnxnsocket testabl close socket testableclosesocket client tunnel authent progress clienttunneledauthenticationinprogress sasl login fail sasl login fail saslloginfail send thread sendthread ha creat authent object authent earliest stage progress zoo keeper sasl client zookeepersaslcli authent object exist ask progress zoo keeper sasl client zookeepersaslcli client tunnel authent progress clienttunneledauthenticationinprogress send packet sendpacket packet io except ioexcept client cnxn socket clientcnxnsocket send packet sendpacket shutdown send event thread method call directli call part close oper method primarili here allow test verifi disconnect behavior disconnect log debug enabl isdebugen log debug disconnect client session 0x hex string tohexstr get session id getsessionid send thread sendthread close event thread eventthread queue event death queueeventofdeath close connect includ send session disconnect server shutdown send event thread io except ioexcept close io except ioexcept log debug enabl isdebugen log debug close client session 0x hex string tohexstr get session id getsessionid request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod close session closesess submit request submitrequest interrupt except interruptedexcept ignor close send event thread disconnect xid state state state connect connect get xid getxid call extern client cnxn nio clientcnxnnio io doio packet sent from outgo queue outgoingqueu server get xid getxid get xid getxid xid repli header replyhead submit request submitrequest request header requesthead record request record respons watch registr watchregistr watch registr watchregistr interrupt except interruptedexcept repli header replyhead repli header replyhead packet packet queue packet queuepacket request respons watch registr watchregistr packet packet finish packet wait enabl write enablewrit send thread sendthread get client cnxn socket getclientcnxnsocket enabl write enablewrit send packet sendpacket record request record respons async callback asynccallback cb op code opcod io except ioexcept gener xid sent immedi call send thread sendthread send packet sendpacket xid get xid getxid request header requesthead request header requesthead set xid setxid xid set type settyp op code opcod repli header replyhead repli header replyhead set xid setxid xid packet packet request respons cb cb send thread sendthread send packet sendpacket packet queue packet queuepacket request header requesthead repli header replyhead record request record respons async callback asynccallback cb string client path clientpath string server path serverpath object ctx watch registr watchregistr watch registr watchregistr packet packet note gener xid packet gener send time implement client cnxn socket clientcnxnsocket io doio packet sent outgo queue outgoingqueu packet packet request respons watch registr watchregistr packet cb cb packet ctx ctx packet client path clientpath client path clientpath packet server path serverpath server path serverpath state aliv isal close loss packet conlosspacket packet client ask close session mark close get type gettyp op code opcod close session closesess close outgo queue outgoingqueu add packet send thread sendthread get client cnxn socket getclientcnxnsocket wakeup cnxn wakeupcnxn packet add auth info addauthinfo string scheme auth state aliv isal auth info authinfo add auth data authdata scheme auth queue packet queuepacket request header requesthead op code opcod auth auth packet authpacket scheme auth state get state getstat state 

auth data authdata auth data authdata string scheme data scheme scheme data data string scheme data 

allow pass header relev record packet request header requesthead request header requesthead repli header replyhead repli header replyhead record request record respons buffer bytebuff bb client view path differ chroot string client path clientpath server view path differ chroot string server path serverpath finish async callback asynccallback cb object ctx watch registr watchregistr watch registr watchregistr read readonli conveni ctor packet request header requesthead request header requesthead repli header replyhead repli header replyhead record request record respons watch registr watchregistr watch registr watchregistr request header requesthead repli header replyhead request respons watch registr watchregistr packet request header requesthead request header requesthead repli header replyhead repli header replyhead record request record respons watch registr watchregistr watch registr watchregistr read readonli request header requesthead request header requesthead repli header replyhead repli header replyhead request request respons respons read readonli read readonli watch registr watchregistr watch registr watchregistr creat bb createbb arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao boa write writeint len ll fill request header requesthead request header requesthead serial boa header request connect request connectrequest request serial boa connect append allow readonli flag boa write writebool read readonli read readonli request request serial boa request bao close bb buffer bytebuff wrap bao arrai tobytearrai bb put putint bb capac bb rewind io except ioexcept log warn ignor unexpect except overrid string string tostr string builder stringbuild sb string builder stringbuild sb append client path clientpath client path clientpath sb append server path serverpath server path serverpath sb append finish finish sb append header request header requesthead sb append repli header replyhead repli header replyhead sb append request request sb append respons respons jute string tostr horribl remov unnecessari newlin sb string tostr replac replaceal 

watcher set event pair watcherseteventpair set watcher watcher watch event watchedev event watcher set event pair watcherseteventpair set watcher watcher watch event watchedev event watcher watcher event event 

event thread eventthread thread link block queue linkedblockingqueu object wait event waitingev link block queue linkedblockingqueu object queu session state event thread process event hand watcher intent purpos state keeper state keeperst session state sessionst keeper state keeperst disconnect kill waskil run isrun event thread eventthread make thread name makethreadnam event thread eventthread set uncaught except handler setuncaughtexceptionhandl uncaught except handler uncaughtexceptionhandl set daemon setdaemon queue event queueevent watch event watchedev event event get type gettyp event type eventtyp session state sessionst event get state getstat session state sessionst event get state getstat materi watcher base event watcher set event pair watcherseteventpair pair watcher set event pair watcherseteventpair watcher materi event get state getstat event get type gettyp event get path getpath event queue pair watch set event process wait event waitingev add pair queue packet queuepacket packet packet kill waskil wait event waitingev run isrun wait event waitingev add packet process event processev packet wait event waitingev add packet queue event death queueeventofdeath wait event waitingev add event death eventofdeath overrid run run isrun object event wait event waitingev event event death eventofdeath kill waskil process event processev event kill waskil wait event waitingev wait event waitingev empti isempti run isrun interrupt except interruptedexcept log error event thread exit interrupt log info event thread eventthread shut down process event processev object event event watcher set event pair watcherseteventpair watcher process event watcher set event pair watcherseteventpair pair watcher set event pair watcherseteventpair event watcher watcher pair watcher watcher process pair event throwabl log error error call watcher packet packet event rc string client path clientpath client path clientpath repli header replyhead get err geterr rc repli header replyhead get err geterr cb log warn cb event thread eventthread respons exist respons existsrespons respons set data respons setdatarespons respons set acl respons setaclrespons stat callback statcallback cb stat callback statcallback cb rc respons exist respons existsrespons cb process result processresult rc client path clientpath ctx exist respons existsrespons respons get stat getstat respons set data respons setdatarespons cb process result processresult rc client path clientpath ctx set data respons setdatarespons respons get stat getstat respons set acl respons setaclrespons cb process result processresult rc client path clientpath ctx set acl respons setaclrespons respons get stat getstat cb process result processresult rc client path clientpath ctx respons get data respons getdatarespons data callback datacallback cb data callback datacallback cb get data respons getdatarespons rsp get data respons getdatarespons respons rc cb process result processresult rc client path clientpath ctx rsp get data getdata rsp get stat getstat cb process result processresult rc client path clientpath ctx respons get acl respons getaclrespons acl callback aclcallback cb acl callback aclcallback cb get acl respons getaclrespons rsp get acl respons getaclrespons respons rc cb process result processresult rc client path clientpath ctx rsp get acl getacl rsp get stat getstat cb process result processresult rc client path clientpath ctx respons get children respons getchildrenrespons children callback childrencallback cb children callback childrencallback cb get children respons getchildrenrespons rsp get children respons getchildrenrespons respons rc cb process result processresult rc client path clientpath ctx rsp get children getchildren cb process result processresult rc client path clientpath ctx respons get children2 respons getchildren2respons children2 callback children2callback cb children2 callback children2callback cb get children2 respons getchildren2respons rsp get children2 respons getchildren2respons respons rc cb process result processresult rc client path clientpath ctx rsp get children getchildren rsp get stat getstat cb process result processresult rc client path clientpath ctx respons creat respons createrespons string callback stringcallback cb string callback stringcallback cb creat respons createrespons rsp creat respons createrespons respons rc cb process result processresult rc client path clientpath ctx chroot path chrootpath rsp get path getpath rsp get path getpath substr chroot path chrootpath length cb process result processresult rc client path clientpath ctx cb callback voidcallback callback voidcallback cb callback voidcallback cb cb process result processresult rc client path clientpath ctx throwabl log error caught unexpect throwabl 

end stream except endofstreamexcept io except ioexcept serial version uid serialversionuid 5438877188796231422l end stream except endofstreamexcept string msg msg overrid string string tostr end stream except endofstreamexcept get messag getmessag 

session timeout except sessiontimeoutexcept io except ioexcept serial version uid serialversionuid 824482094072071178l session timeout except sessiontimeoutexcept string msg msg 

session expir except sessionexpiredexcept io except ioexcept serial version uid serialversionuid 1388816932076193249l session expir except sessionexpiredexcept string msg msg 

rw server found except rwserverfoundexcept io except ioexcept serial version uid serialversionuid 90431199887158758l rw server found except rwserverfoundexcept string msg msg 

servic outgo request queue gener heart beat spawn read thread readthread send thread sendthread thread last ping sent ns lastpingsentn client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket random random nano time nanotim first connect isfirstconnect read respons readrespons buffer bytebuff incom buffer incomingbuff io except ioexcept buffer input stream bytebufferinputstream bbi buffer input stream bytebufferinputstream incom buffer incomingbuff binari input archiv binaryinputarch bbia binari input archiv binaryinputarch get archiv getarch bbi repli header replyhead repli hdr replyhdr repli header replyhead repli hdr replyhdr deseri bbia header repli hdr replyhdr get xid getxid xid ping log debug enabl isdebugen log debug ping respons sessionid 0x hex string tohexstr session id sessionid after nano time nanotim last ping sent ns lastpingsentn 1000000 ms repli hdr replyhdr get xid getxid xid auth packet authpacket repli hdr replyhdr get err geterr keeper except keeperexcept code authfail valu intvalu state state auth fail auth fail event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp watcher event keeper state keeperst auth fail authfail log debug enabl isdebugen log debug auth sessionid 0x hex string tohexstr session id sessionid repli hdr replyhdr get xid getxid mean notif log debug enabl isdebugen log debug notif sessionid 0x hex string tohexstr session id sessionid watcher event watcherev event watcher event watcherev event deseri bbia respons convert from server path client path chroot path chrootpath string server path serverpath event get path getpath server path serverpath compar compareto chroot path chrootpath event set path setpath server path serverpath length chroot path chrootpath length event set path setpath server path serverpath substr chroot path chrootpath length log warn server path event get path getpath chroot path chroot path chrootpath watch event watchedev watch event watchedev event log debug enabl isdebugen log debug sessionid 0x hex string tohexstr session id sessionid event thread eventthread queue event queueevent sasl authent current progress construct send respons packet immedi queu respons packet client tunnel authent progress clienttunneledauthenticationinprogress get sasl request getsaslrequest request get sasl request getsaslrequest request deseri bbia token zoo keeper sasl client zookeepersaslcli respond server respondtoserv request get token gettoken client cnxn clientcnxn packet packet pend queue pendingqueu pend queue pendingqueu size io except ioexcept queue repli hdr replyhdr get xid getxid packet pend queue pendingqueu remov request process order better get respons first request packet request header requesthead get xid getxid repli hdr replyhdr get xid getxid packet repli header replyhead set err seterr keeper except keeperexcept code connectionloss valu intvalu io except ioexcept xid order xid repli hdr replyhdr get xid getxid err repli hdr replyhdr get err geterr expect xid packet request header requesthead get xid getxid packet detail packet packet repli header replyhead set xid setxid repli hdr replyhdr get xid getxid packet repli header replyhead set err seterr repli hdr replyhdr get err geterr packet repli header replyhead set zxid setzxid repli hdr replyhdr get zxid getzxid repli hdr replyhdr get zxid getzxid last zxid lastzxid repli hdr replyhdr get zxid getzxid packet respons repli hdr replyhdr get err geterr packet respons deseri bbia respons log debug enabl isdebugen log debug read repli sessionid 0x hex string tohexstr session id sessionid packet packet finish packet finishpacket packet send thread sendthread client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket make thread name makethreadnam send thread sendthread state state connect client cnxn socket clientcnxnsocket client cnxn socket clientcnxnsocket set uncaught except handler setuncaughtexceptionhandl uncaught except handler uncaughtexceptionhandl set daemon setdaemon todo name method get state getstat thread get state getstat exist cleaner make send thread sendthread implement runnabl us client cnxn socket clientcnxnsocket zoo keeper zookeep state get zk state getzkstat state client cnxn socket clientcnxnsocket get client cnxn socket getclientcnxnsocket client cnxn socket clientcnxnsocket prime connect primeconnect io except ioexcept log info socket connect establish client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress initi session first connect isfirstconnect sess id sessid rw server befor seenrwserverbefor session id sessionid connect request connectrequest req conreq connect request connectrequest last zxid lastzxid session timeout sessiontimeout sess id sessid session passwd sessionpasswd outgo queue outgoingqueu add backward push front send pend watch todo here remain us zoo keeper zookeep elimin disabl watch reset disableautowatchreset list string data watch datawatch zoo keeper zookeep get data watch getdatawatch list string exist watch existwatch zoo keeper zookeep get exist watch getexistwatch list string child watch childwatch zoo keeper zookeep get child watch getchildwatch data watch datawatch empti isempti exist watch existwatch empti isempti child watch childwatch empti isempti set watch setwatch sw set watch setwatch last zxid lastzxid prepend chroot prependchroot data watch datawatch prepend chroot prependchroot exist watch existwatch prepend chroot prependchroot child watch childwatch request header requesthead request header requesthead set type settyp zoo def zoodef op code opcod set watch setwatch set xid setxid packet packet packet repli header replyhead sw outgo queue outgoingqueu add first addfirst packet auth data authdata id auth info authinfo outgo queue outgoingqueu add first addfirst packet request header requesthead op code opcod auth auth packet authpacket id scheme id data outgo queue outgoingqueu add first addfirst packet req conreq read readonli client cnxn socket clientcnxnsocket enabl read write enablereadwriteonli log debug enabl isdebugen log debug session establish request sent client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress list string prepend chroot prependchroot list string path chroot path chrootpath path empti isempti path size string client path clientpath path get string server path serverpath handl client path clientpath client path clientpath length server path serverpath chroot path chrootpath server path serverpath chroot path chrootpath client path clientpath path set server path serverpath path send ping sendp last ping sent ns lastpingsentn nano time nanotim request header requesthead request header requesthead op code opcod ping queue packet queuepacket inet socket address inetsocketaddress rw server address rwserveraddress min ping rw timeout minpingrwtimeout 100 max ping rw timeout maxpingrwtimeout 60000 ping rw timeout pingrwtimeout min ping rw timeout minpingrwtimeout set constructor zoo keeper sasl client zookeepersaslcli login except loginexcept start connect startconnect sasl login fail saslloginfail start connect startconnect io except ioexcept state state connect inet socket address inetsocketaddress addr rw server address rwserveraddress addr rw server address rwserveraddress rw server address rwserveraddress addr host provid hostprovid next 1000 set name setnam get name getnam replac replaceal addr get host name gethostnam addr get port getport zoo keeper sasl client zookeepersaslcli zoo keeper sasl client zookeepersaslcli zookeep addr get host name gethostnam login except loginexcept authent error occur sasl client initi kerbero mean client fail authent kdc differ from authent error occur commun zookeep server handl log warn sasl configur fail connect zookeep server sasl authent zookeep server allow event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp watcher event keeper state keeperst auth fail authfail sasl login fail saslloginfail log start connect logstartconnect addr client cnxn socket clientcnxnsocket connect addr log start connect logstartconnect inet socket address inetsocketaddress addr string msg open socket connect server addr zoo keeper sasl client zookeepersaslcli msg zoo keeper sasl client zookeepersaslcli get config statu getconfigstatu log info msg string retri conn msg retri conn msg close socket connect attempt reconnect overrid run client cnxn socket clientcnxnsocket introduc session id sessionid client cnxn socket clientcnxnsocket updat updatenow client cnxn socket clientcnxnsocket updat last send heard updatelastsendandheard last ping rw server lastpingrwserv current time milli currenttimemilli state aliv isal client cnxn socket clientcnxnsocket connect isconnect first connect isfirstconnect thread sleep next nextint 1000 interrupt except interruptedexcept log warn unexpect except don establish connect close close state aliv isal start connect startconnect client cnxn socket clientcnxnsocket updat last send heard updatelastsendandheard state connect isconnect determin send auth fail authfail event zoo keeper sasl client zookeepersaslcli send auth event sendauthev zoo keeper sasl client zookeepersaslcli get sasl state getsaslst zoo keeper sasl client zookeepersaslcli sasl state saslstat initi zoo keeper sasl client zookeepersaslcli initi client cnxn clientcnxn sasl except saslexcept log error sasl authent zookeep quorum member fail state state auth fail auth fail send auth event sendauthev keeper state keeperst auth state authstat zoo keeper sasl client zookeepersaslcli get keeper state getkeeperst auth state authstat auth state authstat keeper state keeperst auth fail authfail authent error occur authent zookeep server state state auth fail auth fail send auth event sendauthev auth state authstat keeper state keeperst sasl authent saslauthent send auth event sendauthev send auth event sendauthev event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp auth state authstat read timeout readtimeout client cnxn socket clientcnxnsocket get idl recv getidlerecv connect timeout connecttimeout client cnxn socket clientcnxnsocket get idl recv getidlerecv session timeout except sessiontimeoutexcept client session time heard from server client cnxn socket clientcnxnsocket get idl recv getidlerecv ms sessionid 0x hex string tohexstr session id sessionid state connect isconnect time next ping timetonextp read timeout readtimeout client cnxn socket clientcnxnsocket get idl send getidlesend time next ping timetonextp send ping sendp client cnxn socket clientcnxnsocket updat last send updatelastsend time next ping timetonextp time next ping timetonextp read mode seek read write server state state connectedreadonli current time milli currenttimemilli idl ping rw server idlepingrwserv last ping rw server lastpingrwserv idl ping rw server idlepingrwserv ping rw timeout pingrwtimeout last ping rw server lastpingrwserv idl ping rw server idlepingrwserv ping rw timeout pingrwtimeout math min ping rw timeout pingrwtimeout max ping rw timeout maxpingrwtimeout ping rw server pingrwserv math min ping rw timeout pingrwtimeout idl ping rw server idlepingrwserv client cnxn socket clientcnxnsocket transport dotransport pend queue pendingqueu outgo queue outgoingqueu client cnxn clientcnxn throwabl close log debug enabl isdebugen close expect log debug except thrown close send thread session 0x hex string tohexstr get session id getsessionid get messag getmessag ugli better speak up session expir except sessionexpiredexcept log info get messag getmessag close socket connect session timeout except sessiontimeoutexcept log info get messag getmessag retri conn msg retri conn msg end stream except endofstreamexcept log info get messag getmessag retri conn msg retri conn msg rw server found except rwserverfoundexcept log info get messag getmessag log warn session 0x hex string tohexstr get session id getsessionid server client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress unexpect error retri conn msg retri conn msg cleanup state aliv isal event thread eventthread queue event queueevent watch event watchedev event event type eventtyp event keeper state keeperst disconnect client cnxn socket clientcnxnsocket updat updatenow client cnxn socket clientcnxnsocket updat last send heard updatelastsendandheard cleanup client cnxn socket clientcnxnsocket close state aliv isal event thread eventthread queue event queueevent watch event watchedev event event type eventtyp event keeper state keeperst disconnect zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac get text trace level gettexttracelevel send thread sendthread exitedloop ping rw server pingrwserv rw server found except rwserverfoundexcept string result inet socket address inetsocketaddress addr host provid hostprovid next log info check server addr timeout ping rw timeout pingrwtimeout socket sock socket addr get host name gethostnam addr get port getport sock set linger setsoling sock set timeout setsotimeout 1000 sock set tcp delai settcpnodelai sock get output stream getoutputstream write isro get byte getbyt sock get output stream getoutputstream flush sock shutdown output shutdownoutput buffer reader bufferedread br buffer reader bufferedread input stream reader inputstreamread sock get input stream getinputstream result br read line readlin sock close br close connect except connectexcept ignor mean server up io except ioexcept unexpect error warn log warn except seek server get messag getmessag rw equal result ping rw timeout pingrwtimeout min ping rw timeout minpingrwtimeout save found address us next connect attempt rw server address rwserveraddress addr rw server found except rwserverfoundexcept major server found addr get host name gethostnam addr get port getport cleanup client cnxn socket clientcnxnsocket cleanup pend queue pendingqueu packet pend queue pendingqueu loss packet conlosspacket pend queue pendingqueu clear outgo queue outgoingqueu packet outgo queue outgoingqueu loss packet conlosspacket outgo queue outgoingqueu clear callback invok client cnxn socket clientcnxnsocket connect ha establish param negoti session timeout negotiatedsessiontimeout param session id sessionid param session passwd sessionpasswd param ro isro io except ioexcept connect onconnect negoti session timeout negotiatedsessiontimeout session id sessionid session passwd sessionpasswd ro isro io except ioexcept negoti session timeout negotiatedsessiontimeout negoti session timeout negotiatedsessiontimeout negoti session timeout negotiatedsessiontimeout state state close event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp watcher event keeper state keeperst expir event thread eventthread queue event death queueeventofdeath session expir except sessionexpiredexcept unabl reconnect zoo keeper zookeep servic session 0x hex string tohexstr session id sessionid ha expir read readonli ro isro log error read write client connect read server read timeout readtimeout negoti session timeout negotiatedsessiontimeout connect timeout connecttimeout negoti session timeout negotiatedsessiontimeout host provid hostprovid size host provid hostprovid connect onconnect session id sessionid session id sessionid session passwd sessionpasswd session passwd sessionpasswd state ro isro state connectedreadonli state connect rw server befor seenrwserverbefor ro isro log info session establish complet server client cnxn socket clientcnxnsocket get remot socket address getremotesocketaddress sessionid 0x hex string tohexstr session id sessionid negoti timeout negoti session timeout negotiatedsessiontimeout ro isro read mode keeper state keeperst event state eventst ro isro keeper state keeperst connect read connectedreadonli keeper state keeperst sync connect syncconnect event thread eventthread queue event queueevent watch event watchedev watcher event event type eventtyp event state eventst close state state close client cnxn socket clientcnxnsocket wakeup cnxn wakeupcnxn testabl close socket testableclosesocket io except ioexcept client cnxn socket clientcnxnsocket testabl close socket testableclosesocket client tunnel authent progress clienttunneledauthenticationinprogress sasl login fail sasl login fail saslloginfail send thread sendthread ha creat authent object authent earliest stage progress zoo keeper sasl client zookeepersaslcli authent object exist ask progress zoo keeper sasl client zookeepersaslcli client tunnel authent progress clienttunneledauthenticationinprogress send packet sendpacket packet io except ioexcept client cnxn socket clientcnxnsocket send packet sendpacket 

delet request deleterequest record string path version delet request deleterequest delet request deleterequest string path version path path version version string get path getpath path set path setpath string path get version getvers version set version setvers version serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writeint version version end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path version read readint version end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writeint version version end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer delet request deleterequest cast except classcastexcept compar differ type record delet request deleterequest peer delet request deleterequest peer peer ret ret path compar compareto peer path ret ret ret version peer version version peer version ret ret ret equal object peer peer peer peer delet request deleterequest peer peer delet request deleterequest peer delet request deleterequest peer peer ret ret path equal peer path ret ret ret version peer version ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret version result 37 result ret result string signatur delet request ldeleterequest si 

error txn errortxn record err error txn errortxn error txn errortxn err err err get err geterr err set err seterr err serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint err err end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag err read readint err end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint err err end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer error txn errortxn cast except classcastexcept compar differ type record error txn errortxn peer error txn errortxn peer peer ret ret err peer err err peer err ret ret ret equal object peer peer peer peer error txn errortxn peer peer error txn errortxn peer error txn errortxn peer peer ret ret err peer err ret ret ret hash code hashcod result 17 ret ret err result 37 result ret result string signatur error txn lerrortxn 

base non parameter zk test basic util share test log event test execut start stop success failur run runwith unit4 zk test runner junit4zktestrunn zk test zktestcas logger log logger factori loggerfactori get logger getlogg zk test zktestcas string test name testnam string get test name gettestnam test name testnam rule method rule methodrul watchman test watchman testwatchman overrid start framework method frameworkmethod method test name testnam method get name getnam log info start test name testnam overrid finish framework method frameworkmethod method log info finish test name testnam overrid succeed framework method frameworkmethod method log info succeed test name testnam overrid fail throwabl framework method frameworkmethod method log info fail test name testnam 

set watch setwatch record rel zxid relativezxid java util list string data watch datawatch java util list string exist watch existwatch java util list string child watch childwatch set watch setwatch set watch setwatch rel zxid relativezxid java util list string data watch datawatch java util list string exist watch existwatch java util list string child watch childwatch rel zxid relativezxid rel zxid relativezxid data watch datawatch data watch datawatch exist watch existwatch exist watch existwatch child watch childwatch child watch childwatch get rel zxid getrelativezxid rel zxid relativezxid set rel zxid setrelativezxid rel zxid relativezxid java util list string get data watch getdatawatch data watch datawatch set data watch setdatawatch java util list string data watch datawatch java util list string get exist watch getexistwatch exist watch existwatch set exist watch setexistwatch java util list string exist watch existwatch java util list string get child watch getchildwatch child watch childwatch set child watch setchildwatch java util list string child watch childwatch serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writelong rel zxid relativezxid rel zxid relativezxid start vector startvector data watch datawatch data watch datawatch data watch datawatch len1 data watch datawatch size vidx1 vidx1 len1 vidx1 string e1 string data watch datawatch get vidx1 write string writestr e1 e1 end vector endvector data watch datawatch data watch datawatch start vector startvector exist watch existwatch exist watch existwatch exist watch existwatch len1 exist watch existwatch size vidx1 vidx1 len1 vidx1 string e1 string exist watch existwatch get vidx1 write string writestr e1 e1 end vector endvector exist watch existwatch exist watch existwatch start vector startvector child watch childwatch child watch childwatch child watch childwatch len1 child watch childwatch size vidx1 vidx1 len1 vidx1 string e1 string child watch childwatch get vidx1 write string writestr e1 e1 end vector endvector child watch childwatch child watch childwatch end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag rel zxid relativezxid read readlong rel zxid relativezxid index vidx1 start vector startvector data watch datawatch vidx1 data watch datawatch java util arrai list arraylist string vidx1 done vidx1 incr string e1 e1 read string readstr e1 data watch datawatch add e1 end vector endvector data watch datawatch index vidx1 start vector startvector exist watch existwatch vidx1 exist watch existwatch java util arrai list arraylist string vidx1 done vidx1 incr string e1 e1 read string readstr e1 exist watch existwatch add e1 end vector endvector exist watch existwatch index vidx1 start vector startvector child watch childwatch vidx1 child watch childwatch java util arrai list arraylist string vidx1 done vidx1 incr string e1 e1 read string readstr e1 child watch childwatch add e1 end vector endvector child watch childwatch end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writelong rel zxid relativezxid rel zxid relativezxid start vector startvector data watch datawatch data watch datawatch data watch datawatch len1 data watch datawatch size vidx1 vidx1 len1 vidx1 string e1 string data watch datawatch get vidx1 write string writestr e1 e1 end vector endvector data watch datawatch data watch datawatch start vector startvector exist watch existwatch exist watch existwatch exist watch existwatch len1 exist watch existwatch size vidx1 vidx1 len1 vidx1 string e1 string exist watch existwatch get vidx1 write string writestr e1 e1 end vector endvector exist watch existwatch exist watch existwatch start vector startvector child watch childwatch child watch childwatch child watch childwatch len1 child watch childwatch size vidx1 vidx1 len1 vidx1 string e1 string child watch childwatch get vidx1 write string writestr e1 e1 end vector endvector child watch childwatch child watch childwatch end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar set watch setwatch unimpl equal object peer peer peer peer set watch setwatch peer peer set watch setwatch peer set watch setwatch peer peer ret ret rel zxid relativezxid peer rel zxid relativezxid ret ret ret data watch datawatch equal peer data watch datawatch ret ret ret exist watch existwatch equal peer exist watch existwatch ret ret ret child watch childwatch equal peer child watch childwatch ret ret ret hash code hashcod result 17 ret ret rel zxid relativezxid rel zxid relativezxid 32 result 37 result ret ret data watch datawatch hash code hashcod result 37 result ret ret exist watch existwatch hash code hashcod result 37 result ret ret child watch childwatch hash code hashcod result 37 result ret result string signatur set watch lsetwatch 

observ bean observerbean observ bean observerbean zoo keeper server bean zookeeperserverbean observ mx bean observermxbean observ observ observ bean observerbean observ observ zoo keeper server zookeeperserv zk zk observ observ get pend revalid count getpendingrevalidationcount observ get pend revalid count getpendingrevalidationscount string get quorum address getquorumaddress observ get socket getsocket string tostr 

contain hadoop record ddl main compon file filenam list includ file record defin file file jfile string name mname arrai list arraylist file jfile incl file minclfil arrai list arraylist record jrecord record mrecord creat instanc file jfile param name possibl full pathnam file param incl file inclfil includ file file jfile param rec list reclist list record defin file file jfile string name arrai list arraylist file jfile incl file inclfil arrai list arraylist record jrecord rec list reclist name mname name incl file minclfil incl file inclfil record mrecord rec list reclist strip pathnam compon basenam string get name getnam idx name mname last index lastindexof idx name mname substr idx name mname gener record code languag languag lowercas param output directori outputdirectori gen code gencod string languag file output directori outputdirectori io except ioexcept equal languag cpp gener cppgener gen cpp gener cppgener name mname incl file minclfil record mrecord output directori outputdirectori gen gen code gencod java equal languag java gener javagener gen java gener javagener name mname incl file minclfil record mrecord output directori outputdirectori gen gen code gencod equal languag gener cgener gen gener cgener name mname incl file minclfil record mrecord output directori outputdirectori gen gen code gencod csharp equal languag sharp gener csharpgener gen sharp gener csharpgener name mname incl file minclfil record mrecord output directori outputdirectori gen gen code gencod io except ioexcept cannnot recogn languag languag 

leader elect support librari implement zoo keeper zookeep elect recip support librari meant simplifi construct exclus leader apach zoo keeper zookeep applic leader process servic exclus configur instanc hostnam least on listen implement link leader elect awar leaderelectionawar instanc link zoo keeper zookeep proper connect inform configur invok link start caus client connect zoo keeper zookeep creat leader offer librari determin ha elect leader algorithm describ client applic follow state transit listen callback leader elect algorithm librari start start state state transit state start state complet event sent listen link start call leader offer creat zoo keeper zookeep leader offer ephemer sequenti node process act leader servic read leader offer perform offer lowest sequenc number leader process elect leader transit leader state process transit readi state intern librari creat zoo keeper zookeep watch leader offer sequenc id process sequenc id offer disappear process failur watch process run elect determin process leader note sequenc id contigu fail process process revok offer leader time call link stop guarante made caveat ul li poorli implement process creat leader offer get lowest sequenc id terribl occur maintain connect zk ephemer leader offer node doesn provid servic question up user ensur failur leader mean context user applic result revoc leader offer link stop call li li zk timeout retri plai role servic liveli word process ha lowest sequenc id requir attempt read leader offer sequenc id elect slow user appli timeout determin process hit specif sla li li librari make best effort detect catastroph failur process unforeseen event result instanc uncheck except propag pass normal error handl code doesn matter except destroi entir process connect zk leader offer result round leader determin li ul leader elect support leaderelectionsupport watcher logger logger logger factori loggerfactori get logger getlogg leader elect support leaderelectionsupport zoo keeper zookeep zoo keeper zookeep state state set leader elect awar leaderelectionawar listen string root node name rootnodenam leader offer leaderoff leader offer leaderoff string host name hostnam leader elect support leaderelectionsupport state state stop listen collect set synchronizedset hash set hashset leader elect awar leaderelectionawar start elect process method creat leader offer determin statu leader readi instanc link zoo keeper zookeep ha configur user instanc creat connect string connectstr session time sessiontim specifi anticip failur result fail event sent listen start state state start dispatch event dispatchev event type eventtyp start logger info start leader elect support zoo keeper zookeep illeg state except illegalstateexcept instanc zookeep provid hint us set zoo keeper setzookeep host name hostnam illeg state except illegalstateexcept hostnam provid hint us set host name sethostnam make offer makeoff determin elect statu determineelectionstatu keeper except keeperexcept fail becomefail interrupt except interruptedexcept fail becomefail stop elect servic revok outstand leader offer disconnect from zoo keeper zookeep stop state state stop dispatch event dispatchev event type eventtyp stop start stop start logger info stop leader elect support leader offer leaderoff zoo keeper zookeep delet leader offer leaderoff get node path getnodepath logger info remov leader offer leader offer leaderoff get node path getnodepath interrupt except interruptedexcept fail becomefail keeper except keeperexcept fail becomefail dispatch event dispatchev event type eventtyp stop complet stop complet make offer makeoff keeper except keeperexcept interrupt except interruptedexcept state state offer dispatch event dispatchev event type eventtyp offer start offer start leader offer leaderoff leader offer leaderoff leader offer leaderoff set host name sethostnam host name hostnam leader offer leaderoff set node path setnodepath zoo keeper zookeep creat root node name rootnodenam host name hostnam get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer sequenti ephemer sequenti logger debug creat leader offer leader offer leaderoff dispatch event dispatchev event type eventtyp offer complet offer complet determin elect statu determineelectionstatu keeper except keeperexcept interrupt except interruptedexcept state state determin dispatch event dispatchev event type eventtyp determin start determin start string compon leader offer leaderoff get node path getnodepath split leader offer leaderoff set id setid integ valu valueof compon compon length substr length list leader offer leaderoff leader offer leaderoff leader offer toleaderoff zoo keeper zookeep get children getchildren root node name rootnodenam leader offer find fit first leader elect leader attempt stat offer exist watch failur don leader leader offer leaderoff size leader offer leaderoff leader offer leaderoff leader offer leaderoff get leader offer leaderoff get id getid equal leader offer leaderoff get id getid logger debug leader offer line leader offer leaderoff size dispatch event dispatchev event type eventtyp determin complet determin complet leader becomelead readi becomereadi leader offer leaderoff get ve figur done readi becomereadi leader offer leaderoff neighbor leader offer neighborleaderoff keeper except keeperexcept interrupt except interruptedexcept dispatch event dispatchev event type eventtyp readi start readi start logger info elect leader watch node leader offer leaderoff get node path getnodepath neighbor leader offer neighborleaderoff get node path getnodepath make pass watcher share zoo keeper zookeep instanc stat stat zoo keeper zookeep exist neighbor leader offer neighborleaderoff get node path getnodepath stat logger debug line aliv keep ey neighbor leader offer neighborleaderoff get node path getnodepath state state readi dispatch event dispatchev event type eventtyp readi complet readi complet stat fail node ha miss call get children getchildren exist leader logger info di back determin neighbor leader offer neighborleaderoff get node path getnodepath determin elect statu determineelectionstatu leader becomelead state state elect dispatch event dispatchev event type eventtyp elect start elect start logger info leader node leader offer leaderoff get node path getnodepath dispatch event dispatchev event type eventtyp elect complet elect complet fail becomefail except logger error fail state except state state state fail dispatch event dispatchev event type eventtyp fail fetch user suppli hostnam current leader note time method return state chang depend strongli consist method ha read leader offer from zoo keeper zookeep deterim leader cach perform implic frequent invoc leader offer method return hostnam current leader keeper except keeperexcept interrupt except interruptedexcept string get leader host name getleaderhostnam keeper except keeperexcept interrupt except interruptedexcept list leader offer leaderoff leader offer leaderoff leader offer toleaderoff zoo keeper zookeep get children getchildren root node name rootnodenam leader offer leaderoff size leader offer leaderoff get get host name gethostnam list leader offer leaderoff leader offer toleaderoff list string string keeper except keeperexcept interrupt except interruptedexcept list leader offer leaderoff leader offer leaderoff arrai list arraylist leader offer leaderoff string size turn child root node name rootnodenam leader offer tupl sequenc number node name string offer string string host name hostnam string zoo keeper zookeep get data getdata root node name rootnodenam offer leader offer leaderoff add leader offer leaderoff integ valu valueof offer substr length root node name rootnodenam offer host name hostnam sort leader offer sequenc number zero base contigu keep path handi set watch collect sort leader offer leaderoff leader offer leaderoff id compar idcompar leader offer leaderoff overrid process watch event watchedev event event get type gettyp equal watcher event event type eventtyp node delet nodedelet event get path getpath equal leader offer leaderoff get node path getnodepath state state stop logger debug node delet run elect process event get path getpath determin elect statu determineelectionstatu keeper except keeperexcept fail becomefail interrupt except interruptedexcept fail becomefail dispatch event dispatchev event type eventtyp event type eventtyp logger debug dispatch event event type eventtyp listen listen size leader elect awar leaderelectionawar observ listen observ elect event onelectionev event type eventtyp add code listen list listen receiv event param listen add listen addlisten leader elect awar leaderelectionawar listen listen add listen remov code listen from list listen receiv event param listen remov listen removelisten leader elect awar leaderelectionawar listen listen remov listen overrid string string tostr state state leader offer leaderoff leader offer leaderoff zoo keeper zookeep zoo keeper zookeep host name hostnam host name hostnam listen listen get zoo keeper zookeep root node us servic instanc root node code mycompani myservic parent leader offer servic process wish contend leader statu us root node note assum node exist znode path string get root node name getrootnodenam root node name rootnodenam set zoo keeper zookeep root node us servic instanc root node code mycompani myservic parent leader offer servic process wish contend leader statu us root node note assum node exist set root node name setrootnodenam string root node name rootnodenam root node name rootnodenam root node name rootnodenam link zoo keeper zookeep instanc us oper provid overrid connect string connectstr session timeout sessiontimeout set zoo keeper zookeep get zoo keeper getzookeep zoo keeper zookeep set zoo keeper setzookeep zoo keeper zookeep zoo keeper zookeep zoo keeper zookeep zoo keeper zookeep hostnam process us conveni log respond link get leader host name getleaderhostnam request string get host name gethostnam host name hostnam set host name sethostnam string host name hostnam host name hostnam host name hostnam type event event type eventtyp start offer start offer start offer complet offer complet determin start determin start determin complet determin complet elect start elect start elect complet elect complet readi start readi start readi complet readi complet fail stop start stop start stop complet stop complet intern state elect support servic state start offer determin elect readi fail stop 

type event event type eventtyp start offer start offer start offer complet offer complet determin start determin start determin complet determin complet elect start elect start elect complet elect complet readi start readi start readi complet readi complet fail stop start stop start stop complet stop complet 

intern state elect support servic state start offer determin elect readi fail stop 

zxid util zxidutil get epoch from zxid getepochfromzxid zxid zxid 32l get counter from zxid getcounterfromzxid zxid zxid xffffffffl 0xffffffffl make zxid makezxid epoch counter epoch 32l counter xffffffffl 0xffffffffl string zxid string zxidtostr zxid hex string tohexstr zxid 

jdoubl type jtype creat instanc jdoubl jdoubl todoubl string get signatur getsignatur string gen java hash code genjavahashcod string fname string tmp bit doubletolongbit fname ret tmp tmp 32 

quorum valid implement method call contain quorum containsquorum verifi hash set hashset server identifi constitut quorum quorum verifi quorumverifi get weight getweight id contain quorum containsquorum hash set hashset set 

test stand server run runwith parameter creat test createtest base logger log logger factori loggerfactori get logger getlogg creat test createtest string accept string path string name string encod client respons clientrespons statu expect statu expectedstatu path zpath expect path expectedpath data sequenc watcher mywatch watcher process watch event watchedev event fixm ignor paramet collect object data except string base znode baseznod base creat base node createbaseznod arrai list aslist object media type mediatyp applic json applic json base znode baseznod foo bar utf8 client respons clientrespons statu creat path zpath base znode baseznod foo bar media type mediatyp applic json applic json base znode baseznod t1 utf8 client respons clientrespons statu creat path zpath base znode baseznod t1 media type mediatyp applic json applic json base znode baseznod t1 utf8 client respons clientrespons statu conflict media type mediatyp applic json applic json base znode baseznod t2 utf8 client respons clientrespons statu creat path zpath base znode baseznod t2 get byte getbyt media type mediatyp applic json applic json base znode baseznod t2 utf8 client respons clientrespons statu conflict media type mediatyp applic json applic json base znode baseznod t3 utf8 client respons clientrespons statu creat path zpath base znode baseznod t3 foo get byte getbyt media type mediatyp applic json applic json base znode baseznod t3 utf8 client respons clientrespons statu conflict media type mediatyp applic json applic json base znode baseznod t4 base64 client respons clientrespons statu creat path zpath base znode baseznod t4 foo get byte getbyt media type mediatyp applic json applic json base znode baseznod utf8 client respons clientrespons statu creat path zpath base znode baseznod media type mediatyp applic json applic json base znode baseznod utf8 client respons clientrespons statu creat path zpath base znode baseznod creat test createtest string accept string path string name string encod client respons clientrespons statu statu path zpath expect path expectedpath data sequenc accept accept path path name name encod encod expect statu expectedstatu statu expect path expectedpath expect path expectedpath data data sequenc sequenc test test creat testcreat except log info start get name getnam web resourc webresourc wr znodesr path path queri param queryparam dataformat encod queri param queryparam name name data wr wr queri param queryparam sequenc wr wr queri param queryparam sequenc builder builder wr accept accept client respons clientrespons cr data cr builder post client respons clientrespons cr builder post client respons clientrespons data equal assertequ expect statu expectedstatu cr get client respons statu getclientresponsestatu expect path expectedpath path zpath zpath cr get entiti getent path zpath sequenc asserttru zpath path start startswith expect path expectedpath path asserttru zpath uri start startswith znodesr path path string tostr equal assertequ expect path expectedpath zpath equal assertequ znodesr path path string tostr zpath uri us band method verifi data zk get data getdata zpath path stat data data data data equal assertequ data data asserttru string data string data arrai equal data data 

watcher mywatch watcher process watch event watchedev event fixm ignor 

quorum packet quorumpacket record type zxid data java util list org apach zookeep data id authinfo quorum packet quorumpacket quorum packet quorumpacket type zxid data java util list org apach zookeep data id authinfo type type zxid zxid data data authinfo authinfo get type gettyp type set type settyp type get zxid getzxid zxid set zxid setzxid zxid get data getdata data set data setdata data java util list org apach zookeep data id get authinfo getauthinfo authinfo set authinfo setauthinfo java util list org apach zookeep data id authinfo serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint type type write writelong zxid zxid write buffer writebuff data data start vector startvector authinfo authinfo authinfo len1 authinfo size vidx1 vidx1 len1 vidx1 org apach zookeep data id e1 org apach zookeep data id authinfo get vidx1 write record writerecord e1 e1 end vector endvector authinfo authinfo end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag type read readint type zxid read readlong zxid data read buffer readbuff data index vidx1 start vector startvector authinfo vidx1 authinfo java util arrai list arraylist org apach zookeep data id vidx1 done vidx1 incr org apach zookeep data id e1 e1 org apach zookeep data id read record readrecord e1 e1 authinfo add e1 end vector endvector authinfo end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint type type write writelong zxid zxid write buffer writebuff data data start vector startvector authinfo authinfo authinfo len1 authinfo size vidx1 vidx1 len1 vidx1 org apach zookeep data id e1 org apach zookeep data id authinfo get vidx1 write record writerecord e1 e1 end vector endvector authinfo authinfo end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar quorum packet quorumpacket unimpl equal object peer peer peer peer quorum packet quorumpacket peer peer quorum packet quorumpacket peer quorum packet quorumpacket peer peer ret ret type peer type ret ret ret zxid peer zxid ret ret ret org apach jute util buf equal bufequ data peer data ret ret ret authinfo equal peer authinfo ret ret ret hash code hashcod result 17 ret ret type result 37 result ret ret zxid zxid 32 result 37 result ret ret java util arrai string tostr data hash code hashcod result 37 result ret ret authinfo hash code hashcod result 37 result ret result string signatur quorum packet lquorumpacket ilb lid ss 

watcher test watchertest client base clientbas logger log logger factori loggerfactori get logger getlogg watcher test watchertest stat callback mystatcallback stat callback statcallback rc process result processresult rc string path object ctx stat stat ctx rc rc watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put verifi get event expect get verifi data event node bug zookeep 137 result event drop case time io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test test watcher correct testwatchercorrect io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk watcher mywatch watcher watcher mywatch zk creat client createcli watcher host port hostport stat callback statcallback scb stat callback statcallback process result processresult rc string path object ctx stat stat don callback voidcallback vcb callback voidcallback process result processresult rc string path object ctx don string name string 10 name length string name zk creat tc initialvalu get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti name name stat stat stat zk get data getdata name watcher stat zk set data setdata name get byte getbyt stat get version getvers scb stat zk exist name watcher zk delet name stat get version getvers vcb name length string name name watch event watchedev event watcher event poll 10 time unit timeunit second equal assertequ name event get path getpath equal assertequ event event type eventtyp node data chang nodedatachang event get type gettyp equal assertequ event keeper state keeperst sync connect syncconnect event get state getstat event watcher event poll 10 time unit timeunit second equal assertequ name event get path getpath equal assertequ event event type eventtyp node delet nodedelet event get type gettyp equal assertequ event keeper state keeperst sync connect syncconnect event get state getstat zk zk close test test watcher count testwatchercount io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk1 zk2 watcher mywatch w1 watcher mywatch zk1 creat client createcli w1 host port hostport watcher mywatch w2 watcher mywatch zk2 creat client createcli w2 host port hostport stat stat stat zk1 creat watch count test valu get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer zk1 creat watch count test valu get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer zk1 get data getdata watch count test w1 stat zk1 get data getdata watch count test w1 stat zk2 get data getdata watch count test w2 stat equal assertequ client base clientbas get server getserv server factori serverfactori get zk databas getzkdatabas get data tree getdatatre get watch count getwatchcount zk1 zk1 close zk2 zk2 close count 100 ha delet hasseendelet test check watch pend request get trigger watch set previou request except test test watch reset pend testwatchautoresetwithpend except watcher mywatch watch watcher mywatch count stat callback mystatcallback cb stat callback mystatcallback count watcher mywatch watcher watcher mywatch count testabl zoo keeper testablezookeep zk creat client createcli watcher host port hostport 6000 zoo keeper zookeep zk2 creat client createcli watcher host port hostport 5000 zk2 creat test id open acl unsaf open acl unsaf creat mode createmod ephemer count watch watcher mywatch cb stat callback mystatcallback zk exist test watch cb count zk exist test zk paus cnxn pausecnxn 3000 thread sleep 50 zk2 close stop server stopserv watch wait disconnect waitfordisconnect 60000 count count watch watcher mywatch cb stat callback mystatcallback zk exist test watch cb count start server startserv watch count wait connect waitforconnect 60000 equal assertequ zk exist test thread sleep 10 count equal assertequ watch event size count count cb rc equal assertequ watch event size equal assertequ watch event size equal assertequ count count zk close timeout 5000 test test watcher reset global testwatcherautoresetwithglob except zoo keeper zookeep zk watcher mywatch watcher watcher mywatch zk creat client createcli watcher host port hostport timeout test watcher reset testwatcherautoreset zk watcher watcher zk close test test watcher reset local testwatcherautoresetwithloc except zoo keeper zookeep zk watcher mywatch watcher watcher mywatch zk creat client createcli watcher host port hostport timeout test watcher reset testwatcherautoreset zk watcher watcher mywatch zk close test test watcher reset disabl global testwatcherautoresetdisabledwithglob except client cnxn clientcnxn set disabl reset watch setdisableautoresetwatch test watcher reset global testwatcherautoresetwithglob test test watcher reset disabl local testwatcherautoresetdisabledwithloc except client cnxn clientcnxn set disabl reset watch setdisableautoresetwatch test watcher reset local testwatcherautoresetwithloc test watcher reset testwatcherautoreset zoo keeper zookeep zk watcher mywatch global watcher globalwatch watcher mywatch local watcher localwatch except global isglob local watcher localwatch global watcher globalwatch first test watch surviv reconnect zk creat watchtest id open acl unsaf open acl unsaf creat mode createmod persist zk creat watchtest child id open acl unsaf open acl unsaf creat mode createmod ephemer global isglob zk get children getchildren watchtest zk get data getdata watchtest child stat zk exist watchtest child2 zk get children getchildren watchtest local watcher localwatch zk get data getdata watchtest child local watcher localwatch stat zk exist watchtest child2 local watcher localwatch asserttru local watcher localwatch event empti isempti stop server stopserv global watcher globalwatch wait disconnect waitfordisconnect 3000 local watcher localwatch wait disconnect waitfordisconnect 500 start server startserv global watcher globalwatch wait connect waitforconnect 3000 global isglob client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch local watcher localwatch wait connect waitforconnect 500 asserttru local watcher localwatch event empti isempti zk set data setdata watchtest child zk creat watchtest child2 id open acl unsaf open acl unsaf creat mode createmod persist watch event watchedev client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch local watcher localwatch event poll timeout time unit timeunit millisecond equal assertequ get path getpath event type eventtyp node data chang nodedatachang get type gettyp equal assertequ watchtest child get path getpath ll happen after timeout wast time poll client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch local watcher localwatch event poll timeout time unit timeunit millisecond creat trigger get children exist watch equal assertequ event type eventtyp node creat nodecr get type gettyp equal assertequ watchtest child2 get path getpath ll happen after timeout wast time poll client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch local watcher localwatch event poll timeout time unit timeunit millisecond equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ watchtest get path getpath ll happen after timeout wast time poll asserttru local watcher localwatch event empti isempti ensur late arriv stop server stopserv global watcher globalwatch wait disconnect waitfordisconnect timeout local watcher localwatch wait disconnect waitfordisconnect 500 global isglob client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch fail event shouldn timeout except timeoutexcept toe client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch fail didn get event expect outstand watch except e1 log error bad e1 runtim except runtimeexcept e1 start server startserv global watcher globalwatch wait connect waitforconnect timeout global isglob zk get children getchildren watchtest zk get data getdata watchtest child stat zk exist watchtest child2 zk get children getchildren watchtest local watcher localwatch zk get data getdata watchtest child local watcher localwatch stat zk exist watchtest child2 local watcher localwatch trigger event make get zk delet watchtest child2 local watcher localwatch event poll timeout time unit timeunit millisecond equal assertequ event type eventtyp node delet nodedelet get type gettyp equal assertequ watchtest child2 get path getpath local watcher localwatch event poll timeout time unit timeunit millisecond equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ watchtest get path getpath asserttru local watcher localwatch event empti isempti stop server stopserv global watcher globalwatch wait disconnect waitfordisconnect timeout local watcher localwatch wait disconnect waitfordisconnect 500 start server startserv global watcher globalwatch wait connect waitforconnect timeout global isglob client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch local watcher localwatch wait connect waitforconnect 500 zk delet watchtest child zk delet watchtest client cnxn clientcnxn get disabl reset watch getdisableautoresetwatch local watcher localwatch event poll timeout time unit timeunit millisecond equal assertequ event type eventtyp node delet nodedelet get type gettyp equal assertequ watchtest child get path getpath ll happen after timeout wast time poll make straggl thread sleep 1000 asserttru local watcher localwatch event empti isempti 

stat callback mystatcallback stat callback statcallback rc process result processresult rc string path object ctx stat stat ctx rc rc 

watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put 

manag sasl authent client allow client cnxn clientcnxn authent sasl zookeep server zoo keeper sasl client zookeepersaslcli string login context name kei login context name kei zookeep sasl clientconfig logger log logger factori loggerfactori get logger getlogg zoo keeper sasl client zookeepersaslcli login login sasl client saslclient sasl client saslclient sasl token sasltoken sasl state saslstat initi intermedi complet fail sasl state saslstat sasl state saslstat sasl state saslstat initi last packet gotlastpacket inform messag indic current configur statu string config statu configstatu sasl state saslstat get sasl state getsaslst sasl state saslstat string get login context getlogincontext login login get login context name getlogincontextnam zoo keeper sasl client zookeepersaslcli string server princip serverprincip login except loginexcept zookeep 1373 allow properti specifi jaa configur section zookeep client us client string client section clientsect get properti getproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei client note configur here refer javax secur auth login configur app configur entri appconfigurationentri entri secur except securityexcept secur except securityexcept entri configur get configur getconfigur get app configur entri getappconfigurationentri client section clientsect secur except securityexcept handl harmless user doesn intend us jaa authent secur except securityexcept entri config statu configstatu attempt sasl authent login context section client section clientsect sasl client saslclient creat sasl client createsaslcli server princip serverprincip client section clientsect handl situat client section clientsect simpli client intend us sasl necessarili error sasl state saslstat sasl state saslstat fail string client section explicitclientsect get properti getproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei client section explicitclientsect user explicitli overrid login context expect sasl succe here sasl fail secur except securityexcept login except loginexcept zookeep client authent client section explicitclientsect section suppli jaa configur get properti getproperti environ jaa conf kei jaa conf kei secur except securityexcept secur except securityexcept login except loginexcept client sasl authent specifi jaa configur section client section explicitclientsect found user overrid context don intend us sasl log info warn don expect sasl relat inform string msg attempt authent sasl secur except securityexcept msg secur except securityexcept get local messag getlocalizedmessag msg unknown error config statu configstatu msg get properti getproperti environ jaa conf kei jaa conf kei user explicitli set sasl relat expect sasl succe secur except securityexcept login except loginexcept zookeep client authent get properti getproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei client section suppli jaa configur get properti getproperti environ jaa conf kei jaa conf kei secur except securityexcept secur except securityexcept login except loginexcept jaa configur section name get properti getproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei client found specifi jaa configur file get properti getproperti environ jaa conf kei jaa conf kei inform messag indic current configur statu string get config statu getconfigstatu config statu configstatu complet iscomplet sasl state saslstat sasl state saslstat complet fail isfail sasl state saslstat sasl state saslstat fail server sasl respons callback serversaslresponsecallback async callback asynccallback data callback datacallback process result processresult rc string path object ctx data stat stat process result processresult us client cnxn clientcnxn send thread sendthread respond data contain zookeep server sasl token ctx zoo keeper sasl client zookeepersaslcli object us object respond server respondtoserv method repli zookeep server sasl token zoo keeper sasl client zookeepersaslcli client client cnxn clientcnxn ctx zoo keeper sasl client zookeepersaslcli client log warn sasl client unexpectedli respond zookeep server usedata data data log debug server sasl respons callback serversaslresponsecallback sasl token sasltoken server respons length usedata length usedata log debug server sasl respons callback serversaslresponsecallback empti data server respons length usedata length client respond server respondtoserv usedata client cnxn clientcnxn ctx sasl client saslclient creat sasl client createsaslcli string servic princip serviceprincip string login context logincontext login except loginexcept login log debug enabl isdebugen log debug jaa login context logincontext login context logincontext note login object share zookeep relat connect creat sasl client createsaslcli declar login initi login login login context logincontext client callback handler clientcallbackhandl login start thread need startthreadifneed subject subject login get subject getsubject sasl client saslclient sasl client saslclient us subject get princip getprincip empti isempti indic sasl mechan us empti us digest md5 us gssapi subject get princip getprincip empti isempti princip gssapi us digest md5 mechan log info client us digest md5 sasl mechan string mech digest md5 string usernam string subject get credenti getpubliccredenti arrai toarrai string password string subject get credenti getprivatecredenti arrai toarrai zk sasl md5 hard wire domain paramet share zookeep server code server cnxn factori servercnxnfactori java sasl client saslclient sasl creat sasl client createsaslcli mech usernam zookeep zk sasl md5 client callback handler clientcallbackhandl password sasl client saslclient gssapi object princip subject get princip getprincip arrai toarrai determin client princip from subject princip client princip clientprincip princip princip kerbero name kerberosnam client kerbero name clientkerberosnam kerbero name kerberosnam client princip clientprincip get name getnam assum server client realm properti zookeep server realm set string server realm serverrealm get properti getproperti zookeep server realm client kerbero name clientkerberosnam get realm getrealm kerbero name kerberosnam servic kerbero name servicekerberosnam kerbero name kerberosnam servic princip serviceprincip server realm serverrealm string servic name servicenam servic kerbero name servicekerberosnam get servic name getservicenam string servic hostnam servicehostnam servic kerbero name servicekerberosnam get host name gethostnam string client princip name clientprincipalnam client kerbero name clientkerberosnam string tostr sasl client saslclient subject doa subject privileg except action privilegedexceptionact sasl client saslclient sasl client saslclient run sasl except saslexcept log info client us gssapi sasl mechan string mech gssapi log debug creat sasl client client client princip name clientprincipalnam servic servic name servicenam servic hostnam servicehostnam servic hostnam servicehostnam sasl client saslclient sasl client saslclient sasl creat sasl client createsaslcli mech client princip name clientprincipalnam servic name servicenam servic hostnam servicehostnam client callback handler clientcallbackhandl sasl client saslclient sasl client saslclient except log error error creat sasl client print stack trace printstacktrac login except loginexcept login except loginexcept except consum log messag type except log error except creat sasl client respond server respondtoserv server token servertoken client cnxn clientcnxn cnxn sasl client saslclient log error sasl client saslclient unexpectedli respond server sasl messag ignor sasl client saslclient complet iscomplet sasl token sasltoken creat sasl token createsasltoken server token servertoken sasl token sasltoken send sasl packet sendsaslpacket sasl token sasltoken cnxn sasl except saslexcept log error sasl authent fail login context get login context getlogincontext sasl state saslstat sasl state saslstat fail last packet gotlastpacket sasl client saslclient complet iscomplet gssapi server send packet after authent succe fail server token servertoken sasl client saslclient get mechan name getmechanismnam gssapi last packet gotlastpacket non gssapi packet from server sasl client saslclient get mechan name getmechanismnam gssapi last packet gotlastpacket sasl authent complet successfulli enabl socket writabl flag packet wait authent complet outgo queue sent zookeep server cnxn enabl write enablewrit creat sasl token createsasltoken sasl except saslexcept sasl state saslstat sasl state saslstat intermedi creat sasl token createsasltoken sasl token sasltoken creat sasl token createsasltoken sasl token sasltoken sasl except saslexcept sasl token sasltoken todo introspect runtim environ jaa conf sasl state saslstat sasl state saslstat fail sasl except saslexcept error authent zookeep quorum member quorum member sasl token sasltoken subject subject login get subject getsubject subject login retval subject doa subject privileg except action privilegedexceptionact run sasl except saslexcept log debug sasl client saslclient evalu challeng evaluatechalleng len sasl token sasltoken length sasl client saslclient evalu challeng evaluatechalleng sasl token sasltoken retval privileg action except privilegedactionexcept string error error occur evalu zookeep quorum member receiv sasl token provid hint us wrong fix configur todo introspect gss inform string unknown server error text unknown server error text mechan level server found kerbero databas unknown server unknown server string tostr index indexof unknown server error text unknown server error text error caus java unabl resolv zookeep quorum member hostnam correctli ad dsun net spi nameservic provid dn sun client jvmflag environ error zookeep client auth fail auth fail state log error error sasl state saslstat sasl state saslstat fail sasl except saslexcept error sasl except saslexcept make sasl token subject defin diagnosi warn error log relat login send sasl packet sendsaslpacket sasl token sasltoken client cnxn clientcnxn cnxn sasl except saslexcept log debug enabl isdebugen log debug client cnxn clientcnxn send sasl packet sendsaslpacket length sasl token sasltoken length get sasl request getsaslrequest request get sasl request getsaslrequest request set token settoken sasl token sasltoken set sasl respons setsaslrespons respons set sasl respons setsaslrespons server sasl respons callback serversaslresponsecallback cb server sasl respons callback serversaslresponsecallback cnxn send packet sendpacket request respons cb zoo def zoodef op code opcod sasl io except ioexcept sasl except saslexcept fail send sasl packet server send sasl packet sendsaslpacket client cnxn clientcnxn cnxn sasl except saslexcept log debug enabl isdebugen log debug client cnxn clientcnxn send sasl packet sendsaslpacket length sasl token sasltoken length get sasl request getsaslrequest request get sasl request getsaslrequest request set token settoken creat sasl token createsasltoken set sasl respons setsaslrespons respons set sasl respons setsaslrespons server sasl respons callback serversaslresponsecallback cb server sasl respons callback serversaslresponsecallback cnxn send packet sendpacket request respons cb zoo def zoodef op code opcod sasl io except ioexcept sasl except saslexcept fail send sasl packet server io except ioexcept us client cnxn clientcnxn emit sasl relat event auth fail authfail sasl authent saslauthent readi set sasl state saslstat complet side effect keeper state keeperst get keeper state getkeeperst sasl client saslclient sasl state saslstat sasl state saslstat fail keeper state keeperst auth fail authfail sasl client saslclient complet iscomplet sasl state saslstat sasl state saslstat intermedi sasl state saslstat sasl state saslstat complet keeper state keeperst sasl authent saslauthent event readi emit initi client commun zookeep server send server first authent packet initi client cnxn clientcnxn cnxn sasl except saslexcept sasl client saslclient sasl state saslstat sasl state saslstat fail sasl except saslexcept sasl client saslclient fail initi properli sasl state saslstat sasl state saslstat initi sasl client saslclient ha initi respons hasinitialrespons send sasl packet sendsaslpacket cnxn empti token emptytoken send sasl packet sendsaslpacket empti token emptytoken cnxn sasl state saslstat sasl state saslstat intermedi callback handler callbackhandl here refer javax secur auth callback callback handler callbackhandl confus zookeep packet callback org apach zookeep server auth sasl server callback handler saslservercallbackhandl client callback handler clientcallbackhandl callback handler callbackhandl string password client callback handler clientcallbackhandl string password password password handl callback callback unsupport callback except unsupportedcallbackexcept callback callback callback callback name callback namecallback name callback namecallback nc name callback namecallback callback nc set name setnam nc get name getdefaultnam callback password callback passwordcallback password callback passwordcallback pc password callback passwordcallback callback password pc set password setpassword password arrai tochararrai log warn login client ask password zookeep client code current support obtain password from user make client configur us ticket cach jaa configur set us ticket cach useticketcach restart client get messag after tgt ticket cach ha expir manual refresh first determin password keytab run kinit unix shell environ user run zookeep client command kinit princ princ name client kerbero princip kinit keytab princ princ name kerbero princip keytab locat keytab file after manual refresh cach restart client messag after manual refresh cach ensur kdc host clock sync host clock callback realm callback realmcallback realm callback realmcallback rc realm callback realmcallback callback rc set text settext rc get text getdefaulttext callback author callback authorizecallback author callback authorizecallback ac author callback authorizecallback callback string authid ac get authent id getauthenticationid string authzid ac get author id getauthorizationid authid equal authzid ac set author setauthor ac set author setauthor ac author isauthor ac set author id setauthorizedid authzid unsupport callback except unsupportedcallbackexcept callback unrecogn sasl client callback clientcallback client tunnel authent progress clienttunneledauthenticationinprogress todo check disjunct here singl member variabl method determin client configur us sasl zookeep 1455 get properti getproperti environ jaa conf kei jaa conf kei javax secur auth login configur get configur getconfigur javax secur auth login configur get configur getconfigur get app configur entri getappconfigurationentri get properti getproperti zoo keeper sasl client zookeepersaslcli login context name kei login context name kei client client configur us valid login configur authent progress success fail authent hasn finish wait complet iscomplet fail isfail sasl authent ha succeed fail complet iscomplet fail isfail last packet gotlastpacket progress sasl messag from server receiv client configur us tunnel authent scheme tunnel authent ha complet successfulli server sasl messag receiv secur except securityexcept thrown caller permiss retriev configur simpli return correct log debug enabl isdebugen log debug retriev login configur 

sasl state saslstat initi intermedi complet fail 

server sasl respons callback serversaslresponsecallback async callback asynccallback data callback datacallback process result processresult rc string path object ctx data stat stat process result processresult us client cnxn clientcnxn send thread sendthread respond data contain zookeep server sasl token ctx zoo keeper sasl client zookeepersaslcli object us object respond server respondtoserv method repli zookeep server sasl token zoo keeper sasl client zookeepersaslcli client client cnxn clientcnxn ctx zoo keeper sasl client zookeepersaslcli client log warn sasl client unexpectedli respond zookeep server usedata data data log debug server sasl respons callback serversaslresponsecallback sasl token sasltoken server respons length usedata length usedata log debug server sasl respons callback serversaslresponsecallback empti data server respons length usedata length client respond server respondtoserv usedata client cnxn clientcnxn ctx 

callback handler callbackhandl here refer javax secur auth callback callback handler callbackhandl confus zookeep packet callback org apach zookeep server auth sasl server callback handler saslservercallbackhandl client callback handler clientcallbackhandl callback handler callbackhandl string password client callback handler clientcallbackhandl string password password password handl callback callback unsupport callback except unsupportedcallbackexcept callback callback callback callback name callback namecallback name callback namecallback nc name callback namecallback callback nc set name setnam nc get name getdefaultnam callback password callback passwordcallback password callback passwordcallback pc password callback passwordcallback callback password pc set password setpassword password arrai tochararrai log warn login client ask password zookeep client code current support obtain password from user make client configur us ticket cach jaa configur set us ticket cach useticketcach restart client get messag after tgt ticket cach ha expir manual refresh first determin password keytab run kinit unix shell environ user run zookeep client command kinit princ princ name client kerbero princip kinit keytab princ princ name kerbero princip keytab locat keytab file after manual refresh cach restart client messag after manual refresh cach ensur kdc host clock sync host clock callback realm callback realmcallback realm callback realmcallback rc realm callback realmcallback callback rc set text settext rc get text getdefaulttext callback author callback authorizecallback author callback authorizecallback ac author callback authorizecallback callback string authid ac get authent id getauthenticationid string authzid ac get author id getauthorizationid authid equal authzid ac set author setauthor ac set author setauthor ac author isauthor ac set author id setauthorizedid authzid unsupport callback except unsupportedcallbackexcept callback unrecogn sasl client callback clientcallback 

standard zoo keeper server zookeeperserv replac request processor prep request processor preprequestprocessor propos request processor proposalrequestprocessor commit processor commitprocessor leader appli request processor tobeappliedrequestprocessor request processor finalrequestprocessor leader zoo keeper server leaderzookeeperserv quorum zoo keeper server quorumzookeeperserv commit processor commitprocessor commit processor commitprocessor param port param data dir datadir io except ioexcept leader zoo keeper server leaderzookeeperserv file txn snap log filetxnsnaplog log factori logfactori quorum peer quorump self data tree builder datatreebuild tree builder treebuild zk databas zkdatabas zk db zkdb io except ioexcept log factori logfactori self tick time ticktim self min session timeout minsessiontimeout self max session timeout maxsessiontimeout tree builder treebuild zk db zkdb self leader get leader getlead self leader overrid setup request processor setuprequestprocessor request processor requestprocessor processor finalprocessor request processor finalrequestprocessor request processor requestprocessor appli processor tobeappliedprocessor leader appli request processor tobeappliedrequestprocessor processor finalprocessor get leader getlead appli tobeappli commit processor commitprocessor commit processor commitprocessor appli processor tobeappliedprocessor string tostr get server id getserverid commit processor commitprocessor start propos request processor proposalrequestprocessor propos processor proposalprocessor propos request processor proposalrequestprocessor commit processor commitprocessor propos processor proposalprocessor initi first processor firstprocessor prep request processor preprequestprocessor propos processor proposalprocessor prep request processor preprequestprocessor first processor firstprocessor start overrid get global outstand limit getglobaloutstandinglimit get global outstand limit getglobaloutstandinglimit self get quorum size getquorums overrid creat session tracker createsessiontrack session tracker sessiontrack session tracker impl sessiontrackerimpl get zk databas getzkdatabas get session time out getsessionwithtimeout tick time ticktim self get id getid overrid start session tracker startsessiontrack session tracker impl sessiontrackerimpl session tracker sessiontrack start touch sess session tracker sessiontrack touch session touchsess sess overrid jmx registerjmx jmx jmx data tree bean jmxdatatreebean data tree bean datatreebean get zk databas getzkdatabas get data tree getdatatre bean registri mbeanregistri get instanc getinst jmx data tree bean jmxdatatreebean jmx server bean jmxserverbean except log warn fail jmx jmx data tree bean jmxdatatreebean jmx registerjmx leader bean leaderbean leader bean leaderbean local peer bean localpeerbean local peer bean localpeerbean jmx self jmx leader elect bean jmxleaderelectionbean bean registri mbeanregistri get instanc getinst unregist self jmx leader elect bean jmxleaderelectionbean except log warn fail jmx self jmx leader elect bean jmxleaderelectionbean jmx server bean jmxserverbean leader bean leaderbean bean registri mbeanregistri get instanc getinst leader bean leaderbean local peer bean localpeerbean except log warn fail jmx jmx server bean jmxserverbean overrid unregist jmx unregisterjmx unregist from jmx jmx data tree bean jmxdatatreebean bean registri mbeanregistri get instanc getinst unregist jmx data tree bean jmxdatatreebean except log warn fail unregist jmx jmx data tree bean jmxdatatreebean unregist jmx unregisterjmx leader leader unregist from jmx jmx server bean jmxserverbean bean registri mbeanregistri get instanc getinst unregist jmx server bean jmxserverbean except log warn fail unregist jmx jmx server bean jmxserverbean overrid string get state getstat leader return id associ quorum peer quorump uniqu id server overrid get server id getserverid self get id getid overrid revalid session revalidatesess server cnxn servercnxn cnxn session id sessionid session timeout sessiontimeout io except ioexcept revalid session revalidatesess cnxn session id sessionid session timeout sessiontimeout setown leader updat follow handler set owner setown session id sessionid server cnxn servercnxn session expir except sessionexpiredexcept mean session revalid fail 

client test clienttest client base clientbas logger log logger factori loggerfactori get logger getlogg client test clienttest verifi ping sent keep idl client aliv test test ping testp except zoo keeper zookeep zk idl zkidl zoo keeper zookeep zk watch creator zkwatchcreat countdown watcher countdownwatch watcher countdown watcher countdownwatch zk idl zkidl creat client createcli watcher host port hostport 10000 zk watch creator zkwatchcreat creat client createcli 10 zk watch creator zkwatchcreat creat id open acl unsaf open acl unsaf creat mode createmod persist 10 zk idl zkidl exist 10 thread sleep 1000 zk watch creator zkwatchcreat delet bug manifest here zk idl zkidl expir zk idl zkidl exist zk idl zkidl zk idl zkidl close zk watch creator zkwatchcreat zk watch creator zkwatchcreat close test test clientwithout watcher obj testclientwithoutwatcherobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept perform client test performclienttest test test client watcher obj testclientwithwatcherobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept perform client test performclienttest exercis testabl function verifi tostr test test testabl testtest except testabl zoo keeper testablezookeep zk creat client createcli log info zk testabl local socket address testablelocalsocketaddress log info zk testabl remot socket address testableremotesocketaddress log info zk string tostr zk close zk testabl wait shutdown testablewaitforshutdown connect timeout connect timeout log info zk testabl local socket address testablelocalsocketaddress log info zk testabl remot socket address testableremotesocketaddress log info zk string tostr test test acl testacl except zoo keeper zookeep zk zk creat client createcli zk creat acltest id creator acl creator acl creat mode createmod persist fail receiv invalid acl error invalid acl except invalidaclexcept log info test success invalid acl receiv get messag getmessag arrai list arraylist acl test acl testacl arrai list arraylist acl test acl testacl add acl perm perm admin id auth id auth id test acl testacl add acl perm perm admin id ip 127 zk creat acltest test acl testacl creat mode createmod persist fail receiv invalid acl error invalid acl except invalidaclexcept log info test success invalid acl receiv get messag getmessag zk add auth info addauthinfo digest ben passwd get byte getbyt zk creat acltest id creator acl creator acl creat mode createmod persist zk close zk creat client createcli zk add auth info addauthinfo digest ben passwd2 get byte getbyt zk get data getdata acltest stat fail receiv permiss error keeper except keeperexcept equal assertequ code noauth code zk add auth info addauthinfo digest ben passwd get byte getbyt zk get data getdata acltest stat zk set acl setacl acltest id open acl unsaf open acl unsaf zk close zk creat client createcli zk get data getdata acltest stat list acl acl zk get acl getacl acltest stat equal assertequ acl size equal assertequ id open acl unsaf open acl unsaf acl zk close zk zk close watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put multipl watcher verifi get notifi right order test test mutipl watcher obj testmutiplewatcherobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk creat client createcli countdown watcher countdownwatch host port hostport watcher mywatch watcher watcher mywatch 100 watcher mywatch watchers2 watcher mywatch watcher length watcher length watcher watcher mywatch watchers2 watcher mywatch zk creat foo foodata get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist stat stat stat test get exist singl set watcher get exist watcher length assertnotnul zk get data getdata foo watcher stat watcher length assertnotnul zk exist foo watcher trigger watch watcher length zk set data setdata foo foodata2 get byte getbyt zk set data setdata foo foodata3 get byte getbyt watcher length watch event watchedev event watcher event poll 10 time unit timeunit second equal assertequ foo event get path getpath equal assertequ event type eventtyp node data chang nodedatachang event get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event get state getstat small chanc unexpect messag deliv after check next time check event equal assertequ watcher event size test get exist singl set watcher get exist watcher length assertnotnul zk get data getdata foo watcher stat assertnotnul zk exist foo watcher trigger watch watcher length zk set data setdata foo foodata4 get byte getbyt zk set data setdata foo foodata5 get byte getbyt watcher length watch event watchedev event watcher event poll 10 time unit timeunit second equal assertequ foo event get path getpath equal assertequ event type eventtyp node data chang nodedatachang event get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event get state getstat small chanc unexpect messag deliv after check next time check event equal assertequ watcher event size test get exist two set watcher watcher length assertnotnul zk get data getdata foo watcher stat assertnotnul zk exist foo watchers2 trigger watch watcher length zk set data setdata foo foodata6 get byte getbyt zk set data setdata foo foodata7 get byte getbyt watcher length watch event watchedev event watcher event poll 10 time unit timeunit second equal assertequ foo event get path getpath equal assertequ event type eventtyp node data chang nodedatachang event get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event get state getstat small chanc unexpect messag deliv after check next time check event equal assertequ watcher event size watchers2 watch event watchedev event2 watchers2 event poll 10 time unit timeunit second equal assertequ foo event2 get path getpath equal assertequ event type eventtyp node data chang nodedatachang event2 get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event2 get state getstat small chanc unexpect messag deliv after check next time check event equal assertequ watchers2 event size zk zk close perform client test performclienttest watcher obj withwatcherobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk watcher mywatch watcher watcher mywatch zk creat client createcli watcher host port hostport log info befor creat benwasher zk creat benwasher get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist log info after creat benwasher zk set data setdata benwasher get byte getbyt 57 fail bad version badvers except keeper except keeperexcept bad version except badversionexcept expect keeper except keeperexcept fail bad version badvers except log info befor delet benwasher zk delet benwasher log info after delet benwasher zk close log info close client zk describ cnxn describecnxn thread sleep 2000 zk creat client createcli watcher host port hostport log info creat client zk describ cnxn describecnxn log info befor delet zk delet fail delet root keeper except keeperexcept bad argument except badargumentsexcept good expect stat stat stat test basic creat ls get data getdata zk creat pat pat here get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist log info befor creat ben zk creat pat ben ben here get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist log info befor get children getchildren pat list string children zk get children getchildren pat equal assertequ children size equal assertequ ben children get list string children2 zk get children getchildren pat equal assertequ children children2 string valu string zk get data getdata pat ben stat equal assertequ ben here valu test stat watch non exist node watcher obj withwatcherobj equal assertequ zk exist frog watcher equal assertequ zk exist frog log info comment asset pass frog set keeper except keeperexcept node except nonodeexcept expect zk creat frog get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist first poll session deliveri log info comment check event length watcher event size watch event watchedev event watcher event poll 10 time unit timeunit second equal assertequ frog event get path getpath equal assertequ event type eventtyp node creat nodecr event get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event get state getstat test child watch creat sequenc zk get children getchildren pat ben 10 zk creat pat ben integ string tostr get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti children zk get children getchildren pat ben collect sort children equal assertequ 10 children size 10 string name children get asserttru start name start startswith watcher obj withwatcherobj zk get data getdata pat ben name watcher stat zk get data getdata pat ben name stat equal assertequ integ string tostr string zk set data setdata pat ben name get byte getbyt stat get version getvers watcher obj withwatcherobj stat zk exist pat ben name watcher stat zk exist pat ben name zk delet pat ben name stat get version getvers event watcher event poll 10 time unit timeunit second equal assertequ pat ben event get path getpath equal assertequ event type eventtyp node children chang nodechildrenchang event get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event get state getstat 10 event watcher event poll 10 time unit timeunit second string name children get equal assertequ pat ben name event get path getpath equal assertequ event type eventtyp node data chang nodedatachang event get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event get state getstat event watcher event poll 10 time unit timeunit second equal assertequ pat ben name event get path getpath equal assertequ event type eventtyp node delet nodedelet event get type gettyp equal assertequ keeper state keeperst sync connect syncconnect event get state getstat zk creat good u0040 path u0040path get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat duplic get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat duplic get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist fail duplic creat allow keeper except keeperexcept node exist except nodeexistsexcept expect zk zk close test sequenti filenam creat correctli pad filenam test test sequenti node name testsequentialnodenam io except ioexcept interrupt except interruptedexcept keeper except keeperexcept string path sequenc string file test string filepath path file zoo keeper zookeep zk zk creat client createcli zk creat path id open acl unsaf open acl unsaf creat mode createmod persist zk creat filepath id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti list string children zk get children getchildren path equal assertequ children size equal assertequ file 0000000000 children get zk creat filepath id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti children zk get children getchildren path equal assertequ children size asserttru contain child children contain file 0000000001 zk creat filepath id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti children zk get children getchildren path equal assertequ children size asserttru contain child children contain file 0000000002 pattern hold let run counter bit continu spit correct answer children size 105 zk creat filepath id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti children zk get children getchildren path asserttru contain child 104 children contain file 0000000104 zk zk close test data provid creat sequenti node store properli test test sequenti node data testsequentialnodedata except zoo keeper zookeep zk string queue handl queue handl queue zk creat client createcli zk creat queue handl queue handl id open acl unsaf open acl unsaf creat mode createmod persist zk creat queue handl queue handl element get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti zk creat queue handl queue handl element get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti list string children zk get children getchildren queue handl queue handl equal assertequ children size string child1 children get string child2 children get compar result compareresult child1 compar compareto child2 assertnotsam compar result compareresult compar result compareresult string temp child1 child1 child2 child2 temp string child1 data child1data string zk get data getdata queue handl queue handl child1 string child2 data child2data string zk get data getdata queue handl queue handl child2 equal assertequ child1 data child1data equal assertequ child2 data child2data zk zk close test test larg node data testlargenodedata except zoo keeper zookeep zk string queue handl queue handl larg zk creat client createcli zk creat queue handl queue handl 500000 id open acl unsaf open acl unsaf creat mode createmod persist zk zk close verifi creat fail verifycreatefail string path zoo keeper zookeep zk except zk creat path id open acl unsaf open acl unsaf creat mode createmod persist illeg argument except illegalargumentexcept good fail bad path path caught test path string valid test test path valid testpathvalid except zoo keeper zookeep zk creat client createcli verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail foo zk verifi creat fail verifycreatefail foo zk verifi creat fail verifycreatefail foo zk verifi creat fail verifycreatefail foo zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail zk verifi creat fail verifycreatefail u0001 foo u0001foo zk verifi creat fail verifycreatefail foo bar zk verifi creat fail verifycreatefail foo bar zk verifi creat fail verifycreatefail foo bar zk verifi creat fail verifycreatefail foo zk verifi creat fail verifycreatefail zk zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist next two step relat sequenti process verifi empti child name fail sequenti zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist asserttru illeg argument except illegalargumentexcept verifi empti child name success sequenti zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti asserttru illeg argument except illegalargumentexcept zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti asserttru illeg argument except illegalargumentexcept zk creat createseqpar id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti asserttru illeg argument except illegalargumentexcept check code path server prep request processor preprequestprocessor set fail creat setfailcr zk creat id open acl unsaf open acl unsaf creat mode createmod persist asserttru keeper except keeperexcept bad argument except badargumentsexcept prep request processor preprequestprocessor set fail creat setfailcr zk creat foo id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat u0040f id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk creat id open acl unsaf open acl unsaf creat mode createmod persist notest connect notestconnect io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk 2000 100 log info test connect make socket descriptor awai zk zoo keeper zookeep host port hostport 30000 zk get data getdata stat zk close test test delet children testdeletewithchildren except zoo keeper zookeep zk creat client createcli zk creat parent id open acl unsaf open acl unsaf creat mode createmod persist zk creat parent child id open acl unsaf open acl unsaf creat mode createmod persist zk delet parent fail receiv equal messag keeper except keeperexcept equal assertequ keeper except keeperexcept code notempti code zk delet parent child zk delet parent zk close verifi client cleanup verifyclientcleanup thread count current verifi client cleanup verifyclientcleanup string name count name count count run current count current testabl zoo keeper testablezookeep zk creat client createcli zk close ve ask close wait finish close sub thread otw selector close check posit test failur zk testabl wait shutdown testablewaitforshutdown connect timeout connect timeout throwabl log error test fail verifi client clean up properli open close larg number session essenti socket selector clean up properli close throwabl test test client cleanup testclientcleanup throwabl oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean log warn skip test client cleanup testclientcleanup avail unix thread count threadcount client count clientcount 10 log number fd us befor after test run verifi free resourc correctli work unix system place sun ha implement part mgmt bean api unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean initi fd count initialfdcount unixo get open file descriptor count getopenfiledescriptorcount verifi client cleanup verifyclientcleanup thread verifi client cleanup verifyclientcleanup thread count threadcount thread length thread verifi client cleanup verifyclientcleanup vcc client count clientcount thread start thread length thread join connect timeout connect timeout asserttru thread current thread count fail mean clean up after close session current count currentcount unixo get open file descriptor count getopenfiledescriptorcount string logmsg open fd after test significantli higher befor current count currentcount initi fd count initialfdcount 10 error log error logmsg valu valueof current count currentcount valu valueof initi fd count initialfdcount log info logmsg valu valueof current count currentcount valu valueof initi fd count initialfdcount 

watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put 

verifi client cleanup verifyclientcleanup thread count current verifi client cleanup verifyclientcleanup string name count name count count run current count current testabl zoo keeper testablezookeep zk creat client createcli zk close ve ask close wait finish close sub thread otw selector close check posit test failur zk testabl wait shutdown testablewaitforshutdown connect timeout connect timeout throwabl log error test fail 

map jmap comp type jcomptyp level string get level getlevel integ string tostr level incr level incrlevel level decr level decrlevel level string get id getid string id id get level getlevel type jtype kei mkei type jtype valu mvalu creat instanc map jmap map jmap type jtype t1 type jtype t2 error std map t1 get cpp type getcpptyp t2 get cpp type getcpptyp collect gener sort dictionari sorteddictionari string string java util tree map treemap map collect gener sort dictionari sorteddictionari string string java util tree map treemap kei mkei t1 valu mvalu t2 string get signatur getsignatur kei mkei get signatur getsignatur valu mvalu get signatur getsignatur string gen java compar genjavacompareto string fname unsupport oper except unsupportedoperationexcept compar fname unimpl string gen java read wrapper genjavareadwrapp string fname string tag decl string builder stringbuild ret string builder stringbuild decl ret append java util tree map treemap fname ret append incr level incrlevel ret append org apach jute index get id getid midx start map startmap tag ret append fname java util tree map treemap ret append get id getid midx done get id getid midx incr ret append kei mkei gen java read wrapper genjavareadwrapp get id getid get id getid ret append valu mvalu gen java read wrapper genjavareadwrapp get id getid get id getid ret append fname put get id getid get id getid ret append ret append end map endmap tag decr level decrlevel ret append ret string tostr string gen java read method genjavareadmethod string fname string tag gen java read wrapper genjavareadwrapp fname tag string gen java write wrapper genjavawritewrapp string fname string tag string builder stringbuild ret string builder stringbuild incr level incrlevel ret append start map startmap fname tag ret append java util set get id getid es fname entri set entryset ret append java util iter get id getid midx get id getid es iter get id getid midx ha next hasnext ret append java util map entri get id getid java util map entri get id getid midx next ret append kei mkei get java wrapper type getjavawrappertyp get id getid kei mkei get java wrapper type getjavawrappertyp get id getid get kei getkei ret append valu mvalu get java wrapper type getjavawrappertyp get id getid valu mvalu get java wrapper type getjavawrappertyp get id getid get valu getvalu ret append kei mkei gen java write wrapper genjavawritewrapp get id getid get id getid ret append valu mvalu gen java write wrapper genjavawritewrapp get id getid get id getid ret append ret append end map endmap fname tag ret append decr level decrlevel ret string tostr string gen java write method genjavawritemethod string fname string tag gen java write wrapper genjavawritewrapp fname tag string gen csharp write wrapper gencsharpwritewrapp string fname tag string builder stringbuild ret string builder stringbuild incr level incrlevel ret append start map startmap fname tag ret append java util set get id getid es fname entri set entryset ret append java util iter get id getid midx get id getid es iter get id getid midx ha next hasnext ret append java util map entri get id getid java util map entri get id getid midx next ret append kei mkei get csharp wrapper type getcsharpwrappertyp get id getid kei mkei get csharp wrapper type getcsharpwrappertyp get id getid get kei getkei ret append valu mvalu get csharp wrapper type getcsharpwrappertyp get id getid valu mvalu get csharp wrapper type getcsharpwrappertyp get id getid get valu getvalu ret append kei mkei gen csharp write wrapper gencsharpwritewrapp get id getid get id getid ret append valu mvalu gen csharp write wrapper gencsharpwritewrapp get id getid get id getid ret append ret append end map endmap fname tag ret append decr level decrlevel ret string tostr string gen csharp write method gencsharpwritemethod string fname tag gen csharp write wrapper gencsharpwritewrapp fname tag string gen csharp read wrapper gencsharpreadwrapp string fname tag decl string builder stringbuild ret string builder stringbuild decl ret append collect sort dictionari sorteddictionari string string capit fname ret append incr level incrlevel ret append org apach jute index iindex get id getid midx start map startmap tag ret append fname collect sort dictionari sorteddictionari string string ret append get id getid midx done get id getid midx incr ret append kei mkei gen csharp read wrapper gencsharpreadwrapp get id getid get id getid ret append valu mvalu gen csharp read wrapper gencsharpreadwrapp get id getid get id getid ret append fname add get id getid get id getid ret append ret append end map endmap tag decr level decrlevel ret append ret string tostr string gen csharp read method gencsharpreadmethod string fname tag gen csharp read wrapper gencsharpreadwrapp fname tag 

string arg stringarg arg string string arg stringarg string valu arg type argtyp string valu valu 

client cnxn socket nio clientcnxnsocketnio client cnxn socket clientcnxnsocket logger log logger factori loggerfactori get logger getlogg client cnxn socket nio clientcnxnsocketnio selector selector selector open select kei selectionkei sock kei sockkei client cnxn socket nio clientcnxnsocketnio io except ioexcept overrid connect isconnect sock kei sockkei packet receiv interrupt except interruptedexcept io except ioexcept io doio list packet pend queue pendingqueu link list linkedlist packet outgo queue outgoingqueu client cnxn clientcnxn cnxn interrupt except interruptedexcept io except ioexcept socket channel socketchannel sock socket channel socketchannel sock kei sockkei channel sock io except ioexcept socket sock kei sockkei readabl isread rc sock read incom buffer incomingbuff rc end stream except endofstreamexcept unabl read addit data from server sessionid 0x hex string tohexstr session id sessionid server ha close socket incom buffer incomingbuff ha remain hasremain incom buffer incomingbuff flip incom buffer incomingbuff len buffer lenbuff recv count recvcount read length readlength initi read connect result readconnectresult enabl read enableread find sendabl packet findsendablepacket outgo queue outgoingqueu cnxn send thread sendthread client tunnel authent progress clienttunneledauthenticationinprogress sasl authent ha complet client configur outgo packet wait outgo queue outgoingqueu sent enabl write enablewrit len buffer lenbuff clear incom buffer incomingbuff len buffer lenbuff updat last heard updatelastheard initi send thread sendthread read respons readrespons incom buffer incomingbuff len buffer lenbuff clear incom buffer incomingbuff len buffer lenbuff updat last heard updatelastheard sock kei sockkei writabl iswrit outgo queue outgoingqueu packet find sendabl packet findsendablepacket outgo queue outgoingqueu cnxn send thread sendthread client tunnel authent progress clienttunneledauthenticationinprogress updat last send updatelastsend start write bb exist bb request header requesthead request header requesthead get type gettyp op code opcod ping request header requesthead get type gettyp op code opcod auth request header requesthead set xid setxid cnxn get xid getxid creat bb createbb sock write bb bb ha remain hasremain sent count sentcount outgo queue outgoingqueu remov first occurr removefirstoccurr request header requesthead request header requesthead get type gettyp op code opcod ping request header requesthead get type gettyp op code opcod auth pend queue pendingqueu pend queue pendingqueu add outgo queue outgoingqueu empti isempti more packet send turn write interest flag turn call enabl write enablewrit from zoo keeper sasl client zookeepersaslcli client configur attempt sasl authent io doio transport dotransport disabl write disablewrit enabl write enablewrit packet find sendabl packet findsendablepacket link list linkedlist packet outgo queue outgoingqueu client tunnel authent progress clienttunneledauthenticationinprogress outgo queue outgoingqueu outgo queue outgoingqueu empti isempti outgo queue outgoingqueu get first getfirst bb ve start send first packet better finish client tunnel authent progress clienttunneledauthenticationinprogress outgo queue outgoingqueu get first getfirst client authent server progress send header packet queu prime connect primeconnect packet sent sasl authent process proce packet wait sasl authent complet list iter listiter packet iter outgo queue outgoingqueu list iter listiter iter ha next hasnext packet iter next request header requesthead ve found prime packet move begin queue iter remov outgo queue outgoingqueu add non prime packet defer leav queue authent complet log debug enabl isdebugen log debug defer non prime packet sasl authent complet sendabl packet found overrid cleanup sock kei sockkei socket channel socketchannel sock socket channel socketchannel sock kei sockkei channel sock kei sockkei cancel sock socket shutdown input shutdowninput io except ioexcept log debug enabl isdebugen log debug ignor except shutdown input sock socket shutdown output shutdownoutput io except ioexcept log debug enabl isdebugen log debug ignor except shutdown output sock socket close io except ioexcept log debug enabl isdebugen log debug ignor except socket close sock close io except ioexcept log debug enabl isdebugen log debug ignor except channel close thread sleep 100 interrupt except interruptedexcept log debug enabl isdebugen log debug send thread sendthread interrupt sleep ignor sock kei sockkei overrid close log trace enabl istraceen log trace client selector close selector close log trace enabl istraceen log trace close client selector io except ioexcept log warn ignor except selector close creat socket channel creat socket channel io except ioexcept socket channel socketchannel creat sock createsock io except ioexcept socket channel socketchannel sock sock socket channel socketchannel open sock configur block configureblock sock socket set linger setsoling sock socket set tcp delai settcpnodelai sock select connect param sock link socket channel socketchannel param addr address remot host io except ioexcept connect registerandconnect socket channel socketchannel sock inet socket address inetsocketaddress addr io except ioexcept sock kei sockkei sock selector select kei selectionkei op connect op connect connect immediateconnect sock connect addr connect immediateconnect send thread sendthread prime connect primeconnect overrid connect inet socket address inetsocketaddress addr io except ioexcept socket channel socketchannel sock creat sock createsock connect registerandconnect sock addr io except ioexcept log error unabl open socket addr sock close initi reset incom buffer incomingbuff len buffer lenbuff clear incom buffer incomingbuff len buffer lenbuff return address socket connect ip address remot side connect connect overrid socket address socketaddress get remot socket address getremotesocketaddress lot wrong here put bunch code check null down chain let simpl bulletproof socket channel socketchannel sock kei sockkei channel socket get remot socket address getremotesocketaddress pointer except nullpointerexcept return local address socket bound ip address remot side connect connect overrid socket address socketaddress get local socket address getlocalsocketaddress lot wrong here put bunch code check null down chain let simpl bulletproof socket channel socketchannel sock kei sockkei channel socket get local socket address getlocalsocketaddress pointer except nullpointerexcept overrid wakeup cnxn wakeupcnxn selector wakeup overrid transport dotransport wait time waittimeout list packet pend queue pendingqueu link list linkedlist packet outgo queue outgoingqueu client cnxn clientcnxn cnxn io except ioexcept interrupt except interruptedexcept selector select wait time waittimeout set select kei selectionkei select select selector select kei selectedkei get back select non block time effect constant here updat updatenow select kei selectionkei select socket channel socketchannel sc socket channel socketchannel channel readi op readyop select kei selectionkei op connect op connect sc finish connect finishconnect updat last send heard updatelastsendandheard send thread sendthread prime connect primeconnect readi op readyop select kei selectionkei op read op read select kei selectionkei op write op write io doio pend queue pendingqueu outgo queue outgoingqueu cnxn send thread sendthread get zk state getzkstat connect isconnect outgo queue outgoingqueu find sendabl packet findsendablepacket outgo queue outgoingqueu cnxn send thread sendthread client tunnel authent progress clienttunneledauthenticationinprogress enabl write enablewrit select clear todo overrid testabl close socket testableclosesocket io except ioexcept log info testabl close socket testableclosesocket call socket channel socketchannel sock kei sockkei channel socket close overrid enabl write enablewrit sock kei sockkei interest op interestop select kei selectionkei op write op write sock kei sockkei interest op interestop select kei selectionkei op write op write overrid disabl write disablewrit sock kei sockkei interest op interestop select kei selectionkei op write op write sock kei sockkei interest op interestop select kei selectionkei op write op write enabl read enableread sock kei sockkei interest op interestop select kei selectionkei op read op read sock kei sockkei interest op interestop select kei selectionkei op read op read overrid enabl read write enablereadwriteonli sock kei sockkei interest op interestop select kei selectionkei op read op read select kei selectionkei op write op write selector get selector getselector selector overrid send packet sendpacket packet io except ioexcept socket channel socketchannel sock socket channel socketchannel sock kei sockkei channel sock io except ioexcept socket creat bb createbb buffer bytebuff pbb bb sock write pbb 

client cnxn socket clientcnxnsocket lower level commun socket implement code ha move client cnxn clientcnxn netti implement provid altern nio socket code abstract client cnxn socket clientcnxnsocket logger log logger factori loggerfactori get logger getlogg client cnxn socket clientcnxnsocket initi buffer us read length incom messag buffer bytebuff len buffer lenbuff buffer bytebuff alloc direct allocatedirect after length read incom buffer incomingbuff alloc read length readlength receiv full messag buffer bytebuff incom buffer incomingbuff len buffer lenbuff sent count sentcount recv count recvcount last heard lastheard last send lastsend client cnxn clientcnxn send thread sendthread send thread sendthread session id sessionid avail here log except messag socket doesn session id sessionid introduc client cnxn clientcnxn send thread sendthread send thread sendthread session id sessionid send thread sendthread send thread sendthread session id sessionid session id sessionid updat updatenow current time milli currenttimemilli get idl recv getidlerecv last heard lastheard get idl send getidlesend last send lastsend get sent count getsentcount sent count sentcount get recv count getrecvcount recv count recvcount updat last heard updatelastheard last heard lastheard updat last send updatelastsend last send lastsend updat last send heard updatelastsendandheard last send lastsend last heard lastheard read length readlength io except ioexcept len incom buffer incomingbuff get getint len len client cnxn clientcnxn packet len packetlen io except ioexcept packet len len rang incom buffer incomingbuff buffer bytebuff alloc len read connect result readconnectresult io except ioexcept log trace enabl istraceen string builder stringbuild buf string builder stringbuild 0x incom buffer incomingbuff arrai buf append integ hex string tohexstr buf append log trace read connect result readconnectresult incom buffer incomingbuff remain buf string tostr buffer input stream bytebufferinputstream bbi buffer input stream bytebufferinputstream incom buffer incomingbuff binari input archiv binaryinputarch bbia binari input archiv binaryinputarch get archiv getarch bbi connect respons connectrespons rsp conrsp connect respons connectrespons rsp conrsp deseri bbia connect read read flag ro isro ro isro bbia read readbool read readonli io except ioexcept packet from old server doesn contain read readonli field log warn connect old server mode unavail session id sessionid rsp conrsp get session id getsessionid send thread sendthread connect onconnect rsp conrsp get time gettimeout session id sessionid rsp conrsp get passwd getpasswd ro isro abstract connect isconnect abstract connect inet socket address inetsocketaddress addr io except ioexcept abstract socket address socketaddress get remot socket address getremotesocketaddress abstract socket address socketaddress get local socket address getlocalsocketaddress abstract cleanup abstract close abstract wakeup cnxn wakeupcnxn abstract enabl write enablewrit abstract disabl write disablewrit abstract enabl read write enablereadwriteonli abstract transport dotransport wait time waittimeout list packet pend queue pendingqueu link list linkedlist packet outgo queue outgoingqueu client cnxn clientcnxn cnxn io except ioexcept interrupt except interruptedexcept abstract testabl close socket testableclosesocket io except ioexcept abstract send packet sendpacket packet io except ioexcept 

deseri implement input archiv inputarch read readbyt string tag io except ioexcept read readbool string tag io except ioexcept read readint string tag io except ioexcept read readlong string tag io except ioexcept read readfloat string tag io except ioexcept read readdoubl string tag io except ioexcept string read string readstr string tag io except ioexcept read buffer readbuff string tag io except ioexcept read record readrecord record string tag io except ioexcept start record startrecord string tag io except ioexcept end record endrecord string tag io except ioexcept index start vector startvector string tag io except ioexcept end vector endvector string tag io except ioexcept index start map startmap string tag io except ioexcept end map endmap string tag io except ioexcept 

jersei format octet respons error messag produc media type mediatyp applic octet stream applic octet stream provid error writer zerrorwrit messag bodi writer messagebodywrit error zerror get size getsiz error zerror type type gener type generictyp annot annot media type mediatyp media type mediatyp writeabl iswrit type type gener type generictyp annot annot media type mediatyp media type mediatyp error zerror assign from isassignablefrom type write writeto error zerror type type gener type generictyp annot annot media type mediatyp media type mediatyp multivalu map multivaluedmap string object http header httpheader output stream outputstream os io except ioexcept web applic except webapplicationexcept print stream printstream print stream printstream os print request request fail messag flush 

connect request connectrequest record protocol version protocolvers last zxid lastzxidseen time timeout session id sessionid passwd connect request connectrequest connect request connectrequest protocol version protocolvers last zxid lastzxidseen time timeout session id sessionid passwd protocol version protocolvers protocol version protocolvers last zxid lastzxidseen last zxid lastzxidseen time timeout time timeout session id sessionid session id sessionid passwd passwd get protocol version getprotocolvers protocol version protocolvers set protocol version setprotocolvers protocol version protocolvers get last zxid getlastzxidseen last zxid lastzxidseen set last zxid setlastzxidseen last zxid lastzxidseen get time gettimeout time timeout set time settimeout time timeout get session id getsessionid session id sessionid set session id setsessionid session id sessionid get passwd getpasswd passwd set passwd setpasswd passwd serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint protocol version protocolvers protocol version protocolvers write writelong last zxid lastzxidseen last zxid lastzxidseen write writeint time timeout time timeout write writelong session id sessionid session id sessionid write buffer writebuff passwd passwd end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag protocol version protocolvers read readint protocol version protocolvers last zxid lastzxidseen read readlong last zxid lastzxidseen time timeout read readint time timeout session id sessionid read readlong session id sessionid passwd read buffer readbuff passwd end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint protocol version protocolvers protocol version protocolvers write writelong last zxid lastzxidseen last zxid lastzxidseen write writeint time timeout time timeout write writelong session id sessionid session id sessionid write buffer writebuff passwd passwd end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer connect request connectrequest cast except classcastexcept compar differ type record connect request connectrequest peer connect request connectrequest peer peer ret ret protocol version protocolvers peer protocol version protocolvers protocol version protocolvers peer protocol version protocolvers ret ret ret last zxid lastzxidseen peer last zxid lastzxidseen last zxid lastzxidseen peer last zxid lastzxidseen ret ret ret time timeout peer time timeout time timeout peer time timeout ret ret ret session id sessionid peer session id sessionid session id sessionid peer session id sessionid ret ret passwd ur peer passwd ret org apach jute util compar byte comparebyt length ur ur length ret ret ret equal object peer peer peer peer connect request connectrequest peer peer connect request connectrequest peer connect request connectrequest peer peer ret ret protocol version protocolvers peer protocol version protocolvers ret ret ret last zxid lastzxidseen peer last zxid lastzxidseen ret ret ret time timeout peer time timeout ret ret ret session id sessionid peer session id sessionid ret ret ret org apach jute util buf equal bufequ passwd peer passwd ret ret ret hash code hashcod result 17 ret ret protocol version protocolvers result 37 result ret ret last zxid lastzxidseen last zxid lastzxidseen 32 result 37 result ret ret time timeout result 37 result ret ret session id sessionid session id sessionid 32 result 37 result ret ret java util arrai string tostr passwd hash code hashcod result 37 result ret result string signatur connect request lconnectrequest ililb 

request processor requestprocessor forward request modifi state leader observ request processor observerrequestprocessor thread request processor requestprocessor logger log logger factori loggerfactori get logger getlogg observ request processor observerrequestprocessor observ zoo keeper server observerzookeeperserv zk request processor requestprocessor next processor nextprocessor keep queue request request get submit store here queue drain run method link block queue linkedblockingqueu request queu request queuedrequest link block queue linkedblockingqueu request finish constructor take observ zoo keeper server observerzookeeperserv associ next processor pass request after finish param zk param next processor nextprocessor observ request processor observerrequestprocessor observ zoo keeper server observerzookeeperserv zk request processor requestprocessor next processor nextprocessor observ request processor observerrequestprocessor zk get server id getserverid zk zk next processor nextprocessor next processor nextprocessor overrid run finish request request queu request queuedrequest log trace enabl istraceen zoo trace zootrac log request logrequest log zoo trace zootrac client request trace mask client request trace mask request request request request death requestofdeath queue request process befor submit request leader readi receiv respons next processor nextprocessor process request processrequest request ship request leader quorum oper sync follow code path differ from keep track sync oper observ ha pend add pend sync pendingsync request type op code opcod sync zk pend sync pendingsync add request zk get observ getobserv request request op code opcod creat op code opcod delet op code opcod set data setdata op code opcod set acl setacl op code opcod creat session createsess op code opcod close session closesess op code opcod multi zk get observ getobserv request request except log error unexpect except caus exit log info observ request processor observerrequestprocessor exit loop simpli queue request process fifo order process request processrequest request request finish queu request queuedrequest add request shutdown processor shutdown log info shut down finish queu request queuedrequest clear queu request queuedrequest add request request death requestofdeath next processor nextprocessor shutdown 

watch event watchedev repres chang zoo keeper zookeep watcher abl respond watch event watchedev includ exactli happen current state zoo keeper zookeep path znode involv event watch event watchedev keeper state keeperst keeper state keeperst event type eventtyp event type eventtyp string path creat watch event watchedev specifi type state path watch event watchedev event type eventtyp event type eventtyp keeper state keeperst keeper state keeperst string path keeper state keeperst keeper state keeperst event type eventtyp event type eventtyp path path convert watcher event watcherev sent wire full fledg watcher event watcherev watch event watchedev watcher event watcherev event messag eventmessag keeper state keeperst keeper state keeperst from fromint event messag eventmessag get state getstat event type eventtyp event type eventtyp from fromint event messag eventmessag get type gettyp path event messag eventmessag get path getpath keeper state keeperst get state getstat keeper state keeperst event type eventtyp get type gettyp event type eventtyp string get path getpath path overrid string string tostr watch event watchedev state keeper state keeperst type event type eventtyp path path convert watch event watchedev type sent network watcher event watcherev get wrapper getwrapp watcher event watcherev event type eventtyp get valu getintvalu keeper state keeperst get valu getintvalu path 

helper implement txnlog snapshot class file txn snap log filetxnsnaplog direcotri contain transact log file data dir datadir directori contain snapshot directori file snap dir snapdir txn log txnlog txn log txnlog snap shot snapshot snap log snaplog version string version version logger log logger factori loggerfactori get logger getlogg file txn snap log filetxnsnaplog listen help extern api call restor gather inform data restor plai back listen playbacklisten txn load ontxnload txn header txnheader hdr record rec constructor take datadir snapdir param data dir datadir trasact directori param snap dir snapdir snapshot directori file txn snap log filetxnsnaplog file data dir datadir file snap dir snapdir io except ioexcept log debug open datadir snap dir snapdir data dir datadir snap dir snapdir data dir datadir file data dir datadir version version snap dir snapdir file snap dir snapdir version version data dir datadir exist data dir datadir mkdir io except ioexcept unabl creat data directori data dir datadir snap dir snapdir exist snap dir snapdir mkdir io except ioexcept unabl creat snap directori snap dir snapdir txn log txnlog file txn log filetxnlog data dir datadir snap log snaplog file snap filesnap snap dir snapdir get datadir us filetxn snap log data dir file get data dir getdatadir data dir datadir get snap dir us filetxn snap log snap dir file get snap dir getsnapdir snap dir snapdir function restor server databas after read from snapshot transact log param dt datatre restor param session session restor param listen playback listen run databas restor highest zxid restor io except ioexcept restor data tree datatre dt map integ session plai back listen playbacklisten listen io except ioexcept snap log snaplog deseri dt session file txn log filetxnlog txn log txnlog file txn log filetxnlog data dir datadir txn iter txniter itr txn log txnlog read dt last process zxid lastprocessedzxid highest zxid highestzxid dt last process zxid lastprocessedzxid txn header txnheader hdr iter point first valid txn initi hdr itr get header gethead hdr empti log dt last process zxid lastprocessedzxid hdr get zxid getzxid highest zxid highestzxid highest zxid highestzxid log error highest zxid highestzxid higest zxid higestzxid hdr get zxid getzxid next log type hdr get type gettyp highest zxid highestzxid hdr get zxid getzxid process transact processtransact hdr dt session itr get txn gettxn keeper except keeperexcept node except nonodeexcept io except ioexcept fail process transact type hdr get type gettyp error get messag getmessag listen txn load ontxnload hdr itr get txn gettxn itr next highest zxid highestzxid process transact datatre param hdr hdr transact param dt datatre appli transact param session session restor param txn transact appli process transact processtransact txn header txnheader hdr data tree datatre dt map integ session record txn keeper except keeperexcept node except nonodeexcept process txn result processtxnresult rc hdr get type gettyp op code opcod creat session createsess session put hdr get client id getclientid creat session txn createsessiontxn txn get time gettimeout log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask plai log playlog creat session log 0x hex string tohexstr hdr get client id getclientid timeout creat session txn createsessiontxn txn get time gettimeout data tree datatre chanc sync last process zxid lastprocessedzxid rc dt process txn processtxn hdr txn op code opcod close session closesess session remov hdr get client id getclientid log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask plai log playlog close session log 0x hex string tohexstr hdr get client id getclientid rc dt process txn processtxn hdr txn rc dt process txn processtxn hdr txn happen nonod show up transact log more indic corrupt transact log refer zookeep 1333 more info rc err code valu intvalu hdr get type gettyp op code opcod creat rc err code nonod valu intvalu last slash lastslash rc path last index lastindexof string parent name parentnam rc path substr last slash lastslash log error parent miss parent name parentnam rc path keeper except keeperexcept node except nonodeexcept parent name parentnam log debug ignor process txn processtxn failur hdr hdr get type gettyp error rc err last log zxid transact log last log zxid get last log zxid getlastloggedzxid file txn log filetxnlog txn log txnlog file txn log filetxnlog data dir datadir txn log txnlog get last log zxid getlastloggedzxid save datatre session snapshot param data tree datatre datatre serial disk param session timeout sessionswithtimeout sesssion timeout serial disk io except ioexcept save data tree datatre data tree datatre concurr hash map concurrenthashmap integ session timeout sessionswithtimeout io except ioexcept last zxid lastzxid data tree datatre last process zxid lastprocessedzxid file snapshot file snapshotfil file snap dir snapdir util make snapshot name makesnapshotnam last zxid lastzxid log info snapshot 0x hex string tohexstr last zxid lastzxid snapshot file snapshotfil snap log snaplog serial data tree datatre session timeout sessionswithtimeout snapshot file snapshotfil truncat transact log zxid specifi param zxid zxid truncat log abl truncat log io except ioexcept truncat log truncatelog zxid io except ioexcept close exist txn log txnlog snap log snaplog close truncat file txn log filetxnlog trunc log trunclog file txn log filetxnlog data dir datadir truncat trunc log trunclog truncat zxid trunc log trunclog close open txn log txnlog snap log snaplog close reopen object big impact zk databas zkdatabas object hold refer object txn log txnlog file txn log filetxnlog data dir datadir snap log snaplog file snap filesnap snap dir snapdir truncat most recent snapshot snapshot directori file contain most recent snapshot io except ioexcept file find most recent snapshot findmostrecentsnapshot io except ioexcept file snap filesnap snaplog file snap filesnap snap dir snapdir snaplog find most recent snapshot findmostrecentsnapshot most recent snapshot param number recent snapshot list most recent snapshot most recent front io except ioexcept list file find recent snapshot findnrecentsnapshot io except ioexcept file snap filesnap snaplog file snap filesnap snap dir snapdir snaplog find recent snapshot findnrecentsnapshot get snapshot log greater zxid param zxid zxid contain log greater zxid file get snapshot log getsnapshotlog zxid file txn log filetxnlog get log file getlogfil data dir datadir list file listfil zxid append request transact log param si request append return iff append otw io except ioexcept append request si io except ioexcept txn log txnlog append si hdr si txn commit transact log io except ioexcept commit io except ioexcept txn log txnlog commit roll transact log io except ioexcept roll log rolllog io except ioexcept txn log txnlog roll log rolllog close transact log file io except ioexcept close io except ioexcept txn log txnlog close snap log snaplog close 

listen help extern api call restor gather inform data restor plai back listen playbacklisten txn load ontxnload txn header txnheader hdr record rec 

txn log txnlog api access txnlog add entri format transact log follow blockquot pre log file logfil file header filehead txn list txnlist zero pad zeropad file header filehead magic byte 4byte zklg version byte 4byte dbid byte 8byte txn list txnlist txn txn txn list txnlist txn checksum txnlen txn header txnheader record x42 0x42 checksum byte 8byte adler32 current us calcul payload txnlen txn header txnheader record x42 0x42 txnlen len byte 4byte txn header txnheader sessionid byte 8byte cxid byte 4byte zxid byte 8byte time byte 8byte type byte 4byte record jute definit file detail record type zero pad zeropad pad eof fill prealloc stage pre blockquot file txn log filetxnlog txn log txnlog logger log pre alloc size preallocs 65536 1024 txnlog magic txnlog magic buffer bytebuff wrap zklg get byte getbyt get getint version maximum time allow elaps fsync befor war ning warn fsync warn threshold ms fsyncwarningthresholdm log logger factori loggerfactori get logger getlogg file txn log filetxnlog string size get properti getproperti zookeep pre alloc size preallocs size pre alloc size preallocs pars parselong size 1024 number format except numberformatexcept log warn size valid valu pre alloc size preallocs fsync warn threshold ms fsyncwarningthresholdm get getlong fsync warningthresholdm 1000 last zxid lastzxidseen buffer output stream bufferedoutputstream log stream logstream output archiv outputarch oa file output stream fileoutputstream fo file log dir logdir forc sync forcesync get properti getproperti zookeep forc sync forcesync ye equal db id dbid link list linkedlist file output stream fileoutputstream stream flush streamstoflush link list linkedlist file output stream fileoutputstream current size currents file log file write logfilewrit constructor file txn log filetxnlog directori txnlog store param log dir logdir directori txnlog store file txn log filetxnlog file log dir logdir log dir logdir log dir logdir method allow set prealloc size log file pad file param size size set byte set prealloc size setpreallocs size pre alloc size preallocs size creat checksum alogrithm us checksum us txnlog checksum make checksum algorithm makechecksumalgorithm adler32 rollov current log file on io except ioexcept roll log rolllog io except ioexcept log stream logstream log stream logstream flush log stream logstream oa close open file handl io except ioexcept close io except ioexcept log stream logstream log stream logstream close file output stream fileoutputstream log stream flush streamstoflush log close append entri transact log param hdr header transact param txn transact part entri return iff append otw append txn header txnheader hdr record txn io except ioexcept hdr hdr get zxid getzxid last zxid lastzxidseen log warn current zxid hdr get zxid getzxid last zxid lastzxidseen hdr get type gettyp log stream logstream log info enabl isinfoen log info creat log file log hex string tohexstr hdr get zxid getzxid log file write logfilewrit file log dir logdir log hex string tohexstr hdr get zxid getzxid fo file output stream fileoutputstream log file write logfilewrit log stream logstream buffer output stream bufferedoutputstream fo oa binari output archiv binaryoutputarch get archiv getarch log stream logstream file header filehead fhdr file header filehead txnlog magic txnlog magic version db id dbid fhdr serial oa filehead make magic number written befor pad log stream logstream flush current size currents fo get channel getchannel posit stream flush streamstoflush add fo pad file padfil fo buf util marshal txn entri marshalltxnentri hdr txn buf buf length io except ioexcept faulti serial header txn checksum crc make checksum algorithm makechecksumalgorithm crc updat buf buf length oa write writelong crc get valu getvalu txn entri crc txnentrycrc util write txn byte writetxnbyt oa buf pad current file increas size param outputstream pad io except ioexcept pad file padfil file output stream fileoutputstream io except ioexcept current size currents util pad log file padlogfil current size currents pre alloc size preallocs find log file start befor snapshot subsequ log result order zxid file ascend order param log dir list logdirlist arrai file param snapshot zxid snapshotzxid file befor zxid file get log file getlogfil file log dir list logdirlist snapshot zxid snapshotzxid list file file util sort data dir sortdatadir log dir list logdirlist log log zxid logzxid find log file start befor time zxid snapshot file file fzxid util get zxid from name getzxidfromnam get name getnam log fzxid snapshot zxid snapshotzxid file sort zxid fzxid log zxid logzxid log zxid logzxid fzxid list file arrai list arraylist file file file fzxid util get zxid from name getzxidfromnam get name getnam log fzxid log zxid logzxid add arrai toarrai file get last zxid log transact log last zxid log transact log get last log zxid getlastloggedzxid file file get log file getlogfil log dir logdir list file listfil max log maxlog file length util get zxid from name getzxidfromnam file file length get name getnam log log file more recent scan find highest zxid zxid max log maxlog file txn log filetxnlog txn file txn log filetxnlog log dir logdir txn iter txniter itr txn read max log maxlog itr next txn header txnheader hdr itr get header gethead zxid hdr get zxid getzxid io except ioexcept log warn unexpect except zxid commit log make evertyh hit disk commit io except ioexcept log stream logstream log stream logstream flush file output stream fileoutputstream log stream flush streamstoflush log flush forc sync forcesync start sync ns startsyncn nano time nanotim log get channel getchannel forc sync elaps ms syncelapsedm time unit timeunit nanosecond milli tomilli nano time nanotim start sync ns startsyncn sync elaps ms syncelapsedm fsync warn threshold ms fsyncwarningthresholdm log warn fsync ing write ahead log thread current thread currentthread get name getnam sync elaps ms syncelapsedm ms advers effect oper latenc zoo keeper zookeep troubleshoot guid stream flush streamstoflush size stream flush streamstoflush remov first removefirst close start read transact from zxid param zxid zxid start read transact from return iter iter transact log txn iter txniter read zxid io except ioexcept file txn iter filetxniter log dir logdir zxid truncat current transact log param zxid zxid truncat log success truncat zxid io except ioexcept file txn iter filetxniter itr file txn iter filetxniter log dir logdir zxid posit input stream positioninputstream input itr input stream inputstream po input get posit getposit truncat current posit random access file randomaccessfil raf random access file randomaccessfil itr log file logfil rw raf set length setlength po raf close itr next log gotonextlog itr log file logfil delet log warn unabl truncat itr log file logfil read header transact file param file transact file read header read fomr file io except ioexcept file header filehead read header readhead file file io except ioexcept input stream inputstream buffer input stream bufferedinputstream file input stream fileinputstream file input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch file header filehead hdr file header filehead hdr deseri ia filehead hdr close io except ioexcept log warn ignor except close dbid transact databas dbid databas get db id getdbid io except ioexcept file txn iter filetxniter itr file txn iter filetxniter log dir logdir file header filehead fh read header readhead itr log file logfil itr close fh io except ioexcept unsupport format fh get dbid getdbid forc sync forcesync valu forc sync forcesync enabl forc sync forcesync valu forc sync isforcesync forc sync forcesync keep track posit input stream posit point offset ha consum applic wrap buffer input stream provid right offset applic posit input stream positioninputstream filter input stream filterinputstream posit posit input stream positioninputstream input stream inputstream posit overrid read io except ioexcept rc read rc posit rc read io except ioexcept rc read rc posit rc rc overrid read len io except ioexcept rc read len rc posit rc rc overrid skip io except ioexcept rc skip rc posit rc rc get posit getposit posit overrid mark support marksupport overrid mark read limit readlimit unsupport oper except unsupportedoperationexcept mark overrid reset unsupport oper except unsupportedoperationexcept reset txnlog iter us read transact log file txn iter filetxniter txn log txnlog txn iter txniter file log dir logdir zxid txn header txnheader hdr record record file log file logfil input archiv inputarch ia string crc error crc error crc check fail posit input stream positioninputstream input stream inputstream store file list file greater zxid arrai list arraylist file store file storedfil creat iter transact databas directori param log dir logdir transact databas directori param zxid zxid start read from io except ioexcept file txn iter filetxniter file log dir logdir zxid io except ioexcept log dir logdir log dir logdir zxid zxid init initi zxid specifi inclus zxid io except ioexcept init io except ioexcept store file storedfil arrai list arraylist file list file file util sort data dir sortdatadir file txn log filetxnlog get log file getlogfil log dir logdir list file listfil log file file util get zxid from name getzxidfromnam get name getnam log zxid store file storedfil add add last logfil zxid util get zxid from name getzxidfromnam get name getnam log zxid store file storedfil add next log gotonextlog next hdr get zxid getzxid zxid next next logfil on file read io except ioexcept next log gotonextlog io except ioexcept store file storedfil size log file logfil store file storedfil remov store file storedfil size ia creat input archiv createinputarch log file logfil read header from inputarch param ia inputarch read from param inputstream io except ioexcept stream creat instreamcr input archiv inputarch ia input stream inputstream io except ioexcept file header filehead header file header filehead header deseri ia filehead header get magic getmag file txn log filetxnlog txnlog magic txnlog magic io except ioexcept transact log log file logfil ha invalid magic number header get magic getmag file txn log filetxnlog txnlog magic txnlog magic invok input stream ha creat param ia input archiv param file input stream associ input archiv io except ioexcept input archiv inputarch creat input archiv createinputarch file log file logfil io except ioexcept input stream inputstream input stream inputstream posit input stream positioninputstream buffer input stream bufferedinputstream file input stream fileinputstream log file logfil log debug creat input stream log file logfil ia binari input archiv binaryinputarch get archiv getarch input stream inputstream stream creat instreamcr ia input stream inputstream log debug creat input archiv log file logfil ia creat checksum algorithm checksum algorithm checksum make checksum algorithm makechecksumalgorithm adler32 iter move next transact more transact read next io except ioexcept ia crc valu crcvalu ia read readlong crcvalu byte util read txn byte readtxnbyt ia prealloc defin eof byte byte length eof except eofexcept fail read log file logfil eof corrupt record valid crc checksum crc make checksum algorithm makechecksumalgorithm crc updat byte byte length crc valu crcvalu crc get valu getvalu io except ioexcept crc error crc error byte byte length hdr txn header txnheader record serial util serializeutil deseri txn deserializetxn byte hdr eof except eofexcept log debug eof excepton input stream inputstream close input stream inputstream ia hdr mean file ha end next file next log gotonextlog next log file call next next reutrn current header current header read txn header txnheader get header gethead hdr current transact current transact read record get txn gettxn record close iter releas resourc close io except ioexcept input stream inputstream close 

keep track posit input stream posit point offset ha consum applic wrap buffer input stream provid right offset applic posit input stream positioninputstream filter input stream filterinputstream posit posit input stream positioninputstream input stream inputstream posit overrid read io except ioexcept rc read rc posit rc read io except ioexcept rc read rc posit rc rc overrid read len io except ioexcept rc read len rc posit rc rc overrid skip io except ioexcept rc skip rc posit rc rc get posit getposit posit overrid mark support marksupport overrid mark read limit readlimit unsupport oper except unsupportedoperationexcept mark overrid reset unsupport oper except unsupportedoperationexcept reset 

txnlog iter us read transact log file txn iter filetxniter txn log txnlog txn iter txniter file log dir logdir zxid txn header txnheader hdr record record file log file logfil input archiv inputarch ia string crc error crc error crc check fail posit input stream positioninputstream input stream inputstream store file list file greater zxid arrai list arraylist file store file storedfil creat iter transact databas directori param log dir logdir transact databas directori param zxid zxid start read from io except ioexcept file txn iter filetxniter file log dir logdir zxid io except ioexcept log dir logdir log dir logdir zxid zxid init initi zxid specifi inclus zxid io except ioexcept init io except ioexcept store file storedfil arrai list arraylist file list file file util sort data dir sortdatadir file txn log filetxnlog get log file getlogfil log dir logdir list file listfil log file file util get zxid from name getzxidfromnam get name getnam log zxid store file storedfil add add last logfil zxid util get zxid from name getzxidfromnam get name getnam log zxid store file storedfil add next log gotonextlog next hdr get zxid getzxid zxid next next logfil on file read io except ioexcept next log gotonextlog io except ioexcept store file storedfil size log file logfil store file storedfil remov store file storedfil size ia creat input archiv createinputarch log file logfil read header from inputarch param ia inputarch read from param inputstream io except ioexcept stream creat instreamcr input archiv inputarch ia input stream inputstream io except ioexcept file header filehead header file header filehead header deseri ia filehead header get magic getmag file txn log filetxnlog txnlog magic txnlog magic io except ioexcept transact log log file logfil ha invalid magic number header get magic getmag file txn log filetxnlog txnlog magic txnlog magic invok input stream ha creat param ia input archiv param file input stream associ input archiv io except ioexcept input archiv inputarch creat input archiv createinputarch file log file logfil io except ioexcept input stream inputstream input stream inputstream posit input stream positioninputstream buffer input stream bufferedinputstream file input stream fileinputstream log file logfil log debug creat input stream log file logfil ia binari input archiv binaryinputarch get archiv getarch input stream inputstream stream creat instreamcr ia input stream inputstream log debug creat input archiv log file logfil ia creat checksum algorithm checksum algorithm checksum make checksum algorithm makechecksumalgorithm adler32 iter move next transact more transact read next io except ioexcept ia crc valu crcvalu ia read readlong crcvalu byte util read txn byte readtxnbyt ia prealloc defin eof byte byte length eof except eofexcept fail read log file logfil eof corrupt record valid crc checksum crc make checksum algorithm makechecksumalgorithm crc updat byte byte length crc valu crcvalu crc get valu getvalu io except ioexcept crc error crc error byte byte length hdr txn header txnheader record serial util serializeutil deseri txn deserializetxn byte hdr eof except eofexcept log debug eof excepton input stream inputstream close input stream inputstream ia hdr mean file ha end next file next log gotonextlog next log file call next next reutrn current header current header read txn header txnheader get header gethead hdr current transact current transact read record get txn gettxn record close iter releas resourc close io except ioexcept input stream inputstream close 

repli header replyhead record xid zxid err repli header replyhead repli header replyhead xid zxid err xid xid zxid zxid err err get xid getxid xid set xid setxid xid get zxid getzxid zxid set zxid setzxid zxid get err geterr err set err seterr err serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint xid xid write writelong zxid zxid write writeint err err end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag xid read readint xid zxid read readlong zxid err read readint err end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint xid xid write writelong zxid zxid write writeint err err end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer repli header replyhead cast except classcastexcept compar differ type record repli header replyhead peer repli header replyhead peer peer ret ret xid peer xid xid peer xid ret ret ret zxid peer zxid zxid peer zxid ret ret ret err peer err err peer err ret ret ret equal object peer peer peer peer repli header replyhead peer peer repli header replyhead peer repli header replyhead peer peer ret ret xid peer xid ret ret ret zxid peer zxid ret ret ret err peer err ret ret ret hash code hashcod result 17 ret ret xid result 37 result ret ret zxid zxid 32 result 37 result ret ret err result 37 result ret result string signatur repli header lreplyhead ili 

zoo keeper server zookeeperserv observ node type differ anticip special request processor futur observ zoo keeper server observerzookeeperserv learner zoo keeper server learnerzookeeperserv logger log logger factori loggerfactori get logger getlogg observ zoo keeper server observerzookeeperserv request processor commit processor commitprocessor commit processor commitprocessor sync request processor syncrequestprocessor sync processor syncprocessor pend sync request concurr link queue concurrentlinkedqueu request pend sync pendingsync concurr link queue concurrentlinkedqueu request observ zoo keeper server observerzookeeperserv file txn snap log filetxnsnaplog log factori logfactori quorum peer quorump self data tree builder datatreebuild tree builder treebuild zk databas zkdatabas zk db zkdb io except ioexcept log factori logfactori self tick time ticktim self min session timeout minsessiontimeout self max session timeout maxsessiontimeout tree builder treebuild zk db zkdb self observ get observ getobserv self observ overrid learner get learner getlearn self observ unlik follow see full request propos phase observ get data requir inform packet method commit request ha unpack from inform receiv from leader param request commit request commitrequest request request commit processor commitprocessor commit request set up request processor observ first procesor firstprocesor commit processor commitprocessor processor finalprocessor overrid setup request processor setuprequestprocessor chang processor behaviour observ exampl remov disk sync requir current behav exactli follow request processor requestprocessor processor finalprocessor request processor finalrequestprocessor commit processor commitprocessor commit processor commitprocessor processor finalprocessor string tostr get server id getserverid commit processor commitprocessor start first processor firstprocessor observ request processor observerrequestprocessor commit processor commitprocessor observ request processor observerrequestprocessor first processor firstprocessor start sync processor syncprocessor sync request processor syncrequestprocessor send ack request processor sendackrequestprocessor get observ getobserv sync processor syncprocessor start process sync request sync pend sync pendingsync size log warn expect sync request pend sync pendingsync remov commit processor commitprocessor commit overrid string get state getstat observ 

structur repres request move chain request processor requestprocessor piec inform tack request process request logger log logger factori loggerfactori get logger getlogg request request request death requestofdeath request param cnxn param session id sessionid param xid param type param bb request server cnxn servercnxn cnxn session id sessionid xid type buffer bytebuff bb list id auth info authinfo cnxn cnxn session id sessionid session id sessionid cxid xid type type request bb auth info authinfo auth info authinfo session id sessionid cxid type buffer bytebuff request server cnxn servercnxn cnxn txn header txnheader hdr record txn zxid list id auth info authinfo creat time createtim current time milli currenttimemilli object owner keeper except keeperexcept object get owner getown owner set owner setown object owner owner owner packet type valid packet zookeep param type type packet valid packet valid isvalid type make zoodef type op code opcod notif op code opcod creat op code opcod delet op code opcod creat session createsess op code opcod exist op code opcod get data getdata op code opcod check op code opcod multi op code opcod set data setdata op code opcod sync op code opcod get acl getacl op code opcod set acl setacl op code opcod get children getchildren op code opcod get children2 getchildren2 op code opcod ping op code opcod close session closesess op code opcod set watch setwatch quorum isquorum type type op code opcod exist op code opcod get acl getacl op code opcod get children getchildren op code opcod get children2 getchildren2 op code opcod get data getdata op code opcod error op code opcod close session closesess op code opcod creat op code opcod creat session createsess op code opcod delet op code opcod set acl setacl op code opcod set data setdata op code opcod check op code opcod multi string op2 string op2str op op op code opcod notif notif op code opcod creat creat op code opcod set watch setwatch set watch setwatch op code opcod delet delet op code opcod exist exist op code opcod get data getdata get data getdata op code opcod check check op code opcod multi multi op code opcod set data setdata set data setdata op code opcod sync sync op code opcod get acl getacl get acl getacl op code opcod set acl setacl set acl setacl op code opcod get children getchildren get children getchildren op code opcod get children2 getchildren2 get children2 getchildren2 op code opcod ping ping op code opcod creat session createsess creat session createsess op code opcod close session closesess close session closesess op code opcod error error unknown op overrid string string tostr string builder stringbuild sb string builder stringbuild sb append sessionid 0x append hex string tohexstr session id sessionid append type append op2 string op2str type append cxid 0x append hex string tohexstr cxid append zxid 0x append hex string tohexstr hdr hdr get zxid getzxid append txntype append hdr unknown hdr get type gettyp best effort print path assoc request string path type op code opcod creat session createsess type op code opcod set watch setwatch type op code opcod close session closesess request request remain make don mess request buffer bytebuff rbuf request read buffer asreadonlybuff rbuf clear path len pathlen rbuf get getint saniti check path len pathlen path len pathlen 4096 rbuf remain path len pathlen path len pathlen rbuf get path string except ignor find path output sb append reqpath append path sb string tostr set except setexcept keeper except keeperexcept keeper except keeperexcept get except getexcept 

kerbero util kerberosutil string get realm getdefaultrealm found except classnotfoundexcept method except nosuchmethodexcept illeg argument except illegalargumentexcept illeg access except illegalaccessexcept invoc target except invocationtargetexcept object kerb conf kerbconf ref classref method get instanc method getinstancemethod method get realm method getdefaultrealmmethod get properti getproperti java vendor contain ibm ref classref name fornam com ibm secur krb5 intern config ref classref name fornam sun secur krb5 config get instanc method getinstancemethod ref classref get method getmethod get instanc getinst kerb conf kerbconf get instanc method getinstancemethod invok ref classref object get realm method getdefaultrealmmethod ref classref get declar method getdeclaredmethod get realm getdefaultrealm string get realm method getdefaultrealmmethod invok kerb conf kerbconf object 

keeper state test keeperstatetest zk test zktestcas test test convers testintconvers ensur convert valid integ keeper state keeperst set enumset keeper state keeperst state allstat set enumset allof keeper state keeperst keeper state keeperst state allstat equal assertequ keeper state keeperst from fromint get valu getintvalu test test invalid convers testinvalidintconvers keeper state keeperst ks keeper state keeperst from fromint 324142 fail abl creat invalid keeper state keeperst integ runtim except runtimeexcept good valid deprec constant work issu found statement compil time constant test suppress warn suppresswarn deprec test deprec code testdeprecatedcodeokinswitch test test code asserttru verifi work paranoid test test code testcodeokinswitch code test code test asserttru 

abstract log entri logentri serializ hash map hashmap attribut type unknown log4j txn log entri logentri timestamp attribut hash map hashmap set attribut setattribut timestamp timestamp get timestamp gettimestamp get attribut getattribut timestamp abstract type get type gettyp set attribut setattribut string kei object attribut put kei object get attribut getattribut string kei attribut get kei 

type unknown log4j txn 

code gener front end hadoop record cpp gener cppgener string name mname arrai list arraylist file jfile incl file minclfil arrai list arraylist record jrecord rec list mreclist file output directori outputdirectori creat instanc cpp gener cppgener param name possibl full pathnam file param ilist includ file file jfile param rlist list record defin file param output directori outputdirectori cpp gener cppgener string name arrai list arraylist file jfile ilist arrai list arraylist record jrecord rlist file output directori outputdirectori output directori outputdirectori output directori outputdirectori name mname file name get name getnam incl file minclfil ilist rec list mreclist rlist gener code method creat request file spit file level element includ statement record level code gener record jrecord gen code gencod io except ioexcept output directori outputdirectori exist output directori outputdirectori mkdir io except ioexcept unabl creat output directori output directori outputdirectori file writer filewrit cc file writer filewrit file output directori outputdirectori name mname cc file writer filewrit hh file writer filewrit file output directori outputdirectori name mname hh hh write hh write licens apach softwar foundat asf on hh write more contributor licens agreement notic file hh write distribut work addit inform hh write copyright ownership asf licens file hh write apach licens version hh write licens us file complianc hh write licens obtain copi licens hh write hh write http www apach org licens licens hh write hh write requir applic law agre write softwar hh write distribut licens distribut basi hh write warranti condit kind express impli hh write licens specif languag govern permiss hh write limit licens hh write hh write cc write cc write licens apach softwar foundat asf on cc write more contributor licens agreement notic file cc write distribut work addit inform cc write copyright ownership asf licens file cc write apach licens version cc write licens us file complianc cc write licens obtain copi licens cc write cc write http www apach org licens licens cc write cc write requir applic law agre write softwar cc write distribut licens distribut basi cc write warranti condit kind express impli cc write licens specif languag govern permiss cc write limit licens cc write cc write hh write ifndef name mname upper touppercas replac hh write defin name mname upper touppercas replac hh write includ recordio hh iter file jfile incl file minclfil iter ha next hasnext file jfile next hh write includ get name getnam hh cc write includ name mname hh iter record jrecord rec list mreclist iter ha next hasnext record jrecord jr next jr gen cpp code gencppcod hh cc hh write endif name mname upper touppercas replac hh close cc close 

act iter deseri map deseri return instanc record us read vector map exampl usag follow code index idx start vector startvector idx done read element vector idx incr code index done incr 

connect manag leader elect tcp maintain on connect pair server tricki part guarante exactli on connect pair server oper correctli commun network two server start connect concurr connect manag us simpl tie break mechan decid connect drop base ip address two parti peer manag maintain queue messag send connect peer drop sender thread put messag back list implement current us queue implement maintain messag send peer add messag tail queue chang order messag problem leader elect problem consolid peer commun verifi quorum cnx manag quorumcnxmanag logger log logger factori loggerfactori get logger getlogg quorum cnx manag quorumcnxmanag maximum capac thread queue recv capac recv capac 100 initi prevent send stale notif peer send capac send capac packetmaxs 1024 1024 maximum number attempt connect peer max connect attempt max connect attempt neg counter observ server id observ counter observercount connect time valu millisecond cnx cnxto 5000 local ip address quorum peer quorump self map from peer thread number concurr hash map concurrenthashmap send worker sendwork sender worker map senderworkermap concurr hash map concurrenthashmap arrai block queue arrayblockingqueu buffer bytebuff queue send map queuesendmap concurr hash map concurrenthashmap buffer bytebuff last messag sent lastmessages recept queue arrai block queue arrayblockingqueu messag recv queue recvqueu object synchron access recv queue recvqueu object recv lock recvqlock object shutdown flag shutdown listen thread listen listen counter count worker thread atom integ atomicinteg thread cnt threadcnt atom integ atomicinteg messag messag buffer bytebuff buffer sid buffer buffer sid sid buffer bytebuff buffer sid quorum cnx manag quorumcnxmanag quorum peer quorump self recv queue recvqueu arrai block queue arrayblockingqueu messag recv capac recv capac queue send map queuesendmap concurr hash map concurrenthashmap arrai block queue arrayblockingqueu buffer bytebuff sender worker map senderworkermap concurr hash map concurrenthashmap send worker sendwork last messag sent lastmessages concurr hash map concurrenthashmap buffer bytebuff string cnx valu cnxtovalu get properti getproperti zookeep cnx timeout cnxtimeout cnx valu cnxtovalu cnx cnxto integ cnx valu cnxtovalu self self start listen thread wait connect request listen listen invok initi connect initiateconnect test purpos param sid test initi connect testinitiateconnect sid except log debug enabl isdebugen log debug open channel server sid socket sock socket set sock opt setsockopt sock sock connect self get vote view getvotingview get sid elect addr electionaddr cnx cnxto initi connect initiateconnect sock sid server ha initi connect up connect lose challeng keep connect initi connect initiateconnect socket sock sid data output stream dataoutputstream dout send id challeng dout data output stream dataoutputstream sock get output stream getoutputstream dout write writelong self get id getid dout flush io except ioexcept log warn ignor except read write challeng close socket closesocket sock lost challeng drop connect sid self get id getid log info smaller server identifi drop connect sid self get id getid close socket closesocket sock proce connect send worker sendwork sw send worker sendwork sock sid recv worker recvwork rw recv worker recvwork sock sid sw sw set recv setrecv rw send worker sendwork vsw sender worker map senderworkermap get sid vsw vsw finish sender worker map senderworkermap put sid sw queue send map queuesendmap contain kei containskei sid queue send map queuesendmap put sid arrai block queue arrayblockingqueu buffer bytebuff send capac send capac sw start rw start server receiv connect request up connect win notic check ha connect server send smallest valu lose challeng receiv connect receiveconnect socket sock sid read server id data input stream datainputstream din data input stream datainputstream sock get input stream getinputstream sid din read readlong sid quorum peer quorump observ id observ id choos identifi random valu identifi connect sid observ counter observercount log info set arbitrari identifi observ sid io except ioexcept close socket closesocket sock log warn except read write challeng string tostr win challeng close connect sid self get id getid replica connect sid up shut down worker befor open connect send worker sendwork sw sender worker map senderworkermap get sid sw sw finish start connect log debug creat connect server sid close socket closesocket sock connect on connecton sid start worker thread receiv data send worker sendwork sw send worker sendwork sock sid recv worker recvwork rw recv worker recvwork sock sid sw sw set recv setrecv rw send worker sendwork vsw sender worker map senderworkermap get sid vsw vsw finish sender worker map senderworkermap put sid sw queue send map queuesendmap contain kei containskei sid queue send map queuesendmap put sid arrai block queue arrayblockingqueu buffer bytebuff send capac send capac sw start rw start process invok messag queue messag send current leader elect us send tosend sid buffer bytebuff send messag simpli enqueu loopback self get id getid sid posit add recv queue addtorecvqueu messag duplic sid send thread send start connect doesn on queue send map queuesendmap contain kei containskei sid arrai block queue arrayblockingqueu buffer bytebuff bq arrai block queue arrayblockingqueu buffer bytebuff send capac send capac queue send map queuesendmap put sid bq add send queue addtosendqueu bq arrai block queue arrayblockingqueu buffer bytebuff bq queue send map queuesendmap get sid bq add send queue addtosendqueu bq log error queue server sid connect on connecton sid establish connect server id sid param sid server id connect on connecton sid sender worker map senderworkermap get sid inet socket address inetsocketaddress elect addr electionaddr self quorum peer quorump contain kei containskei sid elect addr electionaddr self quorum peer quorump get sid elect addr electionaddr log warn invalid server id sid log debug enabl isdebugen log debug open channel server sid socket sock socket set sock opt setsockopt sock sock connect self get view getview get sid elect addr electionaddr cnx cnxto log debug enabl isdebugen log debug connect server sid initi connect initiateconnect sock sid unresolv address except unresolvedaddressexcept sun doesn includ address caus except thrown uae wrap cleanli log except order captur critic detail log warn open channel sid elect address elect addr electionaddr io except ioexcept log warn open channel sid elect address elect addr electionaddr log debug connect server sid establish connect server on doesn exist connect connectal sid enumer en queue send map queuesendmap kei en ha more element hasmoreel sid en next element nextel connect on connecton sid check queue empti indic messag deliv deliv havedeliv arrai block queue arrayblockingqueu buffer bytebuff queue queue send map queuesendmap valu log debug queue size queue size queue size flag time wrap up activ interrupt listen halt shutdown log debug halt listen listen halt soft halt softhalt soft halt simpli finish worker soft halt softhalt send worker sendwork sw sender worker map senderworkermap valu log debug halt sender sw sw finish helper method set socket option param sock refer socket set sock opt setsockopt socket sock socket except socketexcept sock set tcp delai settcpnodelai sock set timeout setsotimeout self tick time ticktim self sync limit synclimit helper method close socket param sock refer socket close socket closesocket socket sock sock close io except ioexcept log error except close number worker thread get thread count getthreadcount thread cnt threadcnt get refer quorum peer quorump quorum peer quorump get quorum peer getquorump self thread listen port listen thread server socket serversocket ss sleep accept overrid run num retri numretri shutdown num retri numretri ss server socket serversocket ss set reus address setreuseaddress port self quorum peer quorump get self get id getid elect addr electionaddr get port getport inet socket address inetsocketaddress addr inet socket address inetsocketaddress port log info elect bind port addr string tostr set name setnam self quorum peer quorump get self get id getid elect addr electionaddr string tostr ss bind addr shutdown socket client ss accept set sock opt setsockopt client log info receiv connect request client get remot socket address getremotesocketaddress receiv connect receiveconnect client num retri numretri io except ioexcept log error except listen num retri numretri ss close thread sleep 1000 io except ioexcept log error error close server socket interrupt except interruptedexcept log error interrupt sleep ignor except log info leav listen shutdown log error leav listen thread won abl particip leader elect longer self quorum peer quorump get self get id getid elect addr electionaddr halt listen thread halt log debug close listen ss ss log debug close listen self get id getid ss close io except ioexcept log warn except shut down listen thread send messag instanc wait queue send messag on avail connect break open on send worker sendwork thread sid socket sock recv worker recvwork recv worker recvwork run data output stream dataoutputstream dout instanc thread receiv messag send queue send server sid param sock socket remot peer param sid server identifi remot peer send worker sendwork socket sock sid send worker sendwork sid sid sid sock sock recv worker recvwork dout data output stream dataoutputstream sock get output stream getoutputstream io except ioexcept log error unabl access socket output stream close socket closesocket sock run log debug address remot peer sid set recv setrecv recv worker recvwork recv worker recvwork recv worker recvwork recv worker recvwork return recv worker recvwork pair up send worker sendwork recv worker recvwork recv worker recvwork get recv worker getrecvwork recv worker recvwork finish log debug enabl isdebugen log debug call finish sid run avoid run finish twice run run close socket closesocket sock channel interrupt recv worker recvwork recv worker recvwork finish log debug enabl isdebugen log debug remov entri from sender worker map senderworkermap sid sid sender worker map senderworkermap remov sid thread cnt threadcnt decrement get decrementandget run send buffer bytebuff io except ioexcept msg byte msgbyte capac posit get msg byte msgbyte buffer underflow except bufferunderflowexcept log error buffer underflow except bufferunderflowexcept dout write writeint capac dout write arrai dout flush overrid run thread cnt threadcnt increment get incrementandget queue send send last messag lastmessag ensur last messag receiv peer messag drop self peer shutdown connect exit thread prior read process last messag duplic messag handl correctli peer send queue non empti recent messag store last messag lastmessag avoid send stale messag send messag send queue arrai block queue arrayblockingqueu buffer bytebuff bq queue send map queuesendmap get sid bq send queue empti issendqueueempti bq buffer bytebuff last messag sent lastmessages get sid log debug attempt send last messag lastmessag sid sid send io except ioexcept log error fail send last messag shut down thread finish run shutdown sock buffer bytebuff arrai block queue arrayblockingqueu buffer bytebuff bq queue send map queuesendmap get sid bq poll send queue pollsendqueu bq 1000 time unit timeunit millisecond log error queue incom messag server sid last messag sent lastmessages put sid send interrupt except interruptedexcept log warn interrupt wait messag queue except log warn except channel id sid id self get id getid error finish log warn send worker leav thread thread receiv messag instanc wait socket read channel break remov from pool receiv recv worker recvwork thread sid socket sock run data input stream datainputstream din send worker sendwork sw recv worker recvwork socket sock sid send worker sendwork sw recv worker recvwork sid sid sid sock sock sw sw din data input stream datainputstream sock get input stream getinputstream wait socket disconnect read sock set timeout setsotimeout io except ioexcept log error error access socket sid close socket closesocket sock run shut down worker valu variabl run finish run avoid run finish twice run run interrupt thread cnt threadcnt decrement get decrementandget run overrid run thread cnt threadcnt increment get incrementandget run shutdown sock read first determin length messag length din read readint length length packetmaxs io except ioexcept receiv packet invalid packet length alloc buffer bytebuff receiv messag msg arrai msgarrai length din read fulli readfulli msg arrai msgarrai length buffer bytebuff messag buffer bytebuff wrap msg arrai msgarrai add recv queue addtorecvqueu messag messag duplic sid except log warn connect broken id sid id self get id getid error log warn interrupt send worker sendwork sw finish sock close socket closesocket sock insert element specifi queue queue full method remov element from head queue insert element tail happen element remov thread link send worker sendwork process messag processmessag process messag processmessag method befor method attempt remov element from queue caus link arrai block queue arrayblockingqueu remov remov except safe ignor unlik link add recv queue addtorecvqueu messag add recv queue addtorecvqueu method on thread insert element queue thread read from queue param queue refer queue param buffer refer buffer insert queue add send queue addtosendqueu arrai block queue arrayblockingqueu buffer bytebuff queue buffer bytebuff buffer queue remain capac remainingcapac queue remov element except nosuchelementexcept ne element remov poll log debug remov from empti queue ignor except ne queue add buffer illeg state except illegalstateexcept happen log error unabl insert element queue return queue empti param queue refer queue specifi queue empti send queue empti issendqueueempti arrai block queue arrayblockingqueu buffer bytebuff queue queue empti isempti retriev remov buffer head queue wait up specifi wait time necessari element avail link arrai block queue arrayblockingqueu poll java util concurr time unit timeunit buffer bytebuff poll send queue pollsendqueu arrai block queue arrayblockingqueu buffer bytebuff queue timeout time unit timeunit unit interrupt except interruptedexcept queue poll timeout unit insert element link recv queue recvqueu queue full method remov element from head queue insert element tail queue method achiev fair two thread insert element queue thread check queue full remov element head queue insert element tail three step process done prevent thread from block insert element queue synchron call method thread grab slot queue creat second thread caus call insert second thread fail note synchron method block thread from poll queue synchron provid queue param msg refer messag insert queue add recv queue addtorecvqueu messag msg recv lock recvqlock recv queue recvqueu remain capac remainingcapac recv queue recvqueu remov element except nosuchelementexcept ne element remov poll log debug remov from empti recv queue recvqueu ignor except ne recv queue recvqueu add msg illeg state except illegalstateexcept happen log error unabl insert element recv queue recvqueu retriev remov messag head queue wait up specifi wait time necessari element avail link arrai block queue arrayblockingqueu poll java util concurr time unit timeunit messag poll recv queue pollrecvqueu timeout time unit timeunit unit interrupt except interruptedexcept recv queue recvqueu poll timeout unit 

messag messag buffer bytebuff buffer sid buffer buffer sid sid buffer bytebuff buffer sid 

thread listen port listen thread server socket serversocket ss sleep accept overrid run num retri numretri shutdown num retri numretri ss server socket serversocket ss set reus address setreuseaddress port self quorum peer quorump get self get id getid elect addr electionaddr get port getport inet socket address inetsocketaddress addr inet socket address inetsocketaddress port log info elect bind port addr string tostr set name setnam self quorum peer quorump get self get id getid elect addr electionaddr string tostr ss bind addr shutdown socket client ss accept set sock opt setsockopt client log info receiv connect request client get remot socket address getremotesocketaddress receiv connect receiveconnect client num retri numretri io except ioexcept log error except listen num retri numretri ss close thread sleep 1000 io except ioexcept log error error close server socket interrupt except interruptedexcept log error interrupt sleep ignor except log info leav listen shutdown log error leav listen thread won abl particip leader elect longer self quorum peer quorump get self get id getid elect addr electionaddr halt listen thread halt log debug close listen ss ss log debug close listen self get id getid ss close io except ioexcept log warn except shut down listen 

thread send messag instanc wait queue send messag on avail connect break open on send worker sendwork thread sid socket sock recv worker recvwork recv worker recvwork run data output stream dataoutputstream dout instanc thread receiv messag send queue send server sid param sock socket remot peer param sid server identifi remot peer send worker sendwork socket sock sid send worker sendwork sid sid sid sock sock recv worker recvwork dout data output stream dataoutputstream sock get output stream getoutputstream io except ioexcept log error unabl access socket output stream close socket closesocket sock run log debug address remot peer sid set recv setrecv recv worker recvwork recv worker recvwork recv worker recvwork recv worker recvwork return recv worker recvwork pair up send worker sendwork recv worker recvwork recv worker recvwork get recv worker getrecvwork recv worker recvwork finish log debug enabl isdebugen log debug call finish sid run avoid run finish twice run run close socket closesocket sock channel interrupt recv worker recvwork recv worker recvwork finish log debug enabl isdebugen log debug remov entri from sender worker map senderworkermap sid sid sender worker map senderworkermap remov sid thread cnt threadcnt decrement get decrementandget run send buffer bytebuff io except ioexcept msg byte msgbyte capac posit get msg byte msgbyte buffer underflow except bufferunderflowexcept log error buffer underflow except bufferunderflowexcept dout write writeint capac dout write arrai dout flush overrid run thread cnt threadcnt increment get incrementandget queue send send last messag lastmessag ensur last messag receiv peer messag drop self peer shutdown connect exit thread prior read process last messag duplic messag handl correctli peer send queue non empti recent messag store last messag lastmessag avoid send stale messag send messag send queue arrai block queue arrayblockingqueu buffer bytebuff bq queue send map queuesendmap get sid bq send queue empti issendqueueempti bq buffer bytebuff last messag sent lastmessages get sid log debug attempt send last messag lastmessag sid sid send io except ioexcept log error fail send last messag shut down thread finish run shutdown sock buffer bytebuff arrai block queue arrayblockingqueu buffer bytebuff bq queue send map queuesendmap get sid bq poll send queue pollsendqueu bq 1000 time unit timeunit millisecond log error queue incom messag server sid last messag sent lastmessages put sid send interrupt except interruptedexcept log warn interrupt wait messag queue except log warn except channel id sid id self get id getid error finish log warn send worker leav thread 

thread receiv messag instanc wait socket read channel break remov from pool receiv recv worker recvwork thread sid socket sock run data input stream datainputstream din send worker sendwork sw recv worker recvwork socket sock sid send worker sendwork sw recv worker recvwork sid sid sid sock sock sw sw din data input stream datainputstream sock get input stream getinputstream wait socket disconnect read sock set timeout setsotimeout io except ioexcept log error error access socket sid close socket closesocket sock run shut down worker valu variabl run finish run avoid run finish twice run run interrupt thread cnt threadcnt decrement get decrementandget run overrid run thread cnt threadcnt increment get incrementandget run shutdown sock read first determin length messag length din read readint length length packetmaxs io except ioexcept receiv packet invalid packet length alloc buffer bytebuff receiv messag msg arrai msgarrai length din read fulli readfulli msg arrai msgarrai length buffer bytebuff messag buffer bytebuff wrap msg arrai msgarrai add recv queue addtorecvqueu messag messag duplic sid except log warn connect broken id sid id self get id getid error log warn interrupt send worker sendwork sw finish sock close socket closesocket sock 

credenti hash map hashmap string string credenti join credenti credenti credenti result credenti result put putal result put putal result credenti credenti string credenti credenti trim equal string part credenti split string part string user pass userpass split put user pass userpass user pass userpass 

start run standalon zoo keeper server zookeeperserv zoo keeper server main zookeeperservermain logger log logger factori loggerfactori get logger getlogg zoo keeper server main zookeeperservermain string usag usag zoo keeper server main zookeeperservermain configfil port datadir ticktim maxcnxn server cnxn factori servercnxnfactori cnxn factori cnxnfactori start up zoo keeper zookeep server param arg configfil port datadir ticktim main string arg zoo keeper server main zookeeperservermain main zoo keeper server main zookeeperservermain main initi run initializeandrun arg illeg argument except illegalargumentexcept log error invalid argument exit abnorm log info usag err println usag exit config except configexcept log error invalid config exit abnorm err println invalid config exit abnorm exit except log error unexpect except exit abnorm exit log info exit exit initi run initializeandrun string arg config except configexcept io except ioexcept manag util managedutil log4 bean registerlog4jmbean jm except jmexcept log warn unabl log4j jmx control server config serverconfig config server config serverconfig arg length config pars arg config pars arg run from config runfromconfig config run from server config serverconfig param config server config serverconfig us io except ioexcept run from config runfromconfig server config serverconfig config io except ioexcept log info start server note thread isn spawn thread call run thread creat file logger url from command line arg zoo keeper server zookeeperserv zk server zkserver zoo keeper server zookeeperserv file txn snap log filetxnsnaplog ftxn file txn snap log filetxnsnaplog file config data log dir datalogdir file config data dir datadir zk server zkserver set txn log factori settxnlogfactori ftxn zk server zkserver set tick time setticktim config tick time ticktim zk server zkserver set min session timeout setminsessiontimeout config min session timeout minsessiontimeout zk server zkserver set max session timeout setmaxsessiontimeout config max session timeout maxsessiontimeout cnxn factori cnxnfactori server cnxn factori servercnxnfactori creat factori createfactori cnxn factori cnxnfactori configur config get client port address getclientportaddress config get max client cnxn getmaxclientcnxn cnxn factori cnxnfactori startup zk server zkserver cnxn factori cnxnfactori join zk server zkserver run isrun zk server zkserver shutdown interrupt except interruptedexcept warn gener log warn server interrupt shutdown serv instanc shutdown cnxn factori cnxnfactori shutdown 

get old snapshot old data dir datadir creat brand snapshot convert snapshot upgrad upgrad snap shot v1 upgradesnapshotv1 upgrad snap shot upgradesnapshot logger log logger factori loggerfactori get logger getlogg upgrad snap shot v1 upgradesnapshotv1 concurr hash map concurrenthashmap integ session timeout sessionswithtimeout concurr hash map concurrenthashmap integ file data dir datadir file snap shot dir snapshotdir data tree v1 datatreev1 old data tree olddatatre upgrad from version version param data dir datadir param snap shot dir snapshotdir upgrad snap shot v1 upgradesnapshotv1 file data dir datadir file snap shot dir snapshotdir data dir datadir data dir datadir snap shot dir snapshotdir snap shot dir snapshotdir old data tree olddatatre data tree v1 datatreev1 deserilu from inputarch param old tree oldtre tree creat param ia input archiv read from param session session creat io except ioexcept deseri snapshot deserializesnapshot data tree v1 datatreev1 old tree oldtre input archiv inputarch ia map integ session io except ioexcept count ia read readint count count id ia read readlong id ia read readint timeout session put id log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask load data loaddata session archiv id timeout count old tree oldtre deseri ia tree plai log from logstream datatre param log stream logstream io except ioexcept plai log playlog input archiv inputarch log stream logstream io except ioexcept highest zxid highestzxid byte log stream logstream read buffer readbuff txn entri txnentri byte length prealloc defin eof empti transact eof except eofexcept txn header txnheader hdr txn header txnheader record txn serial util serializeutil deseri txn deserializetxn byte hdr log stream logstream read readbyt eor log warn last transact partial eof except eofexcept last transact partial hdr get zxid getzxid highest zxid highestzxid highest zxid highestzxid log error highest zxid highestzxid higest zxid higestzxid hdr get zxid getzxid next log type hdr get type gettyp highest zxid highestzxid hdr get zxid getzxid hdr get type gettyp op code opcod creat session createsess session timeout sessionswithtimeout put hdr get client id getclientid creat session txn createsessiontxn txn get time gettimeout log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask plai log playlog creat session log 0x hex string tohexstr hdr get client id getclientid timeout creat session txn createsessiontxn txn get time gettimeout data tree datatre chanc sync last process zxid lastprocessedzxid old data tree olddatatre process txn processtxn hdr txn op code opcod close session closesess session timeout sessionswithtimeout remov hdr get client id getclientid log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask plai log playlog close session log 0x hex string tohexstr hdr get client id getclientid old data tree olddatatre process txn processtxn hdr txn old data tree olddatatre process txn processtxn hdr txn request request hdr get cxid getcxid hdr get type gettyp txn txn hdr hdr zxid hdr get zxid getzxid eof except eofexcept expect case comment block highest zxid highestzxid appli log file datatre param old tree oldtre datatree appli log param log file logfil log appli io except ioexcept process log file processlogfil data tree v1 datatreev1 old tree oldtre file log file logfil io except ioexcept zxid file log file logfil log info process log file input stream inputstream log logi buffer input stream bufferedinputstream file input stream fileinputstream zxid plai log playlog binari input archiv binaryinputarch get archiv getarch log logi log logi close zxid creat old snapshot databas appli log creat databas io except ioexcept load snap shot loadthissnapshot io except ioexcept pick most recent snapshot file snapshot find most recent snapshot findmostrecentsnapshot snapshot io except ioexcept invalid snapshot snapshot snap shot dir snapshotdir input stream inputstream inputstream buffer input stream bufferedinputstream file input stream fileinputstream snapshot input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch inputstream deseri snapshot deserializesnapshot old data tree olddatatre ia session timeout sessionswithtimeout done snapshot appli log snapshot zxid snapshotzxid old data tree olddatatre last process zxid lastprocessedzxid file file file txn log filetxnlog get log file getlogfil data dir datadir list file listfil snapshot zxid snapshotzxid zxid process log file processlogfil old data tree olddatatre file check zxid sane zxid old data tree olddatatre last process zxid lastprocessedzxid log error zxid equal log zxid zxid datatre process old data tree olddatatre last process zxid lastprocessedzxid find most recent snapshot snapshot directori io except ioexcept file find most recent snapshot findmostrecentsnapshot io except ioexcept list file file util sort data dir sortdatadir snap shot dir snapshotdir list file listfil snapshot file file util valid snapshot isvalidsnapshot io except ioexcept log info invalid snapshot convert old stat stat param old stat oldstat old stat stat stat persist statpersist convert stat convertstat stat persist v1 statpersistedv1 old stat oldstat stat persist statpersist stat stat persist statpersist stat set avers setavers old stat oldstat get avers getavers stat set ctime setctim old stat oldstat get ctime getctim stat set cversion setcvers old stat oldstat get cversion getcvers stat set czxid setczxid old stat oldstat get czxid getczxid stat set ephemer owner setephemeralown old stat oldstat get ephemer owner getephemeralown stat set mtime setmtim old stat oldstat get mtime getmtim stat set mzxid setmzxid old stat oldstat get mzxid getmzxid stat set version setvers old stat oldstat get version getvers stat convert old datanod datanod param dt datatre param parent parent datanod construct param old data node olddatanod old datanod datanod data node datanod convert data node convertdatanod data tree datatre dt data node datanod parent data node v1 datanodev1 old data node olddatanod stat persist statpersist stat convert stat convertstat old data node olddatanod stat data node datanod data node datanod data node datanod parent old data node olddatanod data dt convert acl convertacl old data node olddatanod acl stat data node datanod set children setchildren old data node olddatanod children data node datanod recurs old datatre construct data tree param data tree datatre datatre construct param path path start recurs data tree recursethroughdatatre data tree datatre data tree datatre string path path data node v1 datanodev1 old data node olddatanod old data tree olddatatre get node getnod path hash set hashset string children old data node olddatanod children data node datanod parent equal path parent last slash lastslash path last index lastindexof string parent path parentpath path substr last slash lastslash parent data tree datatre get node getnod parent path parentpath data node datanod dat node thisdatnod convert data node convertdatanod data tree datatre parent old data node olddatanod data tree datatre add data node adddatanod path dat node thisdatnod children children size string child children recurs data tree recursethroughdatatre data tree datatre path child data tree datatre convert snap shot convertthissnapshot io except ioexcept creat datatre data tree datatre data tree datatre data tree datatre data node v1 datanodev1 old data node olddatanod old data tree olddatatre get node getnod old data node olddatanod happen log error upgrad from empti snapshot recurs data tree recursethroughdatatre data tree datatre data tree datatre last process zxid lastprocessedzxid old data tree olddatatre last process zxid lastprocessedzxid data tree datatre data tree datatre get data tree getnewdatatre io except ioexcept load snap shot loadthissnapshot data tree datatre dt convert snap shot convertthissnapshot dt concurr hash map concurrenthashmap integ get session time out getsessionwithtimeout session timeout sessionswithtimeout 

repres child jaxb special json version requir get proper format json xml output detail node resourc znoderesourc xml root element xmlrootel name child children json zchildrenjson string path string uri string child uri child uri list string children children json zchildrenjson need jersei children arrai list arraylist string children json zchildrenjson string path string uri string child uri child uri list string children path path uri uri child uri child uri child uri child uri children children children children arrai list arraylist string overrid hash code hashcod path hash code hashcod overrid equal object obj obj children json zchildrenjson children json zchildrenjson children json zchildrenjson obj path equal path children equal children overrid string string tostr children json zchildrenjson path children 

set acl request setaclrequest record string path java util list org apach zookeep data acl acl version set acl request setaclrequest set acl request setaclrequest string path java util list org apach zookeep data acl acl version path path acl acl version version string get path getpath path set path setpath string path java util list org apach zookeep data acl get acl getacl acl set acl setacl java util list org apach zookeep data acl acl get version getvers version set version setvers version serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writeint version version end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path index vidx1 start vector startvector acl vidx1 acl java util arrai list arraylist org apach zookeep data acl vidx1 done vidx1 incr org apach zookeep data acl e1 e1 org apach zookeep data acl read record readrecord e1 e1 acl add e1 end vector endvector acl version read readint version end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writeint version version end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar set acl request setaclrequest unimpl equal object peer peer peer peer set acl request setaclrequest peer peer set acl request setaclrequest peer set acl request setaclrequest peer peer ret ret path equal peer path ret ret ret acl equal peer acl ret ret ret version peer version ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret acl hash code hashcod result 37 result ret ret version result 37 result ret result string signatur set acl request lsetaclrequest lacl lid ilid ss 

simpl standalon zoo keeper server zookeeperserv set up follow chain request processor requestprocessor process request prep request processor preprequestprocessor sync request processor syncrequestprocessor request processor finalrequestprocessor zoo keeper server zookeeperserv session expir sessionexpir server stat serverstat provid logger log log logger factori loggerfactori get logger getlogg zoo keeper server zookeeperserv environ log env logenv server environ log zoo keeper server bean zookeeperserverbean jmx server bean jmxserverbean data tree bean datatreebean jmx data tree bean jmxdatatreebean server deleg load tree instanc data tree builder datatreebuild data tree datatre build basic data tree builder basicdatatreebuild data tree builder datatreebuild data tree datatre build data tree datatre tick time tick time 3000 tick time ticktim tick time tick time valu unset us min session timeout minsessiontimeout valu unset us max session timeout maxsessiontimeout session tracker sessiontrack session tracker sessiontrack file txn snap log filetxnsnaplog txn log factori txnlogfactori zk databas zkdatabas zk db zkdb hzxid except except prob request processor requestprocessor first processor firstprocessor run secret us gener password moment more saniti check secret supersecret xb3415 c00l 0xb3415c00l request process requestsinprocess list chang record changerecord outstand chang outstandingchang arrai list arraylist chang record changerecord data structur access outstand chang outstandingchang lock hash map hashmap string chang record changerecord outstand chang path outstandingchangesforpath hash map hashmap string chang record changerecord server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori server stat serverstat server stat serverstat remov cnxn removecnxn server cnxn servercnxn cnxn zk db zkdb remov cnxn removecnxn cnxn creat zoo keeper server zookeeperserv instanc setup us setx method prepar instanc datadir datalogdir ticktim builder io except ioexcept zoo keeper server zookeeperserv server stat serverstat server stat serverstat creat zoo keeper server zookeeperserv instanc set up doesn start listen client run invok param data dir datadir directori put data zoo keeper server zookeeperserv file txn snap log filetxnsnaplog txn log factori txnlogfactori tick time ticktim min session timeout minsessiontimeout max session timeout maxsessiontimeout data tree builder datatreebuild tree builder treebuild zk databas zkdatabas zk db zkdb server stat serverstat server stat serverstat txn log factori txnlogfactori txn log factori txnlogfactori zk db zkdb zk db zkdb tick time ticktim tick time ticktim min session timeout minsessiontimeout min session timeout minsessiontimeout max session timeout maxsessiontimeout max session timeout maxsessiontimeout log info creat server tick time ticktim tick time ticktim min session timeout minsessiontimeout get min session timeout getminsessiontimeout max session timeout maxsessiontimeout get max session timeout getmaxsessiontimeout datadir txn log factori txnlogfactori get data dir getdatadir snapdir txn log factori txnlogfactori get snap dir getsnapdir creat zookeeperserv instanc param txn log factori txnlogfactori file transact snapshot log param tick time ticktim ticktim server param tree builder treebuild datatre builder io except ioexcept zoo keeper server zookeeperserv file txn snap log filetxnsnaplog txn log factori txnlogfactori tick time ticktim data tree builder datatreebuild tree builder treebuild io except ioexcept txn log factori txnlogfactori tick time ticktim tree builder treebuild zk databas zkdatabas txn log factori txnlogfactori server stat serverstat server stat serverstat server stat serverstat dump conf dumpconf print writer printwrit pwriter pwriter print client port clientport pwriter println get client port getclientport pwriter print data dir datadir pwriter println zk db zkdb snap log snaplog get snap dir getsnapdir get absolut path getabsolutepath pwriter print data log dir datalogdir pwriter println zk db zkdb snap log snaplog get data dir getdatadir get absolut path getabsolutepath pwriter print tick time ticktim pwriter println get tick time getticktim pwriter print max client cnxn maxclientcnxn pwriter println server cnxn factori servercnxnfactori get max client cnxn host getmaxclientcnxnsperhost pwriter print min session timeout minsessiontimeout pwriter println get min session timeout getminsessiontimeout pwriter print max session timeout maxsessiontimeout pwriter println get max session timeout getmaxsessiontimeout pwriter print server id serverid pwriter println get server id getserverid constructor backward compat exist unit test code default file log provid filelogprovid persist provid zoo keeper server zookeeperserv file snap dir snapdir file log dir logdir tick time ticktim io except ioexcept file txn snap log filetxnsnaplog snap dir snapdir log dir logdir tick time ticktim basic data tree builder basicdatatreebuild constructor reli config agrument valu io except ioexcept zoo keeper server zookeeperserv file txn snap log filetxnsnaplog txn log factori txnlogfactori data tree builder datatreebuild tree builder treebuild io except ioexcept txn log factori txnlogfactori tick time tick time tree builder treebuild zk databas zkdatabas txn log factori txnlogfactori get zookeep databas server zookeep databas server zk databas zkdatabas get zk databas getzkdatabas zk db zkdb set zkdatabas zookeep server param zk db zkdb set zk databas setzkdatabas zk databas zkdatabas zk db zkdb zk db zkdb zk db zkdb restor session data load data loaddata io except ioexcept interrupt except interruptedexcept set zxid setzxid zk db zkdb load data base loaddatabas clean up dead session link list linkedlist dead session deadsess link list linkedlist session zk db zkdb get session getsess zk db zkdb get session time out getsessionwithtimeout get session dead session deadsess add session zk db zkdb set data tree init setdatatreeinit session dead session deadsess xxx last process zxid lastprocessedzxid best thing us kill session killsess session zk db zkdb get data tree last process zxid getdatatreelastprocessedzxid make clean snapshot snapshot takesnapshot snapshot takesnapshot txn log factori txnlogfactori save zk db zkdb get data tree getdatatre zk db zkdb get session time out getsessionwithtimeout io except ioexcept log error sever unrecover error exit sever error recov from exit exit 10 call from block get zxid getzxid hzxid get next zxid getnextzxid hzxid set zxid setzxid zxid hzxid zxid get time gettim current time milli currenttimemilli close session id sessionid submit request submitrequest session id sessionid op code opcod close session closesess close session closesess session id sessionid log info close session 0x hex string tohexstr session id sessionid wait session close send detect close session id sessionid kill session killsess session id sessionid zxid zk db zkdb kill session killsess session id sessionid zxid log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask zoo keeper server zookeeperserv kill session killsess 0x hex string tohexstr session id sessionid session tracker sessiontrack session tracker sessiontrack remov session removesess session id sessionid expir session session session id sessionid session get session id getsessionid log info expir session 0x hex string tohexstr session id sessionid timeout session get timeout gettimeout ms exceed close session id sessionid miss session except missingsessionexcept io except ioexcept serial version uid serialversionuid 7467414635467261007l miss session except missingsessionexcept string msg msg touch server cnxn servercnxn cnxn miss session except missingsessionexcept cnxn id cnxn get session id getsessionid cnxn get session timeout getsessiontimeout session tracker sessiontrack touch session touchsess id miss session except missingsessionexcept session sessionid 0x hex string tohexstr id exist expir remov jmx registerjmx jmx jmx server bean jmxserverbean zoo keeper server bean zookeeperserverbean bean registri mbeanregistri get instanc getinst jmx server bean jmxserverbean jmx data tree bean jmxdatatreebean data tree bean datatreebean zk db zkdb get data tree getdatatre bean registri mbeanregistri get instanc getinst jmx data tree bean jmxdatatreebean jmx server bean jmxserverbean except log warn fail jmx jmx data tree bean jmxdatatreebean except log warn fail jmx jmx server bean jmxserverbean startdata io except ioexcept interrupt except interruptedexcept check zk db zkdb zk db zkdb zk db zkdb zk databas zkdatabas txn log factori txnlogfactori zk db zkdb initi isiniti load data loaddata startup session tracker sessiontrack creat session tracker createsessiontrack start session tracker startsessiontrack setup request processor setuprequestprocessor jmx registerjmx run notifi notifyal setup request processor setuprequestprocessor request processor requestprocessor processor finalprocessor request processor finalrequestprocessor request processor requestprocessor sync processor syncprocessor sync request processor syncrequestprocessor processor finalprocessor sync request processor syncrequestprocessor sync processor syncprocessor start first processor firstprocessor prep request processor preprequestprocessor sync processor syncprocessor prep request processor preprequestprocessor first processor firstprocessor start creat session tracker createsessiontrack session tracker sessiontrack session tracker impl sessiontrackerimpl zk db zkdb get session time out getsessionwithtimeout tick time ticktim start session tracker startsessiontrack session tracker impl sessiontrackerimpl session tracker sessiontrack start run isrun run shutdown log info shut down runtim except runtimeexcept call shutdown print stack trace printstacktrac run session tracker sessiontrack sync thread syncthread poll set run detect poll interv session tracker sessiontrack session tracker sessiontrack shutdown first processor firstprocessor first processor firstprocessor shutdown zk db zkdb zk db zkdb clear unregist jmx unregisterjmx unregist jmx unregisterjmx unregist from jmx jmx data tree bean jmxdatatreebean bean registri mbeanregistri get instanc getinst unregist jmx data tree bean jmxdatatreebean except log warn fail unregist jmx jmx server bean jmxserverbean bean registri mbeanregistri get instanc getinst unregist jmx server bean jmxserverbean except log warn fail unregist jmx jmx server bean jmxserverbean jmx data tree bean jmxdatatreebean process incinprocess request process requestsinprocess dec process decinprocess request process requestsinprocess get process getinprocess request process requestsinprocess structur us facilit inform share prep rp preprp rp finalrp chang record changerecord chang record changerecord zxid string path stat persist statpersist stat child count childcount list acl acl zxid zxid path path stat stat child count childcount child count childcount acl acl zxid string path stat persist statpersist stat make creat object chang child count childcount list acl acl make creat object chang suppress warn suppresswarn uncheck chang record changerecord duplic zxid stat persist statpersist stat stat persist statpersist stat data tree datatre copi stat persist copystatpersist stat stat chang record changerecord zxid path stat child count childcount acl arrai list arraylist acl arrai list arraylist acl gener passwd generatepasswd id random random id secret supersecret 16 next byte nextbyt check passwd checkpasswd session id sessionid passwd session id sessionid arrai equal passwd gener passwd generatepasswd session id sessionid creat session createsess server cnxn servercnxn cnxn passwd timeout session id sessionid session tracker sessiontrack creat session createsess timeout random random session id sessionid secret supersecret next byte nextbyt passwd buffer bytebuff buffer bytebuff alloc put putint timeout cnxn set session id setsessionid session id sessionid submit request submitrequest cnxn session id sessionid op code opcod creat session createsess session id sessionid set owner session owner param id session id param owner owner session session expir except sessionexpiredexcept set owner setown id object owner session expir except sessionexpiredexcept session tracker sessiontrack set owner setown id owner revalid session revalidatesess server cnxn servercnxn cnxn session id sessionid session timeout sessiontimeout io except ioexcept rc session tracker sessiontrack touch session touchsess session id sessionid session timeout sessiontimeout log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask session 0x hex string tohexstr session id sessionid valid rc finish session init finishsessioninit cnxn rc reopen session reopensess server cnxn servercnxn cnxn session id sessionid passwd session timeout sessiontimeout io except ioexcept check passwd checkpasswd session id sessionid passwd finish session init finishsessioninit cnxn revalid session revalidatesess cnxn session id sessionid session timeout sessiontimeout finish session init finishsessioninit server cnxn servercnxn cnxn valid jmx valid server cnxn factori servercnxnfactori connect registerconnect cnxn except log warn fail jmx connect respons connectrespons rsp connect respons connectrespons valid cnxn get session timeout getsessiontimeout valid cnxn get session id getsessionid send session longer valid valid gener passwd generatepasswd cnxn get session id getsessionid 16 arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch bo binari output archiv binaryoutputarch get archiv getarch bao bo write writeint len rsp serial bo connect cnxn old client isoldcli bo write writebool read zoo keeper server readonlyzookeeperserv read readonli bao close buffer bytebuff bb buffer bytebuff wrap bao arrai tobytearrai bb put putint bb remain rewind cnxn send buffer sendbuff bb valid log info invalid session 0x hex string tohexstr cnxn get session id getsessionid client cnxn get remot socket address getremotesocketaddress expir cnxn send buffer sendbuff server cnxn factori servercnxnfactori close conn closeconn log info establish session 0x hex string tohexstr cnxn get session id getsessionid negoti timeout cnxn get session timeout getsessiontimeout client cnxn get remot socket address getremotesocketaddress cnxn enabl recv enablerecv except log warn except establish session close cnxn close close session closesess server cnxn servercnxn cnxn request header requesthead request header requesthead close session closesess cnxn get session id getsessionid get server id getserverid param cnxn param session id sessionid param xid param bb submit request submitrequest server cnxn servercnxn cnxn session id sessionid type xid buffer bytebuff bb list id auth info authinfo request si request cnxn session id sessionid xid type bb auth info authinfo submit request submitrequest si submit request submitrequest request si first processor firstprocessor run wait 1000 interrupt except interruptedexcept log warn unexpect interrupt first processor firstprocessor runtim except runtimeexcept start touch si cnxn validpacket request valid isvalid si type validpacket first processor firstprocessor process request processrequest si si cnxn process incinprocess log warn drop packet server type si type invalid packet drop packet miss session except missingsessionexcept log debug enabl isdebugen log debug drop request get messag getmessag request processor except requestprocessorexcept log error unabl process request get messag getmessag get snap count getsnapcount string sc get properti getproperti zookeep snap count snapcount integ pars parseint sc except 100000 get global outstand limit getglobaloutstandinglimit string sc get properti getproperti zookeep global outstand limit globaloutstandinglimit limit limit integ pars parseint sc except limit 1000 limit set server cnxn factori setservercnxnfactori server cnxn factori servercnxnfactori factori server cnxn factori servercnxnfactori factori server cnxn factori servercnxnfactori get server cnxn factori getservercnxnfactori server cnxn factori servercnxnfactori last procees id from datatre get last process zxid getlastprocessedzxid zk db zkdb get data tree last process zxid getdatatreelastprocessedzxid outstand request queue havent process get outstand request getoutstandingrequest get process getinprocess trunccat log get sync quorum param zxid zxid get sync io except ioexcept truncat log truncatelog zxid io except ioexcept zk db zkdb truncat log truncatelog zxid get tick time getticktim tick time ticktim set tick time setticktim tick time ticktim log info tick time ticktim set tick time ticktim tick time ticktim tick time ticktim get min session timeout getminsessiontimeout min session timeout minsessiontimeout tick time ticktim min session timeout minsessiontimeout set min session timeout setminsessiontimeout min log info min session timeout minsessiontimeout set min min session timeout minsessiontimeout min get max session timeout getmaxsessiontimeout max session timeout maxsessiontimeout tick time ticktim 20 max session timeout maxsessiontimeout set max session timeout setmaxsessiontimeout max log info max session timeout maxsessiontimeout set max max session timeout maxsessiontimeout max get client port getclientport server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori get local port getlocalport set txn log factori settxnlogfactori file txn snap log filetxnsnaplog txn log txnlog txn log factori txnlogfactori txn log txnlog file txn snap log filetxnsnaplog get txn log factori gettxnlogfactori txn log factori txnlogfactori string get state getstat standalon dump ephemer dumpephemer print writer printwrit pwriter zk db zkdb dump ephemer dumpephemer pwriter total number client connect aliv server get num aliv connect getnumaliveconnect server cnxn factori servercnxnfactori get num aliv connect getnumaliveconnect process connect request processconnectrequest server cnxn servercnxn cnxn buffer bytebuff incom buffer incomingbuff io except ioexcept binari input archiv binaryinputarch bia binari input archiv binaryinputarch get archiv getarch buffer input stream bytebufferinputstream incom buffer incomingbuff connect request connectrequest conn req connreq connect request connectrequest conn req connreq deseri bia connect log debug enabl isdebugen log debug session establish request from client cnxn get remot socket address getremotesocketaddress client last zxid lastzxid 0x hex string tohexstr conn req connreq get last zxid getlastzxidseen read readonli read readonli bia read readbool read readonli cnxn old client isoldcli io except ioexcept packet from old client doesn contain read readonli field log warn connect request from old client cnxn get remot socket address getremotesocketaddress drop server mode read readonli read zoo keeper server readonlyzookeeperserv string msg refus session request read client cnxn get remot socket address getremotesocketaddress log info msg close request except closerequestexcept msg conn req connreq get last zxid getlastzxidseen zk db zkdb data tree datatre last process zxid lastprocessedzxid string msg refus session request client cnxn get remot socket address getremotesocketaddress ha zxid 0x hex string tohexstr conn req connreq get last zxid getlastzxidseen last zxid 0x hex string tohexstr get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid client server log info msg close request except closerequestexcept msg session timeout sessiontimeout conn req connreq get time gettimeout passwd conn req connreq get passwd getpasswd min session timeout minsessiontimeout get min session timeout getminsessiontimeout session timeout sessiontimeout min session timeout minsessiontimeout session timeout sessiontimeout min session timeout minsessiontimeout max session timeout maxsessiontimeout get max session timeout getmaxsessiontimeout session timeout sessiontimeout max session timeout maxsessiontimeout session timeout sessiontimeout max session timeout maxsessiontimeout cnxn set session timeout setsessiontimeout session timeout sessiontimeout don receiv packet session setup cnxn disabl recv disablerecv session id sessionid conn req connreq get session id getsessionid session id sessionid client session id clientsessionid conn req connreq get session id getsessionid log info client attempt renew session 0x hex string tohexstr client session id clientsessionid cnxn get remot socket address getremotesocketaddress server cnxn factori servercnxnfactori close session closesess session id sessionid cnxn set session id setsessionid session id sessionid reopen session reopensess cnxn session id sessionid passwd session timeout sessiontimeout log info client attempt establish session cnxn get remot socket address getremotesocketaddress creat session createsess cnxn passwd session timeout sessiontimeout throttl shouldthrottl stand count outstandingcount get global outstand limit getglobaloutstandinglimit get process getinprocess stand count outstandingcount process packet processpacket server cnxn servercnxn cnxn buffer bytebuff incom buffer incomingbuff io except ioexcept request process setup next input stream inputstream bai buffer input stream bytebufferinputstream incom buffer incomingbuff binari input archiv binaryinputarch bia binari input archiv binaryinputarch get archiv getarch bai request header requesthead request header requesthead deseri bia header magic buffer txn point start txn incom buffer incomingbuff incom buffer incomingbuff slice get type gettyp op code opcod auth log info auth packet cnxn get remot socket address getremotesocketaddress auth packet authpacket auth packet authpacket auth packet authpacket buffer input stream bytebufferinputstream buffer2 record bytebuffer2record incom buffer incomingbuff auth packet authpacket string scheme auth packet authpacket get scheme getschem authent provid authenticationprovid ap provid registri providerregistri get provid getprovid scheme code auth authreturn keeper except keeperexcept code authfail ap auth authreturn ap handl authent handleauthent cnxn auth packet authpacket get auth getauth runtim except runtimeexcept log warn caught runtim except from authent provid authenticationprovid scheme auth authreturn keeper except keeperexcept code authfail auth authreturn keeper except keeperexcept code ap log warn authent provid scheme scheme ha provid registri providerregistri list provid listprovid log warn authent fail scheme scheme send respons repli header replyhead rh repli header replyhead get xid getxid keeper except keeperexcept code authfail valu intvalu cnxn send respons sendrespons rh close connect cnxn send buffer sendbuff server cnxn factori servercnxnfactori close conn closeconn cnxn disabl recv disablerecv log debug enabl isdebugen log debug authent succeed scheme scheme log info auth success cnxn get remot socket address getremotesocketaddress repli header replyhead rh repli header replyhead get xid getxid keeper except keeperexcept code valu intvalu cnxn send respons sendrespons rh get type gettyp op code opcod sasl record rsp process sasl processsasl incom buffer incomingbuff cnxn repli header replyhead rh repli header replyhead get xid getxid keeper except keeperexcept code valu intvalu cnxn send respons sendrespons rh rsp respons rd 3rd arg request si request cnxn cnxn get session id getsessionid get xid getxid get type gettyp incom buffer incomingbuff cnxn get auth info getauthinfo si set owner setown server cnxn servercnxn submit request submitrequest si cnxn incr outstand request incroutstandingrequest record process sasl processsasl buffer bytebuff incom buffer incomingbuff server cnxn servercnxn cnxn io except ioexcept log debug respond client sasl token get sasl request getsaslrequest client token record clienttokenrecord get sasl request getsaslrequest buffer input stream bytebufferinputstream buffer2 record bytebuffer2record incom buffer incomingbuff client token record clienttokenrecord client token clienttoken client token record clienttokenrecord get token gettoken log debug size client sasl token client token clienttoken length respons token responsetoken zoo keeper sasl server zookeepersaslserv sasl server saslserv cnxn zoo keeper sasl server zookeepersaslserv note client token clienttoken empti client token clienttoken length digest md5 mechan client token clienttoken empti begin sasl negoti process respons token responsetoken sasl server saslserv evalu respons evaluaterespons client token clienttoken sasl server saslserv complet iscomplet string author id authorizationid sasl server saslserv get author id getauthorizationid log info ad sasl author author id authorizationid author id authorizationid cnxn add auth info addauthinfo id sasl author id authorizationid sasl except saslexcept log warn client fail sasl authent get properti getproperti zookeep allow sasl fail client allowsaslfailedcli get properti getproperti zookeep allow sasl fail client allowsaslfailedcli equal log warn maintain client connect sasl authent failur log warn close client connect sasl authent failur cnxn close pointer except nullpointerexcept log error cnxn sasl server saslserv cnxn object initi sasl server saslserv properli respons token responsetoken log debug size server sasl respons respons token responsetoken length wrap sasl respons token client insid respons object set sasl respons setsaslrespons respons token responsetoken process txn result processtxnresult process txn processtxn txn header txnheader hdr record txn process txn result processtxnresult rc op code opcod hdr get type gettyp session id sessionid hdr get client id getclientid rc get zk databas getzkdatabas process txn processtxn hdr txn op code opcod op code opcod creat session createsess txn creat session txn createsessiontxn creat session txn createsessiontxn cst creat session txn createsessiontxn txn session tracker sessiontrack add session addsess session id sessionid cst get time gettimeout log warn txn get getclass txn string tostr op code opcod op code opcod close session closesess session tracker sessiontrack remov session removesess session id sessionid rc 

server deleg load tree instanc data tree builder datatreebuild data tree datatre build 

basic data tree builder basicdatatreebuild data tree builder datatreebuild data tree datatre build data tree datatre 

miss session except missingsessionexcept io except ioexcept serial version uid serialversionuid 7467414635467261007l miss session except missingsessionexcept string msg msg 

structur us facilit inform share prep rp preprp rp finalrp chang record changerecord chang record changerecord zxid string path stat persist statpersist stat child count childcount list acl acl zxid zxid path path stat stat child count childcount child count childcount acl acl zxid string path stat persist statpersist stat make creat object chang child count childcount list acl acl make creat object chang suppress warn suppresswarn uncheck chang record changerecord duplic zxid stat persist statpersist stat stat persist statpersist stat data tree datatre copi stat persist copystatpersist stat stat chang record changerecord zxid path stat child count childcount acl arrai list arraylist acl arrai list arraylist acl 

encod composit transact wire format transact consist singl multi header multihead follow appropri request multi header multihead ha type type follow transact neg number more transact includ multi transact record multitransactionrecord record iter op list op op arrai list arraylist op multi transact record multitransactionrecord multi transact record multitransactionrecord iter op op op op op add op overrid iter op iter op iter add op op op add op size op size overrid serial output archiv outputarch archiv string tag io except ioexcept archiv start record startrecord tag index op op op multi header multihead multi header multihead op get type gettyp serial archiv tag op get type gettyp zoo def zoodef op code opcod creat op request record torequestrecord serial archiv tag zoo def zoodef op code opcod delet op request record torequestrecord serial archiv tag zoo def zoodef op code opcod set data setdata op request record torequestrecord serial archiv tag zoo def zoodef op code opcod check op request record torequestrecord serial archiv tag io except ioexcept invalid type op multi header multihead serial archiv tag archiv end record endrecord tag overrid deseri input archiv inputarch archiv string tag io except ioexcept archiv start record startrecord tag multi header multihead multi header multihead deseri archiv tag get done getdon get type gettyp zoo def zoodef op code opcod creat creat request createrequest cr creat request createrequest cr deseri archiv tag add op creat cr get path getpath cr get data getdata cr get acl getacl cr get flag getflag zoo def zoodef op code opcod delet delet request deleterequest dr delet request deleterequest dr deseri archiv tag add op delet dr get path getpath dr get version getvers zoo def zoodef op code opcod set data setdata set data request setdatarequest sdr set data request setdatarequest sdr deseri archiv tag add op set data setdata sdr get path getpath sdr get data getdata sdr get version getvers zoo def zoodef op code opcod check check version request checkversionrequest cvr check version request checkversionrequest cvr deseri archiv tag add op check cvr get path getpath cvr get version getvers io except ioexcept invalid type op deseri archiv tag archiv end record endrecord tag overrid equal object multi transact record multitransactionrecord multi transact record multitransactionrecord multi transact record multitransactionrecord op iter op op iter op op op ha more data hasmoredata ha next hasnext ha more data hasmoredata op op otherop next op equal op otherop ha next hasnext op overrid hash code hashcod 1023 op op op 25 op hash code hashcod 

vote vote id zxid id id zxid zxid elect epoch electionepoch peer epoch peerepoch state server state serverst vote id zxid peer epoch peerepoch id id zxid zxid elect epoch electionepoch peer epoch peerepoch peer epoch peerepoch state server state serverst vote id zxid elect epoch electionepoch peer epoch peerepoch id id zxid zxid elect epoch electionepoch elect epoch electionepoch peer epoch peerepoch peer epoch peerepoch state server state serverst vote id zxid elect epoch electionepoch peer epoch peerepoch server state serverst state id id zxid zxid elect epoch electionepoch elect epoch electionepoch state state peer epoch peerepoch peer epoch peerepoch id zxid elect epoch electionepoch peer epoch peerepoch get id getid id get zxid getzxid zxid get elect epoch getelectionepoch elect epoch electionepoch get peer epoch getpeerepoch peer epoch peerepoch server state serverst get state getstat state server state serverst state overrid equal object vote vote vote id id zxid zxid elect epoch electionepoch elect epoch electionepoch peer epoch peerepoch peer epoch peerepoch overrid hash code hashcod id zxid string string tostr id hex string tohexstr zxid hex string tohexstr peer epoch peerepoch 

get children request getchildrenrequest record string path watch get children request getchildrenrequest get children request getchildrenrequest string path watch path path watch watch string get path getpath path set path setpath string path get watch getwatch watch set watch setwatch watch serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writebool watch watch end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path watch read readbool watch end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writebool watch watch end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get children request getchildrenrequest cast except classcastexcept compar differ type record get children request getchildrenrequest peer get children request getchildrenrequest peer peer ret ret path compar compareto peer path ret ret ret watch peer watch watch ret ret ret equal object peer peer peer peer get children request getchildrenrequest peer peer get children request getchildrenrequest peer get children request getchildrenrequest peer peer ret ret path equal peer path ret ret ret watch peer watch ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret watch result 37 result ret result string signatur get children request lgetchildrenrequest sz 

session test sessiontest base logger log logger factori loggerfactori get logger getlogg session test sessiontest session zsession creat session createsess creat session createsess 30 session zsession creat session createsess string expir web resourc webresourc wr sessionsr queri param queryparam op creat queri param queryparam expir expir builder wr accept media type mediatyp applic json applic json client respons clientrespons cr post client respons clientrespons equal assertequ client respons clientrespons statu creat cr get client respons statu getclientresponsestatu cr get entiti getent session zsession test test creat session testcreatenewsess json except jsonexcept session zsession session creat session createsess equal assertequ session id length 36 us band method verifi asserttru zoo keeper servic zookeeperservic connect isconnect context path context path session id test test session expir testsessionexpir interrupt except interruptedexcept session zsession session creat session createsess us band method verifi asserttru zoo keeper servic zookeeperservic connect isconnect context path context path session id wait session close thread sleep 1500 assertfals zoo keeper servic zookeeperservic connect isconnect context path context path session id test test delet session testdeletesess session zsession session creat session createsess 30 web resourc webresourc wr sessionsr path session id builder wr accept media type mediatyp applic json applic json asserttru zoo keeper servic zookeeperservic connect isconnect context path context path session id client respons clientrespons cr delet client respons clientrespons equal assertequ client respons clientrespons statu content content cr get client respons statu getclientresponsestatu assertfals zoo keeper servic zookeeperservic connect isconnect context path context path session id test test send heartbeat testsendheartbeat interrupt except interruptedexcept session zsession session creat session createsess thread sleep 1000 web resourc webresourc wr sessionsr path session id builder wr accept media type mediatyp applic json applic json client respons clientrespons cr put client respons clientrespons equal assertequ client respons clientrespons statu cr get client respons statu getclientresponsestatu thread sleep 1500 asserttru zoo keeper servic zookeeperservic connect isconnect context path context path session id thread sleep 1000 assertfals zoo keeper servic zookeeperservic connect isconnect context path context path session id test test creat ephemer node testcreateephemeralznod keeper except keeperexcept interrupt except interruptedexcept io except ioexcept session zsession session creat session createsess 30 web resourc webresourc wr znodesr path queri param queryparam op creat queri param queryparam name ephemer test queri param queryparam ephemer queri param queryparam session session id queri param queryparam builder wr accept media type mediatyp applic json applic json client respons clientrespons cr post client respons clientrespons equal assertequ client respons clientrespons statu creat cr get client respons statu getclientresponsestatu stat stat stat zk get data getdata ephemer test stat zoo keeper zookeep session zk sessionzk zoo keeper servic zookeeperservic get client getclient context path context path session id equal assertequ stat get ephemer owner getephemeralown session zk sessionzk get session id getsessionid 

test stand server quorum peer main test quorumpeermaintest quorum peer test base quorumpeertestbas verifi abil start cluster test test quorum testquorum except client base clientbas setup test env setuptestenv client port qp1 client port qp1 port assign portassign uniqu client port qp2 client port qp2 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu nserver 127 port assign portassign uniqu port assign portassign uniqu main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect main thread mainthread q2 main thread mainthread client port qp2 client port qp2 quorum cfg section quorumcfgsect q1 start q2 start asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp1 client port qp1 connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp2 client port qp2 connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep 127 client port qp1 client port qp1 client base clientbas connect timeout connect timeout zk creat foo q1 foo q1 foobar1 get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist equal assertequ string zk get data getdata foo q1 foo q1 foobar1 zk close zk zoo keeper zookeep 127 client port qp2 client port qp2 client base clientbas connect timeout connect timeout zk creat foo q2 foo q2 foobar2 get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist equal assertequ string zk get data getdata foo q2 foo q2 foobar2 zk close q1 shutdown q2 shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp1 client port qp1 client base clientbas connect timeout connect timeout asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp2 client port qp2 client base clientbas connect timeout connect timeout test earli leader abandon test test earli leader abandon testearlyleaderabandon except client base clientbas setup test env setuptestenv server count server count client port clientport server count server count string builder stringbuild sb string builder stringbuild server count server count client port clientport port assign portassign uniqu sb append server 127 port assign portassign uniqu port assign portassign uniqu string quorum cfg section quorumcfgsect sb string tostr main thread mainthread mt main thread mainthread server count server count zoo keeper zookeep zk zoo keeper zookeep server count server count server count server count mt main thread mainthread client port clientport quorum cfg section quorumcfgsect mt start zk zoo keeper zookeep 127 client port clientport client base clientbas connect timeout connect timeout wait waitforal zk state connect shutdown start back up make creat session isn first transact innocu server count server count mt shutdown wait waitforal zk state connect server count server count mt start wait waitforal zk state connect let find leader kill second plenti time leader map propos outstand server count server count mt main quorum peer quorump leader mt shutdown leader outstand mt leader main quorum peer quorump leader outstand propos outstandingpropos zk leader creat zk leader zk get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist fail creat zk leader fail keeper except keeperexcept make get process leader asserttru outstand size asserttru propos outstand valu iter next request hdr get type gettyp op code opcod creat make ha chanc write disk thread sleep 1000 mt leader shutdown wait waitforal zk state connect server count server count leader mt start server count server count leader wait on waitforon zk state connect zk creat zk zk get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist mt leader start wait waitforal zk state connect make consist server count server count server count server count leader asserttru leader leader leader follow zk zk exist zk asserttru leader leader leader follow zk zk exist zk server count server count zk close server count server count mt shutdown test server highest zxid present leader elect join test reproduc issu fix bug mention zookeep 1154 zookeep 1156 test test highest zxid join late testhighestzxidjoinl except num server numserv server svr launch server launchserv num server numserv string path hzxidtest leader find leader num server numserv svr mt main quorum peer quorump leader leader make leader asserttru leader leader nonlead leader num server numserv input input output creat coupl node svr zk leader creat path leader input id open acl unsaf open acl unsaf creat mode createmod persist svr zk leader creat path nonlead input id open acl unsaf open acl unsaf creat mode createmod persist make updat commit follow statement output svr zk leader get data getdata path nonlead shutdown on leader num server numserv leader svr mt shutdown input updat node leader svr zk leader set data setdata path leader input wait time let get written disk thread sleep 500 shut leader down svr mt leader shutdown gc wait waitforal svr zk state connect start leader num server numserv leader svr mt start wait connect on wait on waitforon svr zk nonlead state connect valid old valu on output svr zk nonlead get data getdata path leader equal assertequ expect old valu isn commit output updat bump max commt zxid maxcommttedzxid set valu svr zk nonlead set data setdata path nonlead input start old leader svr mt leader start connect wait on waitforon svr zk leader state connect make doesn valu log output svr zk leader get data getdata path leader equal assertequ valid depos leader ha roll back chang written output make leader ha subsequ chang made offlin output svr zk leader get data getdata path nonlead equal assertequ valid depos leader caught up chang miss output wait on waitforon zoo keeper zookeep zk state state interrupt except interruptedexcept zk get state getstat state thread sleep 500 wait waitforal zoo keeper zookeep zk state state interrupt except interruptedexcept iter 10 connect someonenotconnect connect someonenotconnect iter client base clientbas log stack trace logallstacktrac runtim except runtimeexcept wait connect someonenotconnect zoo keeper zookeep zk zk zk get state getstat state connect someonenotconnect thread sleep 1000 hold server client server server main thread mainthread mt zoo keeper zookeep zk helper function launch set server param num server numserv io except ioexcept interrupt except interruptedexcept server launch server launchserv num server numserv io except ioexcept interrupt except interruptedexcept server count server count num server numserv server svr server client port clientport server count server count string builder stringbuild sb string builder stringbuild server count server count client port clientport port assign portassign uniqu sb append server 127 port assign portassign uniqu port assign portassign uniqu string quorum cfg section quorumcfgsect sb string tostr main thread mainthread mt main thread mainthread server count server count zoo keeper zookeep zk zoo keeper zookeep server count server count server count server count mt main thread mainthread client port clientport quorum cfg section quorumcfgsect mt start zk zoo keeper zookeep 127 client port clientport client base clientbas connect timeout connect timeout wait waitforal zk state connect svr mt mt svr zk zk svr verifi handl bad quorum address test test bad peer address quorum testbadpeeraddressinquorum except client base clientbas setup test env setuptestenv setup logger captur log layout layout logger get root logger getrootlogg get append getappend consol get layout getlayout arrai output stream bytearrayoutputstream os arrai output stream bytearrayoutputstream writer append writerappend append writer append writerappend layout os append set threshold setthreshold level warn logger qlogger logger get logger getlogg org apach zookeep server quorum qlogger add append addappend append client port qp1 client port qp1 port assign portassign uniqu client port qp2 client port qp2 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu nserver fee fii foo fum port assign portassign uniqu port assign portassign uniqu main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect q1 start isup client base clientbas wait server up waitforserverup 127 client port qp1 client port qp1 5000 assertfals server up isup q1 shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp1 client port qp1 client base clientbas connect timeout connect timeout qlogger remov append removeappend append line number reader linenumberread line number reader linenumberread string reader stringread os string tostr string line found pattern pattern compil open channel elect address line read line readlin found matcher line match found asserttru complain host found verifi handl inconsist peer type test test inconsist peer type testinconsistentpeertyp except client base clientbas setup test env setuptestenv setup logger captur log layout layout logger get root logger getrootlogg get append getappend consol get layout getlayout arrai output stream bytearrayoutputstream os arrai output stream bytearrayoutputstream writer append writerappend append writer append writerappend layout os append set threshold setthreshold level info logger qlogger logger get logger getlogg org apach zookeep server quorum qlogger add append addappend append test most situat server state observ server list peer type peertyp observ token config client port qp1 client port qp1 port assign portassign uniqu client port qp2 client port qp2 port assign portassign uniqu client port qp3 client port qp3 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu nserver 127 port assign portassign uniqu port assign portassign uniqu nserver 127 port assign portassign uniqu port assign portassign uniqu observ main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect main thread mainthread q2 main thread mainthread client port qp2 client port qp2 quorum cfg section quorumcfgsect main thread mainthread q3 main thread mainthread client port qp3 client port qp3 quorum cfg section quorumcfgsect q1 start q2 start q3 start asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp1 client port qp1 connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp2 client port qp2 connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp3 client port qp3 connect timeout connect timeout q1 shutdown q2 shutdown q3 shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp1 client port qp1 client base clientbas connect timeout connect timeout asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp2 client port qp2 client base clientbas connect timeout connect timeout asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp3 client port qp3 client base clientbas connect timeout connect timeout qlogger remov append removeappend append line number reader linenumberread line number reader linenumberread string reader stringread os string tostr string line warn present warningpres default observ defaultedtoobserv pattern warn pwarn pattern compil peer type from server list doesn match peer type peertyp pattern observ pobserv pattern compil observ line read line readlin warn pwarn matcher line match warn present warningpres observ pobserv matcher line match default observ defaultedtoobserv warn present warningpres default observ defaultedtoobserv asserttru warn inconsist peer type warn present warningpres default observ defaultedtoobserv verifi bad packet handl properli quorum port except test test bad packet testbadpacket except client base clientbas setup test env setuptestenv client port qp1 client port qp1 port assign portassign uniqu client port qp2 client port qp2 port assign portassign uniqu elect port1 electionport1 port assign portassign uniqu elect port2 electionport2 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu elect port1 electionport1 nserver 127 port assign portassign uniqu elect port2 electionport2 main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect main thread mainthread q2 main thread mainthread client port qp2 client port qp2 quorum cfg section quorumcfgsect q1 start q2 start asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp1 client port qp1 connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp2 client port qp2 connect timeout connect timeout length 1024 1024 1024 buffer bytebuff buff buffer bytebuff wrap buff put putint length buff posit socket channel socketchannel socket channel socketchannel open inet socket address inetsocketaddress 127 elect port1 electionport1 write buff close buff posit socket channel socketchannel open inet socket address inetsocketaddress 127 elect port2 electionport2 write buff close zoo keeper zookeep zk zoo keeper zookeep 127 client port qp1 client port qp1 client base clientbas connect timeout connect timeout zk creat foo q1 foo q1 foobar1 get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist equal assertequ string zk get data getdata foo q1 foo q1 foobar1 zk close q1 shutdown q2 shutdown verifi handl quorum default elect alg electionalg fast leader elect test test quorum default testquorumdefault except client base clientbas setup test env setuptestenv setup logger captur log layout layout logger get root logger getrootlogg get append getappend consol get layout getlayout arrai output stream bytearrayoutputstream os arrai output stream bytearrayoutputstream writer append writerappend append writer append writerappend layout os append set flush setimmediateflush append set threshold setthreshold level info logger zlogger logger get logger getlogg org apach zookeep zlogger add append addappend append client port qp1 client port qp1 port assign portassign uniqu client port qp2 client port qp2 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu nserver 127 port assign portassign uniqu port assign portassign uniqu main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect main thread mainthread q2 main thread mainthread client port qp2 client port qp2 quorum cfg section quorumcfgsect q1 start q2 start asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp1 client port qp1 connect timeout connect timeout asserttru wait server up client base clientbas wait server up waitforserverup 127 client port qp2 client port qp2 connect timeout connect timeout q1 shutdown q2 shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp1 client port qp1 client base clientbas connect timeout connect timeout asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port qp2 client port qp2 client base clientbas connect timeout connect timeout zlogger remov append removeappend append os close line number reader linenumberread line number reader linenumberread string reader stringread os string tostr string line found pattern pattern compil fast leader elect fastleaderelect line read line readlin found matcher line match found asserttru fastleaderelect us found verifi quorum peer quorump exit immedi test test quorum peer exit time testquorumpeerexittim except maxwait 3000 client port qp1 client port qp1 port assign portassign uniqu string quorum cfg section quorumcfgsect server 127 port assign portassign uniqu port assign portassign uniqu nserver 127 port assign portassign uniqu port assign portassign uniqu main thread mainthread q1 main thread mainthread client port qp1 client port qp1 quorum cfg section quorumcfgsect q1 start let notif timeout thread sleep 30000 start current time milli currenttimemilli q1 shutdown end current time milli currenttimemilli end start maxwait fail quorum peer quorump end start shutdown expect maxwait 

hold server client server server main thread mainthread mt zoo keeper zookeep zk 

suppress warn suppresswarn serial abstract keeper except keeperexcept except multi request result except retain result here examin problem scope non multi request get access result list op result opresult result non specif keeper except construct factori method order guarante consist error code error code construct special purpos except directli allow most specif declar except thrown param code error code param path zoo keeper zookeep path oper special except thrown caller keeper except keeperexcept creat code code string path keeper except keeperexcept creat code path path deprec deprec us link creat code string deprec keeper except keeperexcept creat code string path keeper except keeperexcept creat code get code path path deprec deprec us link creat code deprec keeper except keeperexcept creat code creat code get code non specif keeper except construct factori method order guarante consist error code error code construct special purpos except directli allow most specif declar except thrown param code error code except determin specif type except return special except thrown caller keeper except keeperexcept creat code code code systemerror error except systemerrorexcept runtimeinconsist runtim inconsist except runtimeinconsistencyexcept datainconsist data inconsist except datainconsistencyexcept connectionloss connect loss except connectionlossexcept marshallingerror marshal error except marshallingerrorexcept unimpl unimpl except unimplementedexcept operationtimeout oper timeout except operationtimeoutexcept badargu bad argument except badargumentsexcept apierror api error except apierrorexcept nonod node except nonodeexcept noauth auth except noauthexcept badvers bad version except badversionexcept nochildrenforephemer children ephemer except nochildrenforephemeralsexcept nodeexist node exist except nodeexistsexcept invalidacl invalid acl except invalidaclexcept authfail auth fail except authfailedexcept notempti empti except notemptyexcept sessionexpir session expir except sessionexpiredexcept invalidcallback invalid callback except invalidcallbackexcept sessionmov session move except sessionmovedexcept notreadonli read except notreadonlyexcept illeg argument except illegalargumentexcept invalid except code set code except param code error code deprec deprec except immut method us deprec set code setcod code code code get code contain origin constant replac enumer code refer directli necessari legaci code access constant code note us here fact enum refer constant defin constant consid initi after after type allow deprec constant initi first referenc construct enum didn constant declar twice declar enabl javadoc includ user api spec deprec code deprec codedeprec deprec deprec us link code deprec deprec deprec us link code systemerror deprec error systemerror deprec deprec us link code runtimeinconsist deprec runtim inconsist runtimeinconsist deprec deprec us link code datainconsist deprec data inconsist datainconsist deprec deprec us link code connectionloss deprec connect loss connectionloss deprec deprec us link code marshallingerror deprec marshal error marshallingerror deprec deprec us link code unimpl deprec unimpl deprec deprec us link code operationtimeout deprec oper timeout operationtimeout deprec deprec us link code badargu deprec bad argument badargu deprec deprec us link code apierror deprec api error apierror 100 deprec deprec us link code nonod deprec node nonod 101 deprec deprec us link code noauth deprec auth noauth 102 deprec deprec us link code badvers deprec bad version badvers 103 deprec deprec us link code nochildrenforephemer deprec children ephemer nochildrenforephemer 108 deprec deprec us link code nodeexist deprec node exist nodeexist 110 deprec deprec us link code notempti deprec empti notempti 111 deprec deprec us link code sessionexpir deprec session expir sessionexpir 112 deprec deprec us link code invalidcallback deprec invalid callback invalidcallback 113 deprec deprec us link code invalidacl deprec invalid acl invalidacl 114 deprec deprec us link code authfail deprec auth fail authfail 115 valu us directli link code sessionmov session move sessionmov 118 code repres keeper except keeperexcept type replac deprec earlier constant old deprec valu camel valu cap code code deprec codedeprec server side error thrown server shouldn us rang specif error code greater valu lesser link apierror error systemerror error systemerror runtim inconsist found runtimeinconsist runtim inconsist runtimeinconsist data inconsist found datainconsist data inconsist datainconsist connect server ha lost connectionloss connect loss connectionloss error marshal unmarshal data marshallingerror marshal error marshallingerror oper unimpl unimpl unimpl oper timeout operationtimeout oper timeout operationtimeout invalid argument badargu bad argument badargu api error thrown server shouldn us rang specif error code greater valu api error valu link systemerror apierror api error apierror node exist nonod node nonod authent noauth auth noauth version conflict badvers bad version badvers ephemer node children nochildrenforephemer children ephemer nochildrenforephemer node exist nodeexist node exist nodeexist node ha children notempti empti notempti session ha expir server sessionexpir session expir sessionexpir invalid callback specifi invalidcallback invalid callback invalidcallback invalid acl specifi invalidacl invalid acl invalidacl client authent fail authfail auth fail authfail session move server oper ignor sessionmov 118 state chang request pass read server notreadonli 119 map integ code lookup hash map hashmap integ code code set enumset allof code lookup put code code code code code code get valu code error code integ valu intvalu code get code valu integ error code param code error code code valu specifi code code get code lookup get code string get code messag getcodemessag code code code systemerror error systemerror runtimeinconsist runtim inconsist runtimeinconsist datainconsist data inconsist datainconsist connectionloss connect loss connectionloss marshallingerror marshal error marshallingerror unimpl unimpl operationtimeout oper timeout operationtimeout badargu bad argument badargu apierror api error apierror nonod node nonod noauth auth noauth badvers bad version badvers nochildrenforephemer children ephemer nochildrenforephemer nodeexist node exist nodeexist invalidacl invalid acl invalidacl authfail auth fail authfail notempti directori empti sessionexpir session expir invalidcallback invalid callback sessionmov session move notreadonli read call unknown error code code code string path keeper except keeperexcept code code code code keeper except keeperexcept code code string path code code path path read error code except error code except deprec deprec us link code deprec get code getcod code code read error code except error code except code code code read path except path associ error string get path getpath path overrid string get messag getmessag path keeper error code keepererrorcod get code messag getcodemessag code keeper error code keepererrorcod get code messag getcodemessag code path set multi result setmultiresult list op result opresult result result result except thrown multi request partial result error code retriev getter copi list result from oper multi request list op result opresult get result getresult result arrai list arraylist op result opresult result code apierror api error except apierrorexcept keeper except keeperexcept api error except apierrorexcept code apierror code authfail auth fail except authfailedexcept keeper except keeperexcept auth fail except authfailedexcept code authfail code badargu bad argument except badargumentsexcept keeper except keeperexcept bad argument except badargumentsexcept code badargu bad argument except badargumentsexcept string path code badargu path code badvers bad version except badversionexcept keeper except keeperexcept bad version except badversionexcept code badvers bad version except badversionexcept string path code badvers path code connectionloss connect loss except connectionlossexcept keeper except keeperexcept connect loss except connectionlossexcept code connectionloss code datainconsist data inconsist except datainconsistencyexcept keeper except keeperexcept data inconsist except datainconsistencyexcept code datainconsist code invalidacl invalid acl except invalidaclexcept keeper except keeperexcept invalid acl except invalidaclexcept code invalidacl invalid acl except invalidaclexcept string path code invalidacl path code invalidcallback invalid callback except invalidcallbackexcept keeper except keeperexcept invalid callback except invalidcallbackexcept code invalidcallback code marshallingerror marshal error except marshallingerrorexcept keeper except keeperexcept marshal error except marshallingerrorexcept code marshallingerror code noauth auth except noauthexcept keeper except keeperexcept auth except noauthexcept code noauth code nochildrenforephemer children ephemer except nochildrenforephemeralsexcept keeper except keeperexcept children ephemer except nochildrenforephemeralsexcept code nochildrenforephemer children ephemer except nochildrenforephemeralsexcept string path code nochildrenforephemer path code nodeexist node exist except nodeexistsexcept keeper except keeperexcept node exist except nodeexistsexcept code nodeexist node exist except nodeexistsexcept string path code nodeexist path code nonod node except nonodeexcept keeper except keeperexcept node except nonodeexcept code nonod node except nonodeexcept string path code nonod path code notempti empti except notemptyexcept keeper except keeperexcept empti except notemptyexcept code notempti empti except notemptyexcept string path code notempti path code operationtimeout oper timeout except operationtimeoutexcept keeper except keeperexcept oper timeout except operationtimeoutexcept code operationtimeout code runtimeinconsist runtim inconsist except runtimeinconsistencyexcept keeper except keeperexcept runtim inconsist except runtimeinconsistencyexcept code runtimeinconsist code sessionexpir session expir except sessionexpiredexcept keeper except keeperexcept session expir except sessionexpiredexcept code sessionexpir code sessionmov session move except sessionmovedexcept keeper except keeperexcept session move except sessionmovedexcept code sessionmov code notreadonli read except notreadonlyexcept keeper except keeperexcept read except notreadonlyexcept code notreadonli code systemerror error except systemerrorexcept keeper except keeperexcept error except systemerrorexcept code systemerror code unimpl unimpl except unimplementedexcept keeper except keeperexcept unimpl except unimplementedexcept code unimpl 

contain origin constant replac enumer code refer directli necessari legaci code access constant code note us here fact enum refer constant defin constant consid initi after after type allow deprec constant initi first referenc construct enum didn constant declar twice declar enabl javadoc includ user api spec deprec code deprec codedeprec deprec deprec us link code deprec deprec deprec us link code systemerror deprec error systemerror deprec deprec us link code runtimeinconsist deprec runtim inconsist runtimeinconsist deprec deprec us link code datainconsist deprec data inconsist datainconsist deprec deprec us link code connectionloss deprec connect loss connectionloss deprec deprec us link code marshallingerror deprec marshal error marshallingerror deprec deprec us link code unimpl deprec unimpl deprec deprec us link code operationtimeout deprec oper timeout operationtimeout deprec deprec us link code badargu deprec bad argument badargu deprec deprec us link code apierror deprec api error apierror 100 deprec deprec us link code nonod deprec node nonod 101 deprec deprec us link code noauth deprec auth noauth 102 deprec deprec us link code badvers deprec bad version badvers 103 deprec deprec us link code nochildrenforephemer deprec children ephemer nochildrenforephemer 108 deprec deprec us link code nodeexist deprec node exist nodeexist 110 deprec deprec us link code notempti deprec empti notempti 111 deprec deprec us link code sessionexpir deprec session expir sessionexpir 112 deprec deprec us link code invalidcallback deprec invalid callback invalidcallback 113 deprec deprec us link code invalidacl deprec invalid acl invalidacl 114 deprec deprec us link code authfail deprec auth fail authfail 115 valu us directli link code sessionmov session move sessionmov 118 

code repres keeper except keeperexcept type replac deprec earlier constant old deprec valu camel valu cap code code deprec codedeprec server side error thrown server shouldn us rang specif error code greater valu lesser link apierror error systemerror error systemerror runtim inconsist found runtimeinconsist runtim inconsist runtimeinconsist data inconsist found datainconsist data inconsist datainconsist connect server ha lost connectionloss connect loss connectionloss error marshal unmarshal data marshallingerror marshal error marshallingerror oper unimpl unimpl unimpl oper timeout operationtimeout oper timeout operationtimeout invalid argument badargu bad argument badargu api error thrown server shouldn us rang specif error code greater valu api error valu link systemerror apierror api error apierror node exist nonod node nonod authent noauth auth noauth version conflict badvers bad version badvers ephemer node children nochildrenforephemer children ephemer nochildrenforephemer node exist nodeexist node exist nodeexist node ha children notempti empti notempti session ha expir server sessionexpir session expir sessionexpir invalid callback specifi invalidcallback invalid callback invalidcallback invalid acl specifi invalidacl invalid acl invalidacl client authent fail authfail auth fail authfail session move server oper ignor sessionmov 118 state chang request pass read server notreadonli 119 map integ code lookup hash map hashmap integ code code set enumset allof code lookup put code code code code code code get valu code error code integ valu intvalu code get code valu integ error code param code error code code valu specifi code code get code lookup get code 

code apierror api error except apierrorexcept keeper except keeperexcept api error except apierrorexcept code apierror 

code authfail auth fail except authfailedexcept keeper except keeperexcept auth fail except authfailedexcept code authfail 

code badargu bad argument except badargumentsexcept keeper except keeperexcept bad argument except badargumentsexcept code badargu bad argument except badargumentsexcept string path code badargu path 

code badvers bad version except badversionexcept keeper except keeperexcept bad version except badversionexcept code badvers bad version except badversionexcept string path code badvers path 

code connectionloss connect loss except connectionlossexcept keeper except keeperexcept connect loss except connectionlossexcept code connectionloss 

code datainconsist data inconsist except datainconsistencyexcept keeper except keeperexcept data inconsist except datainconsistencyexcept code datainconsist 

code invalidacl invalid acl except invalidaclexcept keeper except keeperexcept invalid acl except invalidaclexcept code invalidacl invalid acl except invalidaclexcept string path code invalidacl path 

code invalidcallback invalid callback except invalidcallbackexcept keeper except keeperexcept invalid callback except invalidcallbackexcept code invalidcallback 

code marshallingerror marshal error except marshallingerrorexcept keeper except keeperexcept marshal error except marshallingerrorexcept code marshallingerror 

code noauth auth except noauthexcept keeper except keeperexcept auth except noauthexcept code noauth 

code nochildrenforephemer children ephemer except nochildrenforephemeralsexcept keeper except keeperexcept children ephemer except nochildrenforephemeralsexcept code nochildrenforephemer children ephemer except nochildrenforephemeralsexcept string path code nochildrenforephemer path 

code nodeexist node exist except nodeexistsexcept keeper except keeperexcept node exist except nodeexistsexcept code nodeexist node exist except nodeexistsexcept string path code nodeexist path 

code nonod node except nonodeexcept keeper except keeperexcept node except nonodeexcept code nonod node except nonodeexcept string path code nonod path 

code notempti empti except notemptyexcept keeper except keeperexcept empti except notemptyexcept code notempti empti except notemptyexcept string path code notempti path 

code operationtimeout oper timeout except operationtimeoutexcept keeper except keeperexcept oper timeout except operationtimeoutexcept code operationtimeout 

code runtimeinconsist runtim inconsist except runtimeinconsistencyexcept keeper except keeperexcept runtim inconsist except runtimeinconsistencyexcept code runtimeinconsist 

code sessionexpir session expir except sessionexpiredexcept keeper except keeperexcept session expir except sessionexpiredexcept code sessionexpir 

code sessionmov session move except sessionmovedexcept keeper except keeperexcept session move except sessionmovedexcept code sessionmov 

code notreadonli read except notreadonlyexcept keeper except keeperexcept read except notreadonlyexcept code notreadonli 

code systemerror error except systemerrorexcept keeper except keeperexcept error except systemerrorexcept code systemerror 

code unimpl unimpl except unimplementedexcept keeper except keeperexcept unimpl except unimplementedexcept code unimpl 

full featur session tracker sessiontrack track session group tick interv round up tick interv provid sort grace period session expir batch made up session expir interv session tracker impl sessiontrackerimpl thread session tracker sessiontrack logger log logger factori loggerfactori get logger getlogg session tracker impl sessiontrackerimpl hash map hashmap session impl sessionimpl session id sessionsbyid hash map hashmap session impl sessionimpl hash map hashmap session set sessionset session set sessionset hash map hashmap session set sessionset concurr hash map concurrenthashmap integ session timeout sessionswithtimeout next session id nextsessionid next expir time nextexpirationtim expir interv expirationinterv session impl sessionimpl session session impl sessionimpl session id sessionid timeout expir time expiretim session id sessionid session id sessionid timeout timeout tick time ticktim expir time expiretim close isclos session id sessionid timeout tick time ticktim close isclos object owner get session id getsessionid session id sessionid get timeout gettimeout timeout close isclos close isclos initi next session initializenextsess id next sid nextsid next sid nextsid current time milli currenttimemilli 24 next sid nextsid next sid nextsid id 56 next sid nextsid session set sessionset hash set hashset session impl sessionimpl session hash set hashset session impl sessionimpl session expir sessionexpir expir round interv roundtointerv time on interv grace period time expir interv expirationinterv expir interv expirationinterv session tracker impl sessiontrackerimpl session expir sessionexpir expir concurr hash map concurrenthashmap integ session timeout sessionswithtimeout tick time ticktim sid session tracker sessiontrack expir expir expir interv expirationinterv tick time ticktim session timeout sessionswithtimeout session timeout sessionswithtimeout next expir time nextexpirationtim round interv roundtointerv current time milli currenttimemilli next session id nextsessionid initi next session initializenextsess sid entri integ session timeout sessionswithtimeout entri set entryset add session addsess get kei getkei get valu getvalu run current time currenttim dump session dumpsess print writer printwrit pwriter pwriter print session set pwriter print session set sessionset size pwriter println arrai list arraylist kei arrai list arraylist session set sessionset kei set keyset collect sort kei time kei pwriter print session set sessionset get time session size pwriter print expir pwriter print date time pwriter println session impl sessionimpl session set sessionset get time session pwriter print t0x pwriter println hex string tohexstr session id sessionid overrid string string tostr string writer stringwrit sw string writer stringwrit print writer printwrit pwriter print writer printwrit sw dump session dumpsess pwriter pwriter flush pwriter close sw string tostr overrid run run current time currenttim current time milli currenttimemilli next expir time nextexpirationtim current time currenttim wait next expir time nextexpirationtim current time currenttim session set sessionset set set session set sessionset remov next expir time nextexpirationtim set session impl sessionimpl set session set session close setsessionclos session id sessionid expir expir next expir time nextexpirationtim expir interv expirationinterv interrupt except interruptedexcept log error unexpect interrupt log info session tracker impl sessiontrackerimpl exit loop touch session touchsess session id sessionid timeout log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac client ping trace mask client ping trace mask session tracker impl sessiontrackerimpl touch session 0x hex string tohexstr session id sessionid timeout timeout session impl sessionimpl session id sessionsbyid get session id sessionid session doesn exist mark close close isclos expir time expiretim round interv roundtointerv current time milli currenttimemilli timeout tick time ticktim expir time expiretim done session set sessionset set session set sessionset get tick time ticktim set set session remov tick time ticktim expir time expiretim set session set sessionset get tick time ticktim set set session set sessionset session set sessionset put expir time expiretim set set session add set session close setsessionclos session id sessionid log trace enabl istraceen log info session close 0x hex string tohexstr session id sessionid session impl sessionimpl session id sessionsbyid get session id sessionid close isclos remov session removesess session id sessionid session impl sessionimpl session id sessionsbyid remov session id sessionid session timeout sessionswithtimeout remov session id sessionid log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask session tracker impl sessiontrackerimpl remov session 0x hex string tohexstr session id sessionid session set sessionset set session set sessionset get tick time ticktim session expir ha remov session set set session remov shutdown log info shut down run log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac get text trace level gettexttracelevel shutdown session tracker impl sessiontrackerimpl creat session createsess session timeout sessiontimeout add session addsess next session id nextsessionid session timeout sessiontimeout next session id nextsessionid add session addsess id session timeout sessiontimeout session timeout sessionswithtimeout put id session timeout sessiontimeout session id sessionsbyid get id session impl sessionimpl session impl sessionimpl id session timeout sessiontimeout session id sessionsbyid put id log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask session tracker impl sessiontrackerimpl ad session 0x hex string tohexstr id session timeout sessiontimeout log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask session tracker impl sessiontrackerimpl exist session 0x hex string tohexstr id session timeout sessiontimeout touch session touchsess id session timeout sessiontimeout check session checksess session id sessionid object owner keeper except keeperexcept session expir except sessionexpiredexcept keeper except keeperexcept session move except sessionmovedexcept session impl sessionimpl session session id sessionsbyid get session id sessionid session session close isclos keeper except keeperexcept session expir except sessionexpiredexcept session owner session owner owner session owner owner keeper except keeperexcept session move except sessionmovedexcept set owner setown id object owner session expir except sessionexpiredexcept session impl sessionimpl session session id sessionsbyid get id session session close isclos keeper except keeperexcept session expir except sessionexpiredexcept session owner owner 

session impl sessionimpl session session impl sessionimpl session id sessionid timeout expir time expiretim session id sessionid session id sessionid timeout timeout tick time ticktim expir time expiretim close isclos session id sessionid timeout tick time ticktim close isclos object owner get session id getsessionid session id sessionid get timeout gettimeout timeout close isclos close isclos 

session set sessionset hash set hashset session impl sessionimpl session hash set hashset session impl sessionimpl 

maintain tree data structur doesn network client connect code test stand tree maintain two parallel data structur hashtabl map from full path data node datanod tree data node datanod access path hashtabl tree travers serial disk data tree datatre logger log logger factori loggerfactori get logger getlogg data tree datatre hashtabl fast lookup datanod tree sourc truth lock occur concurr hash map concurrenthashmap string data node datanod node concurr hash map concurrenthashmap string data node datanod watch manag watchmanag data watch datawatch watch manag watchmanag watch manag watchmanag child watch childwatch watch manag watchmanag root zookeep tree string root zookeep rootzookeep zookeep node act manag statu node string proc zookeep proczookeep quota proc zookeep proczookeep string store child root string proc child zookeep procchildzookeep proc zookeep proczookeep substr zookeep quota node act quota manag node zookeep string quota zookeep quotazookeep quota quota zookeep quotazookeep string store child zookeep string quota child zookeep quotachildzookeep quota zookeep quotazookeep substr proc zookeep proczookeep length path trie keep track fo quota node datatre path trie pathtri trie ptrie path trie pathtri hashtabl list path ephemer node session map hash set hashset string ephemer concurr hash map concurrenthashmap hash set hashset string map from long acl save acl store datanod map list acl kei map longkeymap hash map hashmap list acl map from acl map list acl acl kei map aclkeymap hash map hashmap list acl number acl datatre acl index aclindex suppress warn suppresswarn uncheck hash set hashset string get ephemer getephemer session id sessionid hash set hashset string retv ephemer get session id sessionid retv hash set hashset string hash set hashset string clone retv clone hash set hashset string retv clone clone map hash set hashset string get ephemer map getephemeralsmap ephemer increment index incrementindex acl index aclindex compar two list acl element order size param lista list compar param listb list compar list size element order lista listb list acl equal listaclequ list acl lista list acl listb lista size listb size lista size acl lista get acl listb get equal convert list acl list long param acl list long map acl convert acl convertacl list acl acl acl 1l get valu from map ret acl kei map aclkeymap get acl find map ret ret val increment index incrementindex kei map longkeymap put val acl acl kei map aclkeymap put acl val val convert list long list acl param val longval list long list acl map long list acl convert convertlong val longval val longval val longval 1l id open acl unsaf open acl unsaf list acl acl kei map longkeymap get val longval acl log error error acl avail val longval runtim except runtimeexcept fail fetch acl val longval acl collect get session getsess ephemer kei set keyset accessor method allow raw creation datatre from bunch datanod param path path datanod param node datanod path add data node adddatanod string path data node datanod node node put path node data node datanod get node getnod string path node get path get node count getnodecount node size get watch count getwatchcount data watch datawatch size child watch childwatch size get ephemer count getephemeralscount map hash set hashset string map get ephemer map getephemeralsmap result hash set hashset string set map valu result set size result get size node base path data length size data approxim data size approximatedatas result map entri string data node datanod entri node entri set entryset data node datanod valu entri get valu getvalu valu result entri get kei getkei length result valu data valu data length result pointer root data tree datatre sourc truth us node hashmap find node tree data node datanod root data node datanod 1l stat persist statpersist creat zookeep filesystem proc filesystem zookeep data node datanod proc data node procdatanod data node datanod root 1l stat persist statpersist creat zookeep quota node maintain quota properti zookeep data node datanod quota data node quotadatanod data node datanod proc data node procdatanod 1l stat persist statpersist data tree datatre fight let root alia node put root node put root zookeep rootzookeep root add proc node quota node root add child addchild proc child zookeep procchildzookeep node put proc zookeep proczookeep proc data node procdatanod proc data node procdatanod add child addchild quota child zookeep quotachildzookeep node put quota zookeep quotazookeep quota data node quotadatanod path on special path own zookeep param path path check special path special path isspecialpath string path root zookeep rootzookeep equal path proc zookeep proczookeep equal path quota zookeep quotazookeep equal path copi stat persist copystatpersist stat persist statpersist from stat persist statpersist set avers setavers from get avers getavers set ctime setctim from get ctime getctim set cversion setcvers from get cversion getcvers set czxid setczxid from get czxid getczxid set mtime setmtim from get mtime getmtim set mzxid setmzxid from get mzxid getmzxid set pzxid setpzxid from get pzxid getpzxid set version setvers from get version getvers set ephemer owner setephemeralown from get ephemer owner getephemeralown copi stat copystat stat from stat set avers setavers from get avers getavers set ctime setctim from get ctime getctim set cversion setcvers from get cversion getcvers set czxid setczxid from get czxid getczxid set mtime setmtim from get mtime getmtim set mzxid setmzxid from get mzxid getmzxid set pzxid setpzxid from get pzxid getpzxid set version setvers from get version getvers set ephemer owner setephemeralown from get ephemer owner getephemeralown set data length setdatalength from get data length getdatalength set num children setnumchildren from get num children getnumchildren updat count stat datanod param last prefix lastprefix path node quota param diff diff ad count updat count updatecount string last prefix lastprefix diff string stat node statnod quota stat path statpath last prefix lastprefix data node datanod node node get stat node statnod stat track statstrack updat stat updatedstat node happen log error miss count node stat stat node statnod node updat stat updatedstat stat track statstrack string node data updat stat updatedstat set count setcount updat stat updatedstat get count getcount diff node data updat stat updatedstat string tostr get byte getbyt check count match quota string quota node quotanod quota quota path quotapath last prefix lastprefix node node get quota node quotanod stat track statstrack stat thisstat node happen log error miss count node quota quota node quotanod node stat thisstat stat track statstrack string node data stat thisstat get count getcount stat thisstat get count getcount updat stat updatedstat get count getcount log warn quota exceed last prefix lastprefix count updat stat updatedstat get count getcount limit stat thisstat get count getcount updat count byte stat datanod param last prefix lastprefix path node quota param diff diff ad number byte io except ioexcept path found updat byte updatebyt string last prefix lastprefix diff string stat node statnod quota stat path statpath last prefix lastprefix data node datanod node node get stat node statnod node make findbug happi log error miss stat node byte stat node statnod stat track statstrack updat stat updatedstat node updat stat updatedstat stat track statstrack string node data updat stat updatedstat set byte setbyt updat stat updatedstat get byte getbyt diff node data updat stat updatedstat string tostr get byte getbyt check byte match quota string quota node quotanod quota quota path quotapath last prefix lastprefix node node get quota node quotanod node make findbug happi log error miss quota node byte quota node quotanod stat track statstrack stat thisstat node stat thisstat stat track statstrack string node data stat thisstat get byte getbyt stat thisstat get byte getbyt updat stat updatedstat get byte getbyt log warn quota exceed last prefix lastprefix byte updat stat updatedstat get byte getbyt limit stat thisstat get byte getbyt param path param data param acl param ephemer owner ephemeralown session id own node ephemer node param zxid param time patch creat node keeper except keeperexcept string creat node createnod string path data list acl acl ephemer owner ephemeralown parent version parentcvers zxid time keeper except keeperexcept node except nonodeexcept keeper except keeperexcept node exist except nodeexistsexcept last slash lastslash path last index lastindexof string parent name parentnam path substr last slash lastslash string child name childnam path substr last slash lastslash stat persist statpersist stat stat persist statpersist stat set ctime setctim time stat set mtime setmtim time stat set czxid setczxid zxid stat set mzxid setmzxid zxid stat set pzxid setpzxid zxid stat set version setvers stat set avers setavers stat set ephemer owner setephemeralown ephemer owner ephemeralown data node datanod parent node get parent name parentnam parent keeper except keeperexcept node except nonodeexcept parent set string children parent get children getchildren children children contain child name childnam keeper except keeperexcept node exist except nodeexistsexcept parent version parentcvers parent version parentcvers parent stat get cversion getcvers parent version parentcvers parent stat set cversion setcvers parent version parentcvers parent stat set pzxid setpzxid zxid longval convert acl convertacl acl data node datanod child data node datanod parent data longval stat parent add child addchild child name childnam node put path child ephemer owner ephemeralown hash set hashset string list ephemer get ephemer owner ephemeralown list list hash set hashset string ephemer put ephemer owner ephemeralown list list list add path check on zookeep node child parent name parentnam start startswith quota zookeep quotazookeep check limit node quota limit node limitnod equal child name childnam limit node get parent add trie trie ptrie add path addpath parent name parentnam substr quota zookeep quotazookeep length quota stat node statnod equal child name childnam updat quota path updatequotaforpath parent name parentnam substr quota zookeep quotazookeep length check updat quota node string last prefix lastprefix last prefix lastprefix get max prefix quota getmaxprefixwithquota path match updat updat count updatecount last prefix lastprefix updat byte updatebyt last prefix lastprefix data data length data watch datawatch trigger watch triggerwatch path event event type eventtyp node creat nodecr child watch childwatch trigger watch triggerwatch parent name parentnam equal parent name parentnam event event type eventtyp node children chang nodechildrenchang path remov path from datatre param path path node delet param zxid current zxid keeper except keeperexcept node except nonodeexcept delet node deletenod string path zxid keeper except keeperexcept node except nonodeexcept last slash lastslash path last index lastindexof string parent name parentnam path substr last slash lastslash string child name childnam path substr last slash lastslash data node datanod node node get path node keeper except keeperexcept node except nonodeexcept node remov path data node datanod parent node get parent name parentnam parent keeper except keeperexcept node except nonodeexcept parent parent remov child removechild child name childnam parent stat set pzxid setpzxid zxid eowner node stat get ephemer owner getephemeralown eowner hash set hashset string node ephemer get eowner node node node remov path node parent parent name parentnam start startswith proc zookeep proczookeep delet node trie quota limit node limitnod equal child name childnam updat trie trie ptrie delet path deletepath parent name parentnam substr quota zookeep quotazookeep length check updat quota node string last prefix lastprefix last prefix lastprefix get max prefix quota getmaxprefixwithquota path match updat updat count updatecount last prefix lastprefix byte node byte node data node data length updat byte updatebyt last prefix lastprefix byte log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac event deliveri trace mask event deliveri trace mask data watch datawatch trigger watch triggerwatch path zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac event deliveri trace mask event deliveri trace mask child watch childwatch trigger watch triggerwatch parent name parentnam set watcher process data watch datawatch trigger watch triggerwatch path event type eventtyp node delet nodedelet child watch childwatch trigger watch triggerwatch path event type eventtyp node delet nodedelet process child watch childwatch trigger watch triggerwatch parent name parentnam equal parent name parentnam event type eventtyp node children chang nodechildrenchang stat set data setdata string path data version zxid time keeper except keeperexcept node except nonodeexcept stat stat data node datanod node get path keeper except keeperexcept node except nonodeexcept lastdata lastdata data data data stat set mtime setmtim time stat set mzxid setmzxid zxid stat set version setvers version copi stat copystat updat path quota subtre string last prefix lastprefix last prefix lastprefix get max prefix quota getmaxprefixwithquota path updat byte updatebyt last prefix lastprefix data data length lastdata lastdata length data watch datawatch trigger watch triggerwatch path event type eventtyp node data chang nodedatachang quota set appropri prefix quota param path zk path check quota max quota prefix string get max prefix quota getmaxprefixwithquota string path root keep quota zookeep root node string last prefix lastprefix trie ptrie find max prefix findmaxprefix path root zookeep rootzookeep equal last prefix lastprefix equal last prefix lastprefix last prefix lastprefix get data getdata string path stat stat watcher watcher keeper except keeperexcept node except nonodeexcept data node datanod node get path keeper except keeperexcept node except nonodeexcept copi stat copystat stat watcher data watch datawatch add watch addwatch path watcher data stat stat node statnod string path watcher watcher keeper except keeperexcept node except nonodeexcept stat stat stat data node datanod node get path watcher data watch datawatch add watch addwatch path watcher keeper except keeperexcept node except nonodeexcept copi stat copystat stat stat list string get children getchildren string path stat stat watcher watcher keeper except keeperexcept node except nonodeexcept data node datanod node get path keeper except keeperexcept node except nonodeexcept stat copi stat copystat stat arrai list arraylist string children set string child get children getchildren child children arrai list arraylist string child size children add addal child children arrai list arraylist string watcher child watch childwatch add watch addwatch path watcher children stat set acl setacl string path list acl acl version keeper except keeperexcept node except nonodeexcept stat stat stat data node datanod node get path keeper except keeperexcept node except nonodeexcept stat set avers setavers version acl convert acl convertacl acl copi stat copystat stat stat suppress warn suppresswarn uncheck list acl get acl getacl string path stat stat keeper except keeperexcept node except nonodeexcept data node datanod node get path keeper except keeperexcept node except nonodeexcept copi stat copystat stat arrai list arraylist acl convert convertlong acl process txn result processtxnresult client id clientid cxid zxid err type string path stat stat list process txn result processtxnresult multi result multiresult equal defin client id clientid cxid allow us hash tabl track complet transact java lang object equal java lang object overrid equal object process txn result processtxnresult process txn result processtxnresult process txn result processtxnresult client id clientid client id clientid cxid cxid equal find ration hashcod gener process txn result processtxnresult equal object java lang object hash code hashcod overrid hash code hashcod client id clientid cxid integ max valu max valu last process zxid lastprocessedzxid process txn result processtxnresult process txn processtxn txn header txnheader header record txn process txn result processtxnresult rc process txn result processtxnresult rc client id clientid header get client id getclientid rc cxid header get cxid getcxid rc zxid header get zxid getzxid rc type header get type gettyp rc err rc multi result multiresult header get type gettyp op code opcod creat creat txn createtxn creat txn createtxn creat txn createtxn txn rc path creat txn createtxn get path getpath creat node createnod creat txn createtxn get path getpath creat txn createtxn get data getdata creat txn createtxn get acl getacl creat txn createtxn get ephemer getephemer header get client id getclientid creat txn createtxn get parent version getparentcvers header get zxid getzxid header get time gettim op code opcod delet delet txn deletetxn delet txn deletetxn delet txn deletetxn txn rc path delet txn deletetxn get path getpath delet node deletenod delet txn deletetxn get path getpath header get zxid getzxid op code opcod set data setdata set data txn setdatatxn set data txn setdatatxn set data txn setdatatxn txn rc path set data txn setdatatxn get path getpath rc stat set data setdata set data txn setdatatxn get path getpath set data txn setdatatxn get data getdata set data txn setdatatxn get version getvers header get zxid getzxid header get time gettim op code opcod set acl setacl set acl txn setacltxn set acl txn setacltxn set acl txn setacltxn txn rc path set acl txn setacltxn get path getpath rc stat set acl setacl set acl txn setacltxn get path getpath set acl txn setacltxn get acl getacl set acl txn setacltxn get version getvers op code opcod close session closesess kill session killsess header get client id getclientid header get zxid getzxid op code opcod error error txn errortxn err txn errtxn error txn errortxn txn rc err err txn errtxn get err geterr op code opcod check check version txn checkversiontxn check txn checktxn check version txn checkversiontxn txn rc path check txn checktxn get path getpath op code opcod multi multi txn multitxn multi txn multitxn multi txn multitxn txn list txn txn multi txn multitxn get txn gettxn rc multi result multiresult arrai list arraylist process txn result processtxnresult fail txn subtxn txn subtxn get type gettyp op code opcod error fail post fail post fail txn subtxn txn buffer bytebuff bb buffer bytebuff wrap subtxn get data getdata record record subtxn get type gettyp op code opcod creat record creat txn createtxn op code opcod delet record delet txn deletetxn op code opcod set data setdata record set data txn setdatatxn op code opcod error record error txn errortxn post fail post fail op code opcod check record check version txn checkversiontxn io except ioexcept invalid type op subtxn get type gettyp record buffer input stream bytebufferinputstream buffer2 record bytebuffer2record bb record fail subtxn get type gettyp op code opcod error ec post fail post fail code runtimeinconsist valu intvalu code valu intvalu subtxn set type settyp op code opcod error record error txn errortxn ec fail subtxn get type gettyp op code opcod error txn header txnheader sub hdr subhdr txn header txnheader header get client id getclientid header get cxid getcxid header get zxid getzxid header get time gettim subtxn get type gettyp process txn result processtxnresult sub rc subrc process txn processtxn sub hdr subhdr record rc multi result multiresult add sub rc subrc sub rc subrc err rc err rc err sub rc subrc err keeper except keeperexcept log debug enabl isdebugen log debug fail header txn rc err code valu intvalu io except ioexcept log debug enabl isdebugen log debug fail header txn snapshot progress modifi data tree set last process zxid lastprocessedzxid prior make chang tree zxid associ snapshot file ahead content restor from snapshot restor method appli transact zxid associ snapshot file restor method assum transact present snapshot avoid first appli transact modifi last process zxid lastprocessedzxid restor correctli handl snapshot contain data ahead zxid associ file rc zxid last process zxid lastprocessedzxid last process zxid lastprocessedzxid rc zxid snapshot lazili happen child znode parent creat after parent serial replai log restor creat fail node creat after failur increment cversion parent znode parent serial befor children note failur dt restor header get type gettyp op code opcod creat rc err code nodeexist valu intvalu log debug adjust parent cversion txn header get type gettyp path rc path err rc err last slash lastslash rc path last index lastindexof string parent name parentnam rc path substr last slash lastslash creat txn createtxn txn ctxn creat txn createtxn txn set cversion pzxid setcversionpzxid parent name parentnam txn ctxn get parent version getparentcvers header get zxid getzxid keeper except keeperexcept node except nonodeexcept log error fail set parent cversion parent name parentnam rc err code valu intvalu rc err code valu intvalu log debug ignor process txn processtxn failur hdr header get type gettyp error rc err rc kill session killsess session zxid list remov from ephemer worri synchron list call from request processor finalrequestprocessor synchron list chang here creat delet chang list call from request processor finalrequestprocessor sequenc hash set hashset string list ephemer remov session list string path list delet node deletenod path zxid log debug enabl isdebugen log debug delet ephemer node path session 0x hex string tohexstr session node except nonodeexcept log warn ignor node except nonodeexcept path path remov ephemer dead session 0x hex string tohexstr session encapsulta valu count byte count method get count node byte subtre param path path us param count count get count getcount string path count count data node datanod node get node getnod path node string children len node set string child node get children getchildren child children child arrai toarrai string child size len node data node data length add count count count byte len children children length string child children get count getcount path child count updat quota path param path path us updat quota path updatequotaforpath string path count count get count getcount path stat track statstrack strack stat track statstrack strack set byte setbyt byte strack set count setcount count string stat path statpath quota quota zookeep quotazookeep path quota stat node statnod data node datanod node get node getnod stat path statpath exist node log warn miss quota stat node stat path statpath node node data strack string tostr get byte getbyt method travers quota path updat path trie set param path travers node traversenod string path data node datanod node get node getnod path string children node set string child node get children getchildren child children child arrai toarrai string child size children children length node child leaf node check leaf node string end string endstr quota limit node limitnod path end endswith end string endstr limit node get real node updat count byte string real path realpath path substr quota quota zookeep quotazookeep length path index indexof end string endstr updat quota path updatequotaforpath real path realpath trie ptrie add path addpath real path realpath string child children travers node traversenod path child method set up path trie set up stat quota node setup quota setupquota string quota path quotapath quota quota zookeep quotazookeep data node datanod node get node getnod quota path quotapath node travers node traversenod quota path quotapath method us stringbuild creat path children faster string append str1 str2 param oa output archiv outputarch write param path string builder io except ioexcept interrupt except interruptedexcept serial node serializenod output archiv outputarch oa string builder stringbuild path io except ioexcept string path string pathstr path string tostr data node datanod node get node getnod path string pathstr node string children node scount oa write string writestr path string pathstr path oa write record writerecord node node set string child node get children getchildren child children child arrai toarrai string child size path append path length children string child children singl buffer resus truncat previou byte string path delet integ max valu max valu path append child serial node serializenod oa path scount initi deseri list deserializelist map list acl kei map longkeymap input archiv inputarch ia io except ioexcept ia read readint map val ia read readlong acl index aclindex val acl index aclindex val list acl acl list acllist arrai list arraylist acl index ia start vector startvector acl done acl acl acl acl deseri ia acl acl list acllist add acl incr kei map longkeymap put val acl list acllist acl kei map aclkeymap put acl list acllist val serial list serializelist map list acl kei map longkeymap output archiv outputarch oa io except ioexcept oa write writeint kei map longkeymap size map set map entri list acl set kei map longkeymap entri set entryset map entri list acl val set oa write writelong val get kei getkei list acl acl list acllist val get valu getvalu oa start vector startvector acl list acllist acl acl acl acl list acllist acl serial oa acl oa end vector endvector acl list acllist acl serial output archiv outputarch oa string tag io except ioexcept scount serial list serializelist kei map longkeymap oa serial node serializenod oa string builder stringbuild mark end stream check clear call snapshot root oa write string writestr path deseri input archiv inputarch ia string tag io except ioexcept deseri list deserializelist kei map longkeymap ia node clear string path ia read string readstr path path equal data node datanod node data node datanod ia read record readrecord node node node put path node last slash lastslash path last index lastindexof last slash lastslash root node string parent path parentpath path substr last slash lastslash node parent node get parent path parentpath node parent io except ioexcept invalid datatre unabl find parent parent path parentpath path path node parent add child addchild path substr last slash lastslash eowner node stat get ephemer owner getephemeralown eowner hash set hashset string list ephemer get eowner list list hash set hashset string ephemer put eowner list list add path path ia read string readstr path node put root done deseri datatre updat quota creat path trie updat stat node setup quota setupquota summari watch datatre param pwriter output write dump watch summari dumpwatchessummari print writer printwrit pwriter pwriter print data watch datawatch string tostr write text dump watch datatre warn expens us sparingli param pwriter output write dump watch dumpwatch print writer printwrit pwriter path bypath data watch datawatch dump watch dumpwatch pwriter path bypath write text dump ephemer datatre param pwriter output write dump ephemer dumpephemer print writer printwrit pwriter set kei ephemer kei set keyset pwriter println session ephemer kei size kei pwriter print 0x hex string tohexstr pwriter println hash set hashset string tmp ephemer get tmp string path tmp pwriter println path remov cnxn removecnxn watcher watcher data watch datawatch remov watcher removewatch watcher child watch childwatch remov watcher removewatch watcher clear root node clear ephemer clear data watch datawatch child watch childwatch set watch setwatch rel zxid relativezxid list string data watch datawatch list string exist watch existwatch list string child watch childwatch watcher watcher string path data watch datawatch data node datanod node get node getnod path watch event watchedev node watch event watchedev event type eventtyp node delet nodedelet keeper state keeperst sync connect syncconnect path node stat get czxid getczxid rel zxid relativezxid watch event watchedev event type eventtyp node creat nodecr keeper state keeperst sync connect syncconnect path node stat get mzxid getmzxid rel zxid relativezxid watch event watchedev event type eventtyp node data chang nodedatachang keeper state keeperst sync connect syncconnect path watcher process data watch datawatch add watch addwatch path watcher string path exist watch existwatch data node datanod node get node getnod path watch event watchedev node watch regist node stat get mzxid getmzxid rel zxid relativezxid watch event watchedev event type eventtyp node data chang nodedatachang keeper state keeperst sync connect syncconnect path watch event watchedev event type eventtyp node creat nodecr keeper state keeperst sync connect syncconnect path watcher process data watch datawatch add watch addwatch path watcher string path child watch childwatch data node datanod node get node getnod path watch event watchedev node watch event watchedev event type eventtyp node delet nodedelet keeper state keeperst sync connect syncconnect path node stat get pzxid getpzxid rel zxid relativezxid watch event watchedev event type eventtyp node children chang nodechildrenchang keeper state keeperst sync connect syncconnect path watcher process child watch childwatch add watch addwatch path watcher method set cversion pzxid specifi node valu pass argument valu modifi cversion newcvers greater current cversion node except nonodeexcept thrown znode specifi path found param path full path znode cversion modifi end path ignor param cversion newcvers valu assign cversion param zxid valu assign pzxid keeper except keeperexcept node except nonodeexcept znode found set cversion pzxid setcversionpzxid string path cversion newcvers zxid keeper except keeperexcept node except nonodeexcept path end endswith path path substr path length data node datanod node node get path node keeper except keeperexcept node except nonodeexcept path node cversion newcvers cversion newcvers node stat get cversion getcvers cversion newcvers node stat get cversion getcvers node stat set cversion setcvers cversion newcvers node stat set pzxid setpzxid zxid 

process txn result processtxnresult client id clientid cxid zxid err type string path stat stat list process txn result processtxnresult multi result multiresult equal defin client id clientid cxid allow us hash tabl track complet transact java lang object equal java lang object overrid equal object process txn result processtxnresult process txn result processtxnresult process txn result processtxnresult client id clientid client id clientid cxid cxid equal find ration hashcod gener process txn result processtxnresult equal object java lang object hash code hashcod overrid hash code hashcod client id clientid cxid integ max valu max valu 

encapsulta valu count byte count 

rcc constant rccconstant eof modul tkn modul tkn 11 record tkn record tkn 12 includ tkn includ tkn 13 tkn tkn 14 tkn tkn 15 tkn tkn 16 tkn tkn 17 tkn tkn 18 tkn tkn 19 ustr tkn ustr tkn 20 buffer tkn buffer tkn 21 vector tkn vector tkn 22 map tkn map tkn 23 lbrace tkn lbrace tkn 24 rbrace tkn rbrace tkn 25 lt tkn lt tkn 26 gt tkn gt tkn 27 semicolon tkn semicolon tkn 28 comma tkn comma tkn 29 dot tkn dot tkn 30 cstring tkn cstring tkn 31 ident tkn ident tkn 32 on line comment withinonelinecom multi line comment withinmultilinecom string token imag tokenimag eof token kind token kind token kind 10 modul includ ustr buffer vector map cstring tkn cstring tkn ident tkn ident tkn 

listen event zookeep node node listen nodelisten param node path nodepath path node param event type eventtyp event type param event info eventinfo link map contain inform event process event processev string node path nodepath string event type eventtyp map string string event info eventinfo 

record jrecord comp type jcomptyp string fq name mfqname string name mname string modul mmodul arrai list arraylist field jfield field mfield creat instanc record jrecord record jrecord string name arrai list arraylist field jfield flist name substr name last index lastindexof name replac replaceal get csharp fq name getcsharpfqnam name name record name get csharp fq name getcsharpfqnam record irecord fq name mfqname name idx name last index lastindexof name mname name substr idx modul mmodul name substr idx field mfield flist string get name getnam name mname string get csharp name getcsharpnam id equal name mname zkid name mname string get java fq name getjavafqnam fq name mfqname string get cpp fq name getcppfqnam fq name mfqname replac replaceal string get java getjavapackag modul mmodul string get cpp name space getcppnamespac modul mmodul replac replaceal string get csharp name space getcsharpnamespac string part modul mmodul split string buffer stringbuff string buffer stringbuff part length string capit part substr upper touppercas part substr lower tolowercas append capit part length append string tostr arrai list arraylist field jfield get field getfield field mfield string get signatur getsignatur string builder stringbuild sb string builder stringbuild sb append append name mname append iter field jfield field mfield iter ha next hasnext string next get signatur getsignatur sb append sb append sb string tostr string gen cpp decl gencppdecl string fname get cpp name space getcppnamespac name mname fname string gen java read method genjavareadmethod string fname string tag gen java read wrapper genjavareadwrapp fname tag string gen java read wrapper genjavareadwrapp string fname string tag decl string builder stringbuild ret string builder stringbuild decl ret append get java fq name getjavafqnam fname ret append fname get java fq name getjavafqnam ret append read record readrecord fname tag ret string tostr string gen java write wrapper genjavawritewrapp string fname string tag write record writerecord fname tag string gen csharp read method gencsharpreadmethod string fname string tag capit fname read method suffix mmethodsuffix capit fname tag gen csharp read wrapper gencsharpreadwrapp capit fname tag string gen csharp read wrapper gencsharpreadwrapp string fname string tag decl string builder stringbuild ret string builder stringbuild decl ret append get csharp fq name getcsharpfqnam fq name mfqname fname ret append fname get csharp fq name getcsharpfqnam fq name mfqname ret append read record readrecord fname tag ret string tostr string gen csharp write wrapper gencsharpwritewrapp string fname string tag write record writerecord fname tag hash map hashmap string string vector struct vectorstruct hash map hashmap string string gen code genccod file writer filewrit file writer filewrit io except ioexcept field jfield field mfield get type gettyp vector jvector vector jvector jv vector jvector get type gettyp type jtype jv type jvtype jv get element type getelementtyp string name name vector jvector extract vector name extractvectornam jv type jvtype vector struct vectorstruct get name name vector struct vectorstruct put name name name name write name name int32 int32 count jv get element type getelementtyp gen decl gencdecl data write serial serial name name oarchiv tag name name write deseri deseri name name iarchiv tag name name write alloc alloc name name name name int32 int32 len write dealloc dealloc name name name name write alloc alloc name name name name int32 int32 len write len write count write data write write count len write data calloc data len write write write write dealloc dealloc name name name name write data write int32 int32 write count write dealloc dealloc record jrecord extract method suffix extractmethodsuffix jv type jvtype data write write free data write data write write write write serial serial name name oarchiv tag name name write write int32 int32 count count write rc write int32 int32 write rc start vector start vector tag count write count gen serial genseri jv type jvtype data data write write rc rc rc end vector end vector tag write rc write write deseri deseri name name iarchiv tag name name write write rc write int32 int32 write rc start vector start vector tag count write data calloc count data write count gen deseri gendeseri jv type jvtype valu data write write rc end vector end vector tag write rc write string rec name rec name get name getnam write rec name rec name field jfield field mfield write gen decl gencdecl write write serial serial rec name rec name oarchiv tag rec name rec name write deseri deseri rec name rec name iarchiv tag rec name rec name write dealloc dealloc rec name rec name rec name rec name write serial serial rec name rec name oarchiv tag rec name rec name write write rc write rc start record start record tag field jfield field mfield gen serial genseri get type gettyp get tag gettag get name getnam write rc rc rc end record end record tag write rc write write deseri deseri rec name rec name iarchiv tag rec name rec name write write rc write rc start record start record tag field jfield field mfield gen deseri gendeseri get type gettyp get tag gettag get name getnam write rc rc rc end record end record tag write rc write write dealloc dealloc rec name rec name rec name rec name write field jfield field mfield get type gettyp record jrecord write dealloc dealloc extract name extractstructnam get type gettyp get name getnam get type gettyp vector jvector vector jvector vt vector jvector get type gettyp write dealloc dealloc vector jvector extract vector name extractvectornam vt get element type getelementtyp get name getnam get type gettyp comp type jcomptyp write dealloc dealloc extract method suffix extractmethodsuffix get type gettyp get name getnam write gen serial genseri file writer filewrit type jtype type string tag string name io except ioexcept type record jrecord write rc rc rc serial serial extract name extractstructnam type tag name type vector jvector write rc rc rc serial serial vector jvector extract vector name extractvectornam vector jvector type get element type getelementtyp tag name write rc rc rc serial serial extract method suffix extractmethodsuffix type tag name gen deseri gendeseri file writer filewrit type jtype type string tag string name io except ioexcept type record jrecord write rc rc rc deseri deseri extract name extractstructnam type tag name type vector jvector write rc rc rc deseri deseri vector jvector extract vector name extractvectornam vector jvector type get element type getelementtyp tag name write rc rc rc deseri deseri extract method suffix extractmethodsuffix type tag name string extract method suffix extractmethodsuffix type jtype record jrecord extract name extractstructnam get method suffix getmethodsuffix string extract name extractstructnam type jtype string type get type getctyp type start startswith type type substr length gen cpp code gencppcod file writer filewrit hh file writer filewrit cc io except ioexcept string ns get cpp name space getcppnamespac split ns length hh write ns hh write get name getnam hadoop record hh write iter field jfield field mfield iter ha next hasnext field jfield jf next hh write jf gen cpp decl gencppdecl hh write std bitset field mfield size bs bs hh write hh write serial hadoop archiv oarchiv tag hh write deseri hadoop archiv iarchiv tag hh write std string type hh write std string signatur hh write valid hh write get name getnam peer peer hh write get name getnam peer peer hh write get name getnam idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next hh write jf gen cpp get set gencppgetset idx fidx hh write end record get name getnam ns length hh write end ns cc write get cpp fq name getcppfqnam serial hadoop archiv oarchiv tag cc write valid hadoop io except ioexcept field set cc write start record startrecord tag idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next string name jf get name getnam jf get type gettyp buffer jbuffer cc write serial name name length jf get tag gettag cc write serial name jf get tag gettag cc write bs bs reset idx fidx cc write end record endrecord tag cc write cc write cc write get cpp fq name getcppfqnam deseri hadoop archiv iarchiv tag cc write start record startrecord tag idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next string name jf get name getnam jf get type gettyp buffer jbuffer cc write size size len deseri name len jf get tag gettag cc write deseri name jf get tag gettag cc write bs bs set idx fidx cc write end record endrecord tag cc write cc write cc write get cpp fq name getcppfqnam valid cc write bs bs size bs bs count iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf field jfield next type jtype type jf get type gettyp type record jrecord cc write jf get name getnam valid cc write cc write cc write get cpp fq name getcppfqnam get cpp fq name getcppfqnam peer peer cc write iter field jfield field mfield iter ha next hasnext field jfield jf next string name jf get name getnam cc write name peer peer name cc write cc write cc write get cpp fq name getcppfqnam get cpp fq name getcppfqnam peer peer cc write iter field jfield field mfield iter ha next hasnext field jfield jf next string name jf get name getnam cc write name peer peer name cc write cc write cc write std string get cpp fq name getcppfqnam type cc write std string type type name mname cc write type type cc write cc write std string get cpp fq name getcppfqnam signatur cc write std string sig sig get signatur getsignatur cc write sig sig cc write gen java code genjavacod file output directori outputdirectori io except ioexcept string pkg get java getjavapackag string pkgpath pkg replac replaceal file pkgdir file output directori outputdirectori pkgpath pkgdir exist creat pkg directori pkgdir mkdir io except ioexcept cannnot creat directori pkgpath pkgdir directori isdirectori io except ioexcept pkgpath directori file jfile file pkgdir get name getnam java file writer filewrit jj file writer filewrit jfile jj write file gener hadoop record compil edit jj write jj write licens apach softwar foundat asf on jj write more contributor licens agreement notic file jj write distribut work addit inform jj write copyright ownership asf licens file jj write apach licens version jj write licens us file complianc jj write licens obtain copi licens jj write jj write http www apach org licens licens jj write jj write requir applic law agre write softwar jj write distribut licens distribut basi jj write warranti condit kind express impli jj write licens specif languag govern permiss jj write limit licens jj write jj write jj write get java getjavapackag jj write org apach jute jj write get name getnam record iter field jfield field mfield iter ha next hasnext field jfield jf next jj write jf gen java decl genjavadecl jj write get name getnam jj write jj write get name getnam idx fidx len flen field mfield size iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java constructor param genjavaconstructorparam jf get name getnam jj write len flen idx fidx jj write idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java constructor set genjavaconstructorset jf get name getnam jj write idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java get set genjavagetset idx fidx jj write serial output archiv outputarch string tag java io io except ioexcept jj write start record startrecord tag idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java write method name genjavawritemethodnam jj write end record endrecord tag jj write jj write deseri input archiv inputarch string tag java io io except ioexcept jj write start record startrecord tag idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java read method name genjavareadmethodnam jj write end record endrecord tag jj write jj write string string tostr jj write jj write java io arrai output stream bytearrayoutputstream jj write java io arrai output stream bytearrayoutputstream jj write csv output archiv csvoutputarch jj write csv output archiv csvoutputarch jj write start record startrecord idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java write method name genjavawritemethodnam jj write end record endrecord jj write string arrai tobytearrai utf jj write throwabl ex jj write ex print stack trace printstacktrac jj write jj write error jj write jj write write java io data output dataoutput java io io except ioexcept jj write binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch jj write serial archiv jj write jj write read field readfield java io data input datainput java io io except ioexcept jj write binari input archiv binaryinputarch archiv binari input archiv binaryinputarch jj write deseri archiv jj write jj write compar compareto object peer peer cast except classcastexcept unimpl field jfield field mfield get type gettyp map jmap get type gettyp vector jvector unimpl unimpl jj write unsupport oper except unsupportedoperationexcept compar get name getnam unimpl jj write peer peer get name getnam jj write cast except classcastexcept compar differ type record jj write jj write get name getnam peer get name getnam peer peer jj write ret iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java compar genjavacompareto jj write ret ret jj write ret jj write jj write equal object peer peer jj write peer peer get name getnam jj write jj write jj write peer peer jj write jj write jj write get name getnam peer get name getnam peer peer jj write ret iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java equal genjavaequ jj write ret ret jj write ret jj write jj write hash code hashcod jj write result 17 jj write ret iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next jj write jf gen java hash code genjavahashcod jj write result 37 result ret jj write result jj write jj write string signatur jj write get signatur getsignatur jj write jj write jj close gen csharp code gencsharpcod file output directori outputdirectori io except ioexcept output directori outputdirectori exist creat pkg directori output directori outputdirectori mkdir io except ioexcept cannnot creat directori output directori outputdirectori output directori outputdirectori directori isdirectori io except ioexcept output directori outputdirectori directori file csharp file csharpfil file output directori outputdirectori get name getnam cs file writer filewrit cs file writer filewrit csharp file csharpfil cs write file gener hadoop record compil edit cs write cs write licens apach softwar foundat asf on cs write more contributor licens agreement notic file cs write distribut work addit inform cs write copyright ownership asf licens file cs write apach licens version cs write licens us file complianc cs write licens obtain copi licens cs write cs write http www apach org licens licens cs write cs write requir applic law agre write softwar cs write distribut licens distribut basi cs write warranti condit kind express impli cs write licens specif languag govern permiss cs write limit licens cs write cs write cs write cs write org apach jute cs write cs write get csharp name space getcsharpnamespac cs write string name classnam get csharp name getcsharpnam cs write name classnam record irecord compar icompar cs write cs write name classnam cs write cs write name classnam idx fidx len flen field mfield size iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp constructor param gencsharpconstructorparam jf get csharp name getcsharpnam cs write len flen idx fidx cs write idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp constructor set gencsharpconstructorset jf get csharp name getcsharpnam cs write idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp get set gencsharpgetset idx fidx cs write cs write serial output archiv ioutputarch string tag cs write start record startrecord tag idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp write method name gencsharpwritemethodnam cs write end record endrecord tag cs write cs write deseri input archiv iinputarch string tag cs write start record startrecord tag idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp read method name gencsharpreadmethodnam cs write end record endrecord tag cs write cs write overrid string string tostr cs write cs write io memori stream memorystream ms io memori stream memorystream cs write misc util miscutil io endian binari writer endianbinarywrit writer cs write misc util miscutil io endian binari writer endianbinarywrit misc util miscutil convers endian bit convert endianbitconvert big ms text encod utf8 cs write binari output archiv binaryoutputarch cs write binari output archiv binaryoutputarch writer cs write start record startrecord idx fidx iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp write method name gencsharpwritemethodnam cs write end record endrecord cs write ms posit cs write text encod utf8 get string getstr ms arrai toarrai cs write except ex cs write consol write line writelin ex stack trace stacktrac cs write cs write error cs write cs write write misc util miscutil io endian binari writer endianbinarywrit writer cs write binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch writer cs write serial archiv cs write cs write read field readfield misc util miscutil io endian binari reader endianbinaryread reader cs write binari input archiv binaryinputarch archiv binari input archiv binaryinputarch reader cs write deseri archiv cs write cs write compar compareto object peer peer unimpl field jfield field mfield get type gettyp map jmap get type gettyp vector jvector unimpl unimpl cs write invalid oper except invalidoperationexcept compar get csharp name getcsharpnam unimpl cs write peer peer get csharp name getcsharpnam cs write invalid oper except invalidoperationexcept compar differ type record cs write cs write get csharp name getcsharpnam peer get csharp name getcsharpnam peer peer cs write ret iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp compar gencsharpcompareto cs write ret ret cs write ret cs write cs write overrid equal object peer peer cs write peer peer get csharp name getcsharpnam cs write cs write cs write peer peer cs write cs write cs write ret cs write get csharp name getcsharpnam peer get csharp name getcsharpnam peer peer iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp equal gencsharpequ cs write ret ret cs write ret cs write cs write overrid get hash code gethashcod cs write result 17 cs write ret iter field jfield field mfield iter ha next hasnext idx fidx field jfield jf next cs write jf gen csharp hash code gencsharphashcod cs write result 37 result ret cs write result cs write cs write string signatur cs write get signatur getsignatur cs write cs write cs write cs close string get csharp fq name getcsharpfqnam string name string packag name split string buffer stringbuff name fqname string buffer stringbuff packag length string pack packag pack capit pack pack id equal pack zkid pack name fqname append capit pack packag length name fqname append name fqname string tostr 

map runtim except runtimeexcept http statu code provid runtim except mapper runtimeexceptionmapp except mapper exceptionmapp runtim except runtimeexcept uri info uriinfo ui runtim except mapper runtimeexceptionmapp context uri info uriinfo ui ui ui respons respons torespons runtim except runtimeexcept don handl jersei except web applic except webapplicationexcept web applic except webapplicationexcept web applic except webapplicationexcept get respons getrespons respons statu respons statu intern server error intern server error entiti error zerror ui get request uri getrequesturi string tostr error process request build 

data test nulldatatest client base clientbas stat callback statcallback string snap count snapcount count down latch countdownlatch cn count down latch countdownlatch overrid set up setup except chang snapcount happen more snap count snapcount get properti getproperti zookeep snap count snapcount 1024 set properti setproperti zookeep snap count snapcount 10 set up setup overrid tear down teardown except set properti setproperti zookeep snap count snapcount snap count snapcount tear down teardown test test data testnulldata io except ioexcept interrupt except interruptedexcept keeper except keeperexcept string path size zoo keeper zookeep zk zk creat client createcli zk creat path id open acl unsaf open acl unsaf creat mode createmod persist sync zk exist zk exist path zk exist path cn await 10 time unit timeunit second assertsam 0l cn get count getcount zk zk close process result processresult rc string path object ctx stat stat cn count down countdown 

four letter word quorum test fourletterwordsquorumtest quorum base quorumbas logger log logger factori loggerfactori get logger getlogg four letter word quorum test fourletterwordsquorumtest test four letter word test test four letter word testfourletterword except string server host port hostport split string hp server verifi hp ruok imok verifi hp envi java version verifi hp conf client port clientport verifi hp stat outstand verifi hp srvr outstand verifi hp con queu verifi hp dump session verifi hp wch watch verifi hp wchp verifi hp wchc verifi hp srst reset verifi hp crst reset verifi hp stat outstand verifi hp srvr outstand verifi hp con queu testabl zoo keeper testablezookeep zk creat client createcli hp string sid 0x hex string tohexstr zk get session id getsessionid verifi hp stat queu verifi hp srvr outstand verifi hp con sid verifi hp dump sid zk get data getdata verifi hp stat queu verifi hp srvr outstand verifi hp con sid verifi hp dump sid verifi hp wch watch verifi hp wchp sid verifi hp wchc sid zk close verifi hp ruok imok verifi hp envi java version verifi hp conf client port clientport verifi hp stat outstand verifi hp srvr outstand verifi hp con queu verifi hp dump session verifi hp wch watch verifi hp wchp verifi hp wchc verifi hp srst reset verifi hp crst reset verifi hp stat outstand verifi hp srvr outstand verifi hp con queu verifi hp mntr zk version zk version verifi string hp string cmd string expect io except ioexcept host port hostport hpobj pars host port list parsehostportlist hp string resp send4 letter word send4letterword hpobj host hpobj port cmd log info cmd cmd expect expect resp cmd equal dump asserttru resp contain expect resp contain session ephemer asserttru resp contain expect 

acl count test aclcounttest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg acl test acltest string hostport 127 port assign portassign uniqu count down latch countdownlatch start signal startsign creat node add acl valu uniqu acl valu repeat acl zoo def zoodef perm read zoo def zoodef id id unsaf id unsaf acl zoo def zoodef perm zoo def zoodef id auth id auth id acl zoo def zoodef perm read zoo def zoodef id id unsaf id unsaf acl zoo def zoodef perm zoo def zoodef id auth id auth id even ve ad acl valu acl node uniqu acl valu test test acl count testaclcount except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 1000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk zoo keeper zookeep zk arrai list arraylist acl creator world readabl creator world readabl arrai list arraylist acl add acl zoo def zoodef perm read zoo def zoodef id id unsaf id unsaf add acl zoo def zoodef perm zoo def zoodef id auth id auth id add acl zoo def zoodef perm read zoo def zoodef id id unsaf id unsaf add acl zoo def zoodef perm zoo def zoodef id auth id auth id log info start up zookeep server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zk zoo keeper zookeep hostport connect timeout connect timeout zk add auth info addauthinfo digest pat test get byte getbyt zk set acl setacl id creator acl creator acl string path path equal assertequ creator world readabl creator world readabl size except log error fundament wrong arrai list arraylist add method add ing four time empti arrai list arraylist result arrai list arraylist member zk creat path path get byte getbyt creator world readabl creator world readabl creat mode createmod persist list acl acl zk get acl getacl path stat equal assertequ acl size except test fail asserttru asserttru non javadoc org apach zookeep watcher process org apach zookeep watcher event watcherev process watch event watchedev event log info event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount log info startsign count down countdown start signal startsign count down countdown log warn startsign start signal startsign 

ver gen vergen string name name org apach zookeep version string type name type name info print usag printusag print usag tjava cp classpath org apach zookeep version util ver gen vergen maj min micro qualifi rev build date builddat exit gener file generatefil file output dir outputdir version version rev string build date builddat string path name name replac replaceal file pkgdir file output dir outputdir path pkgdir exist creat pkg directori ret pkgdir mkdir ret println cannnot creat directori path exit pkgdir directori isdirectori directori println path directori exit file file file pkgdir type name type name java file writer filewrit file writer filewrit file write edit file gener org apach zookeep version util ver gen vergen write write licens apach softwar foundat asf on write more contributor licens agreement notic file write distribut work addit inform write copyright ownership asf licens file write apach licens version write licens us file complianc write licens obtain copi licens write write http www apach org licens licens write write requir applic law agre write softwar write distribut licens distribut basi write warranti condit kind express impli write licens specif languag govern permiss write limit licens write write write name name write type name type name write major version maj write minor version min write micro version micro write string qualifi version qualifi version qualifi rev println unknown revis number rev write revis rev write string build date build date build date builddat write io except ioexcept println unabl gener version info file get messag getmessag exit close io except ioexcept println unabl close file writer get messag getmessag version maj min micro string qualifi version pars version string parseversionstr string input version result version pattern pattern compil matcher matcher input match result maj integ pars parseint group result min integ pars parseint group result micro integ pars parseint group group count groupcount result qualifi group result qualifi result emit org apach zookeep version info file version revis inform constant set valu pass command line paramet file creat current directori br usag java org apach zookeep version util ver gen vergen maj min micro qualifi rev build date builddat param arg ul li maj major version number li min minor version number li micro minor minor version number li qualifi option qualifi dash follow qualifi text li rev current svn revis number li build date builddat date build ul main string arg arg length print usag printusag version version pars version string parseversionstr arg version err println invalid version number format exit rev rev integ pars parseint arg number format except numberformatexcept rev gener file generatefil file version rev arg number format except numberformatexcept err println version relat paramet valid integ 

version maj min micro string qualifi 

abstract base compound type ustr buffer vector map record abstract comp type jcomptyp type jtype creat instanc comp type jcomptyp comp type jcomptyp string type ctype string cpp type cpptype string csharp type csharptyp string java type javatyp string suffix string wrapper string csharp wrapper csharpwrapp type ctype cpp type cpptype csharp type csharptyp java type javatyp suffix wrapper csharp wrapper csharpwrapp string gen cpp get set gencppgetset string fname idx fidx string cget func cgetfunc get cpp type getcpptyp get fname cget func cgetfunc fname cget func cgetfunc string get func getfunc get cpp type getcpptyp get fname get func getfunc bs bs set idx fidx fname get func getfunc cget func cgetfunc get func getfunc string gen java compar genjavacompareto string fname ret fname compar compareto peer fname string gen java equal genjavaequ string fname string peer ret fname equal peer string gen java hash code genjavahashcod string fname ret fname hash code hashcod string gen csharp hash code gencsharphashcod string fname ret capit fname get hash code gethashcod string gen csharp equal gencsharpequ string name string peer string peer split peersplit peer split ret capit name equal peer split peersplit capit peer split peersplit string gen csharp compar gencsharpcompareto string name ret capit name compar compareto peer capit name 

bunch constant todo get rid eventu common name commonnam string domain org apach zoo keeper servic zookeeperservic string data tree kei data tree kei data tree datatre string standalon server kei standalon server kei standalon server standaloneserv 

repres path jaxb xml root element xmlrootel name path path zpath string path string uri path zpath need jersei path zpath string path path path zpath string path string uri path path uri uri overrid hash code hashcod path hash code hashcod overrid equal object obj obj path zpath path zpath path zpath obj path equal path overrid string string tostr path zpath path 

fle test util fletestutil logger log logger factori loggerfactori get logger getlogg fle test util fletestutil thread run instanc leader elect quorum peer le thread lethread thread quorum peer quorump peer le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead fail thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid asserttru state lead peer get peer state getpeerst server state serverst lead except print stack trace printstacktrac log info join creat leader elect notif messag buffer bytebuff creat msg createmsg state leader zxid epoch request byte requestbyt 28 buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt build notif packet send request buffer requestbuff clear request buffer requestbuff put putint state request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch request buffer requestbuff 

thread run instanc leader elect quorum peer le thread lethread thread quorum peer quorump peer le thread lethread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead fail thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid asserttru state lead peer get peer state getpeerst server state serverst lead except print stack trace printstacktrac log info join 

multi transact test multitransactiontest client base clientbas logger log logger get logger getlogg multi transact test multitransactiontest zoo keeper zookeep zk zoo keeper zookeep zk chroot zk chroot befor set up setup except sync request processor syncrequestprocessor set snap count setsnapcount 150 set up setup zk creat client createcli test test ch root creat delet testchrootcreatedelet except creat subtre ch root chroot client string ch root chroot creat name space createnamespac creat child ch root chroot client zk chroot zk chroot creat client createcli host port hostport ch root chroot op creat child createchild op creat myid id open acl unsaf open acl unsaf creat mode createmod persist zk chroot zk chroot multi arrai list aslist creat child createchild assertnotnul node znode creat chroot ch root chroot zk exist ch root chroot myid assertnotnul node znode creat chroot ch root chroot zk chroot zk chroot exist myid assertnul node znode creat directli ignor configur chroot zk exist myid delet child ch root chroot client op delet child deletechild op delet myid zk chroot zk chroot multi arrai list aslist delet child deletechild assertnul node znode exist chroot ch root chroot zk exist ch root chroot myid assertnul node znode exist chroot ch root chroot zk chroot zk chroot exist myid test test ch root set data testchrootsetdata except creat subtre ch root chroot client string ch root chroot creat name space createnamespac set data setdata ch root chroot client zk chroot zk chroot creat client createcli host port hostport ch root chroot string name multi0 multi1 multi2 list op op arrai list arraylist op name length op add op creat name id open acl unsaf open acl unsaf creat mode createmod persist op add op set data setdata name name get byte getbyt zk chroot zk chroot multi op name length arrai equal assertarrayequ node znode data match name get byte getbyt zk chroot zk chroot get data getdata name test test ch root check testchrootcheck except creat subtre ch root chroot client string ch root chroot creat name space createnamespac check child version ch root chroot client zk chroot zk chroot creat client createcli host port hostport ch root chroot string name multi0 multi1 multi2 list op op arrai list arraylist op name length zk creat ch root chroot name id open acl unsaf open acl unsaf creat mode createmod persist name length op add op check name zk chroot zk chroot multi op test test ch root transact testchroottransact except creat subtre ch root chroot client string ch root chroot creat name space createnamespac check child version ch root chroot client zk chroot zk chroot creat client createcli host port hostport ch root chroot string child path childpath myid transact transact zk chroot zk chroot transact transact creat child path childpath id open acl unsaf open acl unsaf creat mode createmod persist transact check child path childpath transact set data setdata child path childpath child path childpath get byte getbyt transact commit assertnotnul node znode creat chroot ch root chroot zk exist ch root chroot child path childpath assertnotnul node znode creat chroot ch root chroot zk chroot zk chroot exist child path childpath assertnul node znode creat directli ignor configur chroot zk exist child path childpath arrai equal assertarrayequ node znode data match child path childpath get byte getbyt zk chroot zk chroot get data getdata child path childpath transact zk chroot zk chroot transact delet child ch root chroot client transact delet child path childpath transact commit assertnul chroot ch root chroot exist after delet zk exist ch root chroot myid assertnul chroot ch root chroot exist after delet zk chroot zk chroot exist myid string creat name space createnamespac interrupt except interruptedexcept keeper except keeperexcept creat subtre ch root chroot client string ch root chroot appsx op creat ch root createchroot op creat ch root chroot id open acl unsaf open acl unsaf creat mode createmod persist zk multi arrai list aslist creat ch root createchroot ch root chroot test test creat testcreat except zk multi arrai list aslist op creat multi0 id open acl unsaf open acl unsaf creat mode createmod persist op creat multi1 id open acl unsaf open acl unsaf creat mode createmod persist op creat multi2 id open acl unsaf open acl unsaf creat mode createmod persist zk get data getdata multi0 zk get data getdata multi1 zk get data getdata multi2 test test creat delet testcreatedelet except zk multi arrai list aslist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op delet multi multi delet assertnul zk exist multi test test invalid version testinvalidvers except zk multi arrai list aslist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op delet multi fail delet multi fail keeper except keeperexcept pass test test nest creat testnestedcr except zk multi arrai list aslist creat op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist delet op delet multi op delet multi op delet multi verifi tree delet assertnul zk exist multi assertnul zk exist multi assertnul zk exist multi test test set data testsetdata except string name multi0 multi1 multi2 list op op arrai list arraylist op name length op add op creat name id open acl unsaf open acl unsaf creat mode createmod persist op add op set data setdata name name get byte getbyt zk multi op name length arrai equal assertarrayequ name get byte getbyt zk get data getdata name test test updat conflict testupdateconflict except assertnul zk exist multi zk multi arrai list aslist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op set data setdata multi get byte getbyt op set data setdata multi get byte getbyt fail thrown keeper except keeperexcept invalid version keeper except keeperexcept pass log error stacktrac assertnul zk exist multi updat version solv conflict order matter zk multi arrai list aslist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op set data setdata multi get byte getbyt op set data setdata multi get byte getbyt arrai equal assertarrayequ zk get data getdata multi get byte getbyt test test delet updat conflict testdeleteupdateconflict except delet node folow updat delet node zk multi arrai list aslist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op delet multi op set data setdata multi get byte getbyt fail multi delet set data setdata fail keeper except keeperexcept pass multi creat entir op fail assertnul zk exist multi test test get result testgetresult except delet node folow updat delet node zk multi arrai list aslist op creat multi id open acl unsaf open acl unsaf creat mode createmod persist op delet multi op set data setdata multi get byte getbyt op creat foo id open acl unsaf open acl unsaf creat mode createmod persist fail multi delet set data setdata fail keeper except keeperexcept multi creat entir op fail assertnul zk exist multi op result opresult get result getresult log info result error result errorresult error result errorresult er error result errorresult log info error result er err keeper except keeperexcept code get er get err geterr exercis equal method op result opresult class test test op result equal testopresultequ op equal opequ creat result createresult foo creat result createresult foo creat result createresult nope op equal opequ check result checkresult check result checkresult op equal opequ set data result setdataresult stat 10 11 set data result setdataresult stat 10 11 set data result setdataresult stat 11 12 13 14 15 16 17 18 19 110 111 op equal opequ error result errorresult error result errorresult error result errorresult op equal opequ delet result deleteresult delet result deleteresult op equal opequ error result errorresult error result errorresult error result errorresult op equal opequ op result opresult expect op result opresult valu op result opresult near equal assertequ valu valu assertfals valu equal object assertfals valu equal near assertfals valu equal valu creat result createresult error result errorresult creat result createresult nope2 asserttru valu equal expect test test watch trigger testwatchestrigg keeper except keeperexcept interrupt except interruptedexcept ha trigger watcher hastriggeredwatch watcher ha trigger watcher hastriggeredwatch zk get children getchildren watcher zk multi arrai list aslist op creat id open acl unsaf open acl unsaf creat mode createmod persist op delet asserttru watcher trigger await connect timeout connect timeout time unit timeunit millisecond test test watch trigger fail multi request testnowatchestriggeredforfailedmultirequest interrupt except interruptedexcept keeper except keeperexcept ha trigger watcher hastriggeredwatch watcher ha trigger watcher hastriggeredwatch zk get children getchildren watcher zk multi arrai list aslist op creat id open acl unsaf open acl unsaf creat mode createmod persist op delet nonexist fail expect previou multi op fail keeper except keeperexcept node except nonodeexcept expect sync callback synccallback cb sync callback synccallback zk sync cb wait callback assur event queue flush cb done await connect timeout connect timeout time unit timeunit millisecond equal assertequ watcher trigger get count getcount test test transact builder testtransactionbuild except list op result opresult result zk transact creat t1 id open acl unsaf open acl unsaf creat mode createmod persist creat t1 child id open acl unsaf open acl unsaf creat mode createmod persist creat t2 id open acl unsaf open acl unsaf creat mode createmod ephemer commit equal assertequ result size op result opresult result creat result createresult creat result createresult asserttru get path getpath start startswith assertnotnul string tostr assertnotnul zk exist t1 assertnotnul zk exist t1 child assertnotnul zk exist t2 result zk transact check t1 check t1 child check t2 commit equal assertequ result size op result opresult result check result checkresult check result checkresult assertnotnul string tostr result zk transact check t1 check t1 child check t2 commit fail keeper except keeperexcept bad version except badversionexcept expect result zk transact check t1 set data setdata t1 commit equal assertequ result size op result opresult result assertnotnul string tostr result zk transact check t1 set data setdata t1 commit fail keeper except keeperexcept bad version except badversionexcept expect result zk transact check t1 check t1 child check t2 commit equal assertequ result size result zk transact delet t2 delet t1 child commit equal assertequ result size op result opresult result delet result deleteresult delet result deleteresult assertnotnul string tostr assertnotnul zk exist t1 assertnul zk exist t1 child assertnul zk exist t2 ha trigger watcher hastriggeredwatch watcher count down latch countdownlatch trigger count down latch countdownlatch overrid process watch event watchedev event trigger count down countdown sync callback synccallback async callback asynccallback callback voidcallback count down latch countdownlatch done count down latch countdownlatch overrid process result processresult rc string path object ctx done count down countdown 

ha trigger watcher hastriggeredwatch watcher count down latch countdownlatch trigger count down latch countdownlatch overrid process watch event watchedev event trigger count down countdown 

sync callback synccallback async callback asynccallback callback voidcallback count down latch countdownlatch done count down latch countdownlatch overrid process result processresult rc string path object ctx done count down countdown 

connect respons connectrespons record protocol version protocolvers time timeout session id sessionid passwd connect respons connectrespons connect respons connectrespons protocol version protocolvers time timeout session id sessionid passwd protocol version protocolvers protocol version protocolvers time timeout time timeout session id sessionid session id sessionid passwd passwd get protocol version getprotocolvers protocol version protocolvers set protocol version setprotocolvers protocol version protocolvers get time gettimeout time timeout set time settimeout time timeout get session id getsessionid session id sessionid set session id setsessionid session id sessionid get passwd getpasswd passwd set passwd setpasswd passwd serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint protocol version protocolvers protocol version protocolvers write writeint time timeout time timeout write writelong session id sessionid session id sessionid write buffer writebuff passwd passwd end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag protocol version protocolvers read readint protocol version protocolvers time timeout read readint time timeout session id sessionid read readlong session id sessionid passwd read buffer readbuff passwd end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint protocol version protocolvers protocol version protocolvers write writeint time timeout time timeout write writelong session id sessionid session id sessionid write buffer writebuff passwd passwd end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer connect respons connectrespons cast except classcastexcept compar differ type record connect respons connectrespons peer connect respons connectrespons peer peer ret ret protocol version protocolvers peer protocol version protocolvers protocol version protocolvers peer protocol version protocolvers ret ret ret time timeout peer time timeout time timeout peer time timeout ret ret ret session id sessionid peer session id sessionid session id sessionid peer session id sessionid ret ret passwd ur peer passwd ret org apach jute util compar byte comparebyt length ur ur length ret ret ret equal object peer peer peer peer connect respons connectrespons peer peer connect respons connectrespons peer connect respons connectrespons peer peer ret ret protocol version protocolvers peer protocol version protocolvers ret ret ret time timeout peer time timeout ret ret ret session id sessionid peer session id sessionid ret ret ret org apach jute util buf equal bufequ passwd peer passwd ret ret ret hash code hashcod result 17 ret ret protocol version protocolvers result 37 result ret ret time timeout result 37 result ret ret session id sessionid session id sessionid 32 result 37 result ret ret java util arrai string tostr passwd hash code hashcod result 37 result ret result string signatur connect respons lconnectrespons iilb 

distribut queue test distributedqueuetest client base clientbas after tear down teardown except tear down teardown log info finish get test name gettestnam test test offer1 testoffer1 except string dir test offer1 testoffer1 string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir queue handl queuehandl offer test string teststr get byte getbyt dequeu byte dequeuedbyt queue handl queuehandl remov equal assertequ string dequeu byte dequeuedbyt test string teststr test test offer2 testoffer2 except string dir test offer2 testoffer2 string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir queue handl queuehandl offer test string teststr get byte getbyt dequeu byte dequeuedbyt queue handl queuehandl remov equal assertequ string dequeu byte dequeuedbyt test string teststr test test take1 testtake1 except string dir test take1 testtake1 string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir queue handl queuehandl offer test string teststr get byte getbyt dequeu byte dequeuedbyt queue handl queuehandl equal assertequ string dequeu byte dequeuedbyt test string teststr test test remove1 testremove1 except string dir test remove1 testremove1 string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir queue handl queuehandl remov element except nosuchelementexcept asserttru creat nremov mtest createnremovemtest string dir except string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir string offer string offerstr test string teststr queue handl queuehandl offer offer string offerstr get byte getbyt data data queue handl queuehandl remov equal assertequ string data test string teststr test test remove2 testremove2 except creat nremov mtest createnremovemtest test remove2 testremove2 10 test test remove3 testremove3 except creat nremov mtest createnremovemtest test remove3 testremove3 1000 1000 creat nremov melement test createnremovemelementtest string dir except string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir string offer string offerstr test string teststr queue handl queuehandl offer offer string offerstr get byte getbyt data data queue handl queuehandl remov equal assertequ string queue handl queuehandl element test string teststr test test element1 testelement1 except creat nremov melement test createnremovemelementtest test element1 testelement1 test test element2 testelement2 except creat nremov melement test createnremovemelementtest test element2 testelement2 10 test test element3 testelement3 except creat nremov melement test createnremovemelementtest test element3 testelement3 1000 500 test test element4 testelement4 except creat nremov melement test createnremovemelementtest test element4 testelement4 1000 1000 test test wait1 testtakewait1 except string dir test wait1 testtakewait1 string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir result takeresult thread thread takethread thread run result takeresult queue handl queuehandl keeper except keeperexcept interrupt except interruptedexcept thread takethread start thread sleep 1000 thread offer thread offerthread thread run queue handl queuehandl offer test string teststr get byte getbyt keeper except keeperexcept interrupt except interruptedexcept offer thread offerthread start offer thread offerthread join thread takethread join asserttru result takeresult equal assertequ string result takeresult test string teststr test test wait2 testtakewait2 except string dir test wait2 testtakewait2 string test string teststr hello world num client num client zoo keeper zookeep client zoo keeper zookeep num client num client distribut queue distributedqueu queue handl queuehandl distribut queue distributedqueu num client num client client length client creat client createcli queue handl queuehandl distribut queue distributedqueu client dir num attempt num attempt num attempt num attempt result takeresult string thread test string threadteststr test string teststr thread thread takethread thread run result takeresult queue handl queuehandl keeper except keeperexcept interrupt except interruptedexcept thread takethread start thread sleep 1000 thread offer thread offerthread thread run queue handl queuehandl offer thread test string threadteststr get byte getbyt keeper except keeperexcept interrupt except interruptedexcept offer thread offerthread start offer thread offerthread join thread takethread join asserttru result takeresult equal assertequ string result takeresult thread test string threadteststr 

log sourc logsourc iter log entri logentri log iter logiter iter starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept log iter logiter iter starttim endtim illeg argument except illegalargumentexcept log iter logiter iter illeg argument except illegalargumentexcept overlap rang overlapsrang starttim endtim size get start time getstarttim get end time getendtim 

implement run instanc contain instanc object us report back chang statu report report string report keeper except keeperexcept interrupt except interruptedexcept first method invok instanc contain instancecontain after instanc ha construct invok param handl us report statu chang set report setreport report second method invok instanc contain instancecontain invok configur chang param param paramet pass instanc manag instancemanag instanc schedul configur string param start instanc start stop instanc stop 

object us report back chang statu report report string report keeper except keeperexcept interrupt except interruptedexcept 

follow bean mbean follow mx bean followermxbean zoo keeper server mx bean zookeeperservermxbean socket address string get quorum address getquorumaddress last queu zxid string get last queu zxid getlastqueuedzxid count pend revalid get pend revalid count getpendingrevalidationcount 

testabl zoo keeper testablezookeep zoo keeper zookeep testabl zoo keeper testablezookeep string host session timeout sessiontimeout watcher watcher io except ioexcept host session timeout sessiontimeout watcher overrid list string get child watch getchildwatch get child watch getchildwatch overrid list string get data watch getdatawatch get data watch getdatawatch overrid list string get exist watch getexistwatch get exist watch getexistwatch caus zoo keeper zookeep object disconnect from server attempt reconnect testabl connloss testableconnloss io except ioexcept cnxn cnxn send thread sendthread testabl close socket testableclosesocket caus zoo keeper zookeep object stop receiv from zoo keeper server zookeeperserv number millisecond param ms number millisecond paus paus cnxn pausecnxn ms thread run cnxn cnxn send thread sendthread testabl close socket testableclosesocket io except ioexcept print stack trace printstacktrac thread sleep ms interrupt except interruptedexcept start testabl wait shutdown testablewaitforshutdown wait interrupt except interruptedexcept testabl wait shutdown testablewaitforshutdown wait socket address socketaddress testabl local socket address testablelocalsocketaddress testabl local socket address testablelocalsocketaddress socket address socketaddress testabl remot socket address testableremotesocketaddress testabl remot socket address testableremotesocketaddress last zxid client session testabl last zxid testablelastzxid cnxn get last zxid getlastzxid 

check version request checkversionrequest record string path version check version request checkversionrequest check version request checkversionrequest string path version path path version version string get path getpath path set path setpath string path get version getvers version set version setvers version serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writeint version version end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path version read readint version end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writeint version version end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer check version request checkversionrequest cast except classcastexcept compar differ type record check version request checkversionrequest peer check version request checkversionrequest peer peer ret ret path compar compareto peer path ret ret ret version peer version version peer version ret ret ret equal object peer peer peer peer check version request checkversionrequest peer peer check version request checkversionrequest peer check version request checkversionrequest peer peer ret ret path equal peer path ret ret ret version peer version ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret version result 37 result ret result string signatur check version request lcheckversionrequest si 

manag watch allow watch associ string remov watcher watch addit manag trigger watch manag watchmanag logger log logger factori loggerfactori get logger getlogg watch manag watchmanag hash map hashmap string hash set hashset watcher watch tabl watchtabl hash map hashmap string hash set hashset watcher hash map hashmap watcher hash set hashset string watch2 path watch2path hash map hashmap watcher hash set hashset string size result set watcher watch watch tabl watchtabl valu result watch size result add watch addwatch string path watcher watcher hash set hashset watcher list watch tabl watchtabl get path list don wast memori watch node rehash th 4th entri ad doubl size good compromis list hash set hashset watcher watch tabl watchtabl put path list list add watcher hash set hashset string path watch2 path watch2path get watcher path cnxn typic watch us cap here path hash set hashset string watch2 path watch2path put watcher path path add path remov watcher removewatch watcher watcher hash set hashset string path watch2 path watch2path remov watcher path string path hash set hashset watcher list watch tabl watchtabl get list list remov watcher list size watch tabl watchtabl remov set watcher trigger watch triggerwatch string path event type eventtyp type trigger watch triggerwatch path type set watcher trigger watch triggerwatch string path event type eventtyp type set watcher supress watch event watchedev watch event watchedev type keeper state keeperst sync connect syncconnect path hash set hashset watcher watcher watcher watch tabl watchtabl remov path watcher watcher empti isempti log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac event deliveri trace mask event deliveri trace mask watcher path watcher watcher hash set hashset string path watch2 path watch2path get path path remov path watcher watcher supress supress contain process watcher brief descript object overrid string string tostr string builder stringbuild sb string builder stringbuild sb append watch2 path watch2path size append connect watch append watch tabl watchtabl size append path total hash set hashset string path watch2 path watch2path valu total path size sb append total watch append total sb string tostr string represent watch warn larg param path bypath iff output watch path otw output watch connect string represent watch dump watch dumpwatch print writer printwrit pwriter path bypath path bypath entri string hash set hashset watcher watch tabl watchtabl entri set entryset pwriter println get kei getkei watcher get valu getvalu pwriter print t0x pwriter print hex string tohexstr server cnxn servercnxn get session id getsessionid pwriter print entri watcher hash set hashset string watch2 path watch2path entri set entryset pwriter print 0x pwriter println hex string tohexstr server cnxn servercnxn get kei getkei get session id getsessionid string path get valu getvalu pwriter print pwriter println path 

maintain tree data structur doesn network client connect code test stand tree maintain two parallel data structur hashtabl map from full path data node datanod tree data node datanod access path hashtabl tree travers serial disk data tree v1 datatreev1 logger log logger factori loggerfactori get logger getlogg data tree v1 datatreev1 hashtabl fast lookup datanod tree sourc truth lock occur concurr hash map concurrenthashmap string data node v1 datanodev1 node concurr hash map concurrenthashmap string data node v1 datanodev1 watch manag watchmanag data watch datawatch watch manag watchmanag watch manag watchmanag child watch childwatch watch manag watchmanag hashtabl list path ephemer node session map hash set hashset string ephemer concurr hash map concurrenthashmap hash set hashset string ephemer tree ephemer tree map hash set hashset string get ephemer map getephemeralsmap ephemer set ephemer map setephemeralsmap map hash set hashset string ephemer ephemer ephemer suppress warn suppresswarn uncheck hash set hashset string get ephemer getephemer session id sessionid hash set hashset string retv ephemer get session id sessionid retv hash set hashset string hash set hashset string clone retv clone hash set hashset string retv clone clone collect get session getsess ephemer kei set keyset data node v1 datanodev1 get node getnod string path node get path pointer root data tree datatre sourc truth us node hashmap find node tree data node v1 datanodev1 root data node v1 datanodev1 stat persist v1 statpersistedv1 data tree v1 datatreev1 fight let root alia node put root node put root copi stat persist copystatpersist stat persist v1 statpersistedv1 from stat persist v1 statpersistedv1 set avers setavers from get avers getavers set ctime setctim from get ctime getctim set cversion setcvers from get cversion getcvers set czxid setczxid from get czxid getczxid set mtime setmtim from get mtime getmtim set mzxid setmzxid from get mzxid getmzxid set version setvers from get version getvers set ephemer owner setephemeralown from get ephemer owner getephemeralown copi stat copystat stat from stat set avers setavers from get avers getavers set ctime setctim from get ctime getctim set cversion setcvers from get cversion getcvers set czxid setczxid from get czxid getczxid set mtime setmtim from get mtime getmtim set mzxid setmzxid from get mzxid getmzxid set version setvers from get version getvers set ephemer owner setephemeralown from get ephemer owner getephemeralown set data length setdatalength from get data length getdatalength set num children setnumchildren from get num children getnumchildren remoov interest remooveinterest string path watcher nw data node datanod node get path non exist watch nonexistentwatch hash set hashset watcher list non exist watch nonexistentwatch get path list list remov nw data watcher datawatch remov nw child watcher childwatch remov nw param path param data param acl param ephemer owner ephemeralown session id own node ephemer node param zxid param time patch creat node keeper except keeperexcept string creat node createnod string path data list acl acl ephemer owner ephemeralown zxid time keeper except keeperexcept node except nonodeexcept keeper except keeperexcept node exist except nodeexistsexcept last slash lastslash path last index lastindexof string parent name parentnam path substr last slash lastslash string child name childnam path substr last slash lastslash stat persist v1 statpersistedv1 stat stat persist v1 statpersistedv1 stat set ctime setctim time stat set mtime setmtim time stat set czxid setczxid zxid stat set mzxid setmzxid zxid stat set version setvers stat set avers setavers stat set ephemer owner setephemeralown ephemer owner ephemeralown data node v1 datanodev1 parent node get parent name parentnam parent keeper except keeperexcept node except nonodeexcept parent parent children contain child name childnam keeper except keeperexcept node exist except nodeexistsexcept cver parent stat get cversion getcvers cver parent stat set cversion setcvers cver data node v1 datanodev1 child data node v1 datanodev1 parent data acl stat parent children add child name childnam node put path child ephemer owner ephemeralown hash set hashset string list ephemer get ephemer owner ephemeralown list list hash set hashset string ephemer put ephemer owner ephemeralown list list list add path data watch datawatch trigger watch triggerwatch path event event type eventtyp node creat nodecr child watch childwatch trigger watch triggerwatch parent name parentnam equal parent name parentnam event event type eventtyp node children chang nodechildrenchang path delet node deletenod string path keeper except keeperexcept node except nonodeexcept last slash lastslash path last index lastindexof string parent name parentnam path substr last slash lastslash string child name childnam path substr last slash lastslash data node v1 datanodev1 node node get path node keeper except keeperexcept node except nonodeexcept node remov path data node v1 datanodev1 parent node get parent name parentnam parent keeper except keeperexcept node except nonodeexcept parent parent children remov child name childnam parent stat set cversion setcvers parent stat get cversion getcvers eowner node stat get ephemer owner getephemeralown eowner hash set hashset string node ephemer get eowner node node node remov path node parent set watcher process data watch datawatch trigger watch triggerwatch path event type eventtyp node delet nodedelet child watch childwatch trigger watch triggerwatch path event type eventtyp node delet nodedelet process child watch childwatch trigger watch triggerwatch parent name parentnam equal parent name parentnam event type eventtyp node children chang nodechildrenchang stat set data setdata string path data version zxid time keeper except keeperexcept node except nonodeexcept stat stat data node v1 datanodev1 node get path keeper except keeperexcept node except nonodeexcept data data stat set mtime setmtim time stat set mzxid setmzxid zxid stat set version setvers version copi stat copystat data watch datawatch trigger watch triggerwatch path event type eventtyp node data chang nodedatachang get data getdata string path stat stat watcher watcher keeper except keeperexcept node except nonodeexcept data node v1 datanodev1 node get path keeper except keeperexcept node except nonodeexcept copi stat copystat stat watcher data watch datawatch add watch addwatch path watcher data stat stat node statnod string path watcher watcher keeper except keeperexcept node except nonodeexcept stat stat stat data node v1 datanodev1 node get path watcher data watch datawatch add watch addwatch path watcher keeper except keeperexcept node except nonodeexcept copi stat copystat stat stat arrai list arraylist string get children getchildren string path stat stat watcher watcher keeper except keeperexcept node except nonodeexcept data node v1 datanodev1 node get path keeper except keeperexcept node except nonodeexcept arrai list arraylist string children arrai list arraylist string children add addal children watcher child watch childwatch add watch addwatch path watcher children stat set acl setacl string path list acl acl version keeper except keeperexcept node except nonodeexcept stat stat stat data node v1 datanodev1 node get path keeper except keeperexcept node except nonodeexcept stat set avers setavers version acl acl copi stat copystat stat stat suppress warn suppresswarn uncheck list acl get acl getacl string path stat stat keeper except keeperexcept node except nonodeexcept data node v1 datanodev1 node get path keeper except keeperexcept node except nonodeexcept copi stat copystat stat arrai list arraylist acl acl process txn result processtxnresult client id clientid cxid zxid err type string path stat stat equal defin client id clientid cxid allow us hash tabl track complet transact java lang object equal java lang object overrid equal object process txn result processtxnresult process txn result processtxnresult process txn result processtxnresult client id clientid client id clientid cxid cxid equal find ration hashcod gener process txn result processtxnresult equal object java lang object hash code hashcod overrid hash code hashcod client id clientid cxid integ max valu max valu last process zxid lastprocessedzxid suppress warn suppresswarn uncheck process txn result processtxnresult process txn processtxn txn header txnheader header record txn process txn result processtxnresult rc process txn result processtxnresult string debug rc client id clientid header get client id getclientid rc cxid header get cxid getcxid rc zxid header get zxid getzxid rc type header get type gettyp rc err rc zxid last process zxid lastprocessedzxid last process zxid lastprocessedzxid rc zxid header get type gettyp op code opcod creat creat txn createtxn creat txn createtxn creat txn createtxn txn debug creat transact creat txn createtxn get path getpath creat node createnod creat txn createtxn get path getpath creat txn createtxn get data getdata creat txn createtxn get acl getacl creat txn createtxn get ephemer getephemer header get client id getclientid header get zxid getzxid header get time gettim rc path creat txn createtxn get path getpath op code opcod delet delet txn deletetxn delet txn deletetxn delet txn deletetxn txn debug delet transact delet txn deletetxn get path getpath delet node deletenod delet txn deletetxn get path getpath op code opcod set data setdata set data txn setdatatxn set data txn setdatatxn set data txn setdatatxn txn debug set data transact set data txn setdatatxn get path getpath rc stat set data setdata set data txn setdatatxn get path getpath set data txn setdatatxn get data getdata set data txn setdatatxn get version getvers header get zxid getzxid header get time gettim op code opcod set acl setacl set acl txn setacltxn set acl txn setacltxn set acl txn setacltxn txn debug set acl transact set acl txn setacltxn get path getpath rc stat set acl setacl set acl txn setacltxn get path getpath set acl txn setacltxn get acl getacl set acl txn setacltxn get version getvers op code opcod close session closesess kill session killsess header get client id getclientid op code opcod error error txn errortxn err txn errtxn error txn errortxn txn rc err err txn errtxn get err geterr keeper except keeperexcept expect error lazi snapshot initi code code nonod code code nodeexist log warn fail debug rc kill session killsess session list remov from ephemer worri synchronyz list call from request processor finalrequestprocessor synchorn list chang here creat delet chang list call from request processor finalrequestprocessor sequenc hash set hashset string list ephemer remov session list string path list delet node deletenod path log debug enabl isdebugen log debug delet ephemer node path session 0x hex string tohexstr session node except nonodeexcept log warn ignor node except nonodeexcept path path remov ephemer dead session 0x hex string tohexstr session method us stringbuild creat path children faster string append str1 str2 param oa output archiv outputarch write param path string builder io except ioexcept interrupt except interruptedexcept serial node serializenod output archiv outputarch oa string builder stringbuild path io except ioexcept interrupt except interruptedexcept string path string pathstr path string tostr data node v1 datanodev1 node get node getnod path string pathstr node string children node scount oa write string writestr path string pathstr path oa write record writerecord node node children node children arrai toarrai string node children size path append path length children string child children singl buffer resus truncat previou byte string path delet integ max valu max valu path append child serial node serializenod oa path scount initi serial output archiv outputarch oa string tag io except ioexcept interrupt except interruptedexcept scount serial node serializenod oa string builder stringbuild mark end stream check clear call snapshot root oa write string writestr path deseri input archiv inputarch ia string tag io except ioexcept node clear string path ia read string readstr path path equal data node v1 datanodev1 node data node v1 datanodev1 ia read record readrecord node node node put path node last slash lastslash path last index lastindexof last slash lastslash root node string parent path parentpath path substr last slash lastslash node parent node get parent path parentpath node parent children add path substr last slash lastslash eowner node stat get ephemer owner getephemeralown eowner hash set hashset string list ephemer get eowner list list hash set hashset string ephemer put eowner list list add path path ia read string readstr path node put root string dump ephemer dumpephemer set kei ephemer kei set keyset string builder stringbuild sb string builder stringbuild session ephemer kei size kei sb append 0x hex string tohexstr sb append hash set hashset string tmp ephemer get tmp string path tmp sb append path sb string tostr remov cnxn removecnxn watcher watcher data watch datawatch remov watcher removewatch watcher child watch childwatch remov watcher removewatch watcher clear root node clear ephemer clear data watch datawatch child watch childwatch 

process txn result processtxnresult client id clientid cxid zxid err type string path stat stat equal defin client id clientid cxid allow us hash tabl track complet transact java lang object equal java lang object overrid equal object process txn result processtxnresult process txn result processtxnresult process txn result processtxnresult client id clientid client id clientid cxid cxid equal find ration hashcod gener process txn result processtxnresult equal object java lang object hash code hashcod overrid hash code hashcod client id clientid cxid integ max valu max valu 

verifi zookeep 1277 ensur handl epoch rollov correctli zxid rollov test zxidrollovertest test testcas logger log logger get logger getlogg zxid rollov test zxidrollovertest quorum util quorumutil qu zoo keeper server zookeeperserv zk leader zksleader zoo keeper zookeep zk client zkclient zoo keeper zookeep countdown watcher countdownwatch zk client watcher zkclientwatch countdown watcher countdownwatch idx leader idxlead idx follow idxfollow zoo keeper zookeep get client getclient idx zk client zkclient idx overrid set up setup except log info start get name getnam set snap count low forc log rollov verifi work part epoch rollov sync request processor syncrequestprocessor set snap count setsnapcount qu quorum util quorumutil start startal zk client zkclient length zk client watcher zkclientwatch countdown watcher countdownwatch peer peerstruct peer qu get peer getpeer zk client zkclient zoo keeper zookeep 127 peer client port clientport client test clienttest connect timeout connect timeout zk client watcher zkclientwatch wait client connect waitforclientsconnect wait client connect waitforclientsconnect except zk client zkclient length zk client watcher zkclientwatch wait connect waitforconnect client test clienttest connect timeout connect timeout zk client watcher zkclientwatch reset ensur client abl talk servic check client connect checkclientsconnect except zk client zkclient length check client connect checkclientconnect ensur client abl talk server param idx idx server client talk check client connect checkclientconnect idx except zoo keeper zookeep zk get client getclient idx zk assertnul zk exist foofoofoo connect connect loss except connectionlossexcept second chanc case leader chang time tricki get right order assur client ha disconnect reconnect case client disconnect attempt reconnect befor server back ll connloss oper catch wait server back peer peerstruct peer qu get peer getpeer idx asserttru wait server down client base clientbas wait server up waitforserverup 127 peer client port clientport client base clientbas connect timeout connect timeout assertnul zk exist foofoofoo connect ensur client disconnect from servic check client disconnect checkclientsdisconnect except zk client zkclient length check client disconnect checkclientdisconnect ensur client abl talk server param idx idx server client talk check client disconnect checkclientdisconnect idx except zoo keeper zookeep zk get client getclient idx zk assertnul zk exist foofoofoo disconnect fail expect client disconnect keeper except keeperexcept success start startal except qu start startal check leader checklead client connect check client connect checkclientsconnect start idx except qu start idx string hp qu get conn string getconnstr split asserttru wait server up client base clientbas wait server up waitforserverup hp client test clienttest connect timeout connect timeout check leader checklead client connect check client connect checkclientsconnect check leader checklead idx leader idxlead qu get peer getpeer idx leader idxlead peer leader idx leader idxlead idx follow idxfollow idx leader idxlead zk leader zksleader qu get peer getpeer idx leader idxlead peer get activ server getactiveserv shutdown shutdownal except qu shutdown shutdownal client disconnect check client disconnect checkclientsdisconnect shutdown idx except qu shutdown idx leader shutdown remain follow elect leader peer peerstruct peer qu get peer getpeer idx asserttru wait server down client base clientbas wait server down waitforserverdown 127 peer client port clientport client base clientbas connect timeout connect timeout idx leader get disconnect idx follow client get disconnect idx idx leader idxlead check client disconnect checkclientdisconnect idx check client disconnect checkclientsdisconnect assert fail error assertionfailederror client reconnect recov cluster forc check ignor check client disconnect checkclientdisconnect idx reset next zxid near epoch end adjust epoch near end adjustepochnearend zk leader zksleader set zxid setzxid zk leader zksleader get zxid getzxid xffffffff00000000l 0xffffffff00000000l xfffffffcl 0xfffffffcl overrid tear down teardown except log info tear down teardown start zk client zkclient length zk client zkclient close qu shutdown shutdownal creat znode fail lower 32 roll wait client connect after elect creat node createnod zoo keeper zookeep zk start count except log info creat node start start count start start count zk creat foo id read acl unsaf read acl unsaf creat mode createmod ephemer connect loss except connectionlossexcept leader ha drop leadership wait client connect waitforclientsconnect verifi expect znode creat last znode caus roll check node checknod zoo keeper zookeep zk start count except log info valid node start start count start start count assertnotnul zk exist foo log error exist zxid hex string tohexstr zk exist foo get czxid getczxid assertnul zk exist foo start count prior fix test hang fail connect loss test test simpl rollov follow testsimplerolloverfollow except adjust epoch near end adjustepochnearend zoo keeper zookeep zk get client getclient idx leader idxlead count creat countcreat creat node createnod zk 10 check node checknod zk count creat countcreat similar test simpl rollov testsimplerollov ensur cluster back ha right data abl serv request test test rollov restart testrolloverthenrestart except zoo keeper zookeep zk get client getclient idx follow idxfollow count creat countcreat creat node createnod zk 10 adjust epoch near end adjustepochnearend count creat countcreat creat node createnod zk count creat countcreat 10 shutdown shutdownal start startal zk get client getclient idx leader idxlead check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 adjust epoch near end adjustepochnearend check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 shutdown shutdownal start startal zk get client getclient idx follow idxfollow check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 shutdown shutdownal start startal zk get client getclient idx leader idxlead check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 saniti check asserttru count creat countcreat asserttru count creat countcreat 60 similar test rollov restart testrolloverthenrestart ensur follow back ha right data abl serv request test test rollov follow restart testrolloverthenfollowerrestart except zoo keeper zookeep zk get client getclient idx follow idxfollow count creat countcreat creat node createnod zk 10 adjust epoch near end adjustepochnearend count creat countcreat creat node createnod zk count creat countcreat 10 shutdown idx follow idxfollow start idx follow idxfollow check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 adjust epoch near end adjustepochnearend check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 shutdown idx follow idxfollow start idx follow idxfollow check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 shutdown idx follow idxfollow start idx follow idxfollow check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 saniti check asserttru count creat countcreat asserttru count creat countcreat 60 similar test rollov restart testrolloverthenrestart ensur leadership chang back ha right data abl serv request test test rollov leader restart testrolloverthenleaderrestart except zoo keeper zookeep zk get client getclient idx leader idxlead count creat countcreat creat node createnod zk 10 adjust epoch near end adjustepochnearend check node checknod zk count creat countcreat shutdown idx leader idxlead start idx leader idxlead zk get client getclient idx leader idxlead check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 adjust epoch near end adjustepochnearend check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 shutdown idx leader idxlead start idx leader idxlead zk get client getclient idx leader idxlead check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 shutdown idx leader idxlead start idx leader idxlead zk get client getclient idx follow idxfollow check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 saniti check asserttru count creat countcreat asserttru count creat countcreat 50 similar test rollov restart testrolloverthenrestart ensur surviv multipl epoch rollov restart test test multipl rollov testmultiplerollov except zoo keeper zookeep zk get client getclient idx follow idxfollow count creat countcreat creat node createnod zk 10 adjust epoch near end adjustepochnearend count creat countcreat creat node createnod zk count creat countcreat 10 adjust epoch near end adjustepochnearend count creat countcreat creat node createnod zk count creat countcreat 10 adjust epoch near end adjustepochnearend count creat countcreat creat node createnod zk count creat countcreat 10 adjust epoch near end adjustepochnearend count creat countcreat creat node createnod zk count creat countcreat 10 shutdown shutdownal start startal zk get client getclient idx follow idxfollow adjust epoch near end adjustepochnearend check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 shutdown idx leader idxlead start idx leader idxlead zk get client getclient idx follow idxfollow check node checknod zk count creat countcreat count creat countcreat creat node createnod zk count creat countcreat 10 saniti check asserttru count creat countcreat asserttru count creat countcreat 70 

txn header txnheader record client id clientid cxid zxid time type txn header txnheader txn header txnheader client id clientid cxid zxid time type client id clientid client id clientid cxid cxid zxid zxid time time type type get client id getclientid client id clientid set client id setclientid client id clientid get cxid getcxid cxid set cxid setcxid cxid get zxid getzxid zxid set zxid setzxid zxid get time gettim time set time settim time get type gettyp type set type settyp type serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writelong client id clientid client id clientid write writeint cxid cxid write writelong zxid zxid write writelong time time write writeint type type end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag client id clientid read readlong client id clientid cxid read readint cxid zxid read readlong zxid time read readlong time type read readint type end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writelong client id clientid client id clientid write writeint cxid cxid write writelong zxid zxid write writelong time time write writeint type type end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer txn header txnheader cast except classcastexcept compar differ type record txn header txnheader peer txn header txnheader peer peer ret ret client id clientid peer client id clientid client id clientid peer client id clientid ret ret ret cxid peer cxid cxid peer cxid ret ret ret zxid peer zxid zxid peer zxid ret ret ret time peer time time peer time ret ret ret type peer type type peer type ret ret ret equal object peer peer peer peer txn header txnheader peer peer txn header txnheader peer txn header txnheader peer peer ret ret client id clientid peer client id clientid ret ret ret cxid peer cxid ret ret ret zxid peer zxid ret ret ret time peer time ret ret ret type peer type ret ret ret hash code hashcod result 17 ret ret client id clientid client id clientid 32 result 37 result ret ret cxid result 37 result ret ret zxid zxid 32 result 37 result ret ret time time 32 result 37 result ret ret type result 37 result ret result string signatur txn header ltxnheader lilli 

client retri clientretri client base clientbas overrid set up setup except max cnxn maxcnxn set up setup simpl test connect two client server accept maximum on connect from address check on accept close connect check eventu connect possibl posit here zk2 test connect time finish connect after test done server doesn client hasn connect obviou detect differ test test client retri testclientretri io except ioexcept interrupt except interruptedexcept timeout except timeoutexcept countdown watcher countdownwatch cdw1 countdown watcher countdownwatch countdown watcher countdownwatch cdw2 countdown watcher countdownwatch zoo keeper zookeep zk zoo keeper zookeep host port hostport 10000 cdw1 cdw1 wait connect waitforconnect connect timeout connect timeout zoo keeper zookeep zk2 zoo keeper zookeep host port hostport 10000 cdw2 state s1 zk get state getstat state s2 zk2 get state getstat assertsam s1 state connect assertsam s2 state connect cdw1 reset cdw1 wait disconnect waitfordisconnect connect timeout connect timeout cdw2 wait connect waitforconnect connect timeout connect timeout assertsam zk2 get state getstat state connect zk2 close zk close 

quorum peer instanc quorumpeerinst instanc logger log logger factori loggerfactori get logger getlogg quorum peer instanc quorumpeerinst sync limit synclimit init limit initlimit tick time ticktim 2000 string server host port serverhostport server id serverid report quorum peer quorump peer set report setreport report inet socket address inetsocketaddress client addr clientaddr inet socket address inetsocketaddress quorum addr quorumaddr hash map hashmap quorum server quorumserv peer file snap dir snapdir log dir logdir quorum peer instanc quorumpeerinst file tmp file tmpfile file creat temp file createtempfil test dir file tmp dir tmpdir tmp file tmpfile get parent file getparentfil tmp file tmpfile delet file zk dir zkdir file tmp dir tmpdir zktmp cfg log dir logdir tmp dir tmpdir snap dir snapdir tmp dir tmpdir properti zk dir zkdir exist properti load file input stream fileinputstream zk dir zkdir get properti getproperti log dir logdir file get properti getproperti log dir logdir tmp dir tmpdir get absolut path getabsolutepath snap dir snapdir file get properti getproperti snap dir snapdir tmp dir tmpdir get absolut path getabsolutepath log dir logdir file creat temp file createtempfil zktst dir log dir logdir log dir logdir delet log dir logdir mkdir snap dir snapdir file creat temp file createtempfil zktst dir snap dir snapdir snap dir snapdir delet snap dir snapdir mkdir io except ioexcept print stack trace printstacktrac configur string param client addr clientaddr string part param split first time configur machin server id serverid integ pars parseint part log debug enabl isdebugen log info set up server server id serverid part length part equal set properti setproperti zookeep leader serv leaderserv set properti setproperti zookeep leader serv leaderserv ye let grab two port server socket serversocket ss server socket serversocket inet address inetaddress get local host getlocalhost client addr clientaddr inet socket address inetsocketaddress ss get local socket address getlocalsocketaddress ss close io except ioexcept print stack trace printstacktrac server socket serversocket ss server socket serversocket inet address inetaddress get local host getlocalhost quorum addr quorumaddr inet socket address inetsocketaddress ss get local socket address getlocalsocketaddress ss close io except ioexcept print stack trace printstacktrac string report client addr clientaddr get host name gethostnam client addr clientaddr get port getport quorum addr quorumaddr get host name gethostnam quorum addr quorumaddr get port getport log debug enabl isdebugen log debug report report report report except print stack trace printstacktrac space index spaceindex param index indexof space index spaceindex log warn host port start stop found param string quorum spec quorumspec param substr space index spaceindex string cmd param substr space index spaceindex log debug enabl isdebugen log debug run command cmd cmd equal start peer peer shutdown peer thread sleep 500 wait connect socket 127 client addr clientaddr get port getport close io except ioexcept report stop except log error unhandl error string part quorum spec quorumspec split peer hash map hashmap quorum server quorumserv part length string subpart part split peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress subpart integ pars parseint subpart log debug enabl isdebugen log debug start quorum peer quorump server id serverid port client addr clientaddr get port getport peer log warn peer server id serverid start err println snap dir snapdir snap dir snapdir log dir logdir log dir logdir peer quorum peer quorump peer snap dir snapdir log dir logdir client addr clientaddr get port getport server id serverid tick time ticktim init limit initlimit sync limit synclimit peer start thread sleep 500 wait connect socket 127 client addr clientaddr get port getport close io except ioexcept report start except log error unhandl except start recurs delet recursivedelet file dir dir directori isdirectori dir delet file dir list file listfil recurs delet recursivedelet dir delet stop log debug enabl isdebugen log debug stop peer server id serverid peer peer shutdown log dir logdir recurs delet recursivedelet log dir logdir snap dir snapdir recurs delet recursivedelet snap dir snapdir method us configur quorum peer instanc quorumpeerinst param im instanc manag instancemanag manag instanc param server number configur zero base avail contain noavailablecontain duplic name except duplicatenameexcept interrupt except interruptedexcept keeper except keeperexcept string creat server createserv instanc manag instancemanag im avail contain noavailablecontain duplic name except duplicatenameexcept interrupt except interruptedexcept keeper except keeperexcept creat server createserv im method us configur quorum peer instanc quorumpeerinst param im instanc manag instancemanag manag instanc param server number configur zero base param leader serv leaderserv leader accept client connect avail contain noavailablecontain duplic name except duplicatenameexcept interrupt except interruptedexcept keeper except keeperexcept string creat server createserv instanc manag instancemanag im leader serv leaderserv avail contain noavailablecontain duplic name except duplicatenameexcept interrupt except interruptedexcept keeper except keeperexcept im assign instanc assigninst server quorum peer instanc quorumpeerinst integ string tostr leader serv leaderserv 50 im get statu getstatu server 3000 split start instanc quorum peer quorump param im manag instanc param quorum host port quorumhostport comma separ list host port pair quorum peer param index zero base index server start interrupt except interruptedexcept keeper except keeperexcept assign except noassignmentexcept start instanc startinst instanc manag instancemanag im string quorum host port quorumhostport index interrupt except interruptedexcept keeper except keeperexcept assign except noassignmentexcept im reset statu resetstatu server index im reconfigur instanc reconfigureinst server index quorum host port quorumhostport start im get statu getstatu server index 5000 stop instanc quorum peer quorump param im manag instanc param index zero base index fo server stop interrupt except interruptedexcept keeper except keeperexcept assign except noassignmentexcept stop instanc stopinst instanc manag instancemanag im index interrupt except interruptedexcept keeper except keeperexcept assign except noassignmentexcept im reset statu resetstatu server index im reconfigur instanc reconfigureinst server index integ string tostr index stop im get statu getstatu server index 3000 

csv output archiv csvoutputarch output archiv outputarch print stream printstream stream first isfirst csv output archiv csvoutputarch get archiv getarch output stream outputstream strm unsupport encod except unsupportedencodingexcept csv output archiv csvoutputarch strm except error throwexceptiononerror string tag io except ioexcept stream check error checkerror io except ioexcept error serial tag print comma first printcommaunlessfirst first isfirst stream print first isfirst creat instanc csv output archiv csvoutputarch csv output archiv csvoutputarch output stream outputstream unsupport encod except unsupportedencodingexcept stream print stream printstream utf write writebyt string tag io except ioexcept write writelong tag write writebool string tag io except ioexcept print comma first printcommaunlessfirst string val stream print val except error throwexceptiononerror tag write writeint string tag io except ioexcept write writelong tag write writelong string tag io except ioexcept print comma first printcommaunlessfirst stream print except error throwexceptiononerror tag write writefloat string tag io except ioexcept write writedoubl tag write writedoubl string tag io except ioexcept print comma first printcommaunlessfirst stream print except error throwexceptiononerror tag write string writestr string string tag io except ioexcept print comma first printcommaunlessfirst stream print util csv string tocsvstr except error throwexceptiononerror tag write buffer writebuff buf string tag io except ioexcept print comma first printcommaunlessfirst stream print util csv buffer tocsvbuff buf except error throwexceptiononerror tag write record writerecord record string tag io except ioexcept serial tag start record startrecord record string tag io except ioexcept tag equal tag print comma first printcommaunlessfirst stream print first isfirst end record endrecord record string tag io except ioexcept tag equal tag stream print first isfirst stream print first isfirst start vector startvector list string tag io except ioexcept print comma first printcommaunlessfirst stream print first isfirst end vector endvector list string tag io except ioexcept stream print first isfirst start map startmap tree map treemap string tag io except ioexcept print comma first printcommaunlessfirst stream print first isfirst end map endmap tree map treemap string tag io except ioexcept stream print first isfirst 

unifi regist unregist zookeep bean mbean platform bean mbean server build hierarchi bean mbean bean mbean repres filesystem path eventu hierarchi store zookeep data tree instanc data tree bean registri mbeanregistri logger log logger factori loggerfactori get logger getlogg bean registri mbeanregistri bean registri mbeanregistri instanc bean registri mbeanregistri map zkm bean info zkmbeaninfo string map bean2 path mapbean2path concurr hash map concurrenthashmap zkm bean info zkmbeaninfo string map string zkm bean info zkmbeaninfo map name2 bean mapname2bean concurr hash map concurrenthashmap string zkm bean info zkmbeaninfo bean server mbeanserv bean server mbeanserv bean registri mbeanregistri get instanc getinst instanc bean registri mbeanregistri bean server mbeanserv manag factori managementfactori get platform bean server getplatformmbeanserv error account run ikvm creat bean server mbeanserv platform bean server platformmbeanserv exist bean server mbeanserv bean server factori mbeanserverfactori creat bean server creatembeanserv underli bean server mbeanserv us bean mbean return bean server mbeanserv empti bean server mbeanserv run ikvm bean server mbeanserv get platform bean server getplatformmbeanserv bean server mbeanserv regist bean mbean platform bean mbean server param bean bean regist param parent bean regist child node parent zkm bean info zkmbeaninfo bean zkm bean info zkmbeaninfo parent jm except jmexcept bean string path parent path map bean2 path mapbean2path get parent path path make full path makefullpath path parent map bean2 path mapbean2path put bean path map name2 bean mapname2bean put bean get name getnam bean bean hidden ishidden object name objectnam onam make object name makeobjectnam path bean bean server mbeanserv bean registermbean bean onam jm except jmexcept log warn fail bean mbean bean get name getnam unregist bean mbean identifi path param path param bean unregist string path zkm bean info zkmbeaninfo bean jm except jmexcept path bean hidden ishidden bean server mbeanserv unregist bean unregistermbean make object name makeobjectnam path bean jm except jmexcept log warn fail unregist bean mbean bean get name getnam unregist bean mbean param bean unregist zkm bean info zkmbeaninfo bean bean string path map bean2 path mapbean2path get bean unregist path bean jm except jmexcept log warn error unregist map bean2 path mapbean2path remov bean map name2 bean mapname2bean remov bean get name getnam unregist current regist bean mbean unregist unregisteral map entri zkm bean info zkmbeaninfo string map bean2 path mapbean2path entri set entryset unregist get valu getvalu get kei getkei jm except jmexcept e1 log warn error unregist e1 map bean2 path mapbean2path clear map name2 bean mapname2bean clear gener filesystem path param prefix path prefix param name path element absolut path string make full path makefullpath string prefix string name string builder stringbuild sb string builder stringbuild prefix prefix equal prefix prefix first string name first sb append first sb append sb string tostr string make full path makefullpath string prefix zkm bean info zkmbeaninfo bean make full path makefullpath prefix bean bean get name getnam take path convert name0 name1 name2 token string builder stringbuild sb string path index string token path split string token length sb append name append index append append append index build bean mbean path creat object name objectnam instanc path param path bean mbean path param bean bean mbean instanc object name objectnam regist platform bean mbean server object name objectnam make object name makeobjectnam string path zkm bean info zkmbeaninfo bean malform object name except malformedobjectnameexcept path string builder stringbuild bean name beannam string builder stringbuild common name commonnam domain counter counter token bean name beannam path counter token bean name beannam bean get name getnam counter bean name beannam delet deletecharat bean name beannam length object name objectnam bean name beannam string tostr malform object name except malformedobjectnameexcept log warn invalid name bean name beannam string tostr bean get getclass string tostr 

proxi remot quorum peer remot peer mx bean remotepeermxbean name peer string get name getnam ip address quorum peer string get quorum address getquorumaddress 

multi respons test multiresponsetest test testcas test round trip testroundtrip io except ioexcept multi respons multirespons respons multi respons multirespons respons add op result opresult check result checkresult respons add op result opresult creat result createresult foo bar respons add op result opresult delet result deleteresult stat stat set czxid setczxid 546 respons add op result opresult set data result setdataresult multi respons multirespons decod respons decodedrespons code decod codedecod respons equal assertequ respons decod respons decodedrespons equal assertequ respons hash code hashcod decod respons decodedrespons hash code hashcod test test empti round trip testemptyroundtrip io except ioexcept multi respons multirespons result multi respons multirespons multi respons multirespons decod result decodedresult code decod codedecod result equal assertequ result decod result decodedresult equal assertequ result hash code hashcod decod result decodedresult hash code hashcod multi respons multirespons code decod codedecod multi respons multirespons request io except ioexcept arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao request serial boa result bao close buffer bytebuff bb buffer bytebuff wrap bao arrai tobytearrai bb rewind binari input archiv binaryinputarch bia binari input archiv binaryinputarch get archiv getarch buffer input stream bytebufferinputstream bb multi respons multirespons decod request decodedrequest multi respons multirespons decod request decodedrequest deseri bia result decod request decodedrequest 

zookeep data tree bean mbean data tree mx bean datatreemxbean number znode data tree get node count getnodecount most recent zxid process data tree string get last zxid getlastzxid number watch set get watch count getwatchcount data tree size byte size includ znode path valu approxim data size approximatedatas number ephemer node data tree count ephemer countephemer 

four letter word main fourletterwordmain logger log logger get logger getlogg four letter word main fourletterwordmain send letterword 4letterword param host destin host param port destin port param cmd letterword 4letterword server respons java io io except ioexcept string send4 letter word send4letterword string host port string cmd io except ioexcept log info connect host port socket sock socket host port buffer reader bufferedread reader output stream outputstream outstream sock get output stream getoutputstream outstream write cmd get byte getbyt outstream flush replic nc close output stream befor read sock shutdown output shutdownoutput reader buffer reader bufferedread input stream reader inputstreamread sock get input stream getinputstream string builder stringbuild sb string builder stringbuild string line line reader read line readlin sb append line sb string tostr sock close reader reader close main string arg io except ioexcept arg length println usag four letter word main fourletterwordmain host port cmd println send4 letter word send4letterword arg integ pars parseint arg arg 

zoo keeper quota test zookeeperquotatest client base clientbas logger log logger factori loggerfactori get logger getlogg zoo keeper quota test zookeeperquotatest test test quota testquota io except ioexcept interrupt except interruptedexcept keeper except keeperexcept except zoo keeper zookeep zk creat client createcli string path make setdata work zk set data setdata get byte getbyt zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zoo keeper main zookeepermain creat quota createquota zk path 5l 10 set string absolut path absolutepath quota quota zookeep quotazookeep path quota limit node limitnod data zk get data getdata absolut path absolutepath stat stat track statstrack st stat track statstrack string data asserttru byte set st get byte getbyt 5l asserttru num count set st get count getcount 10 string stat path statpath quota quota zookeep quotazookeep path quota stat node statnod qdata zk get data getdata stat path statpath stat stat track statstrack qst stat track statstrack string qdata asserttru byte set qst get byte getbyt 8l asserttru count set qst get count getcount forc server restart load from snapshot txn log stop server stopserv start server startserv stop server stopserv start server startserv zoo keeper server zookeeperserv server get server getserv server factori serverfactori assertnotnul quota set server get zk databas getzkdatabas get data tree getdatatre get max prefix quota getmaxprefixwithquota path 

manag quota ha util quota quota zookeep node act manag statu node string proc zookeep proczookeep zookeep zookeep quota node act quota manag node zookeep string quota zookeep quotazookeep zookeep quota limit node ha limit subtre string limit node limitnod zookeep limit zookeep limit stat node monitor limit subtre string stat node statnod zookeep stat zookeep stat quota path associ prefix param path actual path zookeep limit quota path string quota path quotapath string path quota zookeep quotazookeep path limit node limitnod stat quota path associ prefix param path actual path zookeep stat quota path string stat path statpath string path quota zookeep quotazookeep path stat node statnod 

upgrad older databas databas zookeep server run java path zookeep jar upgrad data dir datadir snap shot dir snapshotdir zookeep script zk server zkserver upgrad data dir datadir snap shot dir snapshotdir creat backup data dir datadir bkup snap shot dir snapshotdir bkup retriev back snap shot dir snapshotdir data dir datadir upgrad main upgrademain file snap shot dir snapshotdir file data dir datadir file bkupsnap shot dir bkupsnapshotdir file bkupdata dir bkupdatadir file currentdata dir currentdatadir file currentsnap shot dir currentsnapshotdir logger log logger factori loggerfactori get logger getlogg upgrad main upgrademain string usag usag upgrad main upgrademain data dir datadir snap shot dir snapshotdir lastvers currentvers file txn snap log filetxnsnaplog version string dir name dirnam file txn snap log filetxnsnaplog version string manual manual step sanit databas read upgrad manual upgrad take two file directori param data dir datadir directori contain transact log param snap shot dir snapshotdir directori contain snapshot upgrad main upgrademain file data dir datadir file snap shot dir snapshotdir snap shot dir snapshotdir snap shot dir snapshotdir data dir datadir data dir datadir bkupdata dir bkupdatadir file data dir datadir dir name dirnam lastvers bkupsnap shot dir bkupsnapshotdir file snap shot dir snapshotdir dir name dirnam lastvers currentsnap shot dir currentsnapshotdir file snap shot dir snapshotdir dir name dirnam currentvers currentdata dir currentdatadir file data dir datadir dir name dirnam currentvers creat bkup directori current databas directori io except ioexcept creat dir createalldir io except ioexcept string error backup directori bkupdata dir bkupdatadir exist log info creat previou version data dir bkupdata dir bkupdatadir bkupdata dir bkupdatadir mkdir log error error log error manual io except ioexcept error log info creat previou version snapshot dir bkupdata dir bkupdatadir bkupsnap shot dir bkupsnapshotdir mkdir bkupsnap shot dir bkupsnapshotdir exist log error error log error manual io except ioexcept error error current directori currentdata dir currentdatadir exist log info creat current data dir currentdata dir currentdatadir currentdata dir currentdatadir mkdir log error error log error manual io except ioexcept error log info creat current snapshot dir currentdata dir currentdatadir currentsnap shot dir currentsnapshotdir mkdir currentsnap shot dir currentsnapshotdir exist log error error log error manual io except ioexcept error copi file from srcdir dstdir string filter srcdir filenam param src dir srcdir sourc directori param dst dir dstdir destin directori param filter filter filenam copi io except ioexcept copi file copyfil file src dir srcdir file dst dir dstdir string filter io except ioexcept file list src dir srcdir list file listfil file file list string name file get name getnam name start startswith filter copi file file dest file dst dir dstdir name log info renam file dest file renam renameto dest io except ioexcept unabl renam file dest run upgrad io except ioexcept run upgrad runupgrad io except ioexcept data dir datadir exist io except ioexcept data dir datadir exist snap shot dir snapshotdir exist io except ioexcept snap shot dir snapshotdir exist creat bkup directorya creat dir createalldir copi file backup copi file copyfil data dir datadir bkupdata dir bkupdatadir log copi file copyfil snap shot dir snapshotdir bkupsnap shot dir bkupsnapshotdir snapshot io except ioexcept io log error fail back up io evryth back up read old databas creat old snapshot upgrad snap shot v1 upgradesnapshotv1 upgrad upgrad snap shot v1 upgradesnapshotv1 bkupdata dir bkupdatadir bkupsnap shot dir bkupsnapshotdir log info creat data tree data tree datatre dt upgrad get data tree getnewdatatre file txn snap log filetxnsnaplog filesnap log filesnaplog file txn snap log filetxnsnaplog data dir datadir snap shot dir snapshotdir log info snapshot datatre filesnap log filesnaplog save dt upgrad get session time out getsessionwithtimeout done save log info upgrad complet main string argv argv length log error usag exit upgrad main upgrademain upgrad upgrad main upgrademain file argv file argv upgrad run upgrad runupgrad throwabl th log error upgrad error read doc manual failur recoveri th 

h2 configur file h2 main method us start program first argument us path config file us obtain configur inform file properti file kei valu separ equal kei valu pair separ line follow gener summari kei us configur file full detail document doc index html ol li data dir datadir directori zoo keeper zookeep data store li li data log dir datalogdir directori zoo keeper zookeep transact log store li li client port clientport port us commun client li li tick time ticktim durat tick millisecond basic unit time zoo keeper zookeep li li init limit initlimit maximum number tick follow wait initi synchron leader li li sync limit synclimit maximum number tick follow wait messag includ heartbeat from leader li li server id host port port server id us quorum protocol li ol addit config file file data directori call myid contain server id ascii decim valu quorum peer main quorumpeermain logger log logger factori loggerfactori get logger getlogg quorum peer main quorumpeermain string usag usag quorum peer main quorumpeermain configfil quorum peer quorump quorum peer quorump start replic server specifi configur file name command line param arg path configfil main string arg quorum peer main quorumpeermain main quorum peer main quorumpeermain main initi run initializeandrun arg illeg argument except illegalargumentexcept log error invalid argument exit abnorm log info usag err println usag exit config except configexcept log error invalid config exit abnorm err println invalid config exit abnorm exit except log error unexpect except exit abnorm exit log info exit exit initi run initializeandrun string arg config except configexcept io except ioexcept quorum peer config quorumpeerconfig config quorum peer config quorumpeerconfig arg length config pars arg start schedul purg task datadir cleanup manag datadircleanupmanag purg mgr purgemgr datadir cleanup manag datadircleanupmanag config get data dir getdatadir config get data log dir getdatalogdir config get snap retain count getsnapretaincount config get purg interv getpurgeinterv purg mgr purgemgr start arg length config server size run from config runfromconfig config log warn config quorum defin config run standalon mode server quorum run standalon zoo keeper server main zookeeperservermain main arg run from config runfromconfig quorum peer config quorumpeerconfig config io except ioexcept manag util managedutil log4 bean registerlog4jmbean jm except jmexcept log warn unabl log4j jmx control log info start quorum peer server cnxn factori servercnxnfactori cnxn factori cnxnfactori server cnxn factori servercnxnfactori creat factori createfactori cnxn factori cnxnfactori configur config get client port address getclientportaddress config get max client cnxn getmaxclientcnxn quorum peer quorump quorum peer quorump quorum peer quorump set client port address setclientportaddress config get client port address getclientportaddress quorum peer quorump set txn factori settxnfactori file txn snap log filetxnsnaplog file config get data log dir getdatalogdir file config get data dir getdatadir quorum peer quorump set quorum peer setquorump config get server getserv quorum peer quorump set elect type setelectiontyp config get elect alg getelectionalg quorum peer quorump set myid setmyid config get server id getserverid quorum peer quorump set tick time setticktim config get tick time getticktim quorum peer quorump set min session timeout setminsessiontimeout config get min session timeout getminsessiontimeout quorum peer quorump set max session timeout setmaxsessiontimeout config get max session timeout getmaxsessiontimeout quorum peer quorump set init limit setinitlimit config get init limit getinitlimit quorum peer quorump set sync limit setsynclimit config get sync limit getsynclimit quorum peer quorump set quorum verifi setquorumverifi config get quorum verifi getquorumverifi quorum peer quorump set cnxn factori setcnxnfactori cnxn factori cnxnfactori quorum peer quorump set zk databas setzkdatabas zk databas zkdatabas quorum peer quorump get txn factori gettxnfactori quorum peer quorump set learner type setlearnertyp config get peer type getpeertyp quorum peer quorump start quorum peer quorump join interrupt except interruptedexcept warn gener log warn quorum peer interrupt 

command line client zoo keeper zookeep zoo keeper main zookeepermain logger log logger factori loggerfactori get logger getlogg zoo keeper main zookeepermain map string string command map commandmap hash map hashmap string string command option mycommandopt cl command option mycommandopt hash map hashmap integ string histori hash map hashmap integ string command count commandcount print watch printwatch zoo keeper zookeep zk string host get print watch getprintwatch print watch printwatch command map commandmap put connect host port command map commandmap put close command map commandmap put creat path data acl command map commandmap put delet path version command map commandmap put rmr path command map commandmap put set path data version command map commandmap put get path watch command map commandmap put ls path watch command map commandmap put ls2 path watch command map commandmap put get acl getacl path command map commandmap put set acl setacl path acl command map commandmap put stat path watch command map commandmap put sync path command map commandmap put setquota val path command map commandmap put listquota path command map commandmap put delquota path command map commandmap put histori command map commandmap put redo cmdno command map commandmap put printwatch command map commandmap put quit command map commandmap put addauth scheme auth usag err println zoo keeper zookeep server host port cmd arg string cmd command map commandmap kei set keyset err println cmd command map commandmap get cmd watcher mywatch watcher process watch event watchedev event get print watch getprintwatch zoo keeper main zookeepermain print messag printmessag watcher zoo keeper main zookeepermain print messag printmessag event string tostr get perm from string getpermfromstr string perm string permstr perm perm string permstr length perm string permstr charat perm zoo def zoodef perm read perm zoo def zoodef perm write perm zoo def zoodef perm creat perm zoo def zoodef perm delet perm zoo def zoodef perm admin err println unknown perm type perm string permstr charat perm print stat printstat stat stat err println zxid czxid 0x hex string tohexstr stat get czxid getczxid err println ctime date stat get ctime getctim string tostr err println zxid mzxid 0x hex string tohexstr stat get mzxid getmzxid err println mtime date stat get mtime getmtim string tostr err println zxid pzxid 0x hex string tohexstr stat get pzxid getpzxid err println cversion stat get cversion getcvers err println data version datavers stat get version getvers err println acl version aclvers stat get avers getavers err println ephemer owner ephemeralown 0x hex string tohexstr stat get ephemer owner getephemeralown err println data length datalength stat get data length getdatalength err println num children numchildren stat get num children getnumchildren storag command line option shell command command option mycommandopt map string string option hash map hashmap string string list string cmd arg cmdarg string command command option mycommandopt option put server localhost 2181 option put timeout 30000 string get option getopt string opt option get opt string get command getcommand command string get cmd argument getcmdargu index cmd arg cmdarg get index get num argument getnumargu cmd arg cmdarg size string get arg arrai getargarrai cmd arg cmdarg arrai toarrai string pars command line contain on more flag befor option command string param arg command line argument pars succeed pars option parseopt string arg list string arg list arglist arrai list aslist arg iter string arg list arglist iter ha next hasnext string opt next opt equal server option put server next opt equal timeout option put timeout next opt equal option put readonli element except nosuchelementexcept err println error argument found option opt opt start startswith command opt cmd arg cmdarg arrai list arraylist string cmd arg cmdarg add command ha next hasnext cmd arg cmdarg add next break string command argument param cmdstring string form cmd arg1 arg2 pars succeed pars command parsecommand string cmdstring string token stringtoken cmd token cmdtoken string token stringtoken cmdstring string arg string cmd token cmdtoken count token counttoken token index tokenindex cmd token cmdtoken ha more token hasmoretoken arg token index tokenindex cmd token cmdtoken next token nexttoken token index tokenindex arg length command arg cmd arg cmdarg arrai list aslist arg make list complet command zk node token complet begin add histori addtohistori string cmd histori put cmd list string get command getcommand link list linkedlist string command map commandmap kei set keyset string get prompt getprompt zk host zk get state getstat command count commandcount print messag printmessag string msg println msg connect zk connecttozk string host newhost interrupt except interruptedexcept io except ioexcept zk zk get state getstat aliv isal zk close host host newhost read readonli cl get option getopt readonli zk zoo keeper zookeep host integ pars parseint cl get option getopt timeout watcher mywatch read readonli main string arg keeper except keeperexcept io except ioexcept interrupt except interruptedexcept zoo keeper main zookeepermain main zoo keeper main zookeepermain arg main run zoo keeper main zookeepermain string arg io except ioexcept interrupt except interruptedexcept cl pars option parseopt arg println connect cl get option getopt server connect zk connecttozk cl get option getopt server zk zoo keeper zookeep cl get option getopt server integ pars parseint cl get option getopt timeout watcher mywatch zoo keeper main zookeepermain zoo keeper zookeep zk zk zk suppress warn suppresswarn uncheck run keeper except keeperexcept io except ioexcept interrupt except interruptedexcept cl get command getcommand println welcom zoo keeper zookeep jlinemiss us jline classpath consolec name fornam jline consol reader consoleread completorc name fornam org apach zookeep line node completor jlineznodecompletor println line jline support enabl object consol consolec get constructor getconstructor instanc newinst object completor completorc get constructor getconstructor zoo keeper zookeep instanc newinst zk method add completor addcompletor consolec get method getmethod add completor addcompletor name fornam jline completor add completor addcompletor invok consol completor string line method read line readlin consolec get method getmethod read line readlin string line string read line readlin invok consol get prompt getprompt execut line executelin line found except classnotfoundexcept log debug unabl start jline jlinemiss method except nosuchmethodexcept log debug unabl start jline jlinemiss invoc target except invocationtargetexcept log debug unabl start jline jlinemiss illeg access except illegalaccessexcept log debug unabl start jline jlinemiss instanti except instantiationexcept log debug unabl start jline jlinemiss jlinemiss println line jline support disabl buffer reader bufferedread br buffer reader bufferedread input stream reader inputstreamread string line line br read line readlin execut line executelin line watch process cmd processcmd cl watch exit execut line executelin string line interrupt except interruptedexcept io except ioexcept keeper except keeperexcept line equal cl pars command parsecommand line add histori addtohistori command count commandcount line process cmd processcmd cl command count commandcount data callback datacallback data callback datacallback data callback datacallback process result processresult rc string path object ctx data stat stat println rc rc path path data data string data stat print stat printstat stat trim quota tree recov unwant tree element quota tree param zk zookeep client param path path start from up unwant parent path sucess keeper except keeperexcept io except ioexcept interrupt except interruptedexcept trim proc quota trimprocquota zoo keeper zookeep zk string path keeper except keeperexcept io except ioexcept interrupt except interruptedexcept quota quota zookeep quotazookeep equal path list string children zk get children getchildren path children size zk delet path string parent path substr path last index lastindexof trim proc quota trimprocquota zk parent method delet quota node param zk zookeep client param path path delet quota param byte number byte unset param num node numnod number node unset quota delet success keeper except keeperexcept io except ioexcept interrupt except interruptedexcept del quota delquota zoo keeper zookeep zk string path byte num node numnod keeper except keeperexcept io except ioexcept interrupt except interruptedexcept string parent path parentpath quota quota zookeep quotazookeep path string quota path quotapath quota quota zookeep quotazookeep path quota limit node limitnod zk exist quota path quotapath println quota exist path data data zk get data getdata quota path quotapath stat keeper except keeperexcept node except nonodeexcept ne err println quota exist path stat track statstrack strack stat track statstrack string data byte num node numnod strack set byte setbyt 1l zk set data setdata quota path quotapath strack string tostr get byte getbyt byte num node numnod strack set count setcount zk set data setdata quota path quotapath strack string tostr get byte getbyt byte num node numnod delet till find node more on child list string children zk get children getchildren parent path parentpath delet direct children first string child children zk delet parent path parentpath child cut tree till more on child trim proc quota trimprocquota zk parent path parentpath check parent quota checkifparentquota zoo keeper zookeep zk string path interrupt except interruptedexcept keeper except keeperexcept string split path split string quota path quotapath quota quota zookeep quotazookeep string str split str length begin path split path empti string befor first quota path quotapath str list string children children zk get children getchildren quota path quotapath keeper except keeperexcept node except nonodeexcept ne log debug child remov quota check ne children size string child children quota limit node limitnod equal child illeg argument except illegalargumentexcept path ha parent quota path quotapath ha quota method creat quota node path param zk zoo keeper zookeep client param path path quota creat param byte limit byte path param num node numnod limit number node path success creat quota createquota zoo keeper zookeep zk string path byte num node numnod keeper except keeperexcept io except ioexcept interrupt except interruptedexcept check path exist creat quota path exist zookeep stat init stat initstat zk exist path init stat initstat illeg argument except illegalargumentexcept path exist check exist parent child ha quota string quota path quotapath quota quota zookeep quotazookeep check more children zookeep stat zookeep stat zookeep qutoa zookeep qutoa children path ancestor path ha quota string real path realpath quota quota zookeep quotazookeep path list string children zk get children getchildren real path realpath string child children child start startswith zookeep zookeep illeg argument except illegalargumentexcept path ha child child ha quota keeper except keeperexcept node except nonodeexcept ne fine check parent ha quota check parent quota checkifparentquota zk path valid node quota start creat parent zk exist quota path quotapath zk creat quota proc zookeep proczookeep id open acl unsaf open acl unsaf creat mode createmod persist zk creat quota quota zookeep quotazookeep id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept node exist except nodeexistsexcept ne creat direct children stat quota node string split path split string builder stringbuild sb string builder stringbuild sb append quota path quotapath split length sb append split quota path quotapath sb string tostr zk creat quota path quotapath id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept node exist except nodeexistsexcept ne string stat path statpath quota path quotapath quota stat node statnod quota path quotapath quota path quotapath quota limit node limitnod stat track statstrack strack stat track statstrack strack set byte setbyt byte strack set count setcount num node numnod zk creat quota path quotapath strack string tostr get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist stat track statstrack stat stat track statstrack stat set byte setbyt 0l stat set count setcount zk creat stat path statpath stat string tostr get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept node exist except nodeexistsexcept ne data zk get data getdata quota path quotapath stat stat track statstrack strackc stat track statstrack string data byte 1l strackc set byte setbyt byte num node numnod strackc set count setcount num node numnod zk set data setdata quota path quotapath strackc string tostr get byte getbyt process cmd processcmd command option mycommandopt keeper except keeperexcept io except ioexcept interrupt except interruptedexcept process zk cmd processzkcmd illeg argument except illegalargumentexcept err println command fail keeper except keeperexcept node except nonodeexcept err println node exist get path getpath keeper except keeperexcept children ephemer except nochildrenforephemeralsexcept err println ephemer children get path getpath keeper except keeperexcept node exist except nodeexistsexcept err println node exist get path getpath keeper except keeperexcept empti except notemptyexcept err println node empti get path getpath keeper except keeperexcept read except notreadonlyexcept err println read call get path getpath keeper except keeperexcept invalid acl except invalidaclexcept err println acl valid get path getpath keeper except keeperexcept auth except noauthexcept err println authent valid get path getpath keeper except keeperexcept bad argument except badargumentsexcept err println argument valid get path getpath keeper except keeperexcept bad version except badversionexcept err println version valid get path getpath process zk cmd processzkcmd command option mycommandopt keeper except keeperexcept io except ioexcept interrupt except interruptedexcept stat stat stat string arg get arg arrai getargarrai string cmd get command getcommand arg length usag command map commandmap contain kei containskei cmd usag watch arg length string path list acl acl id open acl unsaf open acl unsaf log debug process cmd cmd equal quit println quit zk close exit cmd equal redo arg length integ integ decod arg command count commandcount don allow redo redo println command index rang cl pars command parsecommand histori get cl get command getcommand equal redo println redo redo histori put command count commandcount histori get process cmd processcmd cl cmd equal histori command count commandcount 10 command count commandcount println histori get cmd equal printwatch arg length println printwatch print watch printwatch print watch printwatch arg equal cmd equal connect arg length connect zk connecttozk arg connect zk connecttozk host command live connect zk zk get state getstat aliv isal println connect cmd equal creat arg length first creat mode createmod flag creat mode createmod persist arg equal arg equal arg equal arg equal first flag creat mode createmod ephemer sequenti ephemer sequenti arg equal first flag creat mode createmod ephemer arg equal first flag creat mode createmod persist sequenti persist sequenti arg length first acl pars acl parseacl arg first path arg first string path newpath zk creat path arg first get byte getbyt acl flag err println creat path newpath cmd equal delet arg length path arg zk delet path watch integ pars parseint arg cmd equal rmr arg length path arg zk util zkutil delet recurs deleterecurs zk path cmd equal set arg length path arg stat zk set data setdata path arg get byte getbyt arg length integ pars parseint arg print stat printstat stat cmd equal aget arg length path arg zk get data getdata path watch data callback datacallback path cmd equal get arg length path arg data zk get data getdata path watch stat data data get byte getbyt data println string data print stat printstat stat cmd equal ls arg length path arg list string children zk get children getchildren path watch println children cmd equal ls2 arg length path arg list string children zk get children getchildren path watch stat println children print stat printstat stat cmd equal get acl getacl arg length path arg acl zk get acl getacl path stat acl acl println get id getid get perm string getpermstr get perm getperm cmd equal set acl setacl arg length path arg stat zk set acl setacl path pars acl parseacl arg arg length integ pars parseint arg print stat printstat stat cmd equal stat arg length path arg stat zk exist path watch stat keeper except keeperexcept node except nonodeexcept path print stat printstat stat cmd equal listquota arg length path arg string absolut path absolutepath quota quota zookeep quotazookeep path quota limit node limitnod data err println absolut path absolut path absolutepath data zk get data getdata absolut path absolutepath stat stat track statstrack st stat track statstrack string data println output quota path st string tostr data zk get data getdata quota quota zookeep quotazookeep path quota stat node statnod stat println output stat path stat track statstrack string data string tostr keeper except keeperexcept node except nonodeexcept ne err println quota path exist cmd equal setquota arg length string option arg string val arg path arg err println comment part option option val val path path equal option set byte quota creat quota createquota zk path pars parselong val equal option set num quota creat quota createquota zk path 1l integ pars parseint val usag cmd equal delquota arg length option specifi delet quota node thsi node arg length time option string option arg path arg equal option del quota delquota zk path equal option del quota delquota zk path arg length path arg dont option specifi delet quota node del quota delquota zk path cmd equal help usag cmd equal close zk close cmd equal sync arg length path arg zk sync path async callback asynccallback callback voidcallback process result processresult rc string path object ctx println sync return rc cmd equal addauth arg length arg length arg get byte getbyt zk add auth info addauthinfo arg usag watch string get perm string getpermstr perm string builder stringbuild string builder stringbuild perm zoo def zoodef perm creat append perm zoo def zoodef perm delet append perm zoo def zoodef perm read append perm zoo def zoodef perm write append perm zoo def zoodef perm admin append string tostr list acl pars acl parseacl string acl string aclstr list acl acl string acl acl string aclstr split acl arrai list arraylist acl string acl first colon firstcolon index indexof last colon lastcolon last index lastindexof first colon firstcolon last colon lastcolon first colon firstcolon last colon lastcolon err println form scheme id perm acl acl newacl acl acl newacl set id setid id substr first colon firstcolon substr first colon firstcolon last colon lastcolon acl newacl set perm setperm get perm from string getpermfromstr substr last colon lastcolon acl add acl newacl acl 

watcher mywatch watcher process watch event watchedev event get print watch getprintwatch zoo keeper main zookeepermain print messag printmessag watcher zoo keeper main zookeepermain print messag printmessag event string tostr 

storag command line option shell command command option mycommandopt map string string option hash map hashmap string string list string cmd arg cmdarg string command command option mycommandopt option put server localhost 2181 option put timeout 30000 string get option getopt string opt option get opt string get command getcommand command string get cmd argument getcmdargu index cmd arg cmdarg get index get num argument getnumargu cmd arg cmdarg size string get arg arrai getargarrai cmd arg cmdarg arrai toarrai string pars command line contain on more flag befor option command string param arg command line argument pars succeed pars option parseopt string arg list string arg list arglist arrai list aslist arg iter string arg list arglist iter ha next hasnext string opt next opt equal server option put server next opt equal timeout option put timeout next opt equal option put readonli element except nosuchelementexcept err println error argument found option opt opt start startswith command opt cmd arg cmdarg arrai list arraylist string cmd arg cmdarg add command ha next hasnext cmd arg cmdarg add next break string command argument param cmdstring string form cmd arg1 arg2 pars succeed pars command parsecommand string cmdstring string token stringtoken cmd token cmdtoken string token stringtoken cmdstring string arg string cmd token cmdtoken count token counttoken token index tokenindex cmd token cmdtoken ha more token hasmoretoken arg token index tokenindex cmd token cmdtoken next token nexttoken token index tokenindex arg length command arg cmd arg cmdarg arrai list aslist arg 

manag quorum protocol three state server ol li leader elect server elect leader propos leader initi li li follow server synchron leader replic transact li li leader server process request forward follow major follow log request befor accept ol setup datagram socket respond view current leader respons form pre xid myid leader id leader id leader zxid leader zxid pre request current leader consist sole xid xid quorum peer quorump thread quorum stat quorumstat provid logger log logger factori loggerfactori get logger getlogg quorum peer quorump quorum bean quorumbean jmx quorum bean jmxquorumbean local peer bean localpeerbean jmx local peer bean jmxlocalpeerbean leader elect bean leaderelectionbean jmx leader elect bean jmxleaderelectionbean quorum cnx manag quorumcnxmanag qcm zk databas zkdatabas level member quorump us zookeeperserv instanti creat bootup thrown awai truncat messag from leader zk databas zkdatabas zk db zkdb quorum server quorumserv quorum server quorumserv id inet socket address inetsocketaddress addr inet socket address inetsocketaddress elect addr electionaddr id id addr addr elect addr electionaddr elect addr electionaddr quorum server quorumserv id inet socket address inetsocketaddress addr id id addr addr elect addr electionaddr quorum server quorumserv id inet socket address inetsocketaddress addr inet socket address inetsocketaddress elect addr electionaddr learner type learnertyp type id id addr addr elect addr electionaddr elect addr electionaddr type type inet socket address inetsocketaddress addr inet socket address inetsocketaddress elect addr electionaddr id learner type learnertyp type learner type learnertyp particip server state serverst follow lead observ peer particip impli vote instanc consensu elect leader observ isn distinct decid server state serverst move condit chang state after learner type learnertyp particip observ enabl observ identifi gener identifi least quorum cnx manag quorumcnxmanag us follow constant valu gener identifi observ id observ id max valu max valu record leader elect time start fle start fle end fle end fle valu peer particip learner type learnertyp learner type learnertyp learner type learnertyp particip learner type learnertyp get learner type getlearnertyp learner type learnertyp set learner type learnertyp quorum peer quorump peer map peermap set learner type setlearnertyp learner type learnertyp learner type learnertyp quorum peer quorump contain kei containskei myid quorum peer quorump get myid type log error set learner type learnertyp myid quorum peer quorump server make up cluster map quorum server quorumserv quorum peer quorump get quorum size getquorums get vote view getvotingview size quorum verifi quorumverifi implement major quorum verifi quorumverifi quorum config quorumconfig id myid get id quorum peer get id getid myid leader current vote current vote currentvot vote get current vote getcurrentvot current vote currentvot set current vote setcurrentvot vote current vote currentvot run number millisecond tick tick time ticktim minimum number millisecond allow session timeout valu unset us min session timeout minsessiontimeout maximum number millisecond allow session timeout valu unset us max session timeout maxsessiontimeout number tick initi synchron phase init limit initlimit number tick pass send request get acknowledg sync limit synclimit current tick tick deprec releas ha deprec us on udp base version leader elect deprec simpli respond request current leader node request contain xid gener requestor respons ha xid id server id leader zxid leader deprec respond thread responderthread thread respond thread responderthread respond thread responderthread run overrid run 36 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap datagram packet datagrampacket packet datagram packet datagrampacket length run udp socket udpsocket receiv packet packet get length getlength log warn more xid len packet get length getlength respons buffer responsebuff clear respons buffer responsebuff get getint skip xid respons buffer responsebuff put putlong myid vote current get current vote getcurrentvot get peer state getpeerst respons buffer responsebuff put putlong current get id getid respons buffer responsebuff put putlong current get zxid getzxid lead respons buffer responsebuff put putlong myid propos leader propos leader last propos lastpropos respons buffer responsebuff put putlong propos pointer except nullpointerexcept npe happen state transit ignor request follow respons buffer responsebuff put putlong current get id getid respons buffer responsebuff put putlong follow get zxid getzxid pointer except nullpointerexcept npe happen state transit ignor request observ observ keep packet set data setdata udp socket udpsocket send packet packet set length setlength length runtim except runtimeexcept log warn unexpect runtim except respond thread responderthread io except ioexcept log warn unexpect io except respond thread responderthread log warn quorum peer quorump respond thread exit server state serverst state server state serverst set peer state setpeerst server state serverst state newstat state state newstat server state serverst get peer state getpeerst state datagram socket datagramsocket udp socket udpsocket inet socket address inetsocketaddress quorum addr myquorumaddr inet socket address inetsocketaddress get quorum address getquorumaddress quorum addr myquorumaddr elect type electiontyp elect elect alg electionalg server cnxn factori servercnxnfactori cnxn factori cnxnfactori file txn snap log filetxnsnaplog log factori logfactori quorum stat quorumstat quorum stat quorumstat quorum peer quorump quorum peer quorump quorum stat quorumstat quorum stat quorumstat backward compat purpos instanti quorum maj quorummaj quorum peer quorump map quorum server quorumserv quorum peer quorump file data dir datadir file data log dir datalogdir elect type electiontyp myid tick time ticktim init limit initlimit sync limit synclimit server cnxn factori servercnxnfactori cnxn factori cnxnfactori io except ioexcept quorum peer quorump data dir datadir data log dir datalogdir elect type electiontyp myid tick time ticktim init limit initlimit sync limit synclimit cnxn factori cnxnfactori quorum maj quorummaj count particip countparticip quorum peer quorump quorum peer quorump map quorum server quorumserv quorum peer quorump file data dir datadir file data log dir datalogdir elect type electiontyp myid tick time ticktim init limit initlimit sync limit synclimit server cnxn factori servercnxnfactori cnxn factori cnxnfactori quorum verifi quorumverifi quorum config quorumconfig io except ioexcept cnxn factori cnxnfactori cnxn factori cnxnfactori quorum peer quorump quorum peer quorump elect type electiontyp elect type electiontyp myid myid tick time ticktim tick time ticktim init limit initlimit init limit initlimit sync limit synclimit sync limit synclimit log factori logfactori file txn snap log filetxnsnaplog data log dir datalogdir data dir datadir zk db zkdb zk databas zkdatabas log factori logfactori quorum config quorumconfig quorum config quorumconfig quorum maj quorummaj count particip countparticip quorum peer quorump quorum config quorumconfig quorum config quorumconfig quorum stat quorumstat quorum stat quorumstat quorum stat quorumstat overrid start load data base loaddatabas cnxn factori cnxnfactori start start leader elect startleaderelect start load data base loaddatabas zk db zkdb load data base loaddatabas load epoch last process zxid lastprocessedzxid zk db zkdb get data tree getdatatre last process zxid lastprocessedzxid epoch zxid epochofzxid zxid util zxidutil get epoch from zxid getepochfromzxid last process zxid lastprocessedzxid current epoch currentepoch read from file readlongfromfil current epoch filenam current epoch filenam file found except filenotfoundexcept pick reason epoch number happen move code version current epoch currentepoch epoch zxid epochofzxid log info current epoch filenam current epoch filenam found creat reason happen upgrad instal current epoch currentepoch write file writelongtofil current epoch filenam current epoch filenam current epoch currentepoch epoch zxid epochofzxid current epoch currentepoch io except ioexcept current epoch zxid util zxidutil zxid string zxidtostr current epoch currentepoch older last zxid last process zxid lastprocessedzxid accept epoch acceptedepoch read from file readlongfromfil accept epoch filenam accept epoch filenam file found except filenotfoundexcept pick reason epoch number happen move code version accept epoch acceptedepoch epoch zxid epochofzxid log info accept epoch filenam accept epoch filenam found creat reason happen upgrad instal accept epoch acceptedepoch write file writelongtofil current epoch filenam current epoch filenam accept epoch acceptedepoch accept epoch acceptedepoch current epoch currentepoch io except ioexcept current epoch zxid util zxidutil zxid string zxidtostr current epoch currentepoch accept epoch zxid util zxidutil zxid string zxidtostr accept epoch acceptedepoch io except ioexcept log error unabl load databas disk runtim except runtimeexcept unabl run quorum server respond thread responderthread respond stop leader elect stopleaderelect respond run respond interrupt start leader elect startleaderelect current vote currentvot vote myid get last log zxid getlastloggedzxid get current epoch getcurrentepoch io except ioexcept runtim except runtimeexcept runtim except runtimeexcept get messag getmessag set stack trace setstacktrac get stack trace getstacktrac quorum server quorumserv get view getview valu id myid quorum addr myquorumaddr addr quorum addr myquorumaddr runtim except runtimeexcept id myid peer list elect type electiontyp udp socket udpsocket datagram socket datagramsocket quorum addr myquorumaddr get port getport respond respond thread responderthread respond start socket except socketexcept runtim except runtimeexcept elect alg electionalg creat elect algorithm createelectionalgorithm elect type electiontyp count number node map follow param peer number follow map count particip countparticip map quorum server quorumserv peer count quorum server quorumserv peer valu type learner type learnertyp particip count count constructor us exist unit test code default file log provid filelogprovid persist provid quorum peer quorump map quorum server quorumserv quorum peer quorump file snap dir snapdir file log dir logdir client port clientport elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit io except ioexcept quorum peer quorump snap dir snapdir log dir logdir elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit server cnxn factori servercnxnfactori creat factori createfactori inet socket address inetsocketaddress client port clientport quorum maj quorummaj count particip countparticip quorum peer quorump constructor us exist unit test code default file log provid filelogprovid persist provid quorum peer quorump map quorum server quorumserv quorum peer quorump file snap dir snapdir file log dir logdir client port clientport elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit quorum verifi quorumverifi quorum config quorumconfig io except ioexcept quorum peer quorump snap dir snapdir log dir logdir elect alg electionalg myid tick time ticktim init limit initlimit sync limit synclimit server cnxn factori servercnxnfactori creat factori createfactori inet socket address inetsocketaddress client port clientport quorum config quorumconfig return highest zxid host ha highest zxid host get last log zxid getlastloggedzxid zk db zkdb initi isiniti load data base loaddatabas zk db zkdb get data tree last process zxid getdatatreelastprocessedzxid follow follow leader leader observ observ follow make follow makefollow file txn snap log filetxnsnaplog log factori logfactori io except ioexcept follow follow zoo keeper server followerzookeeperserv log factori logfactori zoo keeper server zookeeperserv basic data tree builder basicdatatreebuild zk db zkdb leader make leader makelead file txn snap log filetxnsnaplog log factori logfactori io except ioexcept leader leader zoo keeper server leaderzookeeperserv log factori logfactori zoo keeper server zookeeperserv basic data tree builder basicdatatreebuild zk db zkdb observ make observ makeobserv file txn snap log filetxnsnaplog log factori logfactori io except ioexcept observ observ zoo keeper server observerzookeeperserv log factori logfactori zoo keeper server zookeeperserv basic data tree builder basicdatatreebuild zk db zkdb elect creat elect algorithm createelectionalgorithm elect algorithm electionalgorithm elect le todo us factori elect algorithm electionalgorithm le leader elect leaderelect le auth fast leader elect authfastleaderelect le auth fast leader elect authfastleaderelect qcm quorum cnx manag quorumcnxmanag quorum cnx manag quorumcnxmanag listen listen qcm listen listen listen start le fast leader elect fastleaderelect qcm log error listen initi cnx manag le elect make le strategi makelestrategi log debug initi leader elect protocol get elect type getelectiontyp elect alg electionalg leader elect leaderelect elect alg electionalg set leader setlead leader leader newlead leader leader newlead set follow setfollow follow follow newfollow follow follow newfollow set observ setobserv observ observ newobserv observ observ newobserv zoo keeper server zookeeperserv get activ server getactiveserv leader leader zk follow follow zk observ observ zk overrid run set name setnam quorum peer quorump myid get id getid cnxn factori cnxnfactori get local address getlocaladdress log debug start quorum peer jmx quorum bean jmxquorumbean quorum bean quorumbean bean registri mbeanregistri get instanc getinst jmx quorum bean jmxquorumbean quorum server quorumserv get view getview valu zkm bean info zkmbeaninfo get id getid id jmx local peer bean jmxlocalpeerbean local peer bean localpeerbean bean registri mbeanregistri get instanc getinst jmx quorum bean jmxquorumbean except log warn fail jmx jmx local peer bean jmxlocalpeerbean remot peer bean remotepeerbean bean registri mbeanregistri get instanc getinst jmx quorum bean jmxquorumbean except log warn fail jmx except log warn fail jmx jmx quorum bean jmxquorumbean main loop run get peer state getpeerst log info get getboolean readonlymod enabl log info attempt start read zoo keeper server readonlyzookeeperserv creat read server don start immedi read zoo keeper server readonlyzookeeperserv ro zk rozk read zoo keeper server readonlyzookeeperserv log factori logfactori zoo keeper server zookeeperserv basic data tree builder basicdatatreebuild zk db zkdb start ro zk rozk immedi wait grace period befor decid partit thread us here requir chang elect strategi class unnecessari code coupl thread ro zk mgr rozkmgr thread run lower bound grace period sec sleep math max 2000 tick time ticktim server state serverst equal get peer state getpeerst ro zk rozk startup interrupt except interruptedexcept log info interrupt attempt start read zoo keeper server readonlyzookeeperserv start except log error fail start read zoo keeper server readonlyzookeeperserv ro zk mgr rozkmgr start set current vote setcurrentvot make le strategi makelestrategi leader lookforlead except log warn unexpect except set peer state setpeerst server state serverst thread grace period interrupt wait ro zk mgr rozkmgr interrupt ro zk rozk shutdown set current vote setcurrentvot make le strategi makelestrategi leader lookforlead except log warn unexpect except set peer state setpeerst server state serverst observ log info observ set observ setobserv make observ makeobserv log factori logfactori observ observ leader observelead except log warn unexpect except observ shutdown set observ setobserv set peer state setpeerst server state serverst follow log info follow set follow setfollow make follow makefollow log factori logfactori follow follow leader followlead except log warn unexpect except follow shutdown set follow setfollow set peer state setpeerst server state serverst lead log info lead set leader setlead make leader makelead log factori logfactori leader lead set leader setlead except log warn unexpect except leader leader shutdown forc shutdown set leader setlead set peer state setpeerst server state serverst log warn quorum peer quorump main thread exit bean registri mbeanregistri get instanc getinst unregist unregisteral except log warn fail unregist jmx jmx quorum bean jmxquorumbean jmx local peer bean jmxlocalpeerbean shutdown run leader leader shutdown quorum peer shutdown follow follow shutdown cnxn factori cnxnfactori shutdown udp socket udpsocket udp socket udpsocket close get elect alg getelectionalg interrupt get elect alg getelectionalg shutdown zk db zkdb close io except ioexcept log warn error close log view node current opinion membership entir ensembl map quorum peer quorump quorum server quorumserv get view getview collect unmodifi map unmodifiablemap quorum peer quorump observ contain view node peer type peertyp particip map quorum peer quorump quorum server quorumserv get vote view getvotingview map quorum peer quorump quorum server quorumserv ret hash map hashmap quorum peer quorump quorum server quorumserv map quorum peer quorump quorum server quorumserv view get view getview quorum server quorumserv server view valu server type learner type learnertyp particip ret put server id server ret return observ follow map quorum peer quorump quorum server quorumserv get observ view getobservingview map quorum peer quorump quorum server quorumserv ret hash map hashmap quorum peer quorump quorum server quorumserv map quorum peer quorump quorum server quorumserv view get view getview quorum server quorumserv server view valu server type learner type learnertyp observ ret put server id server ret check node current view membership result check chang dynam membership introduc more view contain viewcontain sid quorum peer quorump contain kei containskei sid us quorum stat quorumstat moment string get quorum peer getquorump list string arrai list arraylist string leader learner handler learnerhandl fh leader get learner getlearn fh get socket getsocket string fh get socket getsocket get remot socket address getremotesocketaddress string tostr leader learner sync islearnersync fh add follow add follow sock get remot socket address getremotesocketaddress string tostr arrai toarrai string string get server state getserverst get peer state getpeerst quorum stat quorumstat provid state state lead quorum stat quorumstat provid lead state lead state follow quorum stat quorumstat provid follow state follow state observ quorum stat quorumstat provid observ state observ state quorum stat quorumstat provid unknown state unknown state get id quorum peer get myid getmyid myid set id quorum peer set myid setmyid myid myid myid get number millisecond tick get tick time getticktim tick time ticktim set number millisecond tick set tick time setticktim tick time ticktim log info tick time ticktim set tick time ticktim tick time ticktim tick time ticktim maximum number connect allow from host ip get max client cnxn host getmaxclientcnxnsperhost server cnxn factori servercnxnfactori fac get cnxn factori getcnxnfactori fac fac get max client cnxn host getmaxclientcnxnsperhost minimum session timeout millisecond get min session timeout getminsessiontimeout min session timeout minsessiontimeout tick time ticktim min session timeout minsessiontimeout minimum session timeout millisecond set min session timeout setminsessiontimeout min log info min session timeout minsessiontimeout set min min session timeout minsessiontimeout min maximum session timeout millisecond get max session timeout getmaxsessiontimeout max session timeout maxsessiontimeout tick time ticktim 20 max session timeout maxsessiontimeout minimum session timeout millisecond set max session timeout setmaxsessiontimeout max log info max session timeout maxsessiontimeout set max max session timeout maxsessiontimeout max get number tick initi synchron phase get init limit getinitlimit init limit initlimit set number tick initi synchron phase set init limit setinitlimit init limit initlimit log info init limit initlimit set init limit initlimit init limit initlimit init limit initlimit get current tick get tick gettick tick quorum verifi quorumverifi object quorum verifi quorumverifi get quorum verifi getquorumverifi quorum config quorumconfig set quorum verifi setquorumverifi quorum verifi quorumverifi quorum config quorumconfig quorum config quorumconfig quorum config quorumconfig get instanc leader elect leaderelect elect get elect alg getelectionalg elect alg electionalg get synclimit get sync limit getsynclimit sync limit synclimit set synclimit set sync limit setsynclimit sync limit synclimit sync limit synclimit sync limit synclimit get elect type get elect type getelectiontyp elect type electiontyp set elect type set elect type setelectiontyp elect type electiontyp elect type electiontyp elect type electiontyp server cnxn factori servercnxnfactori get cnxn factori getcnxnfactori cnxn factori cnxnfactori set cnxn factori setcnxnfactori server cnxn factori servercnxnfactori cnxn factori cnxnfactori cnxn factori cnxnfactori cnxn factori cnxnfactori set quorum peer setquorump map quorum server quorumserv quorum peer quorump quorum peer quorump quorum peer quorump get client port getclientport cnxn factori cnxnfactori get local port getlocalport set client port address setclientportaddress inet socket address inetsocketaddress addr set txn factori settxnfactori file txn snap log filetxnsnaplog factori log factori logfactori factori file txn snap log filetxnsnaplog get txn factori gettxnfactori log factori logfactori set zk databas node param databas set zk databas setzkdatabas zk databas zkdatabas databas zk db zkdb databas set run setrun run run run run isrun run get refer quorum cnx manag quorumcnxmanag quorum cnx manag quorumcnxmanag get quorum cnx manag getquorumcnxmanag qcm read from file readlongfromfil string name io except ioexcept file file file log factori logfactori get snap dir getsnapdir name buffer reader bufferedread br buffer reader bufferedread file reader fileread file string line line br read line readlin pars parselong line number format except numberformatexcept io except ioexcept found line file br close accept epoch acceptedepoch current epoch currentepoch string current epoch filenam current epoch filenam current epoch currentepoch string accept epoch filenam accept epoch filenam accept epoch acceptedepoch write valu disk atom succe except thrown param name file name write param valu valu write name file io except ioexcept file written atom write file writelongtofil string name valu io except ioexcept file file file log factori logfactori get snap dir getsnapdir name atom file output stream atomicfileoutputstream atom file output stream atomicfileoutputstream file buffer writer bufferedwrit bw buffer writer bufferedwrit output stream writer outputstreamwrit abort bw write string tostr valu bw flush flush io except ioexcept log error fail write file file worst here tmp file resourc fd clean up caller notifi io except ioexcept abort abort abort close oper renam fail ll get notifi worst tmp file exist close get current epoch getcurrentepoch io except ioexcept current epoch currentepoch current epoch currentepoch read from file readlongfromfil current epoch filenam current epoch filenam current epoch currentepoch get accept epoch getacceptedepoch io except ioexcept accept epoch acceptedepoch accept epoch acceptedepoch read from file readlongfromfil accept epoch filenam accept epoch filenam accept epoch acceptedepoch set current epoch setcurrentepoch io except ioexcept current epoch currentepoch write file writelongtofil current epoch filenam current epoch filenam set accept epoch setacceptedepoch io except ioexcept accept epoch acceptedepoch write file writelongtofil accept epoch filenam accept epoch filenam 

quorum server quorumserv quorum server quorumserv id inet socket address inetsocketaddress addr inet socket address inetsocketaddress elect addr electionaddr id id addr addr elect addr electionaddr elect addr electionaddr quorum server quorumserv id inet socket address inetsocketaddress addr id id addr addr elect addr electionaddr quorum server quorumserv id inet socket address inetsocketaddress addr inet socket address inetsocketaddress elect addr electionaddr learner type learnertyp type id id addr addr elect addr electionaddr elect addr electionaddr type type inet socket address inetsocketaddress addr inet socket address inetsocketaddress elect addr electionaddr id learner type learnertyp type learner type learnertyp particip 

server state serverst follow lead observ 

peer particip impli vote instanc consensu elect leader observ isn distinct decid server state serverst move condit chang state after learner type learnertyp particip observ 

deprec releas ha deprec us on udp base version leader elect deprec simpli respond request current leader node request contain xid gener requestor respons ha xid id server id leader zxid leader deprec respond thread responderthread thread respond thread responderthread respond thread responderthread run overrid run 36 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap datagram packet datagrampacket packet datagram packet datagrampacket length run udp socket udpsocket receiv packet packet get length getlength log warn more xid len packet get length getlength respons buffer responsebuff clear respons buffer responsebuff get getint skip xid respons buffer responsebuff put putlong myid vote current get current vote getcurrentvot get peer state getpeerst respons buffer responsebuff put putlong current get id getid respons buffer responsebuff put putlong current get zxid getzxid lead respons buffer responsebuff put putlong myid propos leader propos leader last propos lastpropos respons buffer responsebuff put putlong propos pointer except nullpointerexcept npe happen state transit ignor request follow respons buffer responsebuff put putlong current get id getid respons buffer responsebuff put putlong follow get zxid getzxid pointer except nullpointerexcept npe happen state transit ignor request observ observ keep packet set data setdata udp socket udpsocket send packet packet set length setlength length runtim except runtimeexcept log warn unexpect runtim except respond thread responderthread io except ioexcept log warn unexpect io except respond thread responderthread log warn quorum peer quorump respond thread exit 

truncat test truncatetest zk test zktestcas logger log logger factori loggerfactori get logger getlogg truncat test truncatetest file data dir1 datadir1 data dir2 datadir2 data dir3 datadir3 base host port basehostport 12233 befor set up setup io except ioexcept data dir1 datadir1 client base clientbas creat tmp dir createtmpdir data dir2 datadir2 client base clientbas creat tmp dir createtmpdir data dir3 datadir3 client base clientbas creat tmp dir createtmpdir after tear down teardown client base clientbas recurs delet recursivedelet data dir1 datadir1 client base clientbas recurs delet recursivedelet data dir2 datadir2 client base clientbas recurs delet recursivedelet data dir3 datadir3 connect watcher watcher nullwatch watcher overrid process watch event watchedev event connect event get state getstat watcher event keeper state keeperst sync connect syncconnect test test truncat stream reset testtruncationstreamreset except file tmpdir client base clientbas creat tmp dir createtmpdir file txn snap log filetxnsnaplog snaplog file txn snap log filetxnsnaplog tmpdir tmpdir zk databas zkdatabas zkdb zk databas zkdatabas snaplog 100 append zkdb zkdb truncat log truncatelog append zkdb 200 zkdb close verifi truncat subsequ append process correctli file txn log filetxnlog txnlog file txn log filetxnlog file tmpdir version txn iter txniter iter txnlog read txn header txnheader hdr iter get header gethead record txn iter get txn gettxn equal assertequ hdr get zxid getzxid asserttru txn set data txn setdatatxn iter next hdr iter get header gethead txn iter get txn gettxn equal assertequ 200 hdr get zxid getzxid asserttru txn set data txn setdatatxn append zk databas zkdatabas zkdb io except ioexcept txn header txnheader hdr txn header txnheader zoo def zoodef op code opcod set data setdata record txn set data txn setdatatxn foo request req request req hdr hdr req txn txn zkdb append req zkdb commit test test truncat testtrunc io except ioexcept interrupt except interruptedexcept keeper except keeperexcept prime server late 50 txn string host port hostport 127 base host port basehostport server cnxn factori servercnxnfactori factori client base clientbas creat server instanc createnewserverinst data dir1 datadir1 host port hostport 100 client base clientbas shutdown server instanc shutdownserverinst factori host port hostport standalon start epoch quorum start file origfil file file data dir1 datadir1 version snapshot file newfil file file data dir1 datadir1 version snapshot 100000000 origfil renam renameto newfil factori client base clientbas creat server instanc createnewserverinst data dir1 datadir1 host port hostport 100 zoo keeper zookeep zk zoo keeper zookeep host port hostport 15000 watcher nullwatch 50 zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close zk databas zkdatabas zk db zkdb zoo keeper server zookeeperserv zs client base clientbas get server getserv factori zk db zkdb zs get zk databas getzkdatabas factori shutdown zk db zkdb close io except ioexcept log warn error close log tick time ticktim 2000 init limit initlimit sync limit synclimit port1 base host port basehostport port2 base host port basehostport port3 base host port basehostport start up two quorum add 10 txn hash map hashmap quorum server quorumserv peer hash map hashmap quorum server quorumserv peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port1 1000 peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port2 1000 peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port3 1000 quorum peer quorump s2 quorum peer quorump peer data dir2 datadir2 data dir2 datadir2 port2 tick time ticktim init limit initlimit sync limit synclimit s2 start quorum peer quorump s3 quorum peer quorump peer data dir3 datadir3 data dir3 datadir3 port3 tick time ticktim init limit initlimit sync limit synclimit s3 start connect zk zoo keeper zookeep 127 port2 15000 watcher nullwatch connect thread sleep 1000 10 zk creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk close zoo keeper zookeep zk2 zoo keeper zookeep 127 port2 15000 watcher nullwatch zk2 get data getdata stat zk2 get data getdata 10 stat fail error keeper except keeperexcept node except nonodeexcept quorum peer quorump s1 quorum peer quorump peer data dir1 datadir1 data dir1 datadir1 port1 tick time ticktim init limit initlimit sync limit synclimit s1 start connect zoo keeper zookeep zk1 zoo keeper zookeep 127 port1 15000 watcher nullwatch connect thread sleep 1000 zk1 get data getdata stat 10 wont work session expir match zxid 10 wont truncat zxid 10 creation artifact switch xid standalon 11 last entri log xid result 12 first truncat znode check zk1 get data getdata 12 stat fail error keeper except keeperexcept node except nonodeexcept zk1 close quorum base quorumbas shutdown s1 quorum base quorumbas shutdown s2 quorum base quorumbas shutdown s3 

server cnxn factori accessor servercnxnfactoryaccessor zoo keeper server zookeeperserv get zk server getzkserv server cnxn factori servercnxnfactori fac fac zk server zkserver 

xml root element xmlrootel name session session zsession string id string uri session zsession need jersei session zsession string id string uri id id uri uri overrid hash code hashcod id hash code hashcod overrid equal object obj obj session zsession session zsession session zsession obj id equal id overrid string string tostr session zsession id 

abstract base leader follow bean mbean abstract server bean serverbean server mx bean servermxbean zkm bean info zkmbeaninfo date start time starttim date hidden ishidden string get start time getstarttim start time starttim string tostr 

session invalid test sessioninvalidationtest client base clientbas test solut zookeep 1208 verifi oper accept after close session marshal here order forc oper after session close zoo keeper zookeep allow fill pipe oper increas likelyhood server process creat befor request processor finalrequestprocessor remov session from tracker test test creat after close fail testcreateaftercloseshouldfail except 10 arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao open connect boa write writeint 44 len connect request connectrequest req conreq connect request connectrequest 30000 16 req conreq serial boa connect close connect boa write writeint len request header requesthead request header requesthead zoo def zoodef op code opcod close session closesess serial boa header creat ephemer znode boa write writeint 52 len ll fill request header requesthead header request header requesthead op code opcod creat header serial boa header creat request createrequest creat req createreq creat request createrequest foo id open acl unsaf open acl unsaf creat req createreq serial boa request bao close println length bao arrai tobytearrai length string hp host port hostport split socket sock socket hp integ pars parseint hp input stream inputstream result stream resultstream output stream outputstream outstream sock get output stream getoutputstream data bao arrai tobytearrai outstream write data outstream flush result stream resultstream sock get input stream getinputstream 10000 len len result stream resultstream read result println gotlen len result stream resultstream result stream resultstream close sock close zoo keeper zookeep zk creat client createcli equal assertequ zk get children getchildren size zk close 

implement authent provid add kind authent scheme zoo keeper zookeep authent provid authenticationprovid string us repres provid correspond scheme field id scheme provid string get scheme getschem method call client pass authent data scheme auth data authdata directli from authent packet implementor attach id auth info authinfo field cnxn us cnxn send packet back client param cnxn cnxn receiv authent inform param auth data authdata authent data receiv todo keeper except keeperexcept code handl authent handleauthent server cnxn servercnxn cnxn auth data authdata method call id match id express acl allow scheme us applic specif wild card param id id check param acl expr aclexpr express match id id match express match string id string acl expr aclexpr method us check authent done provid us identifi creator node id host ip address gener don identifi client even provid identifi creator authent isauthent valid syntax id param id id valid id form valid isvalid string id 

auth test authtest client base clientbas password test set properti setproperti zookeep digest authent provid digestauthenticationprovid digest superdigest ih sb7 ebr wz8 b9 l71 rj zju inihsb7yeebrwz8b9l71rjzju set properti setproperti zookeep auth provid authprovid org apach zookeep test invalid auth provid invalidauthprovid count down latch countdownlatch auth fail authfail count down latch countdownlatch overrid testabl zoo keeper testablezookeep creat client createcli string hp io except ioexcept interrupt except interruptedexcept watcher mywatch watcher watcher mywatch creat client createcli watcher hp watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail count down countdown process event test test bad auth notifi watch testbadauthnotifieswatch except zoo keeper zookeep zk creat client createcli zk add auth info addauthinfo foo bar get byte getbyt zk get data getdata path1 fail get auth state error keeper except keeperexcept auth fail except authfailedexcept auth fail authfail await connect timeout connect timeout time unit timeunit millisecond fail call watcher zk close test test bad auth send command testbadauththensendothercommand except zoo keeper zookeep zk creat client createcli zk add auth info addauthinfo invalid bar get byte getbyt zk exist foobar zk get data getdata path1 fail get auth state error keeper except keeperexcept auth fail except authfailedexcept auth fail authfail await connect timeout connect timeout time unit timeunit millisecond fail call watcher zk close test test testsup except zoo keeper zookeep zk creat client createcli zk add auth info addauthinfo digest pat pass get byte getbyt zk creat path1 id creator acl creator acl creat mode createmod persist zk close verifi auth zk creat client createcli zk get data getdata path1 fail auth verif keeper except keeperexcept auth except noauthexcept expect zk close verifi bad pass fail zk creat client createcli zk add auth info addauthinfo digest pat pass2 get byte getbyt zk get data getdata path1 fail auth verif keeper except keeperexcept auth except noauthexcept expect zk close verifi bad pass fail zk creat client createcli zk add auth info addauthinfo digest test2 get byte getbyt zk get data getdata path1 fail auth verif keeper except keeperexcept auth except noauthexcept expect zk close verifi correct pass success zk creat client createcli zk add auth info addauthinfo digest test get byte getbyt zk get data getdata path1 zk close test test acl testsuperacl except zoo keeper zookeep zk creat client createcli zk add auth info addauthinfo digest pat pass get byte getbyt zk creat path1 id creator acl creator acl creat mode createmod persist zk close verifi ignor acl zk creat client createcli zk add auth info addauthinfo digest test get byte getbyt zk get data getdata path1 zk set acl setacl path1 id read acl unsaf read acl unsaf zk creat path1 foo id creator acl creator acl creat mode createmod persist zk set acl setacl path1 id open acl unsaf open acl unsaf zk close 

watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail count down countdown process event 

oom test oomtest zk test zktestcas watcher test test oom testoom io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test take to run file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir grab memori easier caus oom condit arrai list arraylist hog arrai list arraylist hog add 1024 1024 memori error outofmemoryerror hog remov client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 port port assign portassign uniqu server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup 127 port connect timeout connect timeout err println oom stage utest prep utestprep port println free runtim get runtim getruntim free memori freememori total runtim get runtim getruntim total memori totalmemori max runtim get runtim getruntim max memori maxmemori err println oom stage 1000 println utest exist utestexist port println free runtim get runtim getruntim free memori freememori total runtim get runtim getruntim total memori totalmemori max runtim get runtim getruntim max memori maxmemori err println oom stage 1000 println utest get utestget port println free runtim get runtim getruntim free memori freememori total runtim get runtim getruntim total memori totalmemori max runtim get runtim getruntim max memori maxmemori err println oom stage 1000 println utest children utestchildren port println free runtim get runtim getruntim free memori freememori total runtim get runtim getruntim total memori totalmemori max runtim get runtim getruntim max memori maxmemori hog get shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 port connect timeout connect timeout utest exist utestexist port io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk zoo keeper zookeep 127 port connect timeout connect timeout 10000 zk exist path doesnt exist doesnt exist zk close utest prep utestprep port io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk zoo keeper zookeep 127 port connect timeout connect timeout 10000 zk creat id open acl unsaf open acl unsaf creat mode createmod persist zk close utest get utestget port io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk zoo keeper zookeep 127 port connect timeout connect timeout 10000 stat stat stat zk get data getdata stat zk close utest children utestchildren port io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk zoo keeper zookeep 127 port connect timeout connect timeout 10000 zk get children getchildren zk close non javadoc org apach zookeep watcher process org apach zookeep proto watcher event watcherev process watch event watchedev event err println event event get type gettyp event get state getstat event get path getpath 

test stand server base test testcas logger log logger factori loggerfactori get logger getlogg base string context path context path zk grizzli port grizzli port 10104 string baseuri string format http localhost grizzli port grizzli port context path context path string zkhostport localhost 22182 client client web resourc webresourc znodesr sessionsr zoo keeper zookeep zk rest main restmain rest befor set up setup except set up setup rest cfg restcfg cfg rest cfg restcfg arrai input stream bytearrayinputstream string format rest port rest endpoint grizzli port grizzli port context path context path zkhostport get byte getbyt rest rest main restmain cfg rest start zk zoo keeper zookeep zkhostport 30000 watcher mywatch client client creat znodesr client resourc baseuri path znode v1 sessionsr client resourc baseuri path session v1 after tear down teardown except tear down teardown client destroi zk close rest stop string creat base node createbaseznod except zoo keeper zookeep zk zoo keeper zookeep zkhostport 30000 watcher mywatch string base znode baseznod zk creat test id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti zk close base znode baseznod 

connect properti dialog us determin set connect zookeep instanc zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog dialog jdialog hash map hashmap string compon jcompon compon param last connect prop lastconnectionprop last connect properti us first conneciton start applic set param connect properti label connectionpropertiestemplateandlabel connect properti label show dialog param zoo inspector panel zooinspectorpanel link zoo inspector panel zooinspectorpanel link dialog zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog properti last connect prop lastconnectionprop pair map string list string map string string connect properti label connectionpropertiestemplateandlabel zoo inspector panel zooinspectorpanel zoo inspector panel zooinspectorpanel map string list string connect properti connectionpropertiestempl connect properti label connectionpropertiestemplateandlabel get kei getkei map string string connect properti label connectionpropertieslabel connect properti label connectionpropertiestemplateandlabel get valu getvalu set layout setlayout border layout borderlayout set titl settitl connect set set modal setmod set setalwaysontop set resiz setresiz panel jpanel option panel jpanel file chooser jfilechoos file chooser filechoos file chooser jfilechoos option set layout setlayout grid bag layout gridbaglayout compon hash map hashmap string compon jcompon entri string list string entri connect properti connectionpropertiestempl entri set entryset row po rowpo label jlabel label label jlabel connect properti label connectionpropertieslabel get entri get kei getkei grid bag constraint gridbagconstraint c1 grid bag constraint gridbagconstraint c1 gridx c1 gridi row po rowpo c1 gridwidth c1 gridheight c1 weightx c1 weighti c1 anchor grid bag constraint gridbagconstraint west c1 fill grid bag constraint gridbagconstraint horizont c1 inset inset c1 ipadx c1 ipadi option add label c1 entri get valu getvalu size text field jtextfield text text field jtextfield grid bag constraint gridbagconstraint c2 grid bag constraint gridbagconstraint c2 gridx c2 gridi row po rowpo c2 gridwidth c2 gridheight c2 weightx c2 weighti c2 anchor grid bag constraint gridbagconstraint west c2 fill grid bag constraint gridbagconstraint horizont c2 inset inset c2 ipadx c2 ipadi option add text c2 compon put entri get kei getkei text entri get valu getvalu size text field jtextfield text text field jtextfield entri get valu getvalu get grid bag constraint gridbagconstraint c2 grid bag constraint gridbagconstraint c2 gridx c2 gridi row po rowpo c2 gridwidth c2 gridheight c2 weightx c2 weighti c2 anchor grid bag constraint gridbagconstraint west c2 fill grid bag constraint gridbagconstraint horizont c2 inset inset c2 ipadx c2 ipadi option add text c2 compon put entri get kei getkei text list string list entri get valu getvalu combo box jcombobox combo combo box jcombobox list arrai toarrai string list size combo set select item setselecteditem list get grid bag constraint gridbagconstraint c2 grid bag constraint gridbagconstraint c2 gridx c2 gridi row po rowpo c2 gridwidth c2 gridheight c2 weightx c2 weighti c2 anchor grid bag constraint gridbagconstraint west c2 fill grid bag constraint gridbagconstraint horizont c2 inset inset c2 ipadx c2 ipadi option add combo c2 compon put entri get kei getkei combo load connect prop loadconnectionprop last connect prop lastconnectionprop panel jpanel button panel buttonspanel panel jpanel button panel buttonspanel set layout setlayout grid bag layout gridbaglayout button jbutton load prop file button loadpropsfilebutton button jbutton load from file load prop file button loadpropsfilebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev result file chooser filechoos show open dialog showopendialog zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog result file chooser jfilechoos approv option approv option file prop file path propsfilepath file chooser filechoos get select file getselectedfil properti prop properti file reader fileread reader file reader fileread prop file path propsfilepath prop load reader load connect prop loadconnectionprop prop reader close io except ioexcept ex logger factori loggerfactori get logger getlogg error error occur load connect properti from file ex option pane joptionpan show messag dialog showmessagedialog zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog error occur load connect properti from file error option pane joptionpan error messag error messag option revalid option repaint grid bag constraint gridbagconstraint c3 grid bag constraint gridbagconstraint c3 gridx c3 gridi c3 gridwidth c3 gridheight c3 weightx c3 weighti c3 anchor grid bag constraint gridbagconstraint southwest c3 fill grid bag constraint gridbagconstraint c3 inset inset c3 ipadx c3 ipadi button panel buttonspanel add load prop file button loadpropsfilebutton c3 button jbutton save prop file button savedefaultpropsfilebutton button jbutton set save prop file button savedefaultpropsfilebutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev properti connect prop connectionprop get connect prop getconnectionprop zoo inspector panel zooinspectorpanel setdefault connect prop setdefaultconnectionprop connect prop connectionprop io except ioexcept ex logger factori loggerfactori get logger getlogg error error occur save connect properti file ex option pane joptionpan show messag dialog showmessagedialog zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog error occur save connect properti file error option pane joptionpan error messag error messag grid bag constraint gridbagconstraint c6 grid bag constraint gridbagconstraint c6 gridx c6 gridi c6 gridwidth c6 gridheight c6 weightx c6 weighti c6 anchor grid bag constraint gridbagconstraint southwest c6 fill grid bag constraint gridbagconstraint c6 inset inset c6 ipadx c6 ipadi button panel buttonspanel add save prop file button savedefaultpropsfilebutton c6 button jbutton button okbutton button jbutton button okbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog dispos properti connect prop connectionprop get connect prop getconnectionprop zoo inspector panel zooinspectorpanel connect connect prop connectionprop grid bag constraint gridbagconstraint c4 grid bag constraint gridbagconstraint c4 gridx c4 gridi c4 gridwidth c4 gridheight c4 weightx c4 weighti c4 anchor grid bag constraint gridbagconstraint south c4 fill grid bag constraint gridbagconstraint horizont c4 inset inset c4 ipadx c4 ipadi button panel buttonspanel add button okbutton c4 button jbutton cancel button cancelbutton button jbutton cancel cancel button cancelbutton add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev zoo inspector connect properti dialog zooinspectorconnectionpropertiesdialog dispos grid bag constraint gridbagconstraint c5 grid bag constraint gridbagconstraint c5 gridx c5 gridi c5 gridwidth c5 gridheight c5 weightx c5 weighti c5 anchor grid bag constraint gridbagconstraint south c5 fill grid bag constraint gridbagconstraint horizont c5 inset inset c5 ipadx c5 ipadi button panel buttonspanel add cancel button cancelbutton c5 add option border layout borderlayout center add button panel buttonspanel border layout borderlayout south pack load connect prop loadconnectionprop properti prop prop object kei prop kei set keyset string prop kei propskei string kei compon contain kei containskei prop kei propskei compon jcompon compon compon get prop kei propskei string valu prop get properti getproperti prop kei propskei compon text field jtextfield text field jtextfield compon set text settext valu compon combo box jcombobox combo box jcombobox compon set select item setselecteditem valu properti get connect prop getconnectionprop properti connect prop connectionprop properti entri string compon jcompon entri compon entri set entryset string valu compon jcompon compon entri get valu getvalu compon text field jtextfield valu text field jtextfield compon get text gettext compon combo box jcombobox valu combo box jcombobox compon get select item getselecteditem string tostr connect prop connectionprop put entri get kei getkei valu connect prop connectionprop 

avail contain noavailablecontain except avail contain noavailablecontain string string string serial version uid serialversionuid 1l 

run test nio client netti server suit suit class suiteclass acl test acltest async op test asyncopstest chroot client test chrootclienttest client test clienttest four letter word test fourletterwordstest data test nulldatatest session test sessiontest watcher test watchertest nio netti suit test nionettysuitetest nio netti suit base nionettysuitebas 

test stand server root test roottest base logger log logger factori loggerfactori get logger getlogg root test roottest test test creat testcreat except log info start get name getnam string path string name roottest creat data foo get byte getbyt web resourc webresourc wr znodesr path path queri param queryparam dataformat utf8 queri param queryparam name name builder builder wr accept media type mediatyp applic json applic json client respons clientrespons cr cr builder post client respons clientrespons data equal assertequ client respons clientrespons statu creat cr get client respons statu getclientresponsestatu path zpath zpath cr get entiti getent path zpath equal assertequ path zpath path name zpath equal assertequ znodesr path path string tostr zpath uri us band method verifi rdata zk get data getdata zpath path stat asserttru string rdata string data arrai equal rdata data 

test stand server run runwith parameter get children test getchildrentest base logger log logger factori loggerfactori get logger getlogg get children test getchildrentest string accept string path client respons clientrespons statu expect statu expectedstatu string expect path expectedpath list string expect children expectedchildren paramet collect object data except string base znode baseznod base creat base node createbaseznod string base znode2 baseznode2 base creat base node createbaseznod string base znode3 baseznode3 base creat base node createbaseznod string base znode4 baseznode4 base creat base node createbaseznod string base znode5 baseznode5 base creat base node createbaseznod string base znode6 baseznode6 base creat base node createbaseznod arrai list aslist object media type mediatyp applic json applic json base znode baseznod abddkdkd client respons clientrespons statu found found media type mediatyp applic xml applic xml base znode baseznod abddkdkd client respons clientrespons statu found found media type mediatyp applic json applic json base znode baseznod client respons clientrespons statu base znode baseznod arrai list aslist string media type mediatyp applic xml applic xml base znode baseznod client respons clientrespons statu base znode baseznod arrai list aslist string media type mediatyp applic json applic json base znode baseznod client respons clientrespons statu base znode baseznod arrai list aslist string c1 media type mediatyp applic xml applic xml base znode4 baseznode4 client respons clientrespons statu base znode4 baseznode4 arrai list aslist string c1 media type mediatyp applic json applic json base znode2 baseznode2 client respons clientrespons statu base znode2 baseznode2 arrai list aslist string c1 c2 media type mediatyp applic xml applic xml base znode5 baseznode5 client respons clientrespons statu base znode5 baseznode5 arrai list aslist string c1 c2 media type mediatyp applic json applic json base znode3 baseznode3 client respons clientrespons statu base znode3 baseznode3 arrai list aslist string c1 c2 c3 c4 media type mediatyp applic xml applic xml base znode6 baseznode6 client respons clientrespons statu base znode6 baseznode6 arrai list aslist string c1 c2 c3 c4 get children test getchildrentest string accept string path client respons clientrespons statu statu string expect path expectedpath list string expect children expectedchildren accept accept path path expect statu expectedstatu statu expect path expectedpath expect path expectedpath expect children expectedchildren expect children expectedchildren test test get children testgetchildren except log info start get name getnam expect children expectedchildren string child expect children expectedchildren zk creat expect path expectedpath child id open acl unsaf open acl unsaf creat mode createmod persist client respons clientrespons cr znodesr path path queri param queryparam view children accept accept get client respons clientrespons equal assertequ expect statu expectedstatu cr get client respons statu getclientresponsestatu expect children expectedchildren accept equal media type mediatyp applic json applic json children json zchildrenjson zchildren cr get entiti getent children json zchildrenjson collect sort expect children expectedchildren collect sort zchildren children equal assertequ expect children expectedchildren zchildren children equal assertequ znodesr path path string tostr zchildren uri equal assertequ znodesr path path string tostr child zchildren child uri child uri accept equal media type mediatyp applic xml applic xml children zchildren zchildren cr get entiti getent children zchildren collect sort expect children expectedchildren collect sort zchildren children equal assertequ expect children expectedchildren zchildren children equal assertequ znodesr path path string tostr zchildren uri equal assertequ znodesr path path string tostr child zchildren child uri child uri fail unknown accept type 

java code gener front end hadoop record java gener javagener arrai list arraylist record jrecord rec list mreclist file output directori outputdirectori creat instanc java gener javagener param name possibl full pathnam file param incl includ file file jfile param record list record defin file param output directori outputdirectori java gener javagener string name arrai list arraylist file jfile incl arrai list arraylist record jrecord record file output directori outputdirectori rec list mreclist record output directori outputdirectori output directori outputdirectori gener java code record method front end record jrecord on file gener record gen code gencod io except ioexcept iter record jrecord rec list mreclist iter ha next hasnext record jrecord rec next rec gen java code genjavacod output directori outputdirectori 

creat txn createtxn record string path data java util list org apach zookeep data acl acl ephemer parent version parentcvers creat txn createtxn creat txn createtxn string path data java util list org apach zookeep data acl acl ephemer parent version parentcvers path path data data acl acl ephemer ephemer parent version parentcvers parent version parentcvers string get path getpath path set path setpath string path get data getdata data set data setdata data java util list org apach zookeep data acl get acl getacl acl set acl setacl java util list org apach zookeep data acl acl get ephemer getephemer ephemer set ephemer setephemer ephemer get parent version getparentcvers parent version parentcvers set parent version setparentcvers parent version parentcvers serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write buffer writebuff data data start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writebool ephemer ephemer write writeint parent version parentcvers parent version parentcvers end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path data read buffer readbuff data index vidx1 start vector startvector acl vidx1 acl java util arrai list arraylist org apach zookeep data acl vidx1 done vidx1 incr org apach zookeep data acl e1 e1 org apach zookeep data acl read record readrecord e1 e1 acl add e1 end vector endvector acl ephemer read readbool ephemer parent version parentcvers read readint parent version parentcvers end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write buffer writebuff data data start vector startvector acl acl acl len1 acl size vidx1 vidx1 len1 vidx1 org apach zookeep data acl e1 org apach zookeep data acl acl get vidx1 write record writerecord e1 e1 end vector endvector acl acl write writebool ephemer ephemer write writeint parent version parentcvers parent version parentcvers end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar creat txn createtxn unimpl equal object peer peer peer peer creat txn createtxn peer peer creat txn createtxn peer creat txn createtxn peer peer ret ret path equal peer path ret ret ret org apach jute util buf equal bufequ data peer data ret ret ret acl equal peer acl ret ret ret ephemer peer ephemer ret ret ret parent version parentcvers peer parent version parentcvers ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret java util arrai string tostr data hash code hashcod result 37 result ret ret acl hash code hashcod result 37 result ret ret ephemer result 37 result ret ret parent version parentcvers result 37 result ret result string signatur creat txn lcreatetxn sb lacl lid ilid ss zi 

client get spawn simpl sy test simplesystest simpl client simplecli instanc watcher async callback asynccallback data callback datacallback string callback stringcallback stat callback statcallback serial version uid serialversionuid 1l string host port hostport zoo keeper zookeep zk index string path mypath data creat ephemer createdephemer configur string param string part param split host port hostport part index integ pars parseint part path mypath simpl simplecas index start zk zoo keeper zookeep host port hostport 15000 zk get data getdata simpl simplecas report client index connect host port hostport except print stack trace printstacktrac stop zk zk close interrupt except interruptedexcept print stack trace printstacktrac process watch event watchedev event event get path getpath event get path getpath equal simpl simplecas zk get data getdata simpl simplecas process result processresult rc string path object ctx data stat stat rc zk get data getdata simpl simplecas data data string content string data content equal die stop creat ephemer createdephemer zk creat path mypath data id open acl unsaf open acl unsaf creat mode createmod ephemer creat ephemer createdephemer zk set data setdata path mypath data process result processresult rc string path object ctx string name rc zk creat path mypath data id open acl unsaf open acl unsaf creat mode createmod ephemer process result processresult rc string path object ctx stat stat rc zk set data setdata path mypath data overrid string string tostr simpl client simplecli get name getnam index host port hostport report set report setreport report 

op andop filter op filterop match log entri logentri entri filter except filterexcept filter op filterop sub op subop match entri 

jlong type jtype creat instanc jlong jlong int64 int64 int64 int64 tolong string get signatur getsignatur string gen java hash code genjavahashcod string fname ret fname fname 32 

set acl respons setaclrespons record org apach zookeep data stat stat set acl respons setaclrespons set acl respons setaclrespons org apach zookeep data stat stat stat stat org apach zookeep data stat get stat getstat stat set stat setstat org apach zookeep data stat stat serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write record writerecord stat stat end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag stat org apach zookeep data stat read record readrecord stat stat end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write record writerecord stat stat end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set acl respons setaclrespons cast except classcastexcept compar differ type record set acl respons setaclrespons peer set acl respons setaclrespons peer peer ret ret stat compar compareto peer stat ret ret ret equal object peer peer peer peer set acl respons setaclrespons peer peer set acl respons setaclrespons peer set acl respons setaclrespons peer peer ret ret stat equal peer stat ret ret ret hash code hashcod result 17 ret ret stat hash code hashcod result 37 result ret result string signatur set acl respons lsetaclrespons stat lstat lllliiiliil 

serial util serializeutil logger log logger factori loggerfactori get logger getlogg serial util serializeutil record deseri txn deserializetxn txn byte txnbyte txn header txnheader hdr io except ioexcept arrai input stream bytearrayinputstream bai arrai input stream bytearrayinputstream txn byte txnbyte input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch bai hdr deseri ia hdr bai mark bai avail record txn hdr get type gettyp op code opcod creat session createsess isn error txn ha format error repres timeout txn creat session txn createsessiontxn op code opcod close session closesess op code opcod creat txn creat txn createtxn op code opcod delet txn delet txn deletetxn op code opcod set data setdata txn set data txn setdatatxn op code opcod set acl setacl txn set acl txn setacltxn op code opcod error txn error txn errortxn op code opcod multi txn multi txn multitxn io except ioexcept unsupport txn type hdr get type gettyp txn txn deseri ia txn eof except eofexcept v0 creat hdr get type gettyp op code opcod creat creat txn createtxn creat creat txn createtxn txn bai reset creat txn v0 createtxnv0 createv0 creat txn v0 createtxnv0 createv0 deseri ia txn cool make v1 parent version parentcvers trigger fixup process process txn processtxn creat set path setpath createv0 get path getpath creat set data setdata createv0 get data getdata creat set acl setacl createv0 get acl getacl creat set ephemer setephemer createv0 get ephemer getephemer creat set parent version setparentcvers txn deseri snapshot deserializesnapshot data tree datatre dt input archiv inputarch ia map integ session io except ioexcept count ia read readint count count id ia read readlong id ia read readint timeout session put id log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask load data loaddata session archiv id timeout count dt deseri ia tree serial snapshot serializesnapshot data tree datatre dt output archiv outputarch oa map integ session io except ioexcept hash map hashmap integ sess snap sesssnap hash map hashmap integ session oa write writeint sess snap sesssnap size count entri integ entri sess snap sesssnap entri set entryset oa write writelong entri get kei getkei valu longvalu id oa write writeint entri get valu getvalu valu intvalu timeout dt serial oa tree 

prep request processor test preprequestprocessortest client base clientbas string hostport 127 port assign portassign uniqu connect timeout connect timeout 3000 test test request testprequest except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 100 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zk session tracker sessiontrack session tracker mysessiontrack prep request processor preprequestprocessor processor prep request processor preprequestprocessor zk request processor myrequestprocessor request foo request 1l op code opcod creat buffer bytebuff alloc processor request prequest foo request processor myrequestprocessor request processor requestprocessor overrid process request processrequest request request equal assertequ request marshal error error txn errortxn code marshallingerror valu intvalu request txn overrid shutdown todo gener method stub session tracker mysessiontrack session tracker sessiontrack overrid add session addsess id todo gener method stub overrid check session checksess session id sessionid object owner session expir except sessionexpiredexcept session move except sessionmovedexcept todo gener method stub overrid creat session createsess session timeout sessiontimeout todo gener method stub overrid dump session dumpsess print writer printwrit pwriter todo gener method stub overrid remov session removesess session id sessionid todo gener method stub overrid set owner setown id object owner session expir except sessionexpiredexcept todo gener method stub overrid shutdown todo gener method stub overrid touch session touchsess session id sessionid session timeout sessiontimeout todo gener method stub overrid set session close setsessionclos session id sessionid todo gener method stub 

request processor myrequestprocessor request processor requestprocessor overrid process request processrequest request request equal assertequ request marshal error error txn errortxn code marshallingerror valu intvalu request txn overrid shutdown todo gener method stub 

session tracker mysessiontrack session tracker sessiontrack overrid add session addsess id todo gener method stub overrid check session checksess session id sessionid object owner session expir except sessionexpiredexcept session move except sessionmovedexcept todo gener method stub overrid creat session createsess session timeout sessiontimeout todo gener method stub overrid dump session dumpsess print writer printwrit pwriter todo gener method stub overrid remov session removesess session id sessionid todo gener method stub overrid set owner setown id object owner session expir except sessionexpiredexcept todo gener method stub overrid shutdown todo gener method stub overrid touch session touchsess session id sessionid session timeout sessiontimeout todo gener method stub overrid set session close setsessionclos session id sessionid todo gener method stub 

recoveri test recoverytest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg recoveri test recoverytest string hostport 127 port assign portassign uniqu count down latch countdownlatch start signal startsign verifi server down client reconnect automat after server restart note requir server restart connect timeout period note client latch us elimin chanc spurriou connectionloss except read op specif sync oper except server down recogn client oper oper occur after server down befor client recogn server down ping op connectionloss test test recoveri testrecoveri except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 old snap count oldsnapcount sync request processor syncrequestprocessor get snap count getsnapcount sync request processor syncrequestprocessor set snap count setsnapcount 1000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk log info start up server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout start signal startsign count down latch countdownlatch zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout start signal startsign await connect timeout connect timeout time unit timeunit millisecond asserttru count start signal startsign get count getcount string path log info start creat node 10 path zk creat path path get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist 10 string subpath path zk creat subpath subpath get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist 20 string subsubpath subpath zk creat subsubpath subsubpath get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 server cnxn factori servercnxnfactori creat factori createfactori port start signal startsign count down latch countdownlatch startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout start signal startsign await connect timeout connect timeout time unit timeunit millisecond asserttru count start signal startsign get count getcount stat stat stat 10 path log info check path equal assertequ string zk get data getdata path stat path 10 string subpath path equal assertequ string zk get data getdata subpath stat subpath 20 string subsubpath subpath equal assertequ string zk get data getdata subsubpath stat subsubpath shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport client base clientbas connect timeout connect timeout zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 server cnxn factori servercnxnfactori creat factori createfactori port start signal startsign count down latch countdownlatch startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout start signal startsign await connect timeout connect timeout time unit timeunit millisecond asserttru count start signal startsign get count getcount stat stat log info check 10 path equal assertequ string zk get data getdata path stat path 10 string subpath path equal assertequ string zk get data getdata subpath stat subpath 20 string subsubpath subpath equal assertequ string zk get data getdata subsubpath stat subsubpath zk close shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout sync request processor syncrequestprocessor set snap count setsnapcount old snap count oldsnapcount non javadoc org apach zookeep watcher process org apach zookeep watcher event watcherev process watch event watchedev event log info event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount start signal startsign count down countdown 

except thrown pars error encount explicitli creat object except type call method gener pars except generateparseexcept gener parser modifi custom error report mechan retain field pars except parseexcept except constructor us method gener pars except generateparseexcept gener parser call constructor gener object type field current token currenttoken expect token sequenc expectedtokensequ token imag tokenimag set flag special constructor specialconstructor set constructor us creat object constructor call empti string forc string tostr method parent throwabl print error messag form pars except parseexcept result get messag getmessag pars except parseexcept token current token val currenttokenv expect token sequenc val expectedtokensequencesv string token imag val tokenimagev special constructor specialconstructor current token currenttoken current token val currenttokenv expect token sequenc expectedtokensequ expect token sequenc val expectedtokensequencesv token imag tokenimag token imag val tokenimagev follow constructor us purpos construct except manner make except behav normal document throwabl field error token errortoken expect token sequenc expectedtokensequ token imag tokenimag contain relev inform java cc javacc gener code us constructor pars except parseexcept special constructor specialconstructor pars except parseexcept string messag messag special constructor specialconstructor variabl determin constructor us creat object affect semant get messag getmessag method special constructor specialconstructor last token ha consum successfulli object ha creat pars error token followng token first error token token current token currenttoken entri arrai arrai integ arrai integ repres sequenc token ordin valu expect point pars expect token sequenc expectedtokensequ refer token imag tokenimag arrai gener parser pars error occur arrai defin gener constant string token imag tokenimag method ha standard behavior object ha creat standard constructor us current token currenttoken expect token sequenc expectedtokensequ gener pars error messag return object ha creat pars error get thrown from parser method call print stack trace correct error messag get displai string get messag getmessag special constructor specialconstructor get messag getmessag string buffer stringbuff expect string buffer stringbuff max size maxsiz expect token sequenc expectedtokensequ length max size maxsiz expect token sequenc expectedtokensequ length max size maxsiz expect token sequenc expectedtokensequ length expect token sequenc expectedtokensequ length expect append token imag tokenimag expect token sequenc expectedtokensequ append expect token sequenc expectedtokensequ expect token sequenc expectedtokensequ length expect append expect append eol append string retval encount token tok current token currenttoken next max size maxsiz retval tok kind retval token imag tokenimag retval add escap add escap tok imag tok tok next retval line current token currenttoken next begin line beginlin column current token currenttoken next begin column begincolumn retval eol expect token sequenc expectedtokensequ length retval expect eol retval expect on eol retval expect string tostr retval end line string machin string eol get properti getproperti line separ us convert raw charact escap version raw version us part ascii string liter string add escap add escap string str string buffer stringbuff retval string buffer stringbuff ch str length str charat retval append retval append retval append retval append retval append retval append retval append retval append ch str charat x20 0x20 ch x7e 0x7e string 0000 integ string tostr ch 16 retval append substr length length retval append ch retval string tostr 

ignor test base sy test basesystest test testcas fake base port fakebaseport 33222 string zk host port zkhostport string prefix sy test systest zoo keeper zookeep zk zk host port zkhostport get properti getproperti sy test systest zk host port zkhostport inet address inetaddress get local host getlocalhost get canon host name getcanonicalhostnam 2181 unknown host except unknownhostexcept print stack trace printstacktrac instanc manag instancemanag im overrid set up setup except fake machin fakemachin string local host localhost inet address inetaddress get local host getlocalhost get canon host name getcanonicalhostnam zk zoo keeper zookeep zk host port zkhostport 15000 watcher process watch event watchedev im instanc manag instancemanag zk prefix overrid tear down teardown except im close server count servercount server count defaultservercount client count clientcount client count defaultclientcount server count defaultservercount client count defaultclientcount server count defaultservercount integ pars parseint get properti getproperti simpl sy test simplesystest server count defaultservercount integ string tostr server count defaultservercount client count defaultclientcount integ pars parseint get properti getproperti simpl sy test simplesystest client count defaultclientcount integ string tostr client count defaultclientcount string server host port serverhostport string quorum host port quorumhostport string get host port gethostport server host port serverhostport get server count getservercount server count servercount get client count getclientcount client count clientcount start server startserv io except ioexcept server count servercount start server startserv stop server stopserv io except ioexcept server count servercount stop server stopserv start client startclient io except ioexcept client count clientcount start client startclient stop client stopclient io except ioexcept client count clientcount stop client stopclient fake machin fakemachin get properti getproperti base sy test basesystest fake machin fakemachin equal ye configur server configureserv count except server count servercount count fake machin fakemachin fake configur server fakeconfigureserv count distribut configur server distributedconfigureserv count distribut configur server distributedconfigureserv count io except ioexcept string builder stringbuild sb client sbclient string builder stringbuild string builder stringbuild sb server sbserver string builder stringbuild count string quorum peer instanc quorumpeerinst creat server createserv im sb client sbclient append sb server sbserver append sb client sbclient append sb server sbserver append server host port serverhostport sb client sbclient string tostr quorum host port quorumhostport sb server sbserver string tostr except io except ioexcept ioe io except ioexcept get messag getmessag ioe set stack trace setstacktrac get stack trace getstacktrac ioe quorum peer quorump qp file qp dir qpsdir hash map hashmap quorum server quorumserv peer fake configur server fakeconfigureserv count io except ioexcept peer hash map hashmap quorum server quorumserv qp quorum peer quorump count qp dir qpsdir file count count peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 fake base port fakebaseport string builder stringbuild sb string builder stringbuild count qp dir qpsdir file creat temp file createtempfil sy test systest tmp qp dir qpsdir delet qp dir qpsdir mkdir port fake base port fakebaseport 10 sb length sb append sb append localhost sb append port server host port serverhostport sb string tostr tick time ticktim 2000 init limit initlimit sync limit synclimit start server startserv index io except ioexcept port fake base port fakebaseport 10 index fake machin fakemachin qp index quorum peer quorump peer qp dir qpsdir index qp dir qpsdir index port index tick time ticktim init limit initlimit sync limit synclimit qp index start quorum peer instanc quorumpeerinst start instanc startinst im quorum host port quorumhostport index except io except ioexcept ioe io except ioexcept get getclass get name getnam get messag getmessag ioe set stack trace setstacktrac get stack trace getstacktrac ioe stop server stopserv index io except ioexcept fake machin fakemachin qp index shutdown quorum peer instanc quorumpeerinst stop instanc stopinst im index except io except ioexcept ioe io except ioexcept get messag getmessag ioe set stack trace setstacktrac get stack trace getstacktrac ioe configur client configurecli count instanc clazz string param except client count clientcount count fake machin fakemachin fake configur client fakeconfigurecli count clazz param distribut configur client distributedconfigurecli count clazz param instanc clazz string param distribut configur client distributedconfigurecli count instanc clazz string param io except ioexcept clazz clazz param param instanc fake base client fakebasecli fake configur client fakeconfigurecli count instanc clazz string param io except ioexcept found except classnotfoundexcept fake base client fakebasecli instanc count count fake base client fakebasecli clazz instanc newinst instanti except instantiationexcept print stack trace printstacktrac illeg access except illegalaccessexcept print stack trace printstacktrac fake base client fakebasecli configur param start client startclient index io except ioexcept fake machin fakemachin fake start client fakestartcli index distribut start client distributedstartcli index distribut start client distributedstartcli index io except ioexcept im assign instanc assigninst client index clazz index param except io except ioexcept get messag getmessag fake start client fakestartcli index fake base client fakebasecli index start stop client stopclient index io except ioexcept fake machin fakemachin fake stop client fakestopcli index distribut stop client distributedstopcli index distribut stop client distributedstopcli index io except ioexcept im remov instanc removeinst client index except io except ioexcept get messag getmessag fake stop client fakestopcli index fake base client fakebasecli index stop main string arg unit core junitcor main arg 

code origin from hdf similarli name file bug fix histori io util ioutil close stream ignor link io except ioexcept call clean up from except handler param stream stream close close stream closestream closeabl stream cleanup stream close closeabl object ignor link io except ioexcept pointer us cleanup except handler param log log record problem debug level param closeabl object close cleanup logger log closeabl closeabl closeabl closeabl close io except ioexcept log log warn except close copi from on stream param input strem inputstrem read from param output stream outputstream write param buff size buffsiz size buffer param close close input stream inputstream output stream outputstream end stream close claus copi byte copybyt input stream inputstream output stream outputstream buff size buffsiz close io except ioexcept copi byte copybyt buff size buffsiz close close close close close stream closestream close stream closestream copi from on stream param input strem inputstrem read from param output stream outputstream write param buff size buffsiz size buffer copi byte copybyt input stream inputstream output stream outputstream buff size buffsiz io except ioexcept print stream printstream ps print stream printstream print stream printstream buf buff size buffsiz byte read bytesread read buf byte read bytesread write buf byte read bytesread ps ps check error checkerror io except ioexcept unabl write output stream byte read bytesread read buf 

maintain memori databas zookeep server state includ session datatre commit log boot up after read log snapshot from disk zk databas zkdatabas logger log logger factori loggerfactori get logger getlogg zk databas zkdatabas make clear care member data tree datatre data tree datatre concurr hash map concurrenthashmap integ session timeout sessionswithtimeout file txn snap log filetxnsnaplog snap log snaplog min commit log mincommittedlog max commit log maxcommittedlog commit log count commitlogcount 500 commit log buffer commitlogbuff 700 link list linkedlist propos commit log committedlog link list linkedlist propos reentrant read write lock reentrantreadwritelock log lock loglock reentrant read write lock reentrantreadwritelock initi filetxnsnaplog zk databas map on on relationship filetxnsnaplog zkdatabas param snap log snaplog file txn snap log filetxnsnaplog map zkdatabas zk databas zkdatabas file txn snap log filetxnsnaplog snap log snaplog data tree datatre data tree datatre session timeout sessionswithtimeout concurr hash map concurrenthashmap integ snap log snaplog snap log snaplog check zk databas ha initi zk databas initi initi isiniti initi clear zkdatabas note develop care clear method clear data structur zkdatabas clear min commit log mincommittedlog max commit log maxcommittedlog safe creat datatre data tree datatre data tree datatre session timeout sessionswithtimeout clear write lock writelock lock log lock loglock write lock writelock lock lock commit log committedlog clear lock unlock initi datatre zkdatabas datatre zkdatabas data tree datatre get data tree getdatatre data tree datatre commit log zk databas commit log zkdatabas getmax commit log getmaxcommittedlog max commit log maxcommittedlog minimum commit transact log avail memori minimum commit transact log avail memori getmin commit log getmincommittedlog min commit log mincommittedlog get lock control commit log committedlog get pointer commit log committedlog us lock acquir read lock befor call get commit log getcommittedlog lock control commit log reentrant read write lock reentrantreadwritelock get log lock getloglock log lock loglock link list linkedlist propos get commit log getcommittedlog read lock readlock rl log lock loglock read lock readlock make copi thread isn hold lock log lock loglock get read hold count getreadholdcount rl lock link list linkedlist propos commit log committedlog rl unlock commit log committedlog get last process zxid from datatre last process zxid datatre get data tree last process zxid getdatatreelastprocessedzxid data tree datatre last process zxid lastprocessedzxid set datatre initi param set datatre initi set data tree init setdatatreeinit data tree datatre initi session datatre data tree session collect get session getsess data tree datatre get session getsess get session timeout hashmap session timeout concurr hash map concurrenthashmap integ get session time out getsessionwithtimeout session timeout sessionswithtimeout load databas from disk memori add transact committedlog memori last valid zxid disk io except ioexcept load data base loaddatabas io except ioexcept plai back listen playbacklisten listen plai back listen playbacklisten txn load ontxnload txn header txnheader hdr record txn request request hdr get cxid getcxid hdr get type gettyp txn txn hdr hdr zxid hdr get zxid getzxid add commit propos addcommittedpropos zxid snap log snaplog restor data tree datatre session timeout sessionswithtimeout listen initi zxid maintain list last commit log committedlog commit request us fast follow synchron param request commit request add commit propos addcommittedpropos request request write lock writelock wl log lock loglock write lock writelock wl lock commit log committedlog size commit log count commitlogcount commit log committedlog remov first removefirst min commit log mincommittedlog commit log committedlog get first getfirst packet get zxid getzxid commit log committedlog size min commit log mincommittedlog request zxid max commit log maxcommittedlog request zxid arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao request hdr serial boa hdr request txn request txn serial boa txn bao close io except ioexcept log error imposs quorum packet quorumpacket pp quorum packet quorumpacket leader propos request zxid bao arrai tobytearrai propos propos packet pp request request commit log committedlog add max commit log maxcommittedlog packet get zxid getzxid wl unlock remov cnxn from datatre param cnxn cnxn remov from datatre remov cnxn removecnxn server cnxn servercnxn cnxn data tree datatre remov cnxn removecnxn cnxn kill session datatre param session id sessionid session id kill param zxid zxid kill session transact kill session killsess session id sessionid zxid data tree datatre kill session killsess session id sessionid zxid write text dump ephemer datatre param pwriter output write dump ephemer dumpephemer print writer printwrit pwriter data tree datatre dump ephemer dumpephemer pwriter node count datatre node count datatre get node count getnodecount data tree datatre get node count getnodecount path ephemer session id param session id sessionid session id path match path session id hash set hashset string get ephemer getephemer session id sessionid data tree datatre get ephemer getephemer session id sessionid last process zxid datatre param zxid last process zxid datatre setlast process zxid setlastprocessedzxid zxid data tree datatre last process zxid lastprocessedzxid zxid process txn data param hdr txnheader txn param txn transact process result process transact datatre zkdatabas process txn result processtxnresult process txn processtxn txn header txnheader hdr record txn data tree datatre process txn processtxn hdr txn stat path param path path stat done param server cnxn servercnxn servercnxn attach request stat node keeper except keeperexcept node except nonodeexcept stat stat node statnod string path server cnxn servercnxn server cnxn servercnxn keeper except keeperexcept node except nonodeexcept data tree datatre stat node statnod path server cnxn servercnxn get datanod path param path path lookup datanod get path data node datanod get node getnod string path data tree datatre get node getnod path convert from acl entri param acll get acl acl entri list acl convert convertlong acll data tree datatre convert convertlong acll get data stat path param path path queri param stat stat path param watcher watcher function keeper except keeperexcept node except nonodeexcept get data getdata string path stat stat watcher watcher keeper except keeperexcept node except nonodeexcept data tree datatre get data getdata path stat watcher set watch datatre param rel zxid relativezxid rel zxid client ha param data watch datawatch data watch client reset param exist watch existwatch exist watch client reset param child watch childwatch child watch client reset param watcher watcher function set watch setwatch rel zxid relativezxid list string data watch datawatch list string exist watch existwatch list string child watch childwatch watcher watcher data tree datatre set watch setwatch rel zxid relativezxid data watch datawatch exist watch existwatch child watch childwatch watcher get acl path param path path queri acl param stat stat node acl list path node except nonodeexcept list acl get acl getacl string path stat stat node except nonodeexcept data tree datatre get acl getacl path stat get children list path param path path node param stat stat node param watcher watcher function path list children path keeper except keeperexcept node except nonodeexcept list string get children getchildren string path stat stat watcher watcher keeper except keeperexcept node except nonodeexcept data tree datatre get children getchildren path stat watcher check path special param path input path path special special path isspecialpath string path data tree datatre special path isspecialpath path get acl size datatre acl size datatre get acl size getacls data tree datatre kei map longkeymap size truncat zk databas zkdatabas specifi zxid param zxid zxid truncat zk databas truncat success io except ioexcept truncat log truncatelog zxid io except ioexcept clear truncat log truncat snap log snaplog truncat log truncatelog zxid truncat load data base loaddatabas deseri snapshot from input archiv param ia input archiv deseri from io except ioexcept deseri snapshot deserializesnapshot input archiv inputarch ia io except ioexcept clear serial util serializeutil deseri snapshot deserializesnapshot get data tree getdatatre ia get session time out getsessionwithtimeout initi serial snapshot param oa output archiv snapshot serial io except ioexcept interrupt except interruptedexcept serial snapshot serializesnapshot output archiv outputarch oa io except ioexcept interrupt except interruptedexcept serial util serializeutil serial snapshot serializesnapshot get data tree getdatatre oa get session time out getsessionwithtimeout append underli transact log param si request append append succesful append request si io except ioexcept snap log snaplog append si roll underli log roll log rolllog io except ioexcept snap log snaplog roll log rolllog commit underli transact log io except ioexcept commit io except ioexcept snap log snaplog commit close databas free resourc io except ioexcept close io except ioexcept snap log snaplog close 

chroot async test chrootasynctest async op test asyncopstest logger log logger factori loggerfactori get logger getlogg chroot async test chrootasynctest overrid set up setup except string hp host port hostport host port hostport host port hostport chrootasynctest set up setup log info creat client get test name gettestnam zoo keeper zookeep zk creat client createcli hp zk creat chrootasynctest id open acl unsaf open acl unsaf creat mode createmod persist zk close 

xor op xorop filter op filterop match log entri logentri entri filter except filterexcept count filter op filterop sub op subop match entri count count count 

sync call test synccalltest client base clientbas children callback childrencallback children2 callback children2callback string callback stringcallback callback voidcallback count down latch countdownlatch op count opscount list integ result link list linkedlist integ integ limit 100 100 100 test test sync testsync except log info start zk date string tostr op count opscount count down latch countdownlatch limit zoo keeper zookeep zk creat client createcli log info begin test date string tostr 100 zk creat test id open acl unsaf open acl unsaf creat mode createmod persist result zk sync test result 100 zk delet test result 100 zk get children getchildren watcher nullwatch children callback childrencallback result 100 zk get children getchildren watcher nullwatch children2 callback children2callback result log info submit oper date string tostr op count opscount await 10000 time unit timeunit millisecond fail haven receiv confirm op count opscount get count getcount limit equal assertequ result get io except ioexcept println string tostr suppress warn suppresswarn uncheck process result processresult rc string path object ctx list string children list integ ctx add rc op count opscount count down countdown suppress warn suppresswarn uncheck process result processresult rc string path object ctx list string children stat stat list integ ctx add rc op count opscount count down countdown suppress warn suppresswarn uncheck process result processresult rc string path object ctx string name list integ ctx add rc op count opscount count down countdown suppress warn suppresswarn uncheck process result processresult rc string path object ctx list integ ctx add rc op count opscount count down countdown 

async test asynctest zk test zktestcas string callback stringcallback callback voidcallback data callback datacallback logger log logger factori loggerfactori get logger getlogg async test asynctest quorum base quorumbas qb quorum base quorumbas befor set up setup except qb set up setup restart except jmx env jmxenv set up setup qb start server startserv after tear down teardown except log info test client shut down qb tear down teardown countdown watcher countdownwatch watcher count down latch countdownlatch client connect clientconnect count down latch countdownlatch process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect client connect clientconnect count down countdown zoo keeper zookeep creat client createcli io except ioexcept interrupt except interruptedexcept creat client createcli qb host port hostport zoo keeper zookeep creat client createcli string hp io except ioexcept interrupt except interruptedexcept countdown watcher countdownwatch watcher countdown watcher countdownwatch zoo keeper zookeep zk zoo keeper zookeep hp connect timeout connect timeout watcher watcher client connect clientconnect await connect timeout connect timeout time unit timeunit millisecond fail unabl connect server zk link list linkedlist integ result link list linkedlist integ test test async testasync io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk zk creat client createcli zk add auth info addauthinfo digest ben passwd get byte getbyt zk creat ben id read acl unsaf read acl unsaf creat mode createmod persist result zk creat ben id creator acl creator acl creat mode createmod persist result zk delet ben result zk creat ben2 id creator acl creator acl creat mode createmod persist result zk get data getdata ben2 result result result size result wait equal assertequ result get equal assertequ code noauth code get result get equal assertequ result get equal assertequ result get equal assertequ result get zk close zk creat client createcli zk add auth info addauthinfo digest ben passwd2 get byte getbyt zk get data getdata ben2 stat fail receiv permiss error keeper except keeperexcept equal assertequ code noauth code zk close zk creat client createcli zk add auth info addauthinfo digest ben passwd get byte getbyt zk get data getdata ben2 stat zk close suppress warn suppresswarn uncheck process result processresult rc string path object ctx string name ctx link list linkedlist integ ctx add rc ctx notifi notifyal suppress warn suppresswarn uncheck process result processresult rc string path object ctx ctx link list linkedlist integ ctx add rc ctx notifi notifyal suppress warn suppresswarn uncheck process result processresult rc string path object ctx data stat stat ctx link list linkedlist integ ctx add rc ctx notifi notifyal 

countdown watcher countdownwatch watcher count down latch countdownlatch client connect clientconnect count down latch countdownlatch process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect client connect clientconnect count down countdown 

listen chang configur node viewer shown node viewer chang listen nodeviewerschangelisten call node viewer configur chang node viewer ad remov order node viewer chang param viewer newview link list link zoo inspector node viewer zooinspectornodeview shown node viewer chang nodeviewerschang list zoo inspector node viewer zooinspectornodeview viewer newview 

stat persist v1 statpersistedv1 record czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown stat persist v1 statpersistedv1 stat persist v1 statpersistedv1 czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown czxid czxid mzxid mzxid ctime ctime mtime mtime version version cversion cversion avers avers ephemer owner ephemeralown ephemer owner ephemeralown get czxid getczxid czxid set czxid setczxid czxid get mzxid getmzxid mzxid set mzxid setmzxid mzxid get ctime getctim ctime set ctime setctim ctime get mtime getmtim mtime set mtime setmtim mtime get version getvers version set version setvers version get cversion getcvers cversion set cversion setcvers cversion get avers getavers avers set avers setavers avers get ephemer owner getephemeralown ephemer owner ephemeralown set ephemer owner setephemeralown ephemer owner ephemeralown serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writelong czxid czxid write writelong mzxid mzxid write writelong ctime ctime write writelong mtime mtime write writeint version version write writeint cversion cversion write writeint avers avers write writelong ephemer owner ephemeralown ephemer owner ephemeralown end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag czxid read readlong czxid mzxid read readlong mzxid ctime read readlong ctime mtime read readlong mtime version read readint version cversion read readint cversion avers read readint avers ephemer owner ephemeralown read readlong ephemer owner ephemeralown end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writelong czxid czxid write writelong mzxid mzxid write writelong ctime ctime write writelong mtime mtime write writeint version version write writeint cversion cversion write writeint avers avers write writelong ephemer owner ephemeralown ephemer owner ephemeralown end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer stat persist v1 statpersistedv1 cast except classcastexcept compar differ type record stat persist v1 statpersistedv1 peer stat persist v1 statpersistedv1 peer peer ret ret czxid peer czxid czxid peer czxid ret ret ret mzxid peer mzxid mzxid peer mzxid ret ret ret ctime peer ctime ctime peer ctime ret ret ret mtime peer mtime mtime peer mtime ret ret ret version peer version version peer version ret ret ret cversion peer cversion cversion peer cversion ret ret ret avers peer avers avers peer avers ret ret ret ephemer owner ephemeralown peer ephemer owner ephemeralown ephemer owner ephemeralown peer ephemer owner ephemeralown ret ret ret equal object peer peer peer peer stat persist v1 statpersistedv1 peer peer stat persist v1 statpersistedv1 peer stat persist v1 statpersistedv1 peer peer ret ret czxid peer czxid ret ret ret mzxid peer mzxid ret ret ret ctime peer ctime ret ret ret mtime peer mtime ret ret ret version peer version ret ret ret cversion peer cversion ret ret ret avers peer avers ret ret ret ephemer owner ephemeralown peer ephemer owner ephemeralown ret ret ret hash code hashcod result 17 ret ret czxid czxid 32 result 37 result ret ret mzxid mzxid 32 result 37 result ret ret ctime ctime 32 result 37 result ret ret mtime mtime 32 result 37 result ret ret version result 37 result ret ret cversion result 37 result ret ret avers result 37 result ret ret ephemer owner ephemeralown ephemer owner ephemeralown 32 result 37 result ret result string signatur stat persist v1 lstatpersistedv1 lllliiil 

netti server cnxn factori nettyservercnxnfactori server cnxn factori servercnxnfactori logger log logger factori loggerfactori get logger getlogg netti server cnxn factori nettyservercnxnfactori server bootstrap serverbootstrap bootstrap channel parent channel parentchannel channel group channelgroup channel allchannel channel group defaultchannelgroup zk server cnxn zkservercnxn hash map hashmap inet address inetaddress set netti server cnxn nettyservercnxn ip map ipmap hash map hashmap inet address inetaddress set netti server cnxn nettyservercnxn inet socket address inetsocketaddress local address localaddress max client cnxn maxclientcnxn 60 inner extend simpl channel handler simplechannelhandl netti server cnxn factori nettyservercnxnfactori server cnxn factori servercnxnfactori make inner get access member variabl method sharabl cnxn channel handler cnxnchannelhandl simpl channel handler simplechannelhandl overrid channel close channelclos channel handler context channelhandlercontext ctx channel state event channelstateev except log trace enabl istraceen log trace channel close channel allchannel remov ctx get channel getchannel overrid channel connect channelconnect channel handler context channelhandlercontext ctx channel state event channelstateev except log trace enabl istraceen log trace channel connect channel allchannel add ctx get channel getchannel netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get channel getchannel zk server zkserver netti server cnxn factori nettyservercnxnfactori ctx set attach setattach cnxn add cnxn addcnxn cnxn overrid channel disconnect channeldisconnect channel handler context channelhandlercontext ctx channel state event channelstateev except log trace enabl istraceen log trace channel disconnect netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get attach getattach cnxn log trace enabl istraceen log trace channel disconnect caus close cnxn close overrid except caught exceptioncaught channel handler context channelhandlercontext ctx except event exceptionev except log warn except caught get caus getcaus netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get attach getattach cnxn log debug enabl isdebugen log debug close cnxn cnxn close overrid messag receiv messagereceiv channel handler context channelhandlercontext ctx messag event messageev except log trace enabl istraceen log trace messag receiv call get messag getmessag log debug enabl isdebugen log debug messag string tostr from ctx get channel getchannel netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get attach getattach cnxn process messag processmessag cnxn except ex log error unexpect except receiv ex ex process messag processmessag messag event messageev netti server cnxn nettyservercnxn cnxn log debug enabl isdebugen log debug hex string tohexstr cnxn session id sessionid queu buffer queuedbuff cnxn queu buffer queuedbuff netti server cnxn nettyservercnxn resum messag event resumemessageev log debug receiv resum messag event resumemessageev cnxn queu buffer queuedbuff log trace enabl istraceen log trace process queue hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff cnxn receiv messag receivemessag cnxn queu buffer queuedbuff cnxn queu buffer queuedbuff readabl log debug process queue byte remain cnxn queu buffer queuedbuff log debug process queue byte remain log debug queue empti cnxn channel set readabl setread channel buffer channelbuff buf channel buffer channelbuff get messag getmessag log trace enabl istraceen log trace hex string tohexstr cnxn session id sessionid buf 0x channel buffer channelbuff hex dump hexdump buf cnxn throttl log debug receiv messag throttl throttl queue cnxn queu buffer queuedbuff log debug alloc queue cnxn queu buffer queuedbuff dynam buffer dynamicbuff buf readabl byte readablebyt cnxn queu buffer queuedbuff write byte writebyt buf log debug hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff log debug throttl cnxn queu buffer queuedbuff log trace enabl istraceen log trace hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff cnxn queu buffer queuedbuff write byte writebyt buf log trace enabl istraceen log trace hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff cnxn receiv messag receivemessag cnxn queu buffer queuedbuff cnxn queu buffer queuedbuff readabl log debug process queue byte remain cnxn queu buffer queuedbuff log debug process queue byte remain cnxn receiv messag receivemessag buf buf readabl log trace enabl istraceen log trace befor copi buf cnxn queu buffer queuedbuff dynam buffer dynamicbuff buf readabl byte readablebyt cnxn queu buffer queuedbuff write byte writebyt buf log trace enabl istraceen log trace copi cnxn queu buffer queuedbuff log trace hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff overrid write complet writecomplet channel handler context channelhandlercontext ctx write complet event writecompletionev except log trace enabl istraceen log trace write complet cnxn channel handler cnxnchannelhandl channel handler channelhandl cnxn channel handler cnxnchannelhandl netti server cnxn factori nettyservercnxnfactori bootstrap server bootstrap serverbootstrap nio server socket channel factori nioserversocketchannelfactori executor cach thread pool newcachedthreadpool executor cach thread pool newcachedthreadpool parent channel bootstrap set option setopt reus address reuseaddress child channel bootstrap set option setopt child tcp delai tcpnodelai bootstrap set option setopt child linger soling bootstrap get pipelin getpipelin add last addlast servercnxnfactori channel handler channelhandl overrid close closeal log debug enabl isdebugen log debug close closeal cnxn clear connect selector netti server cnxn nettyservercnxn cnxn cnxn arrai toarrai netti server cnxn nettyservercnxn cnxn size cnxn close except log warn ignor except close cnxn sessionid 0x hex string tohexstr cnxn get session id getsessionid log debug enabl isdebugen log debug channel allchannel size channel allchannel size cnxn size cnxn size overrid close session closesess session id sessionid log debug enabl isdebugen log debug close session closesess sessionid 0x session id sessionid cnxn netti server cnxn nettyservercnxn cnxn cnxn arrai toarrai netti server cnxn nettyservercnxn cnxn size cnxn get session id getsessionid session id sessionid cnxn close except log warn except session close overrid configur inet socket address inetsocketaddress addr max client cnxn maxclientcnxn io except ioexcept configur sasl login configuresasllogin local address localaddress addr max client cnxn maxclientcnxn max client cnxn maxclientcnxn inherit doc inheritdoc get max client cnxn host getmaxclientcnxnsperhost max client cnxn maxclientcnxn inherit doc inheritdoc set max client cnxn host setmaxclientcnxnsperhost max max client cnxn maxclientcnxn max overrid get local port getlocalport local address localaddress get port getport kill overrid join interrupt except interruptedexcept kill wait overrid shutdown log info shutdown call local address localaddress login login shutdown factori start parent channel parentchannel parent channel parentchannel close await uninterrupt awaituninterrupt close closeal channel allchannel close await uninterrupt awaituninterrupt bootstrap releas extern resourc releaseexternalresourc zk server zkserver zk server zkserver shutdown kill notifi notifyal overrid start log info bind port local address localaddress parent channel parentchannel bootstrap bind local address localaddress overrid startup zoo keeper server zookeeperserv zk io except ioexcept interrupt except interruptedexcept start zk startdata zk startup set zoo keeper server setzookeeperserv zk overrid iter server cnxn servercnxn get connect getconnect cnxn overrid inet socket address inetsocketaddress get local address getlocaladdress local address localaddress add cnxn addcnxn netti server cnxn nettyservercnxn cnxn cnxn cnxn add cnxn ip map ipmap inet address inetaddress addr inet socket address inetsocketaddress cnxn channel get remot address getremoteaddress get address getaddress set netti server cnxn nettyservercnxn ip map ipmap get addr hash set hashset netti server cnxn nettyservercnxn add cnxn ip map ipmap put addr 

inner extend simpl channel handler simplechannelhandl netti server cnxn factori nettyservercnxnfactori server cnxn factori servercnxnfactori make inner get access member variabl method sharabl cnxn channel handler cnxnchannelhandl simpl channel handler simplechannelhandl overrid channel close channelclos channel handler context channelhandlercontext ctx channel state event channelstateev except log trace enabl istraceen log trace channel close channel allchannel remov ctx get channel getchannel overrid channel connect channelconnect channel handler context channelhandlercontext ctx channel state event channelstateev except log trace enabl istraceen log trace channel connect channel allchannel add ctx get channel getchannel netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get channel getchannel zk server zkserver netti server cnxn factori nettyservercnxnfactori ctx set attach setattach cnxn add cnxn addcnxn cnxn overrid channel disconnect channeldisconnect channel handler context channelhandlercontext ctx channel state event channelstateev except log trace enabl istraceen log trace channel disconnect netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get attach getattach cnxn log trace enabl istraceen log trace channel disconnect caus close cnxn close overrid except caught exceptioncaught channel handler context channelhandlercontext ctx except event exceptionev except log warn except caught get caus getcaus netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get attach getattach cnxn log debug enabl isdebugen log debug close cnxn cnxn close overrid messag receiv messagereceiv channel handler context channelhandlercontext ctx messag event messageev except log trace enabl istraceen log trace messag receiv call get messag getmessag log debug enabl isdebugen log debug messag string tostr from ctx get channel getchannel netti server cnxn nettyservercnxn cnxn netti server cnxn nettyservercnxn ctx get attach getattach cnxn process messag processmessag cnxn except ex log error unexpect except receiv ex ex process messag processmessag messag event messageev netti server cnxn nettyservercnxn cnxn log debug enabl isdebugen log debug hex string tohexstr cnxn session id sessionid queu buffer queuedbuff cnxn queu buffer queuedbuff netti server cnxn nettyservercnxn resum messag event resumemessageev log debug receiv resum messag event resumemessageev cnxn queu buffer queuedbuff log trace enabl istraceen log trace process queue hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff cnxn receiv messag receivemessag cnxn queu buffer queuedbuff cnxn queu buffer queuedbuff readabl log debug process queue byte remain cnxn queu buffer queuedbuff log debug process queue byte remain log debug queue empti cnxn channel set readabl setread channel buffer channelbuff buf channel buffer channelbuff get messag getmessag log trace enabl istraceen log trace hex string tohexstr cnxn session id sessionid buf 0x channel buffer channelbuff hex dump hexdump buf cnxn throttl log debug receiv messag throttl throttl queue cnxn queu buffer queuedbuff log debug alloc queue cnxn queu buffer queuedbuff dynam buffer dynamicbuff buf readabl byte readablebyt cnxn queu buffer queuedbuff write byte writebyt buf log debug hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff log debug throttl cnxn queu buffer queuedbuff log trace enabl istraceen log trace hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff cnxn queu buffer queuedbuff write byte writebyt buf log trace enabl istraceen log trace hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff cnxn receiv messag receivemessag cnxn queu buffer queuedbuff cnxn queu buffer queuedbuff readabl log debug process queue byte remain cnxn queu buffer queuedbuff log debug process queue byte remain cnxn receiv messag receivemessag buf buf readabl log trace enabl istraceen log trace befor copi buf cnxn queu buffer queuedbuff dynam buffer dynamicbuff buf readabl byte readablebyt cnxn queu buffer queuedbuff write byte writebyt buf log trace enabl istraceen log trace copi cnxn queu buffer queuedbuff log trace hex string tohexstr cnxn session id sessionid queu buffer queuedbuff 0x channel buffer channelbuff hex dump hexdump cnxn queu buffer queuedbuff overrid write complet writecomplet channel handler context channelhandlercontext ctx write complet event writecompletionev except log trace enabl istraceen log trace write complet 

href html protocol implement exclus write lock elect leader invok link lock start process grab lock get lock time listen invok get lock ask lock call link owner isown write lock writelock protocol support protocolsupport logger log logger factori loggerfactori get logger getlogg write lock writelock string dir string id node name znodenam id name idnam string owner id ownerid string last child id lastchildid data x12 0x12 x34 0x34 lock listen locklisten callback lock zoo keeper oper lockzookeeperoper zop zookeep contructor writelock param zookeep zookeep client instanc param dir parent path us lock param acl acl us path world read write us write lock writelock zoo keeper zookeep zookeep string dir list acl acl zookeep dir dir acl set acl setacl acl zop lock zoo keeper oper lockzookeeperoper zookeep contructor writelock callback param zookeep zookeep client instanc param dir parent path us lock param acl acl us path param callback call back instanc write lock writelock zoo keeper zookeep zookeep string dir list acl acl lock listen locklisten callback zookeep dir acl callback callback current locklisten locklisten lock listen locklisten get lock listen getlocklisten callback differ call back listen param callback call back instanc set lock listen setlocklisten lock listen locklisten callback callback callback remov lock associ znode longer requir lock remov request queue lock hold lock runtim except runtimeexcept runtim except connect zookeep unlock runtim except runtimeexcept close isclos id don retri oper failur zk remov ephemer file don wanna hang process close reconnect zk zoo keeper oper zookeeperoper zopdel zoo keeper oper zookeeperoper execut keeper except keeperexcept interrupt except interruptedexcept zookeep delet id zopdel execut interrupt except interruptedexcept log warn caught set interrupt thread current thread currentthread interrupt keeper except keeperexcept node except nonodeexcept keeper except keeperexcept log warn caught runtim except runtimeexcept runtim except runtimeexcept get messag getmessag init caus initcaus callback callback lock releas lockreleas id watcher call get watch watch predecessor lock watcher lockwatch watcher process watch event watchedev event let leader watch updat node log debug watcher fire path event get path getpath state event get state getstat type event get type gettyp lock except log warn fail acquir lock zoookeep oper respons magic requir lock lock zoo keeper oper lockzookeeperoper zoo keeper oper zookeeperoper find creat earler creat node param prefix prefix node param zookeep teh zookeep client param dir dir paretn keeper except keeperexcept interrupt except interruptedexcept find prefix children findprefixinchildren string prefix zoo keeper zookeep zookeep string dir keeper except keeperexcept interrupt except interruptedexcept list string name zookeep get children getchildren dir string name name name start startswith prefix id name log debug enabl isdebugen log debug found id creat last time id id id zookeep creat dir prefix data get acl getacl ephemer sequenti ephemer sequenti log debug enabl isdebugen log debug creat id id command run retri obtain lock command success execut keeper except keeperexcept interrupt except interruptedexcept id session id sessionid zookeep get session id getsessionid string prefix session id sessionid let up current id fail middl creat znode find prefix children findprefixinchildren prefix zookeep dir id name idnam node name znodenam id id list string name zookeep get children getchildren dir name empti isempti log warn children dir ve creat on let recreat let forc recreat id id let sort explicitli back order usus sort set sortedset node name znodenam sort name sortednam tree set treeset node name znodenam string name name sort name sortednam add node name znodenam dir name owner id ownerid sort name sortednam first get name getnam sort set sortedset node name znodenam lessthanm sort name sortednam head set headset id name idnam lessthanm empti isempti node name znodenam last child name lastchildnam lessthanm last last child id lastchildid last child name lastchildnam get name getnam log debug enabl isdebugen log debug watch node last child id lastchildid stat stat zookeep exist last child id lastchildid lock watcher lockwatch stat log warn find stat last child name lastchildnam get name getnam owner isown callback callback lock acquir lockacquir id attempt acquir exclus write lock return acquir note exclus lock acquir time after method ha invok current lock owner awai lock keeper except keeperexcept interrupt except interruptedexcept close isclos ensur path exist ensurepathexist dir retri oper retryoper zop parent dir lock parent dir us lock string get dir getdir dir return node owner lock leader owner isown id owner id ownerid id equal owner id ownerid id lock id lock string get id getid id 

watcher call get watch watch predecessor lock watcher lockwatch watcher process watch event watchedev event let leader watch updat node log debug watcher fire path event get path getpath state event get state getstat type event get type gettyp lock except log warn fail acquir lock 

zoookeep oper respons magic requir lock lock zoo keeper oper lockzookeeperoper zoo keeper oper zookeeperoper find creat earler creat node param prefix prefix node param zookeep teh zookeep client param dir dir paretn keeper except keeperexcept interrupt except interruptedexcept find prefix children findprefixinchildren string prefix zoo keeper zookeep zookeep string dir keeper except keeperexcept interrupt except interruptedexcept list string name zookeep get children getchildren dir string name name name start startswith prefix id name log debug enabl isdebugen log debug found id creat last time id id id zookeep creat dir prefix data get acl getacl ephemer sequenti ephemer sequenti log debug enabl isdebugen log debug creat id id command run retri obtain lock command success execut keeper except keeperexcept interrupt except interruptedexcept id session id sessionid zookeep get session id getsessionid string prefix session id sessionid let up current id fail middl creat znode find prefix children findprefixinchildren prefix zookeep dir id name idnam node name znodenam id id list string name zookeep get children getchildren dir name empti isempti log warn children dir ve creat on let recreat let forc recreat id id let sort explicitli back order usus sort set sortedset node name znodenam sort name sortednam tree set treeset node name znodenam string name name sort name sortednam add node name znodenam dir name owner id ownerid sort name sortednam first get name getnam sort set sortedset node name znodenam lessthanm sort name sortednam head set headset id name idnam lessthanm empti isempti node name znodenam last child name lastchildnam lessthanm last last child id lastchildid last child name lastchildnam get name getnam log debug enabl isdebugen log debug watch node last child id lastchildid stat stat zookeep exist last child id lastchildid lock watcher lockwatch stat log warn find stat last child name lastchildnam get name getnam owner isown callback callback lock acquir lockacquir id 

ha two method call back method lock acquir lock releas lock listen locklisten call back call lock acquir lock acquir lockacquir call back call lock releas lock releas lockreleas 

gener main complet driven main class mainclass resourc path resourc ha format pre cmd main mainclass descript pre line start skip fat jar main fatjarmain cmd cmd string cmd string clazz string desc cmd cmd clazz clazz desc desc string cmd string clazz string desc hash map hashmap string cmd cmd hash map hashmap string cmd arrai list arraylist string order arrai list arraylist string param arg first paramet arg us index main class mainclass resourc rest pass main mainclass run io except ioexcept found except classnotfoundexcept method except nosuchmethodexcept secur except securityexcept illeg access except illegalaccessexcept illeg argument except illegalargumentexcept main string arg io except ioexcept found except classnotfoundexcept secur except securityexcept method except nosuchmethodexcept illeg argument except illegalargumentexcept illeg access except illegalaccessexcept input stream inputstream fat jar main fatjarmain get resourc stream getresourceasstream main class mainclass err println couldn find main class mainclass classpath exit buffer reader bufferedread br buffer reader bufferedread input stream reader inputstreamread string line line br read line readlin string part line split part length part length part charat part length cmd put part cmd part part part us order arrai preserv order command help hashmap preserv order overkil order add part put descript order add part arg length help dohelp cmd cmd cmd get arg cmd help dohelp clazz name fornam cmd clazz method main clazz get method getmethod main string string arg newarg string arg length arraycopi arg arg newarg arg newarg length main invok object arg newarg invoc target except invocationtargetexcept get caus getcaus get caus getcaus print stack trace printstacktrac print stack trace printstacktrac help dohelp err println usag fat jar main fatjarmain cmd arg err println avail cmd string order cmd cmd cmd get cmd err println cmd desc err println exit 

cmd cmd string cmd string clazz string desc cmd cmd clazz clazz desc desc string cmd string clazz string desc 

data tree bean mbean data tree bean datatreebean data tree mx bean datatreemxbean zkm bean info zkmbeaninfo data tree datatre data tree datatre data tree bean datatreebean org apach zookeep server data tree datatre data tree datatre data tree datatre data tree datatre get node count getnodecount data tree datatre get node count getnodecount approxim data size approximatedatas data tree datatre approxim data size approximatedatas count ephemer countephemer data tree datatre get ephemer count getephemeralscount get watch count getwatchcount data tree datatre get watch count getwatchcount string get name getnam memori data tree inmemorydatatre hidden ishidden string get last zxid getlastzxid 0x hex string tohexstr data tree datatre last process zxid lastprocessedzxid 

assign port test port assign portassign logger log logger factori loggerfactori get logger getlogg port assign portassign next port nextport 11221 assign uniqu port test uniqu log info assign port next port nextport next port nextport 

statist server cnxn servercnxn stat date time connect establish date get establish getestablish number request submit respond get outstand request getoutstandingrequest number packet receiv get packet receiv getpacketsreceiv number packet sent incl notif get packet sent getpacketss min latenc ms get min latenc getminlat averag latenc ms get avg latenc getavglat max latenc ms get max latenc getmaxlat last oper perform connect string get last oper getlastoper last cxid connect get last cxid getlastcxid last zxid connect get last zxid getlastzxid last time server sent respons client connect get last respons time getlastresponsetim latenc last respons client connect ms get last latenc getlastlat reset counter reset stat resetstat 

quorum hammer test quorumhammertest zk test zktestcas logger log logger factori loggerfactori get logger getlogg quorum hammer test quorumhammertest connect timeout connect timeout client test clienttest connect timeout connect timeout quorum base quorumbas qb quorum base quorumbas client hammer test clienthammertest cht client hammer test clienthammertest befor set up setup except qb set up setup cht host port hostport qb host port hostport cht set up setupal after tear down teardown except cht tear down teardownal qb tear down teardown test test hammer basic testhammerbas throwabl cht test hammer basic testhammerbas 

multi txn multitxn record java util list org apach zookeep txn txn txn multi txn multitxn multi txn multitxn java util list org apach zookeep txn txn txn txn txn java util list org apach zookeep txn txn get txn gettxn txn set txn settxn java util list org apach zookeep txn txn txn serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag start vector startvector txn txn txn len1 txn size vidx1 vidx1 len1 vidx1 org apach zookeep txn txn e1 org apach zookeep txn txn txn get vidx1 write record writerecord e1 e1 end vector endvector txn txn end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag index vidx1 start vector startvector txn vidx1 txn java util arrai list arraylist org apach zookeep txn txn vidx1 done vidx1 incr org apach zookeep txn txn e1 e1 org apach zookeep txn txn read record readrecord e1 e1 txn add e1 end vector endvector txn end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord start vector startvector txn txn txn len1 txn size vidx1 vidx1 len1 vidx1 org apach zookeep txn txn e1 org apach zookeep txn txn txn get vidx1 write record writerecord e1 e1 end vector endvector txn txn end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar multi txn multitxn unimpl equal object peer peer peer peer multi txn multitxn peer peer multi txn multitxn peer multi txn multitxn peer peer ret ret txn equal peer txn ret ret ret hash code hashcod result 17 ret ret txn hash code hashcod result 37 result ret result string signatur multi txn lmultitxn txn ltxn ib 

exist respons existsrespons record org apach zookeep data stat stat exist respons existsrespons exist respons existsrespons org apach zookeep data stat stat stat stat org apach zookeep data stat get stat getstat stat set stat setstat org apach zookeep data stat stat serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write record writerecord stat stat end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag stat org apach zookeep data stat read record readrecord stat stat end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write record writerecord stat stat end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer exist respons existsrespons cast except classcastexcept compar differ type record exist respons existsrespons peer exist respons existsrespons peer peer ret ret stat compar compareto peer stat ret ret ret equal object peer peer peer peer exist respons existsrespons peer peer exist respons existsrespons peer exist respons existsrespons peer peer ret ret stat equal peer stat ret ret ret hash code hashcod result 17 ret ret stat hash code hashcod result 37 result ret result string signatur exist respons lexistsrespons stat lstat lllliiiliil 

purg txn test purgetxntest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg purg txn test purgetxntest string hostport 127 port assign portassign uniqu connect timeout connect timeout 3000 test purg except except thrown here test test purg testpurg except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 100 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout 2000 zk creat invalidsnap id open acl unsaf open acl unsaf creat mode createmod persist zk close shutdown asserttru wait server shutdown client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout corrupt snapshot purg txn log purgetxnlog purg tmp dir tmpdir tmp dir tmpdir file txn snap log filetxnsnaplog snaplog file txn snap log filetxnsnaplog tmp dir tmpdir tmp dir tmpdir list file list log listlog snaplog find recent snapshot findnrecentsnapshot num snap numsnap file ff list log listlog ff get name getnam start startswith snapshot num snap numsnap asserttru exactli snapshot num snap numsnap process watch event watchedev event 

set data request setdatarequest record string path data version set data request setdatarequest set data request setdatarequest string path data version path path data data version version string get path getpath path set path setpath string path get data getdata data set data setdata data get version getvers version set version setvers version serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write buffer writebuff data data write writeint version version end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path data read buffer readbuff data version read readint version end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write buffer writebuff data data write writeint version version end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set data request setdatarequest cast except classcastexcept compar differ type record set data request setdatarequest peer set data request setdatarequest peer peer ret ret path compar compareto peer path ret ret data ur peer data ret org apach jute util compar byte comparebyt length ur ur length ret ret ret version peer version version peer version ret ret ret equal object peer peer peer peer set data request setdatarequest peer peer set data request setdatarequest peer set data request setdatarequest peer peer ret ret path equal peer path ret ret ret org apach jute util buf equal bufequ data peer data ret ret ret version peer version ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret java util arrai string tostr data hash code hashcod result 37 result ret ret version result 37 result ret result string signatur set data request lsetdatarequest bi sbi 

parent zoo keeper server zookeeperserv learner abstract learner zoo keeper server learnerzookeeperserv quorum zoo keeper server quorumzookeeperserv learner zoo keeper server learnerzookeeperserv file txn snap log filetxnsnaplog log factori logfactori tick time ticktim min session timeout minsessiontimeout max session timeout maxsessiontimeout data tree builder datatreebuild tree builder treebuild zk databas zkdatabas zk db zkdb quorum peer quorump self io except ioexcept log factori logfactori tick time ticktim min session timeout minsessiontimeout max session timeout maxsessiontimeout tree builder treebuild zk db zkdb self abstract method learner associ server learner chang feet quorum peer quorump reassign simpli refer here subclass implement abstract learner get learner getlearn return current state session tracker current us learner build ping respons packet hash map hashmap integ get touch snapshot gettouchsnapshot session tracker sessiontrack learner session tracker learnersessiontrack session tracker sessiontrack snapshot hash map hashmap integ return id associ quorum peer quorump uniqu id server overrid get server id getserverid self get id getid overrid creat session tracker createsessiontrack session tracker sessiontrack learner session tracker learnersessiontrack get zk databas getzkdatabas get session time out getsessionwithtimeout self get id getid overrid start session tracker startsessiontrack overrid revalid session revalidatesess server cnxn servercnxn cnxn session id sessionid session timeout sessiontimeout io except ioexcept get learner getlearn valid session validatesess cnxn session id sessionid session timeout sessiontimeout overrid jmx registerjmx jmx jmx data tree bean jmxdatatreebean data tree bean datatreebean get zk databas getzkdatabas get data tree getdatatre bean registri mbeanregistri get instanc getinst jmx data tree bean jmxdatatreebean jmx server bean jmxserverbean except log warn fail jmx jmx data tree bean jmxdatatreebean jmx registerjmx zoo keeper server bean zookeeperserverbean server bean serverbean local peer bean localpeerbean local peer bean localpeerbean jmx self jmx leader elect bean jmxleaderelectionbean bean registri mbeanregistri get instanc getinst unregist self jmx leader elect bean jmxleaderelectionbean except log warn fail jmx self jmx leader elect bean jmxleaderelectionbean jmx server bean jmxserverbean server bean serverbean bean registri mbeanregistri get instanc getinst server bean serverbean local peer bean localpeerbean except log warn fail jmx jmx server bean jmxserverbean overrid unregist jmx unregisterjmx unregist from jmx jmx data tree bean jmxdatatreebean bean registri mbeanregistri get instanc getinst unregist jmx data tree bean jmxdatatreebean except log warn fail unregist jmx jmx data tree bean jmxdatatreebean unregist jmx unregisterjmx learner peer unregist from jmx jmx server bean jmxserverbean bean registri mbeanregistri get instanc getinst unregist jmx server bean jmxserverbean except log warn fail unregist jmx jmx server bean jmxserverbean 

jboolean type jtype creat instanc jboolean jboolean int32 int32 toboolean string get signatur getsignatur string gen java compar genjavacompareto string fname ret fname peer fname fname string gen java hash code genjavahashcod string fname ret fname string gen csharp hash code gencsharphashcod string fname ret capit fname string gen csharp compar gencsharpcompareto string name ret capit name peer capit name capit name 

datadir cleanup manag test datadircleanupmanagertest datadir cleanup manag datadircleanupmanag purg mgr purgemgr string snap dir snapdir string data log dir datalogdir befor set up setup except file data dir datadir client base clientbas creat tmp dir createtmpdir snap dir snapdir data dir datadir get absolut path getabsolutepath data log dir datalogdir data dir datadir get absolut path getabsolutepath test test purg task testpurgetask except purg mgr purgemgr datadir cleanup manag datadircleanupmanag snap dir snapdir data log dir datalogdir purg mgr purgemgr start equal assertequ data log directori set configur data log dir datalogdir purg mgr purgemgr get data log dir getdatalogdir equal assertequ snapshot directori set configur snap dir snapdir purg mgr purgemgr get snap dir getsnapdir equal assertequ snapshot retain count set configur purg mgr purgemgr get snap retain count getsnapretaincount equal assertequ purg task start start purg mgr purgemgr get purg task statu getpurgetaskstatu purg mgr purgemgr shutdown equal assertequ purg task run after shutdown complet purg mgr purgemgr get purg task statu getpurgetaskstatu test test zero purg interv testwithzeropurgeinterv except purg mgr purgemgr datadir cleanup manag datadircleanupmanag snap dir snapdir data log dir datalogdir purg mgr purgemgr start equal assertequ purg task schedul zero purg interv start start purg mgr purgemgr get purg task statu getpurgetaskstatu purg mgr purgemgr shutdown equal assertequ purg task schedul zero purg interv start start purg mgr purgemgr get purg task statu getpurgetaskstatu test test neg purg interv testwithnegativepurgeinterv except purg mgr purgemgr datadir cleanup manag datadircleanupmanag snap dir snapdir data log dir datalogdir purg mgr purgemgr start equal assertequ purg task schedul neg purg interv start start purg mgr purgemgr get purg task statu getpurgetaskstatu purg mgr purgemgr shutdown equal assertequ purg task schedul neg purg interv start start purg mgr purgemgr get purg task statu getpurgetaskstatu after tear down teardown except purg mgr purgemgr purg mgr purgemgr shutdown 

check version txn checkversiontxn record string path version check version txn checkversiontxn check version txn checkversiontxn string path version path path version version string get path getpath path set path setpath string path get version getvers version set version setvers version serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writeint version version end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path version read readint version end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writeint version version end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer check version txn checkversiontxn cast except classcastexcept compar differ type record check version txn checkversiontxn peer check version txn checkversiontxn peer peer ret ret path compar compareto peer path ret ret ret version peer version version peer version ret ret ret equal object peer peer peer peer check version txn checkversiontxn peer peer check version txn checkversiontxn peer check version txn checkversiontxn peer peer ret ret path equal peer path ret ret ret version peer version ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret version result 37 result ret result string signatur check version txn lcheckversiontxn si 

repeat startup test repeatstartuptest zk test zktestcas bring up quorum peer shut down bring on node server except thrown here test test fail testfail except quorum base quorumbas qb quorum base quorumbas qb set up setup println comment server qb host port hostport zoo keeper zookeep zk qb creat client createcli zk creat test id open acl unsaf open acl unsaf creat mode createmod persist zk close qb shutdown qb s1 qb shutdown qb s2 qb shutdown qb s3 qb shutdown qb s4 qb shutdown qb s5 string hp qb host port hostport split zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv qb s1 get txn factori gettxnfactori get snap dir getsnapdir qb s1 get txn factori gettxnfactori get data dir getdatadir 3000 port integ pars parseint hp split server cnxn factori servercnxnfactori factori server cnxn factori servercnxnfactori creat factori createfactori port factori startup zk println comment start factori asserttru wait server up client base clientbas wait server up waitforserverup 127 port quorum test quorumtest connect timeout connect timeout factori shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 port quorum test quorumtest connect timeout connect timeout println comment shut down standalon 

line node completor jlineznodecompletor completor zoo keeper zookeep zk line node completor jlineznodecompletor zoo keeper zookeep zk zk zk suppress warn suppresswarn uncheck complet string buffer cursor list candid guarante token on expand buffer buffer substr cursor string token buffer end endswith string token buffer split token length token token token length token start startswith complet node completeznod buffer token candid complet command completecommand buffer token candid complet command completecommand string buffer string token list string candid string cmd zoo keeper main zookeepermain get command getcommand cmd start startswith token candid add cmd buffer last index lastindexof complet node completeznod string buffer string token list string candid string path token idx path last index lastindexof string prefix path substr idx root path end strip prefix string dir idx path substr idx list string children zk get children getchildren dir string child children child start startswith prefix candid add child interrupt except interruptedexcept keeper except keeperexcept candid size buffer length buffer last index lastindexof 

host provid test statichostprovidertest zk test zktestcas test test next round testnextgoesround unknown host except unknownhostexcept host provid hostprovid host provid hostprovid get host provid gethostprovid inet socket address inetsocketaddress first host provid hostprovid next asserttru first inet socket address inetsocketaddress host provid hostprovid next equal assertequ first host provid hostprovid next test test next round sleep testnextgoesroundandsleep unknown host except unknownhostexcept size host provid hostprovid host provid hostprovid get host provid gethostprovid size size host provid hostprovid next size start current time milli currenttimemilli host provid hostprovid next 1000 stop current time milli currenttimemilli asserttru 900 stop start test test next sleep zero testnextdoesnotsleepforzero unknown host except unknownhostexcept size host provid hostprovid host provid hostprovid get host provid gethostprovid size size host provid hostprovid next size start current time milli currenttimemilli host provid hostprovid next stop current time milli currenttimemilli asserttru stop start test test two consequit call next differ element testtwoconsequitivecallstonextreturndifferentel unknown host except unknownhostexcept host provid hostprovid host provid hostprovid get host provid gethostprovid assertnotsam host provid hostprovid next host provid hostprovid next test test connect reset testonconnectdoesnotreset unknown host except unknownhostexcept host provid hostprovid host provid hostprovid get host provid gethostprovid inet socket address inetsocketaddress first host provid hostprovid next host provid hostprovid connect onconnect inet socket address inetsocketaddress second host provid hostprovid next assertnotsam first second host provid statichostprovid get host provid gethostprovid size unknown host except unknownhostexcept arrai list arraylist inet socket address inetsocketaddress list arrai list arraylist inet socket address inetsocketaddress size size list add inet socket address inetsocketaddress 10 10 10 size 1234 size host provid statichostprovid list 

test check server work even last snapshot invalid corrupt server crash gener snapshot invalid snapshot test invalidsnapshottest client base clientbas logger log logger factori loggerfactori get logger getlogg invalid snapshot test invalidsnapshottest invalid snapshot test invalidsnapshottest sync request processor syncrequestprocessor set snap count setsnapcount 100 valid server up invalid snapshot revert prior snapshot associ log test test invalid snapshot testinvalidsnapshot except zoo keeper zookeep zk creat client createcli 2000 zk creat invalidsnap id open acl unsaf open acl unsaf creat mode createmod persist zk close nio server cnxn factori nioservercnxnfactori factori nio server cnxn factori nioservercnxnfactori server factori serverfactori stop server stopserv corrupt snapshot file snap file snapfil factori zk server zkserver get txn log factori gettxnlogfactori find most recent snapshot findmostrecentsnapshot log info corrupt snap file snapfil random access file randomaccessfil raf random access file randomaccessfil snap file snapfil rw raf set length setlength raf close restart server start server startserv verifi expect data exist wasn lost zk creat client createcli asserttru node exist zk exist invalidsnap 1999 zk close 

acl root test aclroottest client base clientbas logger log logger factori loggerfactori get logger getlogg acl root test aclroottest test test root acl testrootacl except zoo keeper zookeep zk creat client createcli set auth digest zk add auth info addauthinfo digest pat test get byte getbyt zk set acl setacl id creator acl creator acl zk get data getdata zk close verifi access zk creat client createcli zk get data getdata fail valid auth keeper except keeperexcept auth except noauthexcept expect zk creat app id creator acl creator acl creat mode createmod persist fail valid auth keeper except keeperexcept invalid acl except invalidaclexcept expect zk add auth info addauthinfo digest world get byte getbyt zk creat app id creator acl creator acl creat mode createmod persist fail valid auth keeper except keeperexcept auth except noauthexcept expect zk close verifi access origin auth zk creat client createcli zk add auth info addauthinfo digest pat test get byte getbyt zk get data getdata zk creat app id creator acl creator acl creat mode createmod persist zk delet app reset acl back open verifi access zk set acl setacl id open acl unsaf open acl unsaf zk close zk creat client createcli zk get data getdata zk creat app id open acl unsaf open acl unsaf creat mode createmod persist zk creat app id creator acl creator acl creat mode createmod persist fail valid auth keeper except keeperexcept invalid acl except invalidaclexcept expect zk delet app zk add auth info addauthinfo digest world get byte getbyt zk creat app id creator acl creator acl creat mode createmod persist zk close zk creat client createcli zk delet app zk close 

hierarch quorum test hierarchicalquorumtest client base clientbas logger log logger factori loggerfactori get logger getlogg quorum base quorumbas file s1 dir s1dir s2 dir s2dir s3 dir s3dir s4 dir s4dir s5 dir s5dir quorum peer quorump s1 s2 s3 s4 s5 port1 port2 port3 port4 port5 leport1 leport2 leport3 leport4 leport5 properti qp client hammer test clienthammertest cht client hammer test clienthammertest overrid set up setup except setup test env setuptestenv jmx env jmxenv set up setup set up setupal port1 port assign portassign uniqu port2 port assign portassign uniqu port3 port assign portassign uniqu port4 port assign portassign uniqu port5 port assign portassign uniqu leport1 port assign portassign uniqu leport2 port assign portassign uniqu leport3 port assign portassign uniqu leport4 port assign portassign uniqu leport5 port assign portassign uniqu host port hostport 127 port1 127 port2 127 port3 127 port4 127 port5 log info port host port hostport s1 dir s1dir client base clientbas creat tmp dir createtmpdir s2 dir s2dir client base clientbas creat tmp dir createtmpdir s3 dir s3dir client base clientbas creat tmp dir createtmpdir s4 dir s4dir client base clientbas creat tmp dir createtmpdir s5 dir s5dir client base clientbas creat tmp dir createtmpdir string config group group weight weight weight weight weight arrai input stream bytearrayinputstream arrai input stream bytearrayinputstream config get byte getbyt qp properti qp load start server startserv cht host port hostport host port hostport cht set up setupal log info setup finish method here keep backward compat test code written befor observ except start server startserv except start server startserv start learner observ withobserv follow observ withobserv follow observ param observ withobserv except start server startserv observ withobserv except tick time ticktim 2000 init limit initlimit sync limit synclimit hash map hashmap quorum server quorumserv peer hash map hashmap quorum server quorumserv peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port1 1000 inet socket address inetsocketaddress 127 leport1 1000 peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port2 1000 inet socket address inetsocketaddress 127 leport2 1000 peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port3 1000 inet socket address inetsocketaddress 127 leport3 1000 peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port4 1000 inet socket address inetsocketaddress 127 leport4 1000 observ withobserv quorum peer quorump learner type learnertyp observ quorum peer quorump learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port5 1000 inet socket address inetsocketaddress 127 leport5 1000 observ withobserv quorum peer quorump learner type learnertyp observ quorum peer quorump learner type learnertyp particip log info creat quorum peer quorump port port1 quorum hierarch quorumhierarch hq1 quorum hierarch quorumhierarch qp s1 quorum peer quorump peer s1 dir s1dir s1 dir s1dir port1 tick time ticktim init limit initlimit sync limit synclimit hq1 equal assertequ port1 s1 get client port getclientport log info creat quorum peer quorump port port2 quorum hierarch quorumhierarch hq2 quorum hierarch quorumhierarch qp s2 quorum peer quorump peer s2 dir s2dir s2 dir s2dir port2 tick time ticktim init limit initlimit sync limit synclimit hq2 equal assertequ port2 s2 get client port getclientport log info creat quorum peer quorump port port3 quorum hierarch quorumhierarch hq3 quorum hierarch quorumhierarch qp s3 quorum peer quorump peer s3 dir s3dir s3 dir s3dir port3 tick time ticktim init limit initlimit sync limit synclimit hq3 equal assertequ port3 s3 get client port getclientport log info creat quorum peer quorump port port4 quorum hierarch quorumhierarch hq4 quorum hierarch quorumhierarch qp s4 quorum peer quorump peer s4 dir s4dir s4 dir s4dir port4 tick time ticktim init limit initlimit sync limit synclimit hq4 observ withobserv s4 set learner type setlearnertyp quorum peer quorump learner type learnertyp observ equal assertequ port4 s4 get client port getclientport log info creat quorum peer quorump port port5 quorum hierarch quorumhierarch hq5 quorum hierarch quorumhierarch qp s5 quorum peer quorump peer s5 dir s5dir s5 dir s5dir port5 tick time ticktim init limit initlimit sync limit synclimit hq5 observ withobserv s5 set learner type setlearnertyp quorum peer quorump learner type learnertyp observ equal assertequ port5 s5 get client port getclientport observ current compat leader elect leaderelect observ withobserv s1 set elect type setelectiontyp s2 set elect type setelectiontyp s3 set elect type setelectiontyp s4 set elect type setelectiontyp s5 set elect type setelectiontyp log info start quorum peer quorump s1 start log info start quorum peer quorump s2 start log info start quorum peer quorump s3 start log info start quorum peer quorump observ withobserv observ s4 start log info start quorum peer quorump observ withobserv observ s5 start log info start quorum peer quorump log info close port host port hostport string hp host port hostport split asserttru wait server up client base clientbas wait server up waitforserverup hp connect timeout connect timeout log info hp accept client connect interest jmx env jmxenv dump make server list set string ensur name ensurenam link hash set linkedhashset string ensur name ensurenam add memori data tree inmemorydatatre ensur name ensurenam add name0 replic server id replicatedserv id name1 replica name2 ensur name ensurenam add name0 replic server id replicatedserv id name1 replica ensur name ensurenam add name0 replic server id replicatedserv id jmx env jmxenv ensur ensureal ensur name ensurenam arrai toarrai string ensur name ensurenam size overrid tear down teardown except log info tear down teardown start cht tear down teardownal log info shut down server shutdown s1 log info shut down server shutdown s2 log info shut down server shutdown s3 log info shut down server shutdown s4 log info shut down server shutdown s5 string hp host port hostport split asserttru wait server down client base clientbas wait server down waitforserverdown hp client base clientbas connect timeout connect timeout log info hp longer accept client connect jmx env jmxenv tear down teardown shutdown quorum peer quorump qp quorum base quorumbas shutdown qp testabl zoo keeper testablezookeep creat client createcli io except ioexcept interrupt except interruptedexcept creat client createcli host port hostport testabl zoo keeper testablezookeep creat client createcli string hp io except ioexcept interrupt except interruptedexcept countdown watcher countdownwatch watcher countdown watcher countdownwatch creat client createcli watcher hp test test hierarch quorum testhierarchicalquorum throwabl cht run hammer runhamm 10 

num event numev json servlet jsonservlet logger log logger factori loggerfactori get logger getlogg num event numev period period 1000 log sourc logsourc sourc num event numev log sourc logsourc src except sourc src string handl request handlerequest json request jsonrequest request except string output starttim endtim period starttim request get number getnumb start endtim request get number getnumb end period request get number getnumb period starttim starttim sourc get start time getstarttim endtim period endtim starttim period endtim sourc get end time getendtim log iter logiter iter sourc iter starttim endtim json object jsonobject data json object jsonobject data put start time starttim starttim data put end time endtim endtim size size iter size data put num entri numentri size log debug enabl isdebugen log debug handl start starttim end endtim num entri numentri size json valu jsonvalu json string tojsonstr data 

equal op equalsop filter op filterop match log entri logentri entri filter except filterexcept object last arg arg object get valu getvalu get type gettyp filter op filterop arg type argtyp symbol string kei string get valu getvalu entri get attribut getattribut kei last last equal last 

set host zoo keeper zookeep client connect class implement guarante follow call next return inet socket address inetsocketaddress iter end size host provid hostprovid zero host provid hostprovid resolv inet socket address inetsocketaddress instanc next up host provid hostprovid resolv differ host provid hostprovid imagin host provid hostprovid load list host from url from dn host provid hostprovid resolv inet socket address inetsocketaddress after timeout host provid hostprovid prefer nearbi host host provid hostprovid size next host connect spin delai spindelai wait param spin delai spindelai millisecond wait host inet socket address inetsocketaddress next spin delai spindelai notifi host provid hostprovid success connect host provid hostprovid us notif reset inner state connect onconnect 

remot peer bean limit inform remot peer peer manag remot remot peer bean remotepeerbean remot peer mx bean remotepeermxbean zkm bean info zkmbeaninfo quorum peer quorump quorum server quorumserv peer remot peer bean remotepeerbean quorum peer quorump quorum server quorumserv peer peer peer string get name getnam replica peer id hidden ishidden string get quorum address getquorumaddress peer addr get host name gethostnam peer addr get port getport 

host port hostport string host port host port hostport string host port hostport string part host port hostport split host part port integ pars parseint part string get host gethost host get port getport port overrid equal object host port hostport host port hostport host equal host port port overrid hash code hashcod string format host port hash code hashcod 

content staticcont http servlet httpservlet get doget http servlet request httpservletrequest request http servlet respons httpservletrespons respons servlet except servletexcept io except ioexcept string path request get request uri getrequesturi substr request get servlet path getservletpath length input stream inputstream resourc loader classload get resourc stream getsystemresourceasstream org apach zookeep graph resourc path resourc respons get writer getwrit println path found respons set statu setstatu http servlet respons httpservletrespons sc found sc found resourc avail respons get writer getwrit write resourc read respons set content type setcontenttyp text plain charset utf respons set statu setstatu http servlet respons httpservletrespons sc sc 

creat respons createrespons record string path creat respons createrespons creat respons createrespons string path path path string get path getpath path set path setpath string path serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer creat respons createrespons cast except classcastexcept compar differ type record creat respons createrespons peer creat respons createrespons peer peer ret ret path compar compareto peer path ret ret ret equal object peer peer peer peer creat respons createrespons peer peer creat respons createrespons peer creat respons createrespons peer peer ret ret path equal peer path ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret result string signatur creat respons lcreaterespons 

repres stat jaxb xml root element xmlrootel name stat stat zstat string path string uri data64 string data utf8 datautf8 czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown data length datalength num children numchildren pzxid stat zstat need jersei stat zstat string path data64 string data utf8 datautf8 path path data64 data64 data utf8 datautf8 data utf8 datautf8 stat zstat string path string uri data64 string data utf8 datautf8 czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown data length datalength num children numchildren pzxid path path uri uri data64 data64 data utf8 datautf8 data utf8 datautf8 czxid czxid mzxid mzxid ctime ctime mtime mtime version version cversion cversion avers avers ephemer owner ephemeralown ephemer owner ephemeralown data length datalength data length datalength num children numchildren num children numchildren pzxid pzxid overrid hash code hashcod path hash code hashcod method consid two stat zstat equal path encod data match compar zoo keeper zookeep org apach zookeep data stat field overrid equal object obj obj stat zstat stat zstat stat zstat obj string tostr equal string tostr overrid string string tostr stat zstat path b64 data64 string data64 data utf8 datautf8 

server configur storag us properti type server config serverconfig updat configur paramet updat conf letter 4letter word inet socket address inetsocketaddress client port address clientportaddress string data dir datadir string data log dir datalogdir tick time ticktim zoo keeper server zookeeperserv tick time tick time max client cnxn maxclientcnxn default set explicitli min session timeout minsessiontimeout default set explicitli max session timeout maxsessiontimeout pars argument server configur param arg client port clientport data dir datadir option tick time ticktim server config serverconfig configur wrt argument illeg argument except illegalargumentexcept invalid usag pars string arg arg length arg length illeg argument except illegalargumentexcept invalid arg arrai string tostr arg client port address clientportaddress inet socket address inetsocketaddress integ pars parseint arg data dir datadir arg data log dir datalogdir data dir datadir arg length tick time ticktim integ pars parseint arg arg length max client cnxn maxclientcnxn integ pars parseint arg pars zoo keeper zookeep configur file param path patch configur file server config serverconfig configur wrt argument config except configexcept error process configur pars string path config except configexcept quorum peer config quorumpeerconfig config quorum peer config quorumpeerconfig config pars path let qpconfig pars file pull stuff interest read from readfrom config read attribut from quorum peer config quorumpeerconfig param config read from readfrom quorum peer config quorumpeerconfig config client port address clientportaddress config get client port address getclientportaddress data dir datadir config get data dir getdatadir data log dir datalogdir config get data log dir getdatalogdir tick time ticktim config get tick time getticktim max client cnxn maxclientcnxn config get max client cnxn getmaxclientcnxn min session timeout minsessiontimeout config get min session timeout getminsessiontimeout max session timeout maxsessiontimeout config get max session timeout getmaxsessiontimeout inet socket address inetsocketaddress get client port address getclientportaddress client port address clientportaddress string get data dir getdatadir data dir datadir string get data log dir getdatalogdir data log dir datalogdir get tick time getticktim tick time ticktim get max client cnxn getmaxclientcnxn max client cnxn maxclientcnxn minimum session timeout millisecond unset get min session timeout getminsessiontimeout min session timeout minsessiontimeout maximum session timeout millisecond unset get max session timeout getmaxsessiontimeout max session timeout maxsessiontimeout 

manag cleanup snapshot transact log schedul purg task specifi autopurg purg interv purgeinterv keep most recent autopurg snap retain count snapretaincount number snapshot transact log datadir cleanup manag datadircleanupmanag logger log logger factori loggerfactori get logger getlogg datadir cleanup manag datadircleanupmanag statu data dir datadir purg task purg task statu purgetaskstatu start start start complet purg task statu purgetaskstatu purg task statu purgetaskstatu purg task statu purgetaskstatu start start string snap dir snapdir string data log dir datalogdir snap retain count snapretaincount purg interv purgeinterv timer timer constructor datadir cleanup manag datadircleanupmanag take paramet schedul purg task param snap dir snapdir snapshot directori param data log dir datalogdir transact log directori param snap retain count snapretaincount number snapshot retain after purg param purg interv purgeinterv purg interv hour datadir cleanup manag datadircleanupmanag string snap dir snapdir string data log dir datalogdir snap retain count snapretaincount purg interv purgeinterv snap dir snapdir snap dir snapdir data log dir datalogdir data log dir datalogdir snap retain count snapretaincount snap retain count snapretaincount purg interv purgeinterv purg interv purgeinterv log info autopurg snap retain count snapretaincount set snap retain count snapretaincount log info autopurg purg interv purgeinterv set purg interv purgeinterv valid purg configur schedul purg task purg task keep most recent code snap retain count snapretaincount code number snapshot delet remain code purg interv purgeinterv code hour code purg interv purgeinterv code code code code neg integ code schedul purg task purg txn log purgetxnlog purg file file start purg task statu purgetaskstatu start purg task statu purgetaskstatu log warn purg task run don schedul purg task zero neg purg interv purg interv purgeinterv log info purg task schedul timer timer purg task purgetask timer task timertask task purg task purgetask data log dir datalogdir snap dir snapdir snap retain count snapretaincount timer schedul fix rate scheduleatfixedr task time unit timeunit hour milli tomilli purg interv purgeinterv purg task statu purgetaskstatu purg task statu purgetaskstatu start shutdown purg task shutdown purg task statu purgetaskstatu start purg task statu purgetaskstatu log info shut down purg task timer cancel purg task statu purgetaskstatu purg task statu purgetaskstatu complet log warn purg task start ignor shutdown purg task purgetask timer task timertask string log dir logsdir string snap dir snapsdir snap retain count snapretaincount purg task purgetask string data dir datadir string snap dir snapdir count log dir logsdir data dir datadir snap dir snapsdir snap dir snapdir snap retain count snapretaincount count overrid run log info purg task start purg txn log purgetxnlog purg file log dir logsdir file snap dir snapsdir snap retain count snapretaincount except log error error occur purg log info purg task complet return statu purg task statu purg task purg task statu purgetaskstatu get purg task statu getpurgetaskstatu purg task statu purgetaskstatu return snapshot directori snapshot directori string get snap dir getsnapdir snap dir snapdir return transact log directori transact log directori string get data log dir getdatalogdir data log dir datalogdir return purg interv hour purg interv hour get purg interv getpurgeinterv purg interv purgeinterv return number snapshot retain after purg number snapshot retain after purg get snap retain count getsnapretaincount snap retain count snapretaincount 

statu data dir datadir purg task purg task statu purgetaskstatu start start start complet 

purg task purgetask timer task timertask string log dir logsdir string snap dir snapsdir snap retain count snapretaincount purg task purgetask string data dir datadir string snap dir snapdir count log dir logsdir data dir datadir snap dir snapsdir snap dir snapdir snap retain count snapretaincount count overrid run log info purg task start purg txn log purgetxnlog purg file log dir logsdir file snap dir snapsdir snap retain count snapretaincount except log error error occur purg log info purg task complet 

manag read interact applic node zookeep instanc zoo inspector read manag zooinspectorreadonlymanag param node path nodepath path node delet data node abstract string get data getdata string node path nodepath param node path nodepath path node delet meta data metadata node abstract map string string get node meta getnodemeta string node path nodepath param node path nodepath path node delet acl set node abstract list map string string get acl getacl string node path nodepath meta data metadata current session abstract map string string get session meta getsessionmeta param node path nodepath path node delet node ha children abstract ha children haschildren string node path nodepath param node path nodepath path node delet index node sibl abstract get node index getnodeindex string node path nodepath param node path nodepath path node delet number children node abstract get num children getnumchildren string node path nodepath param node path nodepath path node delet param child index childindex index node list node children path node child node path nodepath child index childindex abstract string get node child getnodechild string node path nodepath child index childindex param node path nodepath path node delet node allow children node abstract allow children isallowschildren string node path nodepath param node path nodepath path node delet link list children node abstract list string get children getchildren string node path nodepath 

manag interact applic node tree zookeep instanc zoo inspector node tree manag zooinspectornodetreemanag zoo inspector read manag zooinspectorreadonlymanag param parent parent node path node add param node name nodenam name node node successfulli creat abstract creat node createnod string parent string node name nodenam param node path nodepath path node delet node successfulli delet abstract delet node deletenod string node path nodepath 

load from log test loadfromlogtest zk test zktestcas watcher string hostport 127 port assign portassign uniqu connect timeout connect timeout 3000 num messag num messag 300 logger log logger factori loggerfactori get logger getlogg load from log test loadfromlogtest set up quorum ha transact overhead creat close session transact overhead transact overhead total transact total transact num messag num messag transact overhead transact overhead connect test transact from log load except except thrown here test test load testload except setup singl server cluster file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 100 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout gener transact get log num messag num messag zk creat invalidsnap id open acl unsaf open acl unsaf creat mode createmod persist zk close shutdown asserttru wait server shutdown client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout verifi file txn log filetxnlog read transact file log dir logdir file tmp dir tmpdir file txn snap log filetxnsnaplog version file txn snap log filetxnsnaplog version file txn log filetxnlog txn log txnlog file txn log filetxnlog log dir logdir txn iter txniter itr txn log txnlog read expect zxid expectedzxid last zxid lastzxid txn header txnheader hdr hdr itr get header gethead expect zxid expectedzxid asserttru transact last zxid lastzxid last zxid lastzxid zxid hdr get zxid getzxid last zxid lastzxid hdr get zxid getzxid asserttru except next transact expect expect zxid expectedzxid retreiv hdr get zxid getzxid hdr get zxid getzxid expect zxid expectedzxid last zxid lastzxid hdr get zxid getzxid itr next asserttru process transact expect zxid expectedzxid total transact total transact expect zxid expectedzxid total transact total transact process watch event watchedev event event get type gettyp event get state getstat sync connect syncconnect connect disconnect connect zookeep 1046 verifi cversion pzxid increment after creat delet failur restor test test txn failur testtxnfailur except count file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir file txn snap log filetxnsnaplog log file logfil file txn snap log filetxnsnaplog tmp dir tmpdir tmp dir tmpdir data tree datatre dt data tree datatre dt creat node createnod test count count count dt creat node createnod test count count current time milli currenttimemilli data node datanod zk dt get node getnod test make creat fail verifi cversion log info attempt creat test count op doop log file logfil op code opcod creat test count dt zk log info attempt creat test count op doop log file logfil op code opcod creat test count dt zk zk stat get cversion getcvers log info attempt creat test count op doop log file logfil op code opcod multi test count dt zk zk stat get cversion getcvers log info attempt creat test count op doop log file logfil op code opcod multi test count dt zk make delet fo fail verifi cversion doesn happen anymor set cversion creat log info attempt delet test count op doop log file logfil op code opcod delet test count dt zk creat delet depend type verifi cversion befor oper cversion afer op doop file txn snap log filetxnsnaplog log file logfil type string path data tree datatre dt data node datanod parent cversion except last slash lastslash path last index lastindexof string parent name parentnam path substr last slash lastslash prev cversion prevcvers parent stat get cversion getcvers prev pzxid prevpzxid parent stat get pzxid getpzxid list string child dt get children getchildren parent name parentnam string child str childstr string child child str childstr log info children child str childstr parent name parentnam log info cverion pzxid prev cversion prevcvers prev pzxid prevpzxid record txn txn header txnheader txn header txnheader type op code opcod delet txn delet txn deletetxn path txn header txnheader txn header txnheader xabcd 0xabcd x123 0x123 prev pzxid prevpzxid current time milli currenttimemilli op code opcod delet type op code opcod creat txn header txnheader txn header txnheader xabcd 0xabcd x123 0x123 prev pzxid prevpzxid current time milli currenttimemilli op code opcod creat txn creat txn createtxn path cversion type op code opcod multi txn header txnheader txn header txnheader xabcd 0xabcd x123 0x123 prev pzxid prevpzxid current time milli currenttimemilli op code opcod creat txn creat txn createtxn path cversion arrai list arraylist txn list txnlist arrai list arraylist arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao txn serial boa request buffer bytebuff bb buffer bytebuff wrap bao arrai tobytearrai txn txact txn op code opcod creat bb arrai txn list txnlist add txact txn multi txn multitxn txn list txnlist txn header txnheader txn header txnheader xabcd 0xabcd x123 0x123 prev pzxid prevpzxid current time milli currenttimemilli op code opcod multi log file logfil process transact processtransact txn header txnheader dt txn cversion newcvers parent stat get cversion getcvers pzxid newpzxid parent stat get pzxid getpzxid child dt get children getchildren parent name parentnam child str childstr string child child str childstr log info children child str childstr parent name parentnam log info cverion pzxid cversion newcvers pzxid newpzxid asserttru type cversion pzxid verif fail expect prev cversion prevcvers prev pzxid prevpzxid found cversion newcvers pzxid newpzxid cversion newcvers prev cversion prevcvers pzxid newpzxid prev pzxid prevpzxid simul zookeep 1069 verifi flush befor pad log file padlogfil fix test test pad testpad except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir file txn log filetxnlog txn log txnlog file txn log filetxnlog tmp dir tmpdir txn header txnheader txn header txnheader txn header txnheader xabcd 0xabcd x123 0x123 x123 0x123 current time milli currenttimemilli op code opcod creat record txn creat txn createtxn test txn log txnlog append txn header txnheader txn file input stream fileinputstream file input stream fileinputstream tmp dir tmpdir get path getpath log hex string tohexstr txn header txnheader get zxid getzxid binari input archiv binaryinputarch ia binari input archiv binaryinputarch get archiv getarch file header filehead header file header filehead header deseri ia filehead log info receiv magic header get magic getmag expect file txn log filetxnlog txnlog magic txnlog magic asserttru miss magic number header get magic getmag file txn log filetxnlog txnlog magic txnlog magic test restor snapshot ha data ahead zxid snapshot file test test restor testrestor except setup singl server cluster file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 10000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout start current time milli currenttimemilli connect end current time milli currenttimemilli end start 5000 asserttru connect server second thread sleep 200 except log warn intrrupt gener transact string last path lastpath zk creat invalidsnap id open acl unsaf open acl unsaf creat mode createmod persist num messag num messag last path lastpath zk creat invalidsnap test id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti zk close string token last path lastpath split string expect path expectedpath invalidsnap test string format 010d integ token valu intvalu zxid ezxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid forc zxid content zk get zk databas getzkdatabas setlast process zxid setlastprocessedzxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid 10 log info set last process zxid lastprocessedzxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid forc snapshot restor zk snapshot takesnapshot zk shutdown shutdown zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 10000 server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout connect zxid fzxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid verifi last process zxid lastprocessedzxid set correctli asserttru restor fail expect zxid zxid ezxid found zxid fzxid zxid fzxid zxid ezxid zk zoo keeper zookeep hostport connect timeout connect timeout start current time milli currenttimemilli connect end current time milli currenttimemilli end start 5000 asserttru connect server second thread sleep 200 except log warn intrrupt verifi correct data sequenti znode creation proce correctli after point string children string path children zk get children getchildren invalidsnap arrai toarrai string path zk creat invalidsnap test id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti zk close log info expect expect path expectedpath found path asserttru error sequenti znode creation expect expect path expectedpath found path path equal expect path expectedpath asserttru unexpect number children children length expect num messag num messag children length num messag num messag shutdown test restor snapshot ha error data ahead zxid snapshot file test test restor transact error testrestorewithtransactionerror except setup singl server cluster file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 10000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout start current time milli currenttimemilli connect end current time milli currenttimemilli end start 5000 asserttru connect server second thread sleep 200 except log warn intrrupt gener transact num messag num messag zk creat invaliddir test id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti node except nonodeexcept expect zk close forc zxid content zk get zk databas getzkdatabas setlast process zxid setlastprocessedzxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid 10 log info set last process zxid lastprocessedzxid zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid forc snapshot restor zk snapshot takesnapshot zk shutdown shutdown zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 10000 server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout shutdown 

connect string parser test connectstringparsertest zk test zktestcas test test singl server chroot path testsingleserverchrootpath string chroot path chrootpath hallo welt string server 10 10 10 chroot path assertchrootpath chroot path chrootpath connect string parser connectstringpars server chroot path chrootpath test test multipl server chroot path testmultipleserverschrootpath string chroot path chrootpath hallo welt string server 10 10 10 10 10 10 chroot path assertchrootpath chroot path chrootpath connect string parser connectstringpars server chroot path chrootpath test test pars server port testparseserverswithoutport string server 10 10 10 10 10 10 connect string parser connectstringpars parser connect string parser connectstringpars server equal assertequ 10 10 10 parser get server address getserveraddress get get host name gethostnam equal assertequ 10 10 10 parser get server address getserveraddress get get host name gethostnam test test pars server port testparseserverswithport string server 10 10 10 112 10 10 10 110 connect string parser connectstringpars parser connect string parser connectstringpars server equal assertequ 10 10 10 parser get server address getserveraddress get get host name gethostnam equal assertequ 10 10 10 parser get server address getserveraddress get get host name gethostnam equal assertequ 112 parser get server address getserveraddress get get port getport equal assertequ 110 parser get server address getserveraddress get get port getport chroot path assertchrootpath string expect connect string parser connectstringpars parser equal assertequ expect parser get chroot path getchrootpath 

repres child jaxb special json version requir get proper format json xml output detail node resourc znoderesourc xml root element xmlrootel name child children zchildren string path string uri string child uri child uri xml element wrapper xmlelementwrapp name children xml element xmlelement name child list string children children zchildren need jersei children arrai list arraylist string children zchildren string path string uri string child uri child uri list string children path path uri uri child uri child uri child uri child uri children children children children arrai list arraylist string overrid hash code hashcod path hash code hashcod overrid equal object obj obj children zchildren children zchildren children zchildren obj path equal path children equal children overrid string string tostr children zchildren path children 

sledg hammer sledgehamm thread watcher zoo keeper zookeep zk count read write readsperwrit sledg hammer sledgehamm string host count read write readsperwrit io except ioexcept zk zoo keeper zookeep host 10000 count count read write readsperwrit read write readsperwrit run stat stat stat string path zk creat hammer hammer id open acl unsaf open acl unsaf creat mode createmod persist sequenti persist sequenti tag path here get byte getbyt string start path startpath hammer start println wait start path startpath zk exist start path startpath wait println run count print list string child zk get children getchildren hammer collect shuffl child string child start startswith hammer hammer zk set data setdata tag read write readsperwrit zk get data getdata stat keeper except keeperexcept connect loss except connectionlossexcept ignor connect loss keeper except keeperexcept print stack trace printstacktrac println zk close except print stack trace printstacktrac param arg io except ioexcept keeper except keeperexcept number format except numberformatexcept main string arg number format except numberformatexcept io except ioexcept arg length err println usag sledg hammer sledgehamm zookeep server zookeep server rep read rep read rep exit sledg hammer sledgehamm sledg hammer sledgehamm arg integ pars parseint arg integ pars parseint arg start exit process watch event watchedev event notifi notifyal 

implement stream charstream stream assum contain ascii charact unicod process simpl stream simplecharstream flag staticflag bufsiz avail token begin tokenbegin bufpo buflin bufcolumn column line prev cr prevchariscr prev lf prevcharislf java io reader input stream inputstream buffer max next ind maxnextcharind buf inbuf tab size tabsiz set tab size settabs tab size tabsiz get tab size gettabs tab size tabsiz expand buff expandbuff wrap wraparound newbuff bufsiz 2048 newbuflin bufsiz 2048 newbufcolumn bufsiz 2048 wrap wraparound arraycopi buffer token begin tokenbegin newbuff bufsiz token begin tokenbegin arraycopi buffer newbuff bufsiz token begin tokenbegin bufpo buffer newbuff arraycopi buflin token begin tokenbegin newbuflin bufsiz token begin tokenbegin arraycopi buflin newbuflin bufsiz token begin tokenbegin bufpo buflin newbuflin arraycopi bufcolumn token begin tokenbegin newbufcolumn bufsiz token begin tokenbegin arraycopi bufcolumn newbufcolumn bufsiz token begin tokenbegin bufpo bufcolumn newbufcolumn max next ind maxnextcharind bufpo bufsiz token begin tokenbegin arraycopi buffer token begin tokenbegin newbuff bufsiz token begin tokenbegin buffer newbuff arraycopi buflin token begin tokenbegin newbuflin bufsiz token begin tokenbegin buflin newbuflin arraycopi bufcolumn token begin tokenbegin newbufcolumn bufsiz token begin tokenbegin bufcolumn newbufcolumn max next ind maxnextcharind bufpo token begin tokenbegin throwabl error get messag getmessag bufsiz 2048 avail bufsiz token begin tokenbegin fill buff fillbuff java io io except ioexcept max next ind maxnextcharind avail avail bufsiz token begin tokenbegin 2048 bufpo max next ind maxnextcharind avail token begin tokenbegin token begin tokenbegin bufpo max next ind maxnextcharind expand buff expandbuff avail token begin tokenbegin avail bufsiz token begin tokenbegin avail 2048 expand buff expandbuff avail token begin tokenbegin input stream inputstream read buffer max next ind maxnextcharind avail max next ind maxnextcharind input stream inputstream close java io io except ioexcept max next ind maxnextcharind java io io except ioexcept bufpo backup token begin tokenbegin token begin tokenbegin bufpo begin token begintoken java io io except ioexcept token begin tokenbegin read readchar token begin tokenbegin bufpo updat line column updatelinecolumn column prev lf prevcharislf prev lf prevcharislf line column prev cr prevchariscr prev cr prevchariscr prev lf prevcharislf line column prev cr prevchariscr prev lf prevcharislf column column tab size tabsiz column tab size tabsiz buflin bufpo line bufcolumn bufpo column read readchar java io io except ioexcept buf inbuf buf inbuf bufpo bufsiz bufpo buffer bufpo bufpo max next ind maxnextcharind fill buff fillbuff buffer bufpo updat line column updatelinecolumn deprec get end column getendcolumn get column getcolumn bufcolumn bufpo deprec get end line getendlin get line getlin buflin bufpo get end column getendcolumn bufcolumn bufpo get end line getendlin buflin bufpo get begin column getbegincolumn bufcolumn token begin tokenbegin get begin line getbeginlin buflin token begin tokenbegin backup amount buf inbuf amount bufpo amount bufpo bufsiz simpl stream simplecharstream java io reader dstream startlin startcolumn buffers input stream inputstream dstream line startlin column startcolumn avail bufsiz buffers buffer buffers buflin buffers bufcolumn buffers simpl stream simplecharstream java io reader dstream startlin startcolumn dstream startlin startcolumn 4096 simpl stream simplecharstream java io reader dstream dstream 4096 init reinit java io reader dstream startlin startcolumn buffers input stream inputstream dstream line startlin column startcolumn buffer buffers buffer length avail bufsiz buffers buffer buffers buflin buffers bufcolumn buffers prev lf prevcharislf prev cr prevchariscr token begin tokenbegin buf inbuf max next ind maxnextcharind bufpo init reinit java io reader dstream startlin startcolumn init reinit dstream startlin startcolumn 4096 init reinit java io reader dstream init reinit dstream 4096 simpl stream simplecharstream java io input stream inputstream dstream string encod startlin startcolumn buffers java io unsupport encod except unsupportedencodingexcept encod java io input stream reader inputstreamread dstream java io input stream reader inputstreamread dstream encod startlin startcolumn buffers simpl stream simplecharstream java io input stream inputstream dstream startlin startcolumn buffers java io input stream reader inputstreamread dstream startlin startcolumn buffers simpl stream simplecharstream java io input stream inputstream dstream string encod startlin startcolumn java io unsupport encod except unsupportedencodingexcept dstream encod startlin startcolumn 4096 simpl stream simplecharstream java io input stream inputstream dstream startlin startcolumn dstream startlin startcolumn 4096 simpl stream simplecharstream java io input stream inputstream dstream string encod java io unsupport encod except unsupportedencodingexcept dstream encod 4096 simpl stream simplecharstream java io input stream inputstream dstream dstream 4096 init reinit java io input stream inputstream dstream string encod startlin startcolumn buffers java io unsupport encod except unsupportedencodingexcept init reinit encod java io input stream reader inputstreamread dstream java io input stream reader inputstreamread dstream encod startlin startcolumn buffers init reinit java io input stream inputstream dstream startlin startcolumn buffers init reinit java io input stream reader inputstreamread dstream startlin startcolumn buffers init reinit java io input stream inputstream dstream string encod java io unsupport encod except unsupportedencodingexcept init reinit dstream encod 4096 init reinit java io input stream inputstream dstream init reinit dstream 4096 init reinit java io input stream inputstream dstream string encod startlin startcolumn java io unsupport encod except unsupportedencodingexcept init reinit dstream encod startlin startcolumn 4096 init reinit java io input stream inputstream dstream startlin startcolumn init reinit dstream startlin startcolumn 4096 string get imag getimag bufpo token begin tokenbegin string buffer token begin tokenbegin bufpo token begin tokenbegin string buffer token begin tokenbegin bufsiz token begin tokenbegin string buffer bufpo get suffix getsuffix len ret len bufpo len arraycopi buffer bufpo len ret len arraycopi buffer bufsiz len bufpo ret len bufpo arraycopi buffer ret len bufpo bufpo ret done buffer buflin bufcolumn method adjust line column number start token adjust begin line column adjustbeginlinecolumn line newlin col newcol start token begin tokenbegin len bufpo token begin tokenbegin len bufpo token begin tokenbegin buf inbuf len bufsiz token begin tokenbegin bufpo buf inbuf next col diff nextcoldiff column diff columndiff len buflin start bufsiz buflin start bufsiz buflin line newlin next col diff nextcoldiff column diff columndiff bufcolumn bufcolumn bufcolumn col newcol column diff columndiff column diff columndiff next col diff nextcoldiff len buflin line newlin bufcolumn col newcol column diff columndiff len buflin start bufsiz buflin start bufsiz buflin line newlin buflin line newlin line buflin column bufcolumn 

leader elect bean mbean implement leader elect bean leaderelectionbean leader elect mx bean leaderelectionmxbean zkm bean info zkmbeaninfo date start time starttim date string get name getnam leader elect leaderelect hidden ishidden string get start time getstarttim start time starttim string tostr 

deprec ha deprec releas deprec auth fast leader elect authfastleaderelect elect logger log logger factori loggerfactori get logger getlogg auth fast leader elect authfastleaderelect sequenc number messag sequenc max tag maxtag determin time process ha wait believ ha reach end leader elect final wait finalizewait 100 challeng counter avoid replai attack challeng counter challengecount flag determin authent auth enabl authen notif propos leader leader zxid propos leader zxid epoch epoch current state sender quorum peer quorump server state serverst state address sender inet socket address inetsocketaddress addr messag send notif ack send tosend type mtype crequest challeng notif ack send tosend type mtype type tag leader zxid epoch server state serverst state inet socket address inetsocketaddress addr type crequest type tag tag leader leader zxid zxid epoch epoch state state addr addr challeng type tag tag leader leader zxid zxid epoch epoch state state addr addr notif type leader leader zxid zxid epoch epoch state quorum peer quorump server state serverst tag tag addr addr ack type tag tag leader leader zxid zxid epoch epoch state state addr addr messag type notif acknowledg type propos leader notif leader id contain tag ack zxid notif zxid epoch epoch current state quorum peer quorump server state serverst state messag tag tag inet socket address inetsocketaddress addr link block queue linkedblockingqueu send tosend sendqueu link block queue linkedblockingqueu notif recvqueu messeng datagram socket datagramsocket socket mysocket last propos leader lastproposedlead last propos zxid lastproposedzxid last epoch lastepoch set ackset concurr hash map concurrenthashmap challeng map challengemap concurr hash map concurrenthashmap semaphor challeng mutex challengemutex concurr hash map concurrenthashmap semaphor ack mutex ackmutex concurr hash map concurrenthashmap inet socket address inetsocketaddress concurr hash map concurrenthashmap addr challeng map addrchallengemap worker receiv workerreceiv runnabl datagram socket datagramsocket socket mysocket messeng msg mymsg worker receiv workerreceiv datagram socket datagramsocket messeng msg socket mysocket msg mymsg msg save challeng savechalleng tag challeng semaphor challeng mutex challengemutex get tag messeng challeng map challengemap put tag challeng challeng mutex challengemutex remov tag releas log error challeng mutex object run respons byte responsebyt 48 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap respons byte responsebyt datagram packet datagrampacket respons packet responsepacket datagram packet datagrampacket respons byte responsebyt respons byte responsebyt length sleep receiv respons buffer responsebuff clear socket mysocket receiv respons packet responsepacket io except ioexcept log warn ignor except receiv receiv messag respons packet responsepacket get length getlength respons byte responsebyt length log warn respons respons packet responsepacket get length getlength respons packet responsepacket string tostr respons buffer responsebuff clear type respons buffer responsebuff get getint type type log warn bad msg type type tag respons buffer responsebuff get getlong quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst respons buffer responsebuff get getint ackstat quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst lead ackstat quorum peer quorump server state serverst follow vote current self get current vote getcurrentvot type receiv challeng request send tosend send tosend send tosend type mtype challeng tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress sendqueu offer receiv challeng store challeng respons buffer responsebuff get getlong save challeng savechalleng tag challeng notif notif leader respons buffer responsebuff get getlong zxid respons buffer responsebuff get getlong epoch respons buffer responsebuff get getlong state ackstat addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress msg mymsg last epoch lastepoch epoch zxid msg mymsg last propos zxid lastproposedzxid zxid msg mymsg last propos zxid lastproposedzxid leader msg mymsg last propos leader lastproposedlead msg mymsg last propos zxid lastproposedzxid zxid msg mymsg last propos leader lastproposedlead leader msg mymsg last epoch lastepoch epoch rec challeng recchalleng inet socket address inetsocketaddress addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress auth enabl authen concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get addr tmp map tmpmap tmp map tmpmap get tag rec challeng recchalleng respons buffer responsebuff get getlong tmp map tmpmap get tag rec challeng recchalleng recvqueu offer send tosend send tosend send tosend type mtype ack tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst addr sendqueu offer log warn incorrect challeng rec challeng recchalleng addr challeng map addrchallengemap string tostr log warn challeng host addr tag recvqueu offer send tosend send tosend send tosend type mtype ack tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress sendqueu offer recept ack messag remov from queue semaphor ack mutex ackmutex get tag releas log error empti ack semaphor ackset add tag auth enabl authen concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get respons packet responsepacket get socket address getsocketaddress tmp map tmpmap tmp map tmpmap remov tag log warn address ensembl configur respons packet responsepacket get socket address getsocketaddress ackstat quorum peer quorump server state serverst notif outofsync notif outofsync leader respons buffer responsebuff get getlong outofsync zxid respons buffer responsebuff get getlong outofsync epoch respons buffer responsebuff get getlong outofsync state ackstat outofsync addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress recvqueu offer outofsync log warn receiv messag incorrect type type worker sender workersend runnabl random rand max attempt maxattempt ack wait ackwait final wait finalizewait receiv socket max number attempt input worker sender workersend attempt max attempt maxattempt attempt rand random java lang thread current thread currentthread get id getid current time milli currenttimemilli gen challeng genchalleng buf buf challeng counter challengecount xff000000 0xff000000 24 buf challeng counter challengecount x00 ff0000 0x00ff0000 16 buf challeng counter challengecount x0000 ff00 0x0000ff00 buf challeng counter challengecount x000000 ff 0x000000ff challeng counter challengecount secret rand next nextint java lang integ max valu max valu buf secret xff000000 0xff000000 24 buf secret x00 ff0000 0x00ff0000 16 buf secret x0000 ff00 0x0000ff00 buf secret x000000 ff 0x000000ff buf ff 0xff 56 buf ff 0xff 48 buf ff 0xff 40 buf ff 0xff 32 buf ff 0xff 24 buf ff 0xff 16 buf ff 0xff buf ff 0xff run send tosend sendqueu process interrupt except interruptedexcept process send tosend attempt zero request byte requestbyt 48 datagram packet datagrampacket request packet requestpacket datagram packet datagrampacket request byte requestbyt request byte requestbyt length buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt type build challeng request packet send request buffer requestbuff clear request buffer requestbuff put putint send tosend type mtype crequest ordin request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin zero 32 request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr challeng map challengemap get tag socket mysocket send request packet requestpacket io except ioexcept log warn except send challeng build challeng packet send challeng newchalleng concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get addr tmp map tmpmap tmp tmplong tmp map tmpmap get tag tmp tmplong challeng newchalleng tmp tmplong challeng newchalleng gen challeng genchalleng tmp map tmpmap put tag challeng newchalleng request buffer requestbuff clear request buffer requestbuff put putint send tosend type mtype challeng ordin request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong challeng newchalleng zero 24 request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr socket mysocket send request packet requestpacket io except ioexcept log warn except send challeng log error address configur addr build notif packet send request buffer requestbuff clear request buffer requestbuff put putint type request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch zero request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr challeng mychalleng ack myack attempt max attempt maxattempt obtain challeng on challeng mychalleng auth enabl authen send tosend crequest send tosend send tosend type mtype crequest tag leader zxid epoch quorum peer quorump server state serverst addr sendqueu offer crequest timeout ack wait ackwait java lang math pow attempt semaphor semaphor messeng challeng mutex challengemutex put tag acquir tryacquir timeout time unit timeunit millisecond challeng mychalleng challeng map challengemap contain kei containskei tag interrupt except interruptedexcept log warn challeng request except don challeng skip send notif auth enabl authen challeng mychalleng attempt auth enabl authen request buffer requestbuff posit 40 tmp tmplong challeng map challengemap get tag tmp tmplong request buffer requestbuff put putlong tmp tmplong log warn challeng tag tag socket mysocket send request packet requestpacket semaphor semaphor timeout ack wait ackwait java lang math pow 10 attempt ack mutex ackmutex put tag acquir tryacquir timeout time unit timeunit millisecond interrupt except interruptedexcept log warn ack except ackset remov tag ack myack io except ioexcept log warn send except ack myack receiv ack successfulli challeng map challengemap remov tag attempt messag queue attempt epoch hasn chang epoch logicalclock challeng map challengemap remov tag sendqueu offer request buffer requestbuff clear request buffer requestbuff put putint type request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr socket mysocket send request packet requestpacket io except ioexcept log warn except send ack queue empti queueempti sendqueu empti isempti ackset empti isempti recvqueu empti isempti messeng thread datagram socket datagramsocket socket mysocket ackset collect set from map newsetfrommap concurr hash map concurrenthashmap challeng map challengemap concurr hash map concurrenthashmap challeng mutex challengemutex concurr hash map concurrenthashmap semaphor ack mutex ackmutex concurr hash map concurrenthashmap semaphor addr challeng map addrchallengemap concurr hash map concurrenthashmap inet socket address inetsocketaddress concurr hash map concurrenthashmap last propos leader lastproposedlead last propos zxid lastproposedzxid last epoch lastepoch thread thread thread worker sender workersend worker sender workersend thread set daemon setdaemon start quorum server quorumserv server self get vote view getvotingview valu inet socket address inetsocketaddress saddr inet socket address inetsocketaddress server addr get address getaddress port addr challeng map addrchallengemap put saddr concurr hash map concurrenthashmap thread thread worker receiv workerreceiv worker receiv workerreceiv thread start quorum peer quorump self port logicalclock elect instanc datagram socket datagramsocket socket mysocket propos leader proposedlead propos zxid proposedzxid auth fast leader elect authfastleaderelect quorum peer quorump self auth auth enabl authen auth starter self auth fast leader elect authfastleaderelect quorum peer quorump self starter self starter quorum peer quorump self self self port self get vote view getvotingview get self get id getid elect addr electionaddr get port getport propos leader proposedlead propos zxid proposedzxid socket mysocket datagram socket datagramsocket port socket mysocket set timeout setsotimeout 20000 socket except socketexcept e1 e1 print stack trace printstacktrac runtim except runtimeexcept sendqueu link block queue linkedblockingqueu send tosend self get vote view getvotingview size recvqueu link block queue linkedblockingqueu notif self get vote view getvotingview size messeng self get vote view getvotingview size socket mysocket leav instanc leaveinst logicalclock send notif sendnotif quorum server quorumserv server self get view getview valu send tosend notmsg send tosend send tosend type mtype notif auth fast leader elect authfastleaderelect sequenc propos leader proposedlead propos zxid proposedzxid logicalclock quorum peer quorump server state serverst self get view getview get server id elect addr electionaddr sendqueu offer notmsg total order predic totalorderpred id zxid zxid propos zxid proposedzxid zxid propos zxid proposedzxid id propos leader proposedlead term predic termpred hash map hashmap inet socket address inetsocketaddress vote vote zxid collect vote vote cast votescast vote valu count first make view consist peer differ zxid server depend time vote vote cast votescast get id getid get zxid getzxid zxid count count self get vote view getvotingview size shutdown implement leader elect simpli empti method shutdown invok quorum peer quorump find elect leader interrupt except interruptedexcept vote leader lookforlead interrupt except interruptedexcept self jmx leader elect bean jmxleaderelectionbean leader elect bean leaderelectionbean bean registri mbeanregistri get instanc getinst self jmx leader elect bean jmxleaderelectionbean self jmx local peer bean jmxlocalpeerbean except log warn fail jmx self jmx leader elect bean jmxleaderelectionbean hash map hashmap inet socket address inetsocketaddress vote recvset hash map hashmap inet socket address inetsocketaddress vote hash map hashmap inet socket address inetsocketaddress vote outofelect hash map hashmap inet socket address inetsocketaddress vote logicalclock propos leader proposedlead self get id getid propos zxid proposedzxid self get last log zxid getlastloggedzxid log info elect talli send notif sendnotif loop exchang notif find leader self get peer state getpeerst server state serverst remov next notif from queue time after time termin time notif recvqueu poll final wait finalizewait time unit timeunit millisecond send more notif haven receiv process notif outofelect empti isempti recvset size send notif sendnotif state epoch logicalclock logicalclock epoch recvset clear total order predic totalorderpred leader zxid propos leader proposedlead leader propos zxid proposedzxid zxid send notif sendnotif epoch logicalclock total order predic totalorderpred leader zxid propos leader proposedlead leader propos zxid proposedzxid zxid send notif sendnotif recvset put addr vote leader zxid receiv from node termin self get vote view getvotingview size recvset size self set peer state setpeerst propos leader proposedlead self get id getid server state serverst lead server state serverst follow self state server state serverst follow thread sleep 100 leav instanc leaveinst vote propos leader proposedlead propos zxid proposedzxid term predic termpred recvset propos leader proposedlead propos zxid proposedzxid wait fix amount time log info pass predic thread sleep final wait finalizewait notif probe recvqueu peek verifi chang propos leader recvqueu empti isempti total order predic totalorderpred recvqueu peek leader recvqueu peek zxid recvqueu poll recvqueu empti isempti log warn propos leader propos leader proposedlead self set peer state setpeerst propos leader proposedlead self get id getid server state serverst lead server state serverst follow leav instanc leaveinst vote propos leader proposedlead propos zxid proposedzxid lead outofelect put addr vote leader zxid term predic termpred outofelect leader zxid self set peer state setpeerst leader self get id getid server state serverst lead server state serverst follow leav instanc leaveinst vote leader zxid follow outofelect put addr vote leader zxid term predic termpred outofelect leader zxid self set peer state setpeerst leader self get id getid server state serverst lead server state serverst follow leav instanc leaveinst vote leader zxid self jmx leader elect bean jmxleaderelectionbean bean registri mbeanregistri get instanc getinst unregist self jmx leader elect bean jmxleaderelectionbean except log warn fail unregist jmx self jmx leader elect bean jmxleaderelectionbean 

notif propos leader leader zxid propos leader zxid epoch epoch current state sender quorum peer quorump server state serverst state address sender inet socket address inetsocketaddress addr 

messag send notif ack send tosend type mtype crequest challeng notif ack send tosend type mtype type tag leader zxid epoch server state serverst state inet socket address inetsocketaddress addr type crequest type tag tag leader leader zxid zxid epoch epoch state state addr addr challeng type tag tag leader leader zxid zxid epoch epoch state state addr addr notif type leader leader zxid zxid epoch epoch state quorum peer quorump server state serverst tag tag addr addr ack type tag tag leader leader zxid zxid epoch epoch state state addr addr messag type notif acknowledg type propos leader notif leader id contain tag ack zxid notif zxid epoch epoch current state quorum peer quorump server state serverst state messag tag tag inet socket address inetsocketaddress addr 

type mtype crequest challeng notif ack 

messeng datagram socket datagramsocket socket mysocket last propos leader lastproposedlead last propos zxid lastproposedzxid last epoch lastepoch set ackset concurr hash map concurrenthashmap challeng map challengemap concurr hash map concurrenthashmap semaphor challeng mutex challengemutex concurr hash map concurrenthashmap semaphor ack mutex ackmutex concurr hash map concurrenthashmap inet socket address inetsocketaddress concurr hash map concurrenthashmap addr challeng map addrchallengemap worker receiv workerreceiv runnabl datagram socket datagramsocket socket mysocket messeng msg mymsg worker receiv workerreceiv datagram socket datagramsocket messeng msg socket mysocket msg mymsg msg save challeng savechalleng tag challeng semaphor challeng mutex challengemutex get tag messeng challeng map challengemap put tag challeng challeng mutex challengemutex remov tag releas log error challeng mutex object run respons byte responsebyt 48 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap respons byte responsebyt datagram packet datagrampacket respons packet responsepacket datagram packet datagrampacket respons byte responsebyt respons byte responsebyt length sleep receiv respons buffer responsebuff clear socket mysocket receiv respons packet responsepacket io except ioexcept log warn ignor except receiv receiv messag respons packet responsepacket get length getlength respons byte responsebyt length log warn respons respons packet responsepacket get length getlength respons packet responsepacket string tostr respons buffer responsebuff clear type respons buffer responsebuff get getint type type log warn bad msg type type tag respons buffer responsebuff get getlong quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst respons buffer responsebuff get getint ackstat quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst lead ackstat quorum peer quorump server state serverst follow vote current self get current vote getcurrentvot type receiv challeng request send tosend send tosend send tosend type mtype challeng tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress sendqueu offer receiv challeng store challeng respons buffer responsebuff get getlong save challeng savechalleng tag challeng notif notif leader respons buffer responsebuff get getlong zxid respons buffer responsebuff get getlong epoch respons buffer responsebuff get getlong state ackstat addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress msg mymsg last epoch lastepoch epoch zxid msg mymsg last propos zxid lastproposedzxid zxid msg mymsg last propos zxid lastproposedzxid leader msg mymsg last propos leader lastproposedlead msg mymsg last propos zxid lastproposedzxid zxid msg mymsg last propos leader lastproposedlead leader msg mymsg last epoch lastepoch epoch rec challeng recchalleng inet socket address inetsocketaddress addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress auth enabl authen concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get addr tmp map tmpmap tmp map tmpmap get tag rec challeng recchalleng respons buffer responsebuff get getlong tmp map tmpmap get tag rec challeng recchalleng recvqueu offer send tosend send tosend send tosend type mtype ack tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst addr sendqueu offer log warn incorrect challeng rec challeng recchalleng addr challeng map addrchallengemap string tostr log warn challeng host addr tag recvqueu offer send tosend send tosend send tosend type mtype ack tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress sendqueu offer recept ack messag remov from queue semaphor ack mutex ackmutex get tag releas log error empti ack semaphor ackset add tag auth enabl authen concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get respons packet responsepacket get socket address getsocketaddress tmp map tmpmap tmp map tmpmap remov tag log warn address ensembl configur respons packet responsepacket get socket address getsocketaddress ackstat quorum peer quorump server state serverst notif outofsync notif outofsync leader respons buffer responsebuff get getlong outofsync zxid respons buffer responsebuff get getlong outofsync epoch respons buffer responsebuff get getlong outofsync state ackstat outofsync addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress recvqueu offer outofsync log warn receiv messag incorrect type type worker sender workersend runnabl random rand max attempt maxattempt ack wait ackwait final wait finalizewait receiv socket max number attempt input worker sender workersend attempt max attempt maxattempt attempt rand random java lang thread current thread currentthread get id getid current time milli currenttimemilli gen challeng genchalleng buf buf challeng counter challengecount xff000000 0xff000000 24 buf challeng counter challengecount x00 ff0000 0x00ff0000 16 buf challeng counter challengecount x0000 ff00 0x0000ff00 buf challeng counter challengecount x000000 ff 0x000000ff challeng counter challengecount secret rand next nextint java lang integ max valu max valu buf secret xff000000 0xff000000 24 buf secret x00 ff0000 0x00ff0000 16 buf secret x0000 ff00 0x0000ff00 buf secret x000000 ff 0x000000ff buf ff 0xff 56 buf ff 0xff 48 buf ff 0xff 40 buf ff 0xff 32 buf ff 0xff 24 buf ff 0xff 16 buf ff 0xff buf ff 0xff run send tosend sendqueu process interrupt except interruptedexcept process send tosend attempt zero request byte requestbyt 48 datagram packet datagrampacket request packet requestpacket datagram packet datagrampacket request byte requestbyt request byte requestbyt length buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt type build challeng request packet send request buffer requestbuff clear request buffer requestbuff put putint send tosend type mtype crequest ordin request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin zero 32 request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr challeng map challengemap get tag socket mysocket send request packet requestpacket io except ioexcept log warn except send challeng build challeng packet send challeng newchalleng concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get addr tmp map tmpmap tmp tmplong tmp map tmpmap get tag tmp tmplong challeng newchalleng tmp tmplong challeng newchalleng gen challeng genchalleng tmp map tmpmap put tag challeng newchalleng request buffer requestbuff clear request buffer requestbuff put putint send tosend type mtype challeng ordin request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong challeng newchalleng zero 24 request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr socket mysocket send request packet requestpacket io except ioexcept log warn except send challeng log error address configur addr build notif packet send request buffer requestbuff clear request buffer requestbuff put putint type request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch zero request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr challeng mychalleng ack myack attempt max attempt maxattempt obtain challeng on challeng mychalleng auth enabl authen send tosend crequest send tosend send tosend type mtype crequest tag leader zxid epoch quorum peer quorump server state serverst addr sendqueu offer crequest timeout ack wait ackwait java lang math pow attempt semaphor semaphor messeng challeng mutex challengemutex put tag acquir tryacquir timeout time unit timeunit millisecond challeng mychalleng challeng map challengemap contain kei containskei tag interrupt except interruptedexcept log warn challeng request except don challeng skip send notif auth enabl authen challeng mychalleng attempt auth enabl authen request buffer requestbuff posit 40 tmp tmplong challeng map challengemap get tag tmp tmplong request buffer requestbuff put putlong tmp tmplong log warn challeng tag tag socket mysocket send request packet requestpacket semaphor semaphor timeout ack wait ackwait java lang math pow 10 attempt ack mutex ackmutex put tag acquir tryacquir timeout time unit timeunit millisecond interrupt except interruptedexcept log warn ack except ackset remov tag ack myack io except ioexcept log warn send except ack myack receiv ack successfulli challeng map challengemap remov tag attempt messag queue attempt epoch hasn chang epoch logicalclock challeng map challengemap remov tag sendqueu offer request buffer requestbuff clear request buffer requestbuff put putint type request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr socket mysocket send request packet requestpacket io except ioexcept log warn except send ack queue empti queueempti sendqueu empti isempti ackset empti isempti recvqueu empti isempti messeng thread datagram socket datagramsocket socket mysocket ackset collect set from map newsetfrommap concurr hash map concurrenthashmap challeng map challengemap concurr hash map concurrenthashmap challeng mutex challengemutex concurr hash map concurrenthashmap semaphor ack mutex ackmutex concurr hash map concurrenthashmap semaphor addr challeng map addrchallengemap concurr hash map concurrenthashmap inet socket address inetsocketaddress concurr hash map concurrenthashmap last propos leader lastproposedlead last propos zxid lastproposedzxid last epoch lastepoch thread thread thread worker sender workersend worker sender workersend thread set daemon setdaemon start quorum server quorumserv server self get vote view getvotingview valu inet socket address inetsocketaddress saddr inet socket address inetsocketaddress server addr get address getaddress port addr challeng map addrchallengemap put saddr concurr hash map concurrenthashmap thread thread worker receiv workerreceiv worker receiv workerreceiv thread start 

worker receiv workerreceiv runnabl datagram socket datagramsocket socket mysocket messeng msg mymsg worker receiv workerreceiv datagram socket datagramsocket messeng msg socket mysocket msg mymsg msg save challeng savechalleng tag challeng semaphor challeng mutex challengemutex get tag messeng challeng map challengemap put tag challeng challeng mutex challengemutex remov tag releas log error challeng mutex object run respons byte responsebyt 48 buffer bytebuff respons buffer responsebuff buffer bytebuff wrap respons byte responsebyt datagram packet datagrampacket respons packet responsepacket datagram packet datagrampacket respons byte responsebyt respons byte responsebyt length sleep receiv respons buffer responsebuff clear socket mysocket receiv respons packet responsepacket io except ioexcept log warn ignor except receiv receiv messag respons packet responsepacket get length getlength respons byte responsebyt length log warn respons respons packet responsepacket get length getlength respons packet responsepacket string tostr respons buffer responsebuff clear type respons buffer responsebuff get getint type type log warn bad msg type type tag respons buffer responsebuff get getlong quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst respons buffer responsebuff get getint ackstat quorum peer quorump server state serverst ackstat quorum peer quorump server state serverst lead ackstat quorum peer quorump server state serverst follow vote current self get current vote getcurrentvot type receiv challeng request send tosend send tosend send tosend type mtype challeng tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress sendqueu offer receiv challeng store challeng respons buffer responsebuff get getlong save challeng savechalleng tag challeng notif notif leader respons buffer responsebuff get getlong zxid respons buffer responsebuff get getlong epoch respons buffer responsebuff get getlong state ackstat addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress msg mymsg last epoch lastepoch epoch zxid msg mymsg last propos zxid lastproposedzxid zxid msg mymsg last propos zxid lastproposedzxid leader msg mymsg last propos leader lastproposedlead msg mymsg last propos zxid lastproposedzxid zxid msg mymsg last propos leader lastproposedlead leader msg mymsg last epoch lastepoch epoch rec challeng recchalleng inet socket address inetsocketaddress addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress auth enabl authen concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get addr tmp map tmpmap tmp map tmpmap get tag rec challeng recchalleng respons buffer responsebuff get getlong tmp map tmpmap get tag rec challeng recchalleng recvqueu offer send tosend send tosend send tosend type mtype ack tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst addr sendqueu offer log warn incorrect challeng rec challeng recchalleng addr challeng map addrchallengemap string tostr log warn challeng host addr tag recvqueu offer send tosend send tosend send tosend type mtype ack tag current get id getid current get zxid getzxid logicalclock self get peer state getpeerst inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress sendqueu offer recept ack messag remov from queue semaphor ack mutex ackmutex get tag releas log error empti ack semaphor ackset add tag auth enabl authen concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get respons packet responsepacket get socket address getsocketaddress tmp map tmpmap tmp map tmpmap remov tag log warn address ensembl configur respons packet responsepacket get socket address getsocketaddress ackstat quorum peer quorump server state serverst notif outofsync notif outofsync leader respons buffer responsebuff get getlong outofsync zxid respons buffer responsebuff get getlong outofsync epoch respons buffer responsebuff get getlong outofsync state ackstat outofsync addr inet socket address inetsocketaddress respons packet responsepacket get socket address getsocketaddress recvqueu offer outofsync log warn receiv messag incorrect type type 

worker sender workersend runnabl random rand max attempt maxattempt ack wait ackwait final wait finalizewait receiv socket max number attempt input worker sender workersend attempt max attempt maxattempt attempt rand random java lang thread current thread currentthread get id getid current time milli currenttimemilli gen challeng genchalleng buf buf challeng counter challengecount xff000000 0xff000000 24 buf challeng counter challengecount x00 ff0000 0x00ff0000 16 buf challeng counter challengecount x0000 ff00 0x0000ff00 buf challeng counter challengecount x000000 ff 0x000000ff challeng counter challengecount secret rand next nextint java lang integ max valu max valu buf secret xff000000 0xff000000 24 buf secret x00 ff0000 0x00ff0000 16 buf secret x0000 ff00 0x0000ff00 buf secret x000000 ff 0x000000ff buf ff 0xff 56 buf ff 0xff 48 buf ff 0xff 40 buf ff 0xff 32 buf ff 0xff 24 buf ff 0xff 16 buf ff 0xff buf ff 0xff run send tosend sendqueu process interrupt except interruptedexcept process send tosend attempt zero request byte requestbyt 48 datagram packet datagrampacket request packet requestpacket datagram packet datagrampacket request byte requestbyt request byte requestbyt length buffer bytebuff request buffer requestbuff buffer bytebuff wrap request byte requestbyt type build challeng request packet send request buffer requestbuff clear request buffer requestbuff put putint send tosend type mtype crequest ordin request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin zero 32 request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr challeng map challengemap get tag socket mysocket send request packet requestpacket io except ioexcept log warn except send challeng build challeng packet send challeng newchalleng concurr hash map concurrenthashmap tmp map tmpmap addr challeng map addrchallengemap get addr tmp map tmpmap tmp tmplong tmp map tmpmap get tag tmp tmplong challeng newchalleng tmp tmplong challeng newchalleng gen challeng genchalleng tmp map tmpmap put tag challeng newchalleng request buffer requestbuff clear request buffer requestbuff put putint send tosend type mtype challeng ordin request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong challeng newchalleng zero 24 request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr socket mysocket send request packet requestpacket io except ioexcept log warn except send challeng log error address configur addr build notif packet send request buffer requestbuff clear request buffer requestbuff put putint type request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch zero request buffer requestbuff put zero request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr challeng mychalleng ack myack attempt max attempt maxattempt obtain challeng on challeng mychalleng auth enabl authen send tosend crequest send tosend send tosend type mtype crequest tag leader zxid epoch quorum peer quorump server state serverst addr sendqueu offer crequest timeout ack wait ackwait java lang math pow attempt semaphor semaphor messeng challeng mutex challengemutex put tag acquir tryacquir timeout time unit timeunit millisecond challeng mychalleng challeng map challengemap contain kei containskei tag interrupt except interruptedexcept log warn challeng request except don challeng skip send notif auth enabl authen challeng mychalleng attempt auth enabl authen request buffer requestbuff posit 40 tmp tmplong challeng map challengemap get tag tmp tmplong request buffer requestbuff put putlong tmp tmplong log warn challeng tag tag socket mysocket send request packet requestpacket semaphor semaphor timeout ack wait ackwait java lang math pow 10 attempt ack mutex ackmutex put tag acquir tryacquir timeout time unit timeunit millisecond interrupt except interruptedexcept log warn ack except ackset remov tag ack myack io except ioexcept log warn send except ack myack receiv ack successfulli challeng map challengemap remov tag attempt messag queue attempt epoch hasn chang epoch logicalclock challeng map challengemap remov tag sendqueu offer request buffer requestbuff clear request buffer requestbuff put putint type request buffer requestbuff put putlong tag request buffer requestbuff put putint state ordin request buffer requestbuff put putlong leader request buffer requestbuff put putlong zxid request buffer requestbuff put putlong epoch request packet requestpacket set length setlength 48 request packet requestpacket set socket address setsocketaddress addr illeg argument except illegalargumentexcept sun doesn includ address caus except thrown wrap except order captur critic detail illeg argument except illegalargumentexcept unabl set socket address packet msg get messag getmessag addr addr socket mysocket send request packet requestpacket io except ioexcept log warn except send ack 

describ input token stream token integ describ kind token number determin java cc parser javaccpars tabl number store file constant java kind begin line beginlin begin column begincolumn describ posit first charact token end line endlin end column endcolumn describ posit last charact token begin line beginlin begin column begincolumn end line endlin end column endcolumn string imag token string imag refer next regular non special token from input stream last token from input stream token manag ha read token on field set token regular token descript content field token next field us access special token occur prior token after immedi preced regular non special token special token field set more on special token field refer last special token turn refer next previou special token special token specialtoken field first special token special token specialtoken field next field special token refer special token immedi follow interven regular token token field token special token specialtoken return imag string string tostr imag return token object creat subclass object base valu kind ofkind simpli add case special case exampl subclass token call id token idtoken creat kind ofkind id simlpi add parser constant myparserconst id id token idtoken follow statement cast match token matchedtoken variabl appropri type us lexic action token token newtoken kind ofkind kind ofkind token 

get children2 test getchildren2test client base clientbas zoo keeper zookeep zk overrid set up setup except set up setup zk creat client createcli overrid tear down teardown except tear down teardown zk close test test child testchild io except ioexcept keeper except keeperexcept interrupt except interruptedexcept string name foo zk creat name name get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist string childnam name bar zk creat childnam childnam get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer stat stat stat list string zk get children getchildren name stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ stat get ephemer owner getephemeralown equal assertequ name length stat get data length getdatalength equal assertequ stat get num children getnumchildren equal assertequ size stat get num children getnumchildren zk get children getchildren childnam stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ zk get session id getsessionid stat get ephemer owner getephemeralown equal assertequ childnam length stat get data length getdatalength equal assertequ stat get num children getnumchildren equal assertequ size stat get num children getnumchildren test test children testchildren io except ioexcept keeper except keeperexcept interrupt except interruptedexcept string name foo zk creat name name get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist list string children arrai list arraylist string list string children children arrai list arraylist string 10 string childnam name bar string childnam childnam bar children add childnam children children add childnam childnam children size string childnam children get zk creat childnam childnam get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer stat stat stat list string zk get children getchildren name stat equal assertequ stat get czxid getczxid stat get mzxid getmzxid equal assertequ stat get czxid getczxid stat get pzxid getpzxid equal assertequ stat get ctime getctim stat get mtime getmtim equal assertequ stat get cversion getcvers equal assertequ stat get version getvers equal assertequ stat get avers getavers equal assertequ stat get ephemer owner getephemeralown equal assertequ name length stat get data length getdatalength equal assertequ stat get num children getnumchildren equal assertequ size stat get num children getnumchildren list string zk get children getchildren name list string children children list string collect sort collect sort equal assertequ size 10 equal assertequ 

binari input archiv binaryinputarch input archiv inputarch data input datainput binari input archiv binaryinputarch get archiv getarch input stream inputstream strm binari input archiv binaryinputarch data input stream datainputstream strm binari index binaryindex index nelem binari index binaryindex nelem nelem nelem done nelem incr nelem creat instanc binari input archiv binaryinputarch binari input archiv binaryinputarch data input datainput read readbyt string tag io except ioexcept read readbyt read readbool string tag io except ioexcept read readboolean read readint string tag io except ioexcept read readint read readlong string tag io except ioexcept read readlong read readfloat string tag io except ioexcept read readfloat read readdoubl string tag io except ioexcept read readdoubl string read string readstr string tag io except ioexcept len read readint len len read fulli readfulli string utf8 max buffer maxbuff determin max buffer determinemaxbuff determin max buffer determinemaxbuff string max buffer string maxbufferstr get properti getproperti jute maxbuff integ pars parseint max buffer string maxbufferstr except xfffff 0xfffff read buffer readbuff string tag io except ioexcept len read readint tag len len len max buffer maxbuff io except ioexcept unreason length len arr len read fulli readfulli arr arr read record readrecord record string tag io except ioexcept deseri tag start record startrecord string tag io except ioexcept end record endrecord string tag io except ioexcept index start vector startvector string tag io except ioexcept len read readint tag len binari index binaryindex len end vector endvector string tag io except ioexcept index start map startmap string tag io except ioexcept binari index binaryindex read readint tag end map endmap string tag io except ioexcept 

binari index binaryindex index nelem binari index binaryindex nelem nelem nelem done nelem incr nelem 

set max children request setmaxchildrenrequest record string path max set max children request setmaxchildrenrequest set max children request setmaxchildrenrequest string path max path path max max string get path getpath path set path setpath string path get max getmax max set max setmax max serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writeint max max end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path max read readint max end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writeint max max end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set max children request setmaxchildrenrequest cast except classcastexcept compar differ type record set max children request setmaxchildrenrequest peer set max children request setmaxchildrenrequest peer peer ret ret path compar compareto peer path ret ret ret max peer max max peer max ret ret ret equal object peer peer peer peer set max children request setmaxchildrenrequest peer peer set max children request setmaxchildrenrequest peer set max children request setmaxchildrenrequest peer peer ret ret path equal peer path ret ret ret max peer max ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret max result 37 result ret result string signatur set max children request lsetmaxchildrenrequest si 

collect util method deal file name pars low level file oper marshal unmarshal util logger log logger factori loggerfactori get logger getlogg util string snap dir snap dir snap dir snapdir string log dir log dir log dir logdir string db format conv db format conv db format convers dbformatconvers buffer bytebuff fill buffer bytebuff alloc direct allocatedirect string make uri string makeuristr string data dir datadir string data log dir datalogdir string conv polici convpolici string uri file snap dir snap dir data dir datadir log dir log dir data log dir datalogdir conv polici convpolici uri db format conv db format conv conv polici convpolici uri replac two directori file method return form logfil provid uri method backward compat exist code support logfil persist expect two paramet pass command line configur file param data dir datadir snapshot directori param data log dir datalogdir transact log directori logfil provid uri uri make file logger url makefileloggerurl file data dir datadir file data log dir datalogdir uri creat make uri string makeuristr data dir datadir get path getpath data log dir datalogdir get path getpath uri make file logger url makefileloggerurl file data dir datadir file data log dir datalogdir string conv polici convpolici uri creat make uri string makeuristr data dir datadir get path getpath data log dir datalogdir get path getpath conv polici convpolici creat valid transact log file name param zxid us file name suffix extent file name string make log name makelognam zxid log hex string tohexstr zxid creat snapshot file name param zxid us suffix file name string make snapshot name makesnapshotnam zxid snapshot hex string tohexstr zxid extract snapshot directori properti valu from contain param prop properti contain file repres snapshot directori file get snap dir getsnapdir properti prop file prop get properti getproperti snap dir snap dir extract transact log directori properti valu from contain param prop properti contain file repres txn log directori file get log dir getlogdir properti prop file prop get properti getproperti log dir log dir extract valu db format convers dbformatconvers attribut param prop properti contain valu db format convers dbformatconvers attribut string get format convers polici getformatconversionpolici properti prop prop get properti getproperti db format conv db format conv extract zxid from file name file name creat on link make log name makelognam link make snapshot name makesnapshotnam param name file name pars param prefix file name prefix snapshot log zxid get zxid from name getzxidfromnam string name string prefix zxid string name part namepart name split name part namepart length name part namepart equal prefix zxid pars parselong name part namepart 16 number format except numberformatexcept zxid verifi file valid snapshot snapshot invalid incomplet situat server di process store snapshot file snapshot invalid snapshot param file verifi snapshot valid io except ioexcept valid snapshot isvalidsnapshot file io except ioexcept util get zxid from name getzxidfromnam get name getnam snapshot check valid snapshot random access file randomaccessfil raf random access file randomaccessfil includ header last byte snapshot atleast 10 byte raf length 10 raf seek raf length byte readlen readlen raf read byte readlen byte length readlen readlen readlen byte length log info invalid snapshot len readlen buffer bytebuff bb buffer bytebuff wrap byte len bb get getint bb get len log info invalid snapshot len len xff 0xff raf close grow file specifi number byte happen current file posit suffici close 4k end file param output stream pad param current size currents applic keep track cuurent file size param pre alloc size preallocs byte pad file size current size currents pad done io except ioexcept pad log file padlogfil file output stream fileoutputstream current size currents pre alloc size preallocs io except ioexcept posit get channel getchannel posit posit 4096 current size currents current size currents current size currents pre alloc size preallocs fill posit get channel getchannel write fill current size currents fill remain current size currents read transact entri from input archiv param ia archiv read from entri corrupt eof ha reach buffer empti contain serial transact record io except ioexcept read txn byte readtxnbyt input archiv inputarch ia io except ioexcept byte ia read buffer readbuff txt entri txtentri prealloc defin eof empti transact byte length byte ia read readbyt eof log error last transact partial byte eof except eofexcept serial transact header transact data buffer param hdr transact header param txn transact data serial transact record io except ioexcept marshal txn entri marshalltxnentri txn header txnheader hdr record txn io except ioexcept arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream output archiv outputarch boa binari output archiv binaryoutputarch get archiv getarch bao hdr serial boa hdr txn txn serial boa txn bao arrai tobytearrai write serial transact record output archiv param oa output archiv param byte serial trasnact record io except ioexcept write txn byte writetxnbyt output archiv outputarch oa byte io except ioexcept oa write buffer writebuff byte txn entri txnentri oa write writebyt x42 0x42 eor compar file file name form prefix version sort order result return order version data dir file compar datadirfilecompar compar file serializ serial version uid serialversionuid 2648639884525140318l string prefix ascend data dir file compar datadirfilecompar string prefix ascend prefix prefix ascend ascend compar file o1 file o2 z1 util get zxid from name getzxidfromnam o1 get name getnam prefix z2 util get zxid from name getzxidfromnam o2 get name getnam prefix result z1 z2 z1 z2 ascend result result sort list file recenc determin version compon file name param file arrai file param prefix file match prefix assum version param ascend sort ascend order result descend order sort input file list file sort data dir sortdatadir file file string prefix ascend file arrai list arraylist file list file filelist arrai list aslist file collect sort filelist data dir file compar datadirfilecompar prefix ascend filelist 

compar file file name form prefix version sort order result return order version data dir file compar datadirfilecompar compar file serializ serial version uid serialversionuid 2648639884525140318l string prefix ascend data dir file compar datadirfilecompar string prefix ascend prefix prefix ascend ascend compar file o1 file o2 z1 util get zxid from name getzxidfromnam o1 get name getnam prefix z2 util get zxid from name getzxidfromnam o2 get name getnam prefix result z1 z2 z1 z2 ascend result result 

valid major quorum implement straightforward quorum maj quorummaj quorum verifi quorumverifi half defin major avoid comput time param number server quorum maj quorummaj half return weight param id get weight getweight id verifi set major contain quorum containsquorum hash set hashset set set size half 

http basic auth httpbasicauth filter credenti credenti http basic auth httpbasicauth credenti credenti overrid filter dofilt servlet request servletrequest req0 servlet respons servletrespons resp0 filter chain filterchain chain io except ioexcept servlet except servletexcept http servlet request httpservletrequest request http servlet request httpservletrequest req0 http servlet respons httpservletrespons respons http servlet respons httpservletrespons resp0 string author request get header gethead author author string pars author parseauthor author credenti contain kei containskei credenti get equal chain filter dofilt request respons respons set header sethead www authent basic realm restrict respons send error senderror 401 string pars author parseauthor string author string part author split part length part equal ignor equalsignorecas basic string user pass userpass base64 base64 decod base64decod part user pass userpass index indexof string user pass userpass substr user pass userpass substr overrid init filter config filterconfig arg0 servlet except servletexcept overrid destroi 

endpoint string context host port set hostportset host port hostport credenti credenti credenti zookeep auth zookeeperauth endpoint string context string host port list hostportlist context context host port hostport host port set hostportset host port list hostportlist string get context getcontext context string get host port gethostport host port hostport string tostr credenti get credenti getcredenti credenti set credenti setcredenti string credenti credenti set zoo keeper auth info setzookeeperauthinfo string digest zookeep auth zookeeperauth credenti digest credenti get zoo keeper auth info getzookeeperauthinfo zookeep auth zookeeperauth overrid equal object endpoint endpoint context equal context overrid hash code hashcod context hash code hashcod overrid string string tostr string format endpoint context host port hostport string tostr 

repres stat associ quota stat track statstrack count byte string count str countstr count string str bytestr byte constructor stat stat track statstrack stat string form count byte stat call count byte initi param stat stat string intial stat track statstrack string stat stat stat count byte string split stat split split length illeg argument except illegalargumentexcept invalid string stat count integ pars parseint split split byte pars parselong split split get count node allow part quota count part string get count getcount count set count stat tracker param count count set set count setcount count count count get count byte allow part quota byte part string get byte getbyt byte set teh byte stat tracker param byte byte set set byte setbyt byte byte byte overrid return string map stat track string string tostr count str countstr count str bytestr byte 

link panel jpanel show tree view node zookeep instanc zoo inspector tree viewer zooinspectortreeview panel jpanel node listen nodelisten zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag tree jtree tree toaster toaster manag toastermanag param zoo inspector manag zooinspectormanag link zoo inspector manag zooinspectormanag applic param listen link tree select listen treeselectionlisten listen chang select node node tree zoo inspector tree viewer zooinspectortreeview zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag tree select listen treeselectionlisten listen zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag set layout setlayout border layout borderlayout popup menu jpopupmenu popup menu popupmenu popup menu jpopupmenu menu item jmenuitem add notifi addnotifi menu item jmenuitem add chang notif toaster manag toastermanag toaster toaster manag toastermanag set border color setbordercolor color black toaster manag toastermanag set messag color setmessagecolor color black toaster manag toastermanag set toaster color settoastercolor color white add notifi addnotifi add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev list string select node selectednod get select node getselectednod zoo inspector manag zooinspectormanag add watcher addwatch select node selectednod zoo inspector tree viewer zooinspectortreeview menu item jmenuitem remov notifi removenotifi menu item jmenuitem remov chang notif remov notifi removenotifi add action listen addactionlisten action listen actionlisten action perform actionperform action event actionev list string select node selectednod get select node getselectednod zoo inspector manag zooinspectormanag remov watcher removewatch select node selectednod tree tree jtree tree node defaultmutabletreenod tree set cell render setcellrender zoo inspector tree cell render zooinspectortreecellrender tree set edit setedit tree get select model getselectionmodel add tree select listen addtreeselectionlisten listen tree add mous listen addmouselisten mous adapt mouseadapt overrid mous click mouseclick mous event mouseev popup trigger ispopuptrigg get button getbutton mous event mouseev button3 todo show add select node isn watch show remov select node watch popup menu popupmenu remov removeal popup menu popupmenu add add notifi addnotifi popup menu popupmenu add remov notifi removenotifi popup menu popupmenu show zoo inspector tree viewer zooinspectortreeview getx geti add tree border layout borderlayout center refresh tree view refresh view refreshview set tree path treepath expand node expandednod link hash set linkedhashset tree path treepath row count rowcount tree get row count getrowcount row count rowcount tree path treepath path tree get path row getpathforrow tree expand isexpand path expand node expandednod add path tree path treepath select node selectednod tree get select path getselectionpath swing worker swingwork worker swing worker swingwork overrid background doinbackground except tree set model setmodel tree model defaulttreemodel zoo inspector tree node zooinspectortreenod overrid done tree path treepath path expand node expandednod tree expand path expandpath path tree get select model getselectionmodel set select path setselectionpath select node selectednod worker execut clear tree view node clear view clearview tree set model setmodel tree model defaulttreemodel tree node defaultmutabletreenod author colin zoo inspector tree cell render zooinspectortreecellrender tree cell render defaulttreecellrender zoo inspector tree cell render zooinspectortreecellrender set leaf icon setleaficon zoo inspector icon resourc zooinspectoriconresourc get tree leaf icon gettreeleaficon set open icon setopenicon zoo inspector icon resourc zooinspectoriconresourc get tree open icon gettreeopenicon set close icon setclosedicon zoo inspector icon resourc zooinspectoriconresourc get tree close icon gettreeclosedicon author colin zoo inspector tree node zooinspectortreenod tree node treenod string node path nodepath string node name nodenam zoo inspector tree node zooinspectortreenod parent zoo inspector tree node zooinspectortreenod string node path nodepath zoo inspector tree node zooinspectortreenod parent parent parent node path nodepath node path nodepath index node path nodepath last index lastindexof index illeg argument except illegalargumentexcept invalid node path node path nodepath node name nodenam node path nodepath substr index non javadoc javax swing tree tree node treenod children enumer tree node treenod children list string children zoo inspector manag zooinspectormanag get children getchildren node path nodepath collect sort children list tree node treenod children returnchildren arrai list arraylist tree node treenod string child children children returnchildren add zoo inspector tree node zooinspectortreenod node path nodepath equal node path nodepath child collect enumer children returnchildren non javadoc javax swing tree tree node treenod get allow children getallowschildren get allow children getallowschildren zoo inspector manag zooinspectormanag allow children isallowschildren node path nodepath non javadoc javax swing tree tree node treenod get child getchildat tree node treenod get child getchildat child index childindex string child zoo inspector manag zooinspectormanag get node child getnodechild node path nodepath child index childindex child zoo inspector tree node zooinspectortreenod node path nodepath equal node path nodepath child non javadoc javax swing tree tree node treenod get child count getchildcount get child count getchildcount zoo inspector manag zooinspectormanag get num children getnumchildren node path nodepath non javadoc javax swing tree tree node treenod get index getindex javax swing tree tree node treenod get index getindex tree node treenod node zoo inspector manag zooinspectormanag get node index getnodeindex node path nodepath non javadoc javax swing tree tree node treenod get parent getpar tree node treenod get parent getpar parent non javadoc javax swing tree tree node treenod leaf isleaf leaf isleaf zoo inspector manag zooinspectormanag ha children haschildren node path nodepath overrid string string tostr node name nodenam overrid hash code hashcod prime 31 result result prime result get outer type getoutertyp hash code hashcod result prime result node path nodepath node path nodepath hash code hashcod result prime result parent parent hash code hashcod result overrid equal object obj obj obj get getclass obj get getclass zoo inspector tree node zooinspectortreenod zoo inspector tree node zooinspectortreenod obj get outer type getoutertyp equal get outer type getoutertyp node path nodepath node path nodepath node path nodepath equal node path nodepath parent parent parent equal parent zoo inspector tree viewer zooinspectortreeview get outer type getoutertyp zoo inspector tree viewer zooinspectortreeview link list current select node list string get select node getselectednod tree path treepath path tree get select path getselectionpath list string select node selectednod arrai list arraylist string path tree path treepath path path string builder stringbuild sb string builder stringbuild object path arrai patharrai path get path getpath object path arrai patharrai string node name nodenam string tostr node name nodenam length sb append sb append string tostr select node selectednod add sb string tostr select node selectednod non javadoc org apach zookeep inspector manag node listen nodelisten process event processev java lang string java lang string java util map process event processev string node path nodepath string event type eventtyp map string string event info eventinfo string builder stringbuild sb string builder stringbuild sb append node sb append node path nodepath sb append event nevent sb append event type eventtyp event info eventinfo map entri string string entri event info eventinfo entri set entryset sb append sb append entri get kei getkei sb append sb append entri get valu getvalu toaster manag toastermanag show toaster showtoast zoo inspector icon resourc zooinspectoriconresourc get inform icon getinformationicon sb string tostr 

author colin zoo inspector tree cell render zooinspectortreecellrender tree cell render defaulttreecellrender zoo inspector tree cell render zooinspectortreecellrender set leaf icon setleaficon zoo inspector icon resourc zooinspectoriconresourc get tree leaf icon gettreeleaficon set open icon setopenicon zoo inspector icon resourc zooinspectoriconresourc get tree open icon gettreeopenicon set close icon setclosedicon zoo inspector icon resourc zooinspectoriconresourc get tree close icon gettreeclosedicon 

author colin zoo inspector tree node zooinspectortreenod tree node treenod string node path nodepath string node name nodenam zoo inspector tree node zooinspectortreenod parent zoo inspector tree node zooinspectortreenod string node path nodepath zoo inspector tree node zooinspectortreenod parent parent parent node path nodepath node path nodepath index node path nodepath last index lastindexof index illeg argument except illegalargumentexcept invalid node path node path nodepath node name nodenam node path nodepath substr index non javadoc javax swing tree tree node treenod children enumer tree node treenod children list string children zoo inspector manag zooinspectormanag get children getchildren node path nodepath collect sort children list tree node treenod children returnchildren arrai list arraylist tree node treenod string child children children returnchildren add zoo inspector tree node zooinspectortreenod node path nodepath equal node path nodepath child collect enumer children returnchildren non javadoc javax swing tree tree node treenod get allow children getallowschildren get allow children getallowschildren zoo inspector manag zooinspectormanag allow children isallowschildren node path nodepath non javadoc javax swing tree tree node treenod get child getchildat tree node treenod get child getchildat child index childindex string child zoo inspector manag zooinspectormanag get node child getnodechild node path nodepath child index childindex child zoo inspector tree node zooinspectortreenod node path nodepath equal node path nodepath child non javadoc javax swing tree tree node treenod get child count getchildcount get child count getchildcount zoo inspector manag zooinspectormanag get num children getnumchildren node path nodepath non javadoc javax swing tree tree node treenod get index getindex javax swing tree tree node treenod get index getindex tree node treenod node zoo inspector manag zooinspectormanag get node index getnodeindex node path nodepath non javadoc javax swing tree tree node treenod get parent getpar tree node treenod get parent getpar parent non javadoc javax swing tree tree node treenod leaf isleaf leaf isleaf zoo inspector manag zooinspectormanag ha children haschildren node path nodepath overrid string string tostr node name nodenam overrid hash code hashcod prime 31 result result prime result get outer type getoutertyp hash code hashcod result prime result node path nodepath node path nodepath hash code hashcod result prime result parent parent hash code hashcod result overrid equal object obj obj obj get getclass obj get getclass zoo inspector tree node zooinspectortreenod zoo inspector tree node zooinspectortreenod obj get outer type getoutertyp equal get outer type getoutertyp node path nodepath node path nodepath node path nodepath equal node path nodepath parent parent parent equal parent zoo inspector tree viewer zooinspectortreeview get outer type getoutertyp zoo inspector tree viewer zooinspectortreeview 

basic zoo keeper server zookeeperserv us track session standalon leader zoo keeper server zookeeperserv us session tracker sessiontrack follow zoo keeper server followerzookeeperserv us session tracker sessiontrack basic simpl shell track inform forward leader session tracker sessiontrack session get session id getsessionid get timeout gettimeout close isclos session expir sessionexpir expir session session get server id getserverid creat session createsess session timeout sessiontimeout add session addsess id param session id sessionid param session timeout sessiontimeout session longer activ touch session touchsess session id sessionid session timeout sessiontimeout mark session process close param session id sessionid set session close setsessionclos session id sessionid shutdown param session id sessionid remov session removesess session id sessionid check session checksess session id sessionid object owner keeper except keeperexcept session expir except sessionexpiredexcept session move except sessionmovedexcept set owner setown id object owner session expir except sessionexpiredexcept text dump session inform suitabl debug param pwriter output writer dump session dumpsess print writer printwrit pwriter 

session get session id getsessionid get timeout gettimeout close isclos 

session expir sessionexpir expir session session get server id getserverid 

handl respons from multi request respons consist sequenc respons prefix multi respons multirespons type respons end list multi header multihead neg type individu respons format oper origin request list multi respons multirespons record iter op result opresult list op result opresult result arrai list arraylist op result opresult add op result opresult result add overrid iter op result opresult iter result iter size result size overrid serial output archiv outputarch archiv string tag io except ioexcept archiv start record startrecord tag index op result opresult result result err result get type gettyp zoo def zoodef op code opcod error op result opresult error result errorresult result get err geterr multi header multihead result get type gettyp err serial archiv tag result get type gettyp zoo def zoodef op code opcod creat creat respons createrespons op result opresult creat result createresult result get path getpath serial archiv tag zoo def zoodef op code opcod delet zoo def zoodef op code opcod check zoo def zoodef op code opcod set data setdata set data respons setdatarespons op result opresult set data result setdataresult result get stat getstat serial archiv tag zoo def zoodef op code opcod error error respons errorrespons op result opresult error result errorresult result get err geterr serial archiv tag io except ioexcept invalid type result get type gettyp multi respons multirespons multi header multihead serial archiv tag archiv end record endrecord tag overrid deseri input archiv inputarch archiv string tag io except ioexcept result arrai list arraylist op result opresult archiv start record startrecord tag multi header multihead multi header multihead deseri archiv tag get done getdon get type gettyp zoo def zoodef op code opcod creat creat respons createrespons cr creat respons createrespons cr deseri archiv tag result add op result opresult creat result createresult cr get path getpath zoo def zoodef op code opcod delet result add op result opresult delet result deleteresult zoo def zoodef op code opcod set data setdata set data respons setdatarespons sdr set data respons setdatarespons sdr deseri archiv tag result add op result opresult set data result setdataresult sdr get stat getstat zoo def zoodef op code opcod check result add op result opresult check result checkresult zoo def zoodef op code opcod error fixm more cleanli serial deseri except error respons errorrespons er error respons errorrespons er deseri archiv tag result add op result opresult error result errorresult er get err geterr io except ioexcept invalid type get type gettyp multi respons multirespons deseri archiv tag archiv end record endrecord tag list op result opresult get result list getresultlist result overrid equal object multi respons multirespons multi respons multirespons multi respons multirespons result iter op result opresult result iter op result opresult result result ha next hasnext result equal next ha next hasnext result overrid hash code hashcod hash result size op result opresult result result hash hash 35 result hash code hashcod hash 

util store pair object param param pair kei valu param kei param valu pair kei valu kei kei valu valu pair kei get kei getkei kei param kei set kei setkei kei kei kei valu get valu getvalu valu param valu set valu setvalu valu valu valu overrid string string tostr pair kei valu non javadoc java lang object hash code hashcod overrid hash code hashcod prime 31 result result prime result kei kei hash code hashcod result prime result valu valu hash code hashcod result non javadoc java lang object equal java lang object overrid equal object obj obj obj get getclass obj get getclass pair pair obj kei kei kei equal kei valu valu valu equal valu 

test stand server run runwith parameter exist test existstest base logger log logger factori loggerfactori get logger getlogg exist test existstest string path client respons clientrespons statu expect statu expectedstatu paramet collect object data except string base znode baseznod base creat base node createbaseznod arrai list aslist object base znode baseznod client respons clientrespons statu base znode baseznod dkdk38383 client respons clientrespons statu found found exist test existstest string path client respons clientrespons statu statu path path expect statu expectedstatu statu verifi string type client respons clientrespons cr znodesr path path accept type type type head type equal media type mediatyp applic octet stream applic octet stream expect statu expectedstatu client respons clientrespons statu equal assertequ client respons clientrespons statu content content cr get client respons statu getclientresponsestatu equal assertequ expect statu expectedstatu cr get client respons statu getclientresponsestatu test test exist testexist except log info start get name getnam verifi media type mediatyp applic octet stream applic octet stream verifi media type mediatyp applic json applic json verifi media type mediatyp applic xml applic xml 

invalid snapshot test invalidsnapshottest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg upgrad test upgradetest string hostport 127 port assign portassign uniqu file test data testdata file get properti getproperti test data dir build test data count down latch countdownlatch start signal startsign verifi log formatt logformatt run known file test test log formatt testlogformatt except file snap dir snapdir file test data testdata invalidsnap file logfil file file snap dir snapdir version log 274 string arg logfil get canon file getcanonicalfil string tostr log formatt logformatt main arg verifi snapshot formatt snapshotformatt run known file test test snapshot formatt testsnapshotformatt except file snap dir snapdir file test data testdata invalidsnap file snapfil file file snap dir snapdir version snapshot 272 string arg snapfil get canon file getcanonicalfil string tostr snapshot formatt snapshotformatt main arg test snapshot except except expect test test snapshot testsnapshot except file snap dir snapdir file test data testdata invalidsnap zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv snap dir snapdir snap dir snapdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 1000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk log info start up zookeep server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport 20000 from data file node last node snapshot asserttru zk exist zk close shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport client base clientbas connect timeout connect timeout process watch event watchedev event log info event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount start signal startsign count down countdown 

instanc creat leader learner commun learner handl learner handler learnerhandl thread logger log logger factori loggerfactori get logger getlogg learner handler learnerhandl socket sock socket get socket getsocket sock leader leader tick last ack tickoflastack zoo keeper zookeep server identifi learner sid get sid getsid sid version x1 0x1 get version getvers version packet sent learner link block queue linkedblockingqueu quorum packet quorumpacket queu packet queuedpacket link block queue linkedblockingqueu quorum packet quorumpacket binari input archiv binaryinputarch ia binari output archiv binaryoutputarch oa buffer output stream bufferedoutputstream buffer output bufferedoutput learner handler learnerhandl socket sock leader leader io except ioexcept learner handler learnerhandl sock get remot socket address getremotesocketaddress sock sock leader leader leader add learner handler addlearnerhandl overrid string string tostr string builder stringbuild sb string builder stringbuild sb append learner handler learnerhandl append sock sb append tick last ack tickoflastack append tick last ack tickoflastack sb append sync append sync sb append queu packet length queuedpacketlength append queu packet queuedpacket size sb string tostr packet queu sender thread exit quorum packet quorumpacket propos death proposalofdeath quorum packet quorumpacket learner type learnertyp learner type learnertyp learner type learnertyp particip learner type learnertyp get learner type getlearnertyp learner type learnertyp method us thread send packet ad queu packet queuedpacket list interrupt except interruptedexcept send packet sendpacket interrupt except interruptedexcept trace mask tracemask zoo trace zootrac server packet trace mask server packet trace mask quorum packet quorumpacket queu packet queuedpacket poll buffer output bufferedoutput flush queu packet queuedpacket propos death proposalofdeath packet death get type gettyp leader ping trace mask tracemask zoo trace zootrac server ping trace mask server ping trace mask log trace enabl istraceen zoo trace zootrac log quorum packet logquorumpacket log trace mask tracemask oa write record writerecord packet io except ioexcept sock close isclos log warn unexpect except caus shutdown learner handler help notifi learner observ instantan sock close io except ioexcept log warn error close socket handler string packet string packettostr quorum packet quorumpacket string type string mess record txn get type gettyp leader ack type ack leader commit type commit leader followerinfo type followerinfo leader newlead type newlead leader ping type ping leader propos type propos txn header txnheader hdr txn header txnheader txn serial util serializeutil deseri txn deserializetxn get data getdata hdr mess transact txn string tostr io except ioexcept log warn unexpect except leader request type request leader revalid type revalid arrai input stream bytearrayinputstream bi arrai input stream bytearrayinputstream get data getdata data input stream datainputstream di data input stream datainputstream bi id di read readlong mess sessionid id io except ioexcept log warn unexpect except leader uptod type uptod type unknown get type gettyp string entri type entri type hex string tohexstr get zxid getzxid mess entri thread receiv packet from peer process listen connect from peer overrid run ia binari input archiv binaryinputarch get archiv getarch buffer input stream bufferedinputstream sock get input stream getinputstream buffer output bufferedoutput buffer output stream bufferedoutputstream sock get output stream getoutputstream oa binari output archiv binaryoutputarch get archiv getarch buffer output bufferedoutput quorum packet quorumpacket qp quorum packet quorumpacket ia read record readrecord qp packet qp get type gettyp leader followerinfo qp get type gettyp leader observerinfo log error first packet qp string tostr followerinfo observerinfo learner info data learnerinfodata qp get data getdata learner info data learnerinfodata learner info data learnerinfodata length buffer bytebuff bbsid buffer bytebuff wrap learner info data learnerinfodata sid bbsid get getlong learner info learnerinfo li learner info learnerinfo buffer input stream bytebufferinputstream buffer2 record bytebuffer2record buffer bytebuff wrap learner info data learnerinfodata li sid li get serverid getserverid version li get protocol version getprotocolvers sid leader follow counter followercount get decrement getanddecr log info follow sid sid info leader self quorum peer quorump get sid qp get type gettyp leader observerinfo learner type learnertyp learner type learnertyp observ last accept epoch lastacceptedepoch zxid util zxidutil get epoch from zxid getepochfromzxid qp get zxid getzxid peer last zxid peerlastzxid state summari statesummari ss zxid qp get zxid getzxid epoch newepoch leader get epoch propos getepochtopropos get sid getsid last accept epoch lastacceptedepoch get version getvers x10000 0x10000 extrapol epoch inform epoch zxid util zxidutil get epoch from zxid getepochfromzxid zxid ss state summari statesummari epoch zxid fake messag leader wait epoch ack waitforepochack get sid getsid ss ver buffer bytebuff wrap ver put putint x10000 0x10000 quorum packet quorumpacket epoch packet newepochpacket quorum packet quorumpacket leader leaderinfo zxid util zxidutil make zxid makezxid epoch newepoch ver oa write record writerecord epoch packet newepochpacket packet buffer output bufferedoutput flush quorum packet quorumpacket ack epoch packet ackepochpacket quorum packet quorumpacket ia read record readrecord ack epoch packet ackepochpacket packet ack epoch packet ackepochpacket get type gettyp leader ackepoch log error ack epoch packet ackepochpacket string tostr ackepoch buffer bytebuff bbepoch buffer bytebuff wrap ack epoch packet ackepochpacket get data getdata ss state summari statesummari bbepoch get getint ack epoch packet ackepochpacket get zxid getzxid leader wait epoch ack waitforepochack get sid getsid ss peer last zxid peerlastzxid ss get last zxid getlastzxid send follow packet send packettosend leader snap zxid send zxidtosend leader last zxid leaderlastzxid packet follow get updat from updat peer last zxid peerlastzxid send diff check propos memori abl send diff reentrant read write lock reentrantreadwritelock lock leader zk get zk databas getzkdatabas get log lock getloglock read lock readlock rl lock read lock readlock rl lock max commit log maxcommittedlog leader zk get zk databas getzkdatabas getmax commit log getmaxcommittedlog min commit log mincommittedlog leader zk get zk databas getzkdatabas getmin commit log getmincommittedlog log info synchron follow sid sid max commit log maxcommittedlog 0x hex string tohexstr max commit log maxcommittedlog min commit log mincommittedlog 0x hex string tohexstr min commit log mincommittedlog peer last zxid peerlastzxid 0x hex string tohexstr peer last zxid peerlastzxid link list linkedlist propos propos leader zk get zk databas getzkdatabas get commit log getcommittedlog propos size log debug propos size propos size max commit log maxcommittedlog peer last zxid peerlastzxid min commit log mincommittedlog peer last zxid peerlastzxid log debug send propos follow propos variabl keep track previou propos id prev propos zxid prevproposalzxid min commit log mincommittedlog keep track send first packet befor send first packet learner expect trunc diff first packet firstpacket here us commit log committedlog sync follow decid send trunc packet send packettosend leader diff zxid send zxidtosend max commit log maxcommittedlog propos propos propos skip propos peer ha propos packet get zxid getzxid peer last zxid peerlastzxid prev propos zxid prevproposalzxid propos packet get zxid getzxid send first packet figur trunc follow ha propos leader doesn first packet firstpacket first packet firstpacket peer propos leader hasn prev propos zxid prevproposalzxid peer last zxid peerlastzxid send trunc messag befor send diff packet send packettosend leader trunc zxid send zxidtosend prev propos zxid prevproposalzxid updat zxid send zxidtosend queue packet queuepacket propos packet quorum packet quorumpacket qcommit quorum packet quorumpacket leader commit propos packet get zxid getzxid queue packet queuepacket qcommit peer last zxid peerlastzxid max commit log maxcommittedlog log debug send trunc follow zxid send zxidtosend 0x updat 0x hex string tohexstr max commit log maxcommittedlog hex string tohexstr updat packet send packettosend leader trunc zxid send zxidtosend max commit log maxcommittedlog updat zxid send zxidtosend log warn unhandl propos scenario peer last zxid peerlastzxid leader zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid leader recent snapshot commit log committedlog empti don send snapshot follow sync memori db log debug commit log committedlog empti leader follow sync zxid 0x hex string tohexstr peer last zxid peerlastzxid packet send packettosend leader diff zxid send zxidtosend peer last zxid peerlastzxid let state transfer happen log debug propos empti log info send leader get packet type getpackettyp packet send packettosend leader last zxid leaderlastzxid leader start forward startforward updat rl unlock quorum packet quorumpacket leader qp newleaderqp quorum packet quorumpacket leader newlead zxid util zxidutil make zxid makezxid epoch newepoch get version getvers x10000 0x10000 oa write record writerecord leader qp newleaderqp packet queu packet queuedpacket add leader qp newleaderqp buffer output bufferedoutput flush set zxid send zxidtosend latest zxid packet send packettosend leader snap zxid send zxidtosend leader zk get zk databas getzkdatabas get data tree last process zxid getdatatreelastprocessedzxid oa write record writerecord quorum packet quorumpacket packet send packettosend zxid send zxidtosend packet buffer output bufferedoutput flush truncat send diff send snapshot packet send packettosend leader snap log info send snapshot last zxid peer 0x hex string tohexstr peer last zxid peerlastzxid zxid leader 0x hex string tohexstr leader last zxid leaderlastzxid sent zxid db 0x hex string tohexstr zxid send zxidtosend dump data peer leader zk get zk databas getzkdatabas serial snapshot serializesnapshot oa oa write string writestr ben here benwasher signatur buffer output bufferedoutput flush start send packet thread run thread current thread currentthread set name setnam sender sock get remot socket address getremotesocketaddress send packet sendpacket interrupt except interruptedexcept log warn unexpect interrupt start wait first ack wait leader readi start process messag qp quorum packet quorumpacket ia read record readrecord qp packet qp get type gettyp leader ack log error next packet suppos ack leader process ack processack sid qp get zxid getzxid sock get local socket address getlocalsocketaddress ack ha process expect sync limit synclimit sock set timeout setsotimeout leader self tick time ticktim leader self sync limit synclimit wait leader start up leader zk leader zk run isrun interrupt isinterrupt leader zk wait 20 mutat packet queu serial mark peer start data queu packet queuedpacket add quorum packet quorumpacket leader uptod qp quorum packet quorumpacket ia read record readrecord qp packet trace mask tracemask zoo trace zootrac server packet trace mask server packet trace mask qp get type gettyp leader ping trace mask tracemask zoo trace zootrac server ping trace mask server ping trace mask log trace enabl istraceen zoo trace zootrac log quorum packet logquorumpacket log trace mask tracemask qp tick last ack tickoflastack leader self tick buffer bytebuff bb session id sessionid cxid type qp get type gettyp leader ack learner type learnertyp learner type learnertyp observ log debug enabl isdebugen log debug receiv ack from observ sid leader process ack processack sid qp get zxid getzxid sock get local socket address getlocalsocketaddress leader ping process touch arrai input stream bytearrayinputstream bi arrai input stream bytearrayinputstream qp get data getdata data input stream datainputstream di data input stream datainputstream bi di avail sess di read readlong di read readint leader zk touch sess leader revalid bi arrai input stream bytearrayinputstream qp get data getdata di data input stream datainputstream bi id di read readlong di read readint arrai output stream bytearrayoutputstream bo arrai output stream bytearrayoutputstream data output stream dataoutputstream do data output stream dataoutputstream bo do write writelong id valid leader zk touch id valid set session owner follow own session leader zk set owner setown id session expir except sessionexpiredexcept log error session hex string tohexstr id expir right after renew imposs log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask session 0x hex string tohexstr id valid valid do write writeboolean valid qp set data setdata bo arrai tobytearrai queu packet queuedpacket add qp leader request bb buffer bytebuff wrap qp get data getdata session id sessionid bb get getlong cxid bb get getint type bb get getint bb bb slice request si type op code opcod sync si learner sync request learnersyncrequest session id sessionid cxid type bb qp get authinfo getauthinfo si request session id sessionid cxid type bb qp get authinfo getauthinfo si set owner setown leader zk submit request submitrequest si io except ioexcept sock sock close isclos log error unexpect except caus shutdown sock open close socket make side close sock close io except ioexcept interrupt except interruptedexcept log error unexpect except caus shutdown log warn goodby sock sock get remot socket address getremotesocketaddress shutdown shutdown send packet death queu packet queuedpacket put propos death proposalofdeath interrupt except interruptedexcept log warn ignor unexpect except sock sock close isclos sock close io except ioexcept log warn ignor unexpect except socket close interrupt leader remov learner handler removelearnerhandl tick last ack tickoflastack tick last ack tickoflastack ping call from leader peer ping id leader id leader last propos lastpropos quorum packet quorumpacket ping quorum packet quorumpacket leader ping id queue packet queuepacket ping queue packet queuepacket quorum packet quorumpacket queu packet queuedpacket add sync aliv isal tick last ack tickoflastack leader self tick leader self sync limit synclimit 

disconnect watcher test disconnectedwatchertest client base clientbas logger log logger factori loggerfactori get logger getlogg disconnect watcher test disconnectedwatchertest timeout 5000 watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put jira issu zookeep 961 test test child watcher reset chroot testchildwatcherautoresetwithchroot except zoo keeper zookeep zk1 creat client createcli zk1 creat ch1 id open acl unsaf open acl unsaf creat mode createmod persist watcher mywatch watcher watcher mywatch zoo keeper zookeep zk2 creat client createcli watcher host port hostport ch1 zk2 get children getchildren call shouldn trigger error watch zk1 creat youdontmatter1 id open acl unsaf open acl unsaf creat mode createmod persist trigger watch zk1 creat ch1 youshouldmatter1 id open acl unsaf open acl unsaf creat mode createmod persist watch event watchedev watcher event poll timeout time unit timeunit millisecond assertnotnul equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ get path getpath watcher mywatch child watcher childwatch watcher mywatch zk2 get children getchildren child watcher childwatch stop server stopserv watcher wait disconnect waitfordisconnect 3000 start server startserv watcher wait connect waitforconnect 3000 trigger watch zk1 creat ch1 youshouldmatter2 id open acl unsaf open acl unsaf creat mode createmod persist child watcher childwatch event poll timeout time unit timeunit millisecond assertnotnul equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ get path getpath test test watcher reset chroot testdefaultwatcherautoresetwithchroot except zoo keeper zookeep zk1 creat client createcli zk1 creat ch1 id open acl unsaf open acl unsaf creat mode createmod persist watcher mywatch watcher watcher mywatch zoo keeper zookeep zk2 creat client createcli watcher host port hostport ch1 zk2 get children getchildren call shouldn trigger error watch zk1 creat youdontmatter1 id open acl unsaf open acl unsaf creat mode createmod persist trigger watch zk1 creat ch1 youshouldmatter1 id open acl unsaf open acl unsaf creat mode createmod persist watch event watchedev watcher event poll timeout time unit timeunit millisecond assertnotnul equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ get path getpath zk2 get children getchildren stop server stopserv watcher wait disconnect waitfordisconnect 3000 start server startserv watcher wait connect waitforconnect 3000 trigger watch zk1 creat ch1 youshouldmatter2 id open acl unsaf open acl unsaf creat mode createmod persist watcher event poll timeout time unit timeunit millisecond assertnotnul equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ get path getpath test test deep child watcher reset chroot testdeepchildwatcherautoresetwithchroot except zoo keeper zookeep zk1 creat client createcli zk1 creat ch1 id open acl unsaf open acl unsaf creat mode createmod persist zk1 creat ch1 here id open acl unsaf open acl unsaf creat mode createmod persist zk1 creat ch1 here id open acl unsaf open acl unsaf creat mode createmod persist zk1 creat ch1 here id open acl unsaf open acl unsaf creat mode createmod persist watcher mywatch watcher watcher mywatch zoo keeper zookeep zk2 creat client createcli watcher host port hostport ch1 here zk2 get children getchildren trigger watch zk1 creat ch1 here id open acl unsaf open acl unsaf creat mode createmod persist watch event watchedev watcher event poll timeout time unit timeunit millisecond assertnotnul equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ get path getpath watcher mywatch child watcher childwatch watcher mywatch zk2 get children getchildren child watcher childwatch stop server stopserv watcher wait disconnect waitfordisconnect 3000 start server startserv watcher wait connect waitforconnect 3000 trigger watch zk1 creat ch1 here id open acl unsaf open acl unsaf creat mode createmod persist child watcher childwatch event poll timeout time unit timeunit millisecond assertnotnul equal assertequ event type eventtyp node children chang nodechildrenchang get type gettyp equal assertequ get path getpath 

watcher mywatch countdown watcher countdownwatch link block queue linkedblockingqueu watch event watchedev event link block queue linkedblockingqueu watch event watchedev process watch event watchedev event process event event get type gettyp event event type eventtyp event put event interrupt except interruptedexcept log warn ignor interrupt event put 

stat persist statpersist record czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown pzxid stat persist statpersist stat persist statpersist czxid mzxid ctime mtime version cversion avers ephemer owner ephemeralown pzxid czxid czxid mzxid mzxid ctime ctime mtime mtime version version cversion cversion avers avers ephemer owner ephemeralown ephemer owner ephemeralown pzxid pzxid get czxid getczxid czxid set czxid setczxid czxid get mzxid getmzxid mzxid set mzxid setmzxid mzxid get ctime getctim ctime set ctime setctim ctime get mtime getmtim mtime set mtime setmtim mtime get version getvers version set version setvers version get cversion getcvers cversion set cversion setcvers cversion get avers getavers avers set avers setavers avers get ephemer owner getephemeralown ephemer owner ephemeralown set ephemer owner setephemeralown ephemer owner ephemeralown get pzxid getpzxid pzxid set pzxid setpzxid pzxid serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writelong czxid czxid write writelong mzxid mzxid write writelong ctime ctime write writelong mtime mtime write writeint version version write writeint cversion cversion write writeint avers avers write writelong ephemer owner ephemeralown ephemer owner ephemeralown write writelong pzxid pzxid end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag czxid read readlong czxid mzxid read readlong mzxid ctime read readlong ctime mtime read readlong mtime version read readint version cversion read readint cversion avers read readint avers ephemer owner ephemeralown read readlong ephemer owner ephemeralown pzxid read readlong pzxid end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writelong czxid czxid write writelong mzxid mzxid write writelong ctime ctime write writelong mtime mtime write writeint version version write writeint cversion cversion write writeint avers avers write writelong ephemer owner ephemeralown ephemer owner ephemeralown write writelong pzxid pzxid end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer stat persist statpersist cast except classcastexcept compar differ type record stat persist statpersist peer stat persist statpersist peer peer ret ret czxid peer czxid czxid peer czxid ret ret ret mzxid peer mzxid mzxid peer mzxid ret ret ret ctime peer ctime ctime peer ctime ret ret ret mtime peer mtime mtime peer mtime ret ret ret version peer version version peer version ret ret ret cversion peer cversion cversion peer cversion ret ret ret avers peer avers avers peer avers ret ret ret ephemer owner ephemeralown peer ephemer owner ephemeralown ephemer owner ephemeralown peer ephemer owner ephemeralown ret ret ret pzxid peer pzxid pzxid peer pzxid ret ret ret equal object peer peer peer peer stat persist statpersist peer peer stat persist statpersist peer stat persist statpersist peer peer ret ret czxid peer czxid ret ret ret mzxid peer mzxid ret ret ret ctime peer ctime ret ret ret mtime peer mtime ret ret ret version peer version ret ret ret cversion peer cversion ret ret ret avers peer avers ret ret ret ephemer owner ephemeralown peer ephemer owner ephemeralown ret ret ret pzxid peer pzxid ret ret ret hash code hashcod result 17 ret ret czxid czxid 32 result 37 result ret ret mzxid mzxid 32 result 37 result ret ret ctime ctime 32 result 37 result ret ret mtime mtime 32 result 37 result ret ret version result 37 result ret ret cversion result 37 result ret ret avers result 37 result ret ret ephemer owner ephemeralown ephemer owner ephemeralown 32 result 37 result ret ret pzxid pzxid 32 result 37 result ret result string signatur stat persist lstatpersist lllliiill 

snapshot persist layer implement implement snapshot snap shot snapshot deseri data tree from last valid snapshot last zxid deseri param dt datatre deseri param session session deseri last zxid deseri from snapshot io except ioexcept deseri data tree datatre dt map integ session io except ioexcept persist datatre session persist storag param dt datatre serial param session io except ioexcept serial data tree datatre dt map integ session file name io except ioexcept find most recent snapshot file most recent snapshot file io except ioexcept file find most recent snapshot findmostrecentsnapshot io except ioexcept free resourc from snapshot immedi io except ioexcept close io except ioexcept 

dump snapshot file stdout snapshot formatt snapshotformatt usag snapshot formatt snapshotformatt snapshot file snapshot file main string arg except arg length err println usag snapshot formatt snapshotformatt snapshot file snapshot file exit snapshot formatt snapshotformatt run arg run string snapshot file name snapshotfilenam io except ioexcept input stream inputstream check input stream checkedinputstream buffer input stream bufferedinputstream file input stream fileinputstream snapshot file name snapshotfilenam adler32 input archiv inputarch ia binari input archiv binaryinputarch get archiv getarch file snap filesnap file snap filesnap file snap filesnap data tree datatre data tree datatre data tree datatre map integ session hash map hashmap integ file snap filesnap deseri data tree datatre session ia print detail printdetail data tree datatre session print detail printdetail data tree datatre data tree datatre map integ session print znode detail printznodedetail data tree datatre print session detail printsessiondetail data tree datatre session print znode detail printznodedetail data tree datatre data tree datatre println string format node znode detail count data tree datatre get node count getnodecount print znode printznod data tree datatre println print znode printznod data tree datatre data tree datatre string name println data node datanod data tree datatre get node getnod name set string children keep findbug happi println name print stat printstat stat println data length datalength data length children get children getchildren children string child children print znode printznod data tree datatre name name equal child print session detail printsessiondetail data tree datatre data tree datatre map integ session println session detail sid timeout ephemer count ephemeralcount map entri integ session entri set entryset sid get kei getkei println string format 016x sid get valu getvalu data tree datatre get ephemer getephemer sid size print stat printstat stat persist statpersist stat print hex printhex zxid czxid stat get czxid getczxid println ctime date stat get ctime getctim string tostr print hex printhex zxid mzxid stat get mzxid getmzxid println mtime date stat get mtime getmtim string tostr print hex printhex zxid pzxid stat get pzxid getpzxid println cversion stat get cversion getcvers println data version datavers stat get version getvers println acl version aclvers stat get avers getavers print hex printhex ephemer owner ephemeralown stat get ephemer owner getephemeralown print hex printhex string prefix valu println string format 016x prefix valu 

learner sync request learnersyncrequest request learner handler learnerhandl fh learner sync request learnersyncrequest learner handler learnerhandl fh session id sessionid xid type buffer bytebuff bb list id auth info authinfo session id sessionid xid type bb auth info authinfo fh fh 

implement client receiv elect event leader elect awar leaderelectionawar call state transit current low level event provid begin end state instanc start follow offer start offer start offer complet offer complet determin start determin start determin complet determin complet param event type eventtyp elect event onelectionev event type eventtyp event type eventtyp 

read transact log txn log txnlog roll current log append io except ioexcept roll log rolllog io except ioexcept append request transact log param hdr transact header param transact return iff append otw io except ioexcept append txn header txnheader hdr record io except ioexcept start read transact log from zxid param zxid return iter read next transact log io except ioexcept txn iter txniter read zxid io except ioexcept last zxid log transact last zxid log transact io except ioexcept get last log zxid getlastloggedzxid io except ioexcept truncat log get sync leader param zxid zxid truncat io except ioexcept truncat zxid io except ioexcept dbid transact log dbid transact log io except ioexcept get db id getdbid io except ioexcept commmit trasact make persist io except ioexcept commit io except ioexcept close transact log close io except ioexcept iter read transact log txn iter txniter transact header transact header txn header txnheader get header gethead transact record transact record record get txn gettxn next transact record io except ioexcept next io except ioexcept close file releas resourc io except ioexcept close io except ioexcept 

iter read transact log txn iter txniter transact header transact header txn header txnheader get header gethead transact record transact record record get txn gettxn next transact record io except ioexcept next io except ioexcept close file releas resourc io except ioexcept close io except ioexcept 

abstract client base clientbas zk test zktestcas logger log logger factori loggerfactori get logger getlogg client base clientbas connect timeout connect timeout 30000 file basetest file get properti getproperti build test dir build string host port hostport 127 port assign portassign uniqu max cnxn maxcnxn server cnxn factori servercnxnfactori server factori serverfactori file tmp dir tmpdir initi fd count initialfdcount client base clientbas gener don us us special ignor result reason test don us empti watcher real code watcher nullwatch watcher process watch event watchedev event nada countdown watcher countdownwatch watcher xxx doesn count down latch countdownlatch client connect clientconnect connect countdown watcher countdownwatch reset reset client connect clientconnect count down latch countdownlatch connect process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect event get state getstat keeper state keeperst connect read connectedreadonli connect notifi notifyal client connect clientconnect count down countdown connect notifi notifyal connect isconnect connect wait connect waitforconnect timeout interrupt except interruptedexcept timeout except timeoutexcept expir current time milli currenttimemilli timeout left timeout connect left wait left left expir current time milli currenttimemilli connect timeout except timeoutexcept connect wait disconnect waitfordisconnect timeout interrupt except interruptedexcept timeout except timeoutexcept expir current time milli currenttimemilli timeout left timeout connect left wait left left expir current time milli currenttimemilli connect timeout except timeoutexcept disconnect testabl zoo keeper testablezookeep creat client createcli io except ioexcept interrupt except interruptedexcept creat client createcli host port hostport testabl zoo keeper testablezookeep creat client createcli string hp io except ioexcept interrupt except interruptedexcept countdown watcher countdownwatch watcher countdown watcher countdownwatch creat client createcli watcher hp testabl zoo keeper testablezookeep creat client createcli countdown watcher countdownwatch watcher io except ioexcept interrupt except interruptedexcept creat client createcli watcher host port hostport link list linkedlist zoo keeper zookeep client allclient client setup allclientssetup testabl zoo keeper testablezookeep creat client createcli countdown watcher countdownwatch watcher string hp io except ioexcept interrupt except interruptedexcept creat client createcli watcher hp connect timeout connect timeout testabl zoo keeper testablezookeep creat client createcli countdown watcher countdownwatch watcher string hp timeout io except ioexcept interrupt except interruptedexcept watcher reset testabl zoo keeper testablezookeep zk testabl zoo keeper testablezookeep hp timeout watcher watcher client connect clientconnect await timeout time unit timeunit millisecond fail unabl connect server client setup allclientssetup log error client allclient setup fail client allclient setup client allclient client allclient add zk test done close zk need zk close jmx env jmxenv ensur ensureal 0x hex string tohexstr zk get session id getsessionid zk host port hostport string host port host port hostport string host port host host port port list host port hostport pars host port list parsehostportlist string hplist arrai list arraylist host port hostport alist arrai list arraylist host port hostport string hp hplist split idx hp last index lastindexof string host hp substr idx port port integ pars parseint hp substr idx runtim except runtimeexcept runtim except runtimeexcept problem pars hp string tostr alist add host port hostport host port alist wait server up waitforserverup string hp timeout start current time milli currenttimemilli multipl hostport first on host port hostport hpobj pars host port list parsehostportlist hp get string result send4 letter word send4letterword hpobj host hpobj port stat result start startswith zookeep version result contain read io except ioexcept ignor expect log info server hp up current time milli currenttimemilli start timeout thread sleep 250 interrupt except interruptedexcept ignor wait server down waitforserverdown string hp timeout start current time milli currenttimemilli host port hostport hpobj pars host port list parsehostportlist hp get send4 letter word send4letterword hpobj host hpobj port stat io except ioexcept current time milli currenttimemilli start timeout thread sleep 250 interrupt except interruptedexcept ignor wait server state waitforserverst quorum peer quorump qp timeout string server state serverst start current time milli currenttimemilli thread sleep 250 interrupt except interruptedexcept ignor qp get server state getserverst equal server state serverst current time milli currenttimemilli start timeout verifi thread termin verifythreadtermin thread thread milli interrupt except interruptedexcept thread join milli thread aliv isal log error thread thread get name getnam arrai string tostr thread get stack trace getstacktrac assertfals thread thread get name getnam aliv after join file creat tmp dir createtmpdir io except ioexcept creat tmp dir createtmpdir basetest file creat tmp dir createtmpdir file parent dir parentdir io except ioexcept file tmp file tmpfile file creat temp file createtempfil test junit parent dir parentdir don delet tmp file tmpfile ensur don attempt creat tmp dir tmpdir duplic name file tmp dir tmpdir file tmp file tmpfile dir assertfals tmp dir tmpdir exist tmpfile job asserttru tmp dir tmpdir mkdir tmp dir tmpdir get port getport string host port hostport string split host port hostport split string portstr split split length string pc portstr split pc length portstr pc integ pars parseint portstr server cnxn factori servercnxnfactori creat server instanc createnewserverinst file data dir datadir server cnxn factori servercnxnfactori factori string host port hostport max cnxn maxcnxn io except ioexcept interrupt except interruptedexcept zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv data dir datadir data dir datadir 3000 port get port getport host port hostport factori factori server cnxn factori servercnxnfactori creat factori createfactori port max cnxn maxcnxn factori startup zk asserttru wait server up client base clientbas wait server up waitforserverup 127 port connect timeout connect timeout factori shutdown server instanc shutdownserverinst server cnxn factori servercnxnfactori factori string host port hostport factori zk databas zkdatabas zk db zkdb zoo keeper server zookeeperserv zs get server getserv factori zk db zkdb zs get zk databas getzkdatabas factori shutdown zk db zkdb close io except ioexcept log warn error close log port get port getport host port hostport asserttru wait server down client base clientbas wait server down waitforserverdown 127 port connect timeout connect timeout test specif setup setup test env setuptestenv test run 100k prealloc log window system prealloc 64m 15 second 15second result test failur client timeout first session set env directli order handl init gc issu set properti setproperti zookeep pre alloc size preallocs 100 file txn log filetxnlog set prealloc size setpreallocs 100 1024 set up setupal except client allclient link list linkedlist zoo keeper zookeep client setup allclientssetup befor set up setup except inform log number fd us befor after test run help verifi free resourc correctli work unix system place sun ha implement part mgmt bean api oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean initi fd count initialfdcount unixo get open file descriptor count getopenfiledescriptorcount log info initi fdcount initi fd count initialfdcount setup test env setuptestenv jmx env jmxenv set up setup set up setupal tmp dir tmpdir creat tmp dir createtmpdir basetest start server startserv log info client test setup finish start server startserv except log info start server server factori serverfactori creat server instanc createnewserverinst tmp dir tmpdir server factori serverfactori host port hostport max cnxn maxcnxn ensur server data bean regist jmx env jmxenv ensur ensureonli memori data tree inmemorydatatre standalon server port standaloneserv port stop server stopserv except log info stop server shutdown server instanc shutdownserverinst server factori serverfactori host port hostport server factori serverfactori ensur bean leftov jmx env jmxenv ensur ensureonli zoo keeper server zookeeperserv get server getserv server cnxn factori servercnxnfactori fac zoo keeper server zookeeperserv zs server cnxn factori accessor servercnxnfactoryaccessor get zk server getzkserv fac zs tear down teardownal except client allclient zoo keeper zookeep zk client allclient zk zk close interrupt except interruptedexcept log warn ignor interrupt client allclient after tear down teardown except log info tear down teardown start tear down teardownal stop server stopserv tmp dir tmpdir asserttru delet tmp dir tmpdir string tostr recurs delet recursivedelet tmp dir tmpdir ha set instanc reus test case server factori serverfactori jmx env jmxenv tear down teardown inform log number fd us befor after test run help verifi free resourc correctli work unix system place sun ha implement part mgmt bean api oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean fd count fdcount unixo get open file descriptor count getopenfiledescriptorcount string messag fdcount after test fd count fdcount start initi fd count initialfdcount log info messag fd count fdcount initi fd count initialfdcount log info sleep 20 sec thread sleep 60000 asserttru messag fd count fdcount initi fd count initialfdcount bean server connect mbeanserverconnect jmx conn jmxconn io except ioexcept jmx env jmxenv conn recurs delet recursivedelet file directori isdirectori file children list file listfil file children asserttru delet string tostr recurs delet recursivedelet delet log stack trace logallstacktrac string builder stringbuild sb string builder stringbuild sb append start log stack trace logallstacktrac map thread stack trace element stacktraceel thread thread get stack trace getallstacktrac entri thread stack trace element stacktraceel thread entri set entryset sb append thread get kei getkei get name getnam stack trace element stacktraceel elem get valu getvalu sb append tat elem sb append end log stack trace logallstacktrac log error sb string tostr verifi server number node root verifi root server match verifyrootofallserversmatch string host port hostport interrupt except interruptedexcept keeper except keeperexcept io except ioexcept string part host port hostport split run till count longer chang server max 15 second sleep approx 30 second count part length fail 100 newcount part length string hp part zoo keeper zookeep zk creat client createcli hp newcount zk get children getchildren size zk close throwabl fail session creation fail dump thread stack next server log stack trace logallstacktrac arrai equal newcount count log info found match arrai arrai string tostr newcount count newcount count newcount thread sleep 10000 don keep up fail 10 verifi server report number node string logmsg node count consist part length count count log error logmsg integ valu valueof count integ valu valueof count log info logmsg integ valu valueof count integ valu valueof count string read file readfil file file io except ioexcept arrai output stream bytearrayoutputstream os arrai output stream bytearrayoutputstream buffer input stream bufferedinputstream buffer input stream bufferedinputstream file input stream fileinputstream file io util ioutil copi byte copybyt os 1024 close os string tostr string join string separ object part string builder stringbuild sb string builder stringbuild first object part part first sb append separ first sb append part sb string tostr 

gener don us us special ignor result reason test don us empti watcher real code watcher nullwatch watcher process watch event watchedev event nada 

countdown watcher countdownwatch watcher xxx doesn count down latch countdownlatch client connect clientconnect connect countdown watcher countdownwatch reset reset client connect clientconnect count down latch countdownlatch connect process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect event get state getstat keeper state keeperst connect read connectedreadonli connect notifi notifyal client connect clientconnect count down countdown connect notifi notifyal connect isconnect connect wait connect waitforconnect timeout interrupt except interruptedexcept timeout except timeoutexcept expir current time milli currenttimemilli timeout left timeout connect left wait left left expir current time milli currenttimemilli connect timeout except timeoutexcept connect wait disconnect waitfordisconnect timeout interrupt except interruptedexcept timeout except timeoutexcept expir current time milli currenttimemilli timeout left timeout connect left wait left left expir current time milli currenttimemilli connect timeout except timeoutexcept disconnect 

host port hostport string host port host port hostport string host port host host port port 

get children respons getchildrenrespons record java util list string children get children respons getchildrenrespons get children respons getchildrenrespons java util list string children children children java util list string get children getchildren children set children setchildren java util list string children serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag start vector startvector children children children len1 children size vidx1 vidx1 len1 vidx1 string e1 string children get vidx1 write string writestr e1 e1 end vector endvector children children end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag index vidx1 start vector startvector children vidx1 children java util arrai list arraylist string vidx1 done vidx1 incr string e1 e1 read string readstr e1 children add e1 end vector endvector children end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord start vector startvector children children children len1 children size vidx1 vidx1 len1 vidx1 string e1 string children get vidx1 write string writestr e1 e1 end vector endvector children children end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept unsupport oper except unsupportedoperationexcept compar get children respons getchildrenrespons unimpl equal object peer peer peer peer get children respons getchildrenrespons peer peer get children respons getchildrenrespons peer get children respons getchildrenrespons peer peer ret ret children equal peer children ret ret ret hash code hashcod result 17 ret ret children hash code hashcod result 37 result ret result string signatur get children respons lgetchildrenrespons 

txn log sourc txnlogsourc log sourc logsourc logger log logger factori loggerfactori get logger getlogg txn log sourc txnlogsourc log skip list logskiplist skiplist skipn 10000 string file starttim endtim size overlap rang overlapsrang starttim endtim starttim endtim endtim starttim size size get start time getstarttim starttim get end time getendtim endtim log skip list logskiplist get skip list getskiplist skiplist transact file istransactionfil string file io except ioexcept random access file reader randomaccessfileread reader random access file reader randomaccessfileread file file binari input archiv binaryinputarch log stream logstream binari input archiv binaryinputarch reader file header filehead fhdr file header filehead fhdr deseri log stream logstream filehead reader close fhdr get magic getmag file txn log filetxnlog txnlog magic txnlog magic txn log sourc iter txnlogsourceiter log iter logiter log entri logentri next starttim endtim txn log sourc txnlogsourc src random access file reader randomaccessfileread reader binari input archiv binaryinputarch log stream logstream skip start skippedatstart filter op filterop filter txn log sourc iter txnlogsourceiter txn log sourc txnlogsourc src starttim endtim illeg argument except illegalargumentexcept filter except filterexcept src starttim endtim txn log sourc iter txnlogsourceiter txn log sourc txnlogsourc src starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept src src starttim starttim endtim endtim reader random access file reader randomaccessfileread file src file log stream logstream binari input archiv binaryinputarch reader file header filehead fhdr file header filehead fhdr deseri log stream logstream filehead except illeg argument except illegalargumentexcept open transact log src file log skip list logskiplist mark start src get skip list getskiplist find mark befor findmarkbefor starttim reader seek start get byte getbyt skip start skippedatstart start get entri skip getentriesskip io except ioexcept ioe skip read from start filter filter log entri logentri read next entri readnextentri get timestamp gettimestamp endtim get timestamp gettimestamp starttim filter filter match next skip start skippedatstart size io except ioexcept endtim src get end time getendtim src size skip start skippedatstart po reader get posit getposit log entri logentri log skip list logskiplist mark lastseg src get skip list getskiplist find mark befor findmarkbefor endtim reader seek lastseg get byte getbyt number entri skip get end iter number skip get start count lastseg get entri skip getentriesskip skip start skippedatstart read next entri readnextentri get timestamp gettimestamp endtim count reader seek po count log entri logentri read next entri readnextentri log entri logentri crc valu crcvalu byte crc valu crcvalu log stream logstream read readlong crcvalu byte log stream logstream read buffer readbuff txn entri txnentri eof except eofexcept ex byte length checksum crc adler32 crc updat byte byte length crc valu crcvalu crc get valu getvalu io except ioexcept crc doesn match crc valu crcvalu vs crc get valu getvalu txn header txnheader hdr txn header txnheader record serial util serializeutil deseri txn deserializetxn byte hdr hdr get type gettyp op code opcod creat session createsess transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid creat session createsess op code opcod close session closesess transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid close session closesess op code opcod creat creat txn createtxn creat creat txn createtxn string path creat get path getpath transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid creat path op code opcod set data setdata set data txn setdatatxn set set data txn setdatatxn string path set get path getpath transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid set data setdata path op code opcod set acl setacl set acl txn setacltxn setacl set acl txn setacltxn string path setacl get path getpath transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid set acl setacl path op code opcod error error txn errortxn error error txn errortxn transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid error error error get err geterr log info unknown op hdr get type gettyp log stream logstream read readbyt eor eof except eofexcept last transact partial except ex log error error read transact from src file ha next hasnext next log entri logentri next element except nosuchelementexcept log entri logentri ret next log entri logentri read next entri readnextentri filter filter match read next entri readnextentri filter except filterexcept fe element except nosuchelementexcept fe string tostr get timestamp gettimestamp endtim next next ret remov unsupport oper except unsupportedoperationexcept unsupport oper except unsupportedoperationexcept remov support txn log close io except ioexcept reader close log iter logiter iter starttim endtim illeg argument except illegalargumentexcept iter starttim endtim filter except filterexcept fe happen log iter logiter iter starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept sanitis start end time endtim starttim illeg argument except illegalargumentexcept end time endtim greater equal starttim starttim txn log sourc iter txnlogsourceiter starttim endtim filter log iter logiter iter illeg argument except illegalargumentexcept iter starttim endtim txn log sourc txnlogsourc string file io except ioexcept file file skiplist log skip list logskiplist random access file reader randomaccessfileread reader random access file reader randomaccessfileread file file binari input archiv binaryinputarch log stream logstream binari input archiv binaryinputarch reader file header filehead fhdr file header filehead fhdr deseri log stream logstream filehead byte last fp lastfp reader get posit getposit crc valu crcvalu crc valu crcvalu log stream logstream read readlong crcvalu byte log stream logstream read buffer readbuff txn entri txnentri eof except eofexcept byte length checksum crc adler32 crc updat byte byte length crc valu crcvalu crc get valu getvalu io except ioexcept crc doesn match crc valu crcvalu vs crc get valu getvalu log stream logstream read readbyt eor eof except eofexcept last transact partial txn header txnheader hdr txn header txnheader record serial util serializeutil deseri txn deserializetxn byte hdr starttim starttim hdr get time gettim endtim hdr get time gettim size skipn skiplist add mark addmark hdr get time gettim last fp lastfp size size byte io except ioexcept read from file reader close string string tostr txn log sourc txnlogsourc file file size size start starttim end endtim main string arg io except ioexcept filter except filterexcept txn log sourc txnlogsourc txn log sourc txnlogsourc arg println log iter logiter iter arg length starttim valu valueof arg endtim valu valueof arg filter op filterop fo filter parser filterpars zxid x2 f0 bd6 f5 e0 0x2f0bd6f5e0 zxid x2 f0 bd6 f5 e9 0x2f0bd6f5e9 oper error pars println fo fo iter iter starttim endtim fo iter iter println iter iter ha next hasnext println iter next iter close 

txn log sourc iter txnlogsourceiter log iter logiter log entri logentri next starttim endtim txn log sourc txnlogsourc src random access file reader randomaccessfileread reader binari input archiv binaryinputarch log stream logstream skip start skippedatstart filter op filterop filter txn log sourc iter txnlogsourceiter txn log sourc txnlogsourc src starttim endtim illeg argument except illegalargumentexcept filter except filterexcept src starttim endtim txn log sourc iter txnlogsourceiter txn log sourc txnlogsourc src starttim endtim filter op filterop filter illeg argument except illegalargumentexcept filter except filterexcept src src starttim starttim endtim endtim reader random access file reader randomaccessfileread file src file log stream logstream binari input archiv binaryinputarch reader file header filehead fhdr file header filehead fhdr deseri log stream logstream filehead except illeg argument except illegalargumentexcept open transact log src file log skip list logskiplist mark start src get skip list getskiplist find mark befor findmarkbefor starttim reader seek start get byte getbyt skip start skippedatstart start get entri skip getentriesskip io except ioexcept ioe skip read from start filter filter log entri logentri read next entri readnextentri get timestamp gettimestamp endtim get timestamp gettimestamp starttim filter filter match next skip start skippedatstart size io except ioexcept endtim src get end time getendtim src size skip start skippedatstart po reader get posit getposit log entri logentri log skip list logskiplist mark lastseg src get skip list getskiplist find mark befor findmarkbefor endtim reader seek lastseg get byte getbyt number entri skip get end iter number skip get start count lastseg get entri skip getentriesskip skip start skippedatstart read next entri readnextentri get timestamp gettimestamp endtim count reader seek po count log entri logentri read next entri readnextentri log entri logentri crc valu crcvalu byte crc valu crcvalu log stream logstream read readlong crcvalu byte log stream logstream read buffer readbuff txn entri txnentri eof except eofexcept ex byte length checksum crc adler32 crc updat byte byte length crc valu crcvalu crc get valu getvalu io except ioexcept crc doesn match crc valu crcvalu vs crc get valu getvalu txn header txnheader hdr txn header txnheader record serial util serializeutil deseri txn deserializetxn byte hdr hdr get type gettyp op code opcod creat session createsess transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid creat session createsess op code opcod close session closesess transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid close session closesess op code opcod creat creat txn createtxn creat creat txn createtxn string path creat get path getpath transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid creat path op code opcod set data setdata set data txn setdatatxn set set data txn setdatatxn string path set get path getpath transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid set data setdata path op code opcod set acl setacl set acl txn setacltxn setacl set acl txn setacltxn string path setacl get path getpath transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid set acl setacl path op code opcod error error txn errortxn error error txn errortxn transact entri transactionentri hdr get time gettim hdr get client id getclientid hdr get cxid getcxid hdr get zxid getzxid error error error get err geterr log info unknown op hdr get type gettyp log stream logstream read readbyt eor eof except eofexcept last transact partial except ex log error error read transact from src file ha next hasnext next log entri logentri next element except nosuchelementexcept log entri logentri ret next log entri logentri read next entri readnextentri filter filter match read next entri readnextentri filter except filterexcept fe element except nosuchelementexcept fe string tostr get timestamp gettimestamp endtim next next ret remov unsupport oper except unsupportedoperationexcept unsupport oper except unsupportedoperationexcept remov support txn log close io except ioexcept reader close 

abstract server cnxn factori servercnxnfactori string zookeep server cnxn factori zookeep server cnxn factori zookeep server cnxn factori servercnxnfactori packet processor packetprocessor process packet processpacket buffer bytebuff packet server cnxn servercnxn src logger log logger factori loggerfactori get logger getlogg server cnxn factori servercnxnfactori buffer caus connect close send buffer bytebuff close conn closeconn buffer bytebuff alloc abstract get local port getlocalport abstract iter server cnxn servercnxn get connect getconnect get num aliv connect getnumaliveconnect cnxn cnxn size abstract close session closesess session id sessionid abstract configur inet socket address inetsocketaddress addr max client cnxn maxclientcnxn io except ioexcept sasl server callback handler saslservercallbackhandl sasl server callback handler saslservercallbackhandl login login maximum number connect allow from host ip abstract get max client cnxn host getmaxclientcnxnsperhost maximum number connect allow from host ip abstract set max client cnxn host setmaxclientcnxnsperhost max abstract startup zoo keeper server zookeeperserv zk server zkserver io except ioexcept interrupt except interruptedexcept abstract join interrupt except interruptedexcept abstract shutdown abstract start zoo keeper server zookeeperserv zk server zkserver set zoo keeper server setzookeeperserv zoo keeper server zookeeperserv zk zk server zkserver zk zk zk set server cnxn factori setservercnxnfactori abstract close closeal server cnxn factori servercnxnfactori creat factori createfactori io except ioexcept string server cnxn factori name servercnxnfactorynam get properti getproperti zookeep server cnxn factori zookeep server cnxn factori server cnxn factori name servercnxnfactorynam server cnxn factori name servercnxnfactorynam nio server cnxn factori nioservercnxnfactori get name getnam server cnxn factori servercnxnfactori name fornam server cnxn factori name servercnxnfactorynam instanc newinst except io except ioexcept ioe io except ioexcept couldn instanti server cnxn factori name servercnxnfactorynam ioe init caus initcaus ioe server cnxn factori servercnxnfactori creat factori createfactori client port clientport max client cnxn maxclientcnxn io except ioexcept creat factori createfactori inet socket address inetsocketaddress client port clientport max client cnxn maxclientcnxn server cnxn factori servercnxnfactori creat factori createfactori inet socket address inetsocketaddress addr max client cnxn maxclientcnxn io except ioexcept server cnxn factori servercnxnfactori factori creat factori createfactori factori configur addr max client cnxn maxclientcnxn factori abstract inet socket address inetsocketaddress get local address getlocaladdress hash map hashmap server cnxn servercnxn connect bean connectionbean connect bean connectionbean hash map hashmap server cnxn servercnxn connect bean connectionbean hash set hashset server cnxn servercnxn cnxn hash set hashset server cnxn servercnxn unregist connect unregisterconnect server cnxn servercnxn server cnxn servercnxn connect bean connectionbean jmx connect bean jmxconnectionbean connect bean connectionbean remov server cnxn servercnxn jmx connect bean jmxconnectionbean bean registri mbeanregistri get instanc getinst unregist jmx connect bean jmxconnectionbean connect registerconnect server cnxn servercnxn server cnxn servercnxn zk server zkserver connect bean connectionbean jmx connect bean jmxconnectionbean connect bean connectionbean server cnxn servercnxn zk server zkserver bean registri mbeanregistri get instanc getinst jmx connect bean jmxconnectionbean zk server zkserver jmx server bean jmxserverbean connect bean connectionbean put server cnxn servercnxn jmx connect bean jmxconnectionbean jm except jmexcept log warn connect initi server sasl specifi user ha specifi zoo keeper server zookeeperserv login context name kei login context name kei jaa conf java secur auth login config authent requir except rais authent configur except rais io except ioexcept jaa conf miss error configur sasl login configuresasllogin io except ioexcept string server section serversect get properti getproperti zoo keeper sasl server zookeepersaslserv login context name kei login context name kei zoo keeper sasl server zookeepersaslserv login context name login context name note configur here refer javax secur auth login configur app configur entri appconfigurationentri entri secur except securityexcept secur except securityexcept entri configur get configur getconfigur get app configur entri getappconfigurationentri server section serversect secur except securityexcept handl harmless user doesn intend us jaa authent secur except securityexcept entri jaa conf configur except fetch jaa section user ha requir sasl specifi login context name kei login context name kei jaa file except authent entri string jaa file jaasfil get properti getproperti environ jaa conf kei jaa conf kei string login context name logincontextnam get properti getproperti zoo keeper sasl server zookeepersaslserv login context name kei login context name kei secur except securityexcept login context name logincontextnam jaa file jaasfil string error messag errormessag jaa configur section name server section serversect found jaa file jaasfil error messag errormessag jaa file jaasfil login context name logincontextnam error messag errormessag zoo keeper sasl server zookeepersaslserv login context name kei login context name kei set log error error messag errormessag io except ioexcept error messag errormessag jaa conf entri avail sasl server callback handler saslservercallbackhandl sasl server callback handler saslservercallbackhandl configur get configur getconfigur login login server section serversect sasl server callback handler saslservercallbackhandl login start thread need startthreadifneed login except loginexcept io except ioexcept configur server sasl configur allow zoo keeper zookeep server authent properli 

packet processor packetprocessor process packet processpacket buffer bytebuff packet server cnxn servercnxn src 

file header filehead record magic version dbid file header filehead file header filehead magic version dbid magic magic version version dbid dbid get magic getmag magic set magic setmag magic get version getvers version set version setvers version get dbid getdbid dbid set dbid setdbid dbid serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint magic magic write writeint version version write writelong dbid dbid end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag magic read readint magic version read readint version dbid read readlong dbid end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint magic magic write writeint version version write writelong dbid dbid end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer file header filehead cast except classcastexcept compar differ type record file header filehead peer file header filehead peer peer ret ret magic peer magic magic peer magic ret ret ret version peer version version peer version ret ret ret dbid peer dbid dbid peer dbid ret ret ret equal object peer peer peer peer file header filehead peer peer file header filehead peer file header filehead peer peer ret ret magic peer magic ret ret ret version peer version ret ret ret dbid peer dbid ret ret ret hash code hashcod result 17 ret ret magic result 37 result ret ret version result 37 result ret ret dbid dbid 32 result 37 result ret result string signatur file header lfilehead iil 

acl test acltest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg acl test acltest string hostport 127 port assign portassign uniqu count down latch countdownlatch start signal startsign test test disconnect add auth testdisconnectedaddauth except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 1000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk log info start up zookeep server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout zk add auth info addauthinfo digest pat test get byte getbyt zk set acl setacl id creator acl creator acl zk close shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport client base clientbas connect timeout connect timeout verifi acl optim store acl refer data node work test test acl testacl except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 1000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk zoo keeper zookeep zk string path log info start up zookeep server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zk zoo keeper zookeep hostport connect timeout connect timeout log info start creat acl 100 path zk creat path path get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist asserttru size acl map zk get zk databas getzkdatabas get acl size getacls 100 200 path acl acl acl acl set perm setperm id id id id set id setid id set scheme setschem ip acl set id setid id arrai list arraylist acl list arrai list arraylist acl list add acl zk creat path path get byte getbyt list creat mode createmod persist asserttru size acl map 101 zk get zk databas getzkdatabas get acl size getacls shutdown server restart shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout start signal startsign count down latch countdownlatch zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout start signal startsign await connect timeout connect timeout time unit timeunit millisecond asserttru count start signal startsign get count getcount asserttru acl map 101 zk get zk databas getzkdatabas get acl size getacls 200 205 path acl acl acl acl set perm setperm id id id id set id setid id set scheme setschem ip acl set id setid id arrai list arraylist acl list arrai list arraylist acl list add acl zk creat path path get byte getbyt list creat mode createmod persist asserttru acl map 106 zk get zk databas getzkdatabas get acl size getacls zk close shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport client base clientbas connect timeout connect timeout non javadoc org apach zookeep watcher process org apach zookeep watcher event watcherev process watch event watchedev event log info event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount log info startsign count down countdown start signal startsign count down countdown log warn startsign start signal startsign 

log server logserv servlet context handler servletcontexthandl log server logserv merg log sourc mergedlogsourc src except servlet context handler servletcontexthandl session set context path setcontextpath add servlet addservlet servlet holder servlethold content staticcont graph add servlet addservlet servlet holder servlethold fs fs add servlet addservlet servlet holder servlethold graph data graphdata src data add servlet addservlet servlet holder servlethold file loader fileload src loadfil add servlet addservlet servlet holder servlethold num event numev src info add servlet addservlet servlet holder servlethold throughput src throughput main string arg merg log sourc mergedlogsourc src merg log sourc mergedlogsourc arg println src server server server 8182 server set handler sethandl log server logserv src server start server join except wrong print stack trace printstacktrac 

path session v1 session session resourc sessionsresourc logger log logger factori loggerfactori get logger getlogg session resourc sessionsresourc string context path contextpath session resourc sessionsresourc context http servlet request httpservletrequest request context path contextpath request get context path getcontextpath context path contextpath equal context path contextpath put produc media type mediatyp applic json applic json applic javascript media type mediatyp applic xml applic xml consum media type mediatyp applic octet stream applic octet stream respons keep aliv session keepalivesess path param pathparam session string session context uri info uriinfo ui data zoo keeper servic zookeeperservic connect isconnect context path contextpath session found thrownotfound session ui zoo keeper servic zookeeperservic reset timer resettim context path contextpath session respons statu respons statu build post produc media type mediatyp applic json applic json applic javascript media type mediatyp applic xml applic xml respons creat session createsess queri param queryparam op string op valu defaultvalu queri param queryparam expir string expir context uri info uriinfo ui op equal creat web applic except webapplicationexcept respons statu respons statu bad request bad request entiti error zerror ui get request uri getrequesturi string tostr build expir second expireinsecond expir second expireinsecond integ pars parseint expir number format except numberformatexcept web applic except webapplicationexcept respons statu respons statu bad request bad request build string uuid uuid random uuid randomuuid string tostr zoo keeper servic zookeeperservic connect isconnect context path contextpath uuid uuid uuid random uuid randomuuid string tostr establish connect zoo keeper zookeep cluster zoo keeper servic zookeeperservic get client getclient context path contextpath uuid expir second expireinsecond io except ioexcept log error fail creat session web applic except webapplicationexcept respons statu respons statu intern server error intern server error build uri uri ui get absolut path builder getabsolutepathbuild path uuid build respons creat uri entiti json pad jsonwithpad session zsession uuid uri string tostr build delet produc media type mediatyp applic json applic json applic javascript media type mediatyp applic xml applic xml media type mediatyp applic octet stream applic octet stream delet session deletesess path param pathparam session string session context uri info uriinfo ui zoo keeper servic zookeeperservic close context path contextpath session found thrownotfound string session uri info uriinfo ui web applic except webapplicationexcept web applic except webapplicationexcept respons statu respons statu found found entiti error zerror ui get request uri getrequesturi string tostr session found build 

async op asyncop base async callback class verifi expect valu actual valu basic oper subclass gener expect valu defin string tostr method subclass pass verifi claus specifi ctx object async call process result processresult method get ctx part callback addition callback overwrit instanc field match paramet argument process result processresult method cb instanc compar expect actual valu call string tostr compar two format expect valu differ defin subclass gener expect valu start result code rc path node oper follow field specif oper type cb subclass exampl children cb childrencb specifi list expect children suffix rc path string tostr method subclass detail format abstract async cb asynccb zoo keeper zookeep zk timeout milli defaulttimeoutmilli 30000 latch us await result from server count down latch countdownlatch latch code rc code string path foo string expect async cb asynccb zoo keeper zookeep zk count down latch countdownlatch latch zk zk latch latch set rc setrc code rc rc rc set path setpath string path path path process result processresult code rc string path object ctx rc rc path path expect string ctx latch count down countdown string format rc path suffix suffix defin subclass individu overrid string string tostr rc path verifi latch await timeout milli defaulttimeoutmilli time unit timeunit millisecond interrupt except interruptedexcept fail unexpect interrupt lookout timeout assertsam 0l latch get count getcount string actual string tostr equal assertequ expect actual string cb stringcb async cb asynccb string callback stringcallback data 10 list acl acl id creator acl creator acl creat mode createmod flag creat mode createmod persist string name path string cb stringcb zoo keeper zookeep zk zk count down latch countdownlatch string cb stringcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch set path setpath string path set path setpath path name path string node name nodenam path substr path last index lastindexof process result processresult rc string path object ctx string name name name process result processresult code get rc path ctx async cb asynccb creat zk creat path data acl flag string tostr verifi creat verifycr creat verifi verifi creat failur node exist verifycreatefailur nodeexist string cb stringcb zk verifi creat verifycr rc code nodeexist name zk creat path data acl flag string tostr verifi overrid string string tostr string tostr name aclcb async cb asynccb acl callback aclcallback list acl acl id creator acl creator acl version stat stat stat data test get byte getbyt aclcb zoo keeper zookeep zk zk count down latch countdownlatch aclcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch stat set avers setavers stat set cversion setcvers stat set ephemer owner setephemeralown stat set version setvers process result processresult rc string path object ctx list acl acl stat stat acl acl stat stat process result processresult code get rc path ctx verifi get acl verifygetacl string cb stringcb zk verifi creat verifycr zk get acl getacl path stat string tostr verifi string string tostr list acl acl string builder stringbuild result string builder stringbuild acl acl acl result append acl get perm getperm result string tostr overrid string string tostr string tostr string tostr acl version string data stat stat get avers getavers stat get cversion getcvers stat get ephemer owner getephemeralown stat get version getvers children cb childrencb async cb asynccb children callback childrencallback list string children arrai list arraylist string children cb childrencb zoo keeper zookeep zk zk count down latch countdownlatch children cb childrencb zoo keeper zookeep zk count down latch countdownlatch latch zk latch process result processresult rc string path object ctx list string children children children arrai list arraylist string children process result processresult code get rc path ctx string cb stringcb creat node createnod string cb stringcb parent string cb stringcb zk parent verifi creat verifycr parent string cb stringcb creat node createnod string cb stringcb parent string child name childnam bar creat node createnod parent child name childnam string cb stringcb creat node createnod string cb stringcb parent string child name childnam string cb stringcb child string cb stringcb zk child set path setpath parent path child name childnam child verifi creat verifycr child verifi get children empti verifygetchildrenempti string cb stringcb parent creat node createnod path parent path verifi verifi get children singl verifygetchildrensingl string cb stringcb parent creat node createnod string cb stringcb child creat node createnod parent path parent path children add child node name nodenam verifi verifi get children two verifygetchildrentwo string cb stringcb parent creat node createnod string cb stringcb child1 creat node createnod parent child1 string cb stringcb child2 creat node createnod parent child2 path parent path children add child1 node name nodenam children add child2 node name nodenam verifi verifi get children failur node verifygetchildrenfailur nonod rc keeper except keeperexcept code nonod verifi overrid verifi zk get children getchildren path string tostr verifi overrid string string tostr string tostr children string tostr children2 cb children2cb async cb asynccb children2 callback children2callback list string children arrai list arraylist string children2 cb children2cb zoo keeper zookeep zk zk count down latch countdownlatch children2 cb children2cb zoo keeper zookeep zk count down latch countdownlatch latch zk latch process result processresult rc string path object ctx list string children stat stat children children arrai list arraylist string children process result processresult code get rc path ctx string cb stringcb creat node createnod string cb stringcb parent string cb stringcb zk parent verifi creat verifycr parent string cb stringcb creat node createnod string cb stringcb parent string child name childnam bar creat node createnod parent child name childnam string cb stringcb creat node createnod string cb stringcb parent string child name childnam string cb stringcb child string cb stringcb zk child set path setpath parent path child name childnam child verifi creat verifycr child verifi get children empti verifygetchildrenempti string cb stringcb parent creat node createnod path parent path verifi verifi get children singl verifygetchildrensingl string cb stringcb parent creat node createnod string cb stringcb child creat node createnod parent path parent path children add child node name nodenam verifi verifi get children two verifygetchildrentwo string cb stringcb parent creat node createnod string cb stringcb child1 creat node createnod parent child1 string cb stringcb child2 creat node createnod parent child2 path parent path children add child1 node name nodenam children add child2 node name nodenam verifi verifi get children failur node verifygetchildrenfailur nonod rc keeper except keeperexcept code nonod verifi overrid verifi zk get children getchildren path string tostr verifi overrid string string tostr string tostr children string tostr data cb datacb async cb asynccb data callback datacallback data 10 stat stat stat data cb datacb zoo keeper zookeep zk zk count down latch countdownlatch data cb datacb zoo keeper zookeep zk count down latch countdownlatch latch zk latch stat set avers setavers stat set cversion setcvers stat set ephemer owner setephemeralown stat set version setvers process result processresult rc string path object ctx data stat stat data data stat stat process result processresult code get rc path ctx verifi get data verifygetdata string cb stringcb zk verifi creat verifycr zk get data getdata path string tostr verifi verifi get data failur node verifygetdatafailur nonod rc keeper except keeperexcept code nonod data stat zk get data getdata path string tostr verifi overrid string string tostr string tostr data string data stat stat get avers getavers stat get cversion getcvers stat get ephemer owner getephemeralown stat get version getvers stat cb statcb async cb asynccb stat callback statcallback list acl acl id creator acl creator acl version stat stat stat data test get byte getbyt stat cb statcb zoo keeper zookeep zk zk count down latch countdownlatch stat cb statcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch stat set avers setavers stat set cversion setcvers stat set ephemer owner setephemeralown stat set version setvers process result processresult rc string path object ctx stat stat stat stat process result processresult code get rc path ctx verifi set acl verifysetacl stat set avers setavers string cb stringcb zk verifi creat verifycr zk set acl setacl path acl version string tostr verifi verifi set acl failur node verifysetaclfailur nonod rc keeper except keeperexcept code nonod stat zk set acl setacl path acl version string tostr verifi set data setdata zk set data setdata path data version string tostr verifi set data verifysetdata stat set version setvers string cb stringcb zk verifi creat verifycr set data setdata verifi verifi set data failur node verifysetdatafailur nonod rc keeper except keeperexcept code nonod stat zk set data setdata path data version string tostr verifi verifi exist verifyexist string cb stringcb zk verifi creat verifycr zk exist path string tostr verifi verifi exist failur node verifyexistsfailur nonod rc keeper except keeperexcept code nonod stat zk exist path string tostr verifi overrid string string tostr string tostr version string data stat stat get avers getavers stat get cversion getcvers stat get ephemer owner getephemeralown stat get version getvers cb voidcb async cb asynccb callback voidcallback version cb voidcb zoo keeper zookeep zk zk count down latch countdownlatch cb voidcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch process result processresult rc string path object ctx process result processresult code get rc path ctx delet zk delet path version string tostr verifi delet verifydelet string cb stringcb zk verifi creat verifycr delet verifi verifi delet failur node verifydeletefailur nonod rc code nonod zk delet path version string tostr verifi sync zk sync path string tostr verifi sync verifysync sync verifi overrid string string tostr string tostr version 

base async callback class verifi expect valu actual valu basic oper subclass gener expect valu defin string tostr method subclass pass verifi claus specifi ctx object async call process result processresult method get ctx part callback addition callback overwrit instanc field match paramet argument process result processresult method cb instanc compar expect actual valu call string tostr compar two format expect valu differ defin subclass gener expect valu start result code rc path node oper follow field specif oper type cb subclass exampl children cb childrencb specifi list expect children suffix rc path string tostr method subclass detail format abstract async cb asynccb zoo keeper zookeep zk timeout milli defaulttimeoutmilli 30000 latch us await result from server count down latch countdownlatch latch code rc code string path foo string expect async cb asynccb zoo keeper zookeep zk count down latch countdownlatch latch zk zk latch latch set rc setrc code rc rc rc set path setpath string path path path process result processresult code rc string path object ctx rc rc path path expect string ctx latch count down countdown string format rc path suffix suffix defin subclass individu overrid string string tostr rc path verifi latch await timeout milli defaulttimeoutmilli time unit timeunit millisecond interrupt except interruptedexcept fail unexpect interrupt lookout timeout assertsam 0l latch get count getcount string actual string tostr equal assertequ expect actual 

string cb stringcb async cb asynccb string callback stringcallback data 10 list acl acl id creator acl creator acl creat mode createmod flag creat mode createmod persist string name path string cb stringcb zoo keeper zookeep zk zk count down latch countdownlatch string cb stringcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch set path setpath string path set path setpath path name path string node name nodenam path substr path last index lastindexof process result processresult rc string path object ctx string name name name process result processresult code get rc path ctx async cb asynccb creat zk creat path data acl flag string tostr verifi creat verifycr creat verifi verifi creat failur node exist verifycreatefailur nodeexist string cb stringcb zk verifi creat verifycr rc code nodeexist name zk creat path data acl flag string tostr verifi overrid string string tostr string tostr name 

aclcb async cb asynccb acl callback aclcallback list acl acl id creator acl creator acl version stat stat stat data test get byte getbyt aclcb zoo keeper zookeep zk zk count down latch countdownlatch aclcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch stat set avers setavers stat set cversion setcvers stat set ephemer owner setephemeralown stat set version setvers process result processresult rc string path object ctx list acl acl stat stat acl acl stat stat process result processresult code get rc path ctx verifi get acl verifygetacl string cb stringcb zk verifi creat verifycr zk get acl getacl path stat string tostr verifi string string tostr list acl acl string builder stringbuild result string builder stringbuild acl acl acl result append acl get perm getperm result string tostr overrid string string tostr string tostr string tostr acl version string data stat stat get avers getavers stat get cversion getcvers stat get ephemer owner getephemeralown stat get version getvers 

children cb childrencb async cb asynccb children callback childrencallback list string children arrai list arraylist string children cb childrencb zoo keeper zookeep zk zk count down latch countdownlatch children cb childrencb zoo keeper zookeep zk count down latch countdownlatch latch zk latch process result processresult rc string path object ctx list string children children children arrai list arraylist string children process result processresult code get rc path ctx string cb stringcb creat node createnod string cb stringcb parent string cb stringcb zk parent verifi creat verifycr parent string cb stringcb creat node createnod string cb stringcb parent string child name childnam bar creat node createnod parent child name childnam string cb stringcb creat node createnod string cb stringcb parent string child name childnam string cb stringcb child string cb stringcb zk child set path setpath parent path child name childnam child verifi creat verifycr child verifi get children empti verifygetchildrenempti string cb stringcb parent creat node createnod path parent path verifi verifi get children singl verifygetchildrensingl string cb stringcb parent creat node createnod string cb stringcb child creat node createnod parent path parent path children add child node name nodenam verifi verifi get children two verifygetchildrentwo string cb stringcb parent creat node createnod string cb stringcb child1 creat node createnod parent child1 string cb stringcb child2 creat node createnod parent child2 path parent path children add child1 node name nodenam children add child2 node name nodenam verifi verifi get children failur node verifygetchildrenfailur nonod rc keeper except keeperexcept code nonod verifi overrid verifi zk get children getchildren path string tostr verifi overrid string string tostr string tostr children string tostr 

children2 cb children2cb async cb asynccb children2 callback children2callback list string children arrai list arraylist string children2 cb children2cb zoo keeper zookeep zk zk count down latch countdownlatch children2 cb children2cb zoo keeper zookeep zk count down latch countdownlatch latch zk latch process result processresult rc string path object ctx list string children stat stat children children arrai list arraylist string children process result processresult code get rc path ctx string cb stringcb creat node createnod string cb stringcb parent string cb stringcb zk parent verifi creat verifycr parent string cb stringcb creat node createnod string cb stringcb parent string child name childnam bar creat node createnod parent child name childnam string cb stringcb creat node createnod string cb stringcb parent string child name childnam string cb stringcb child string cb stringcb zk child set path setpath parent path child name childnam child verifi creat verifycr child verifi get children empti verifygetchildrenempti string cb stringcb parent creat node createnod path parent path verifi verifi get children singl verifygetchildrensingl string cb stringcb parent creat node createnod string cb stringcb child creat node createnod parent path parent path children add child node name nodenam verifi verifi get children two verifygetchildrentwo string cb stringcb parent creat node createnod string cb stringcb child1 creat node createnod parent child1 string cb stringcb child2 creat node createnod parent child2 path parent path children add child1 node name nodenam children add child2 node name nodenam verifi verifi get children failur node verifygetchildrenfailur nonod rc keeper except keeperexcept code nonod verifi overrid verifi zk get children getchildren path string tostr verifi overrid string string tostr string tostr children string tostr 

data cb datacb async cb asynccb data callback datacallback data 10 stat stat stat data cb datacb zoo keeper zookeep zk zk count down latch countdownlatch data cb datacb zoo keeper zookeep zk count down latch countdownlatch latch zk latch stat set avers setavers stat set cversion setcvers stat set ephemer owner setephemeralown stat set version setvers process result processresult rc string path object ctx data stat stat data data stat stat process result processresult code get rc path ctx verifi get data verifygetdata string cb stringcb zk verifi creat verifycr zk get data getdata path string tostr verifi verifi get data failur node verifygetdatafailur nonod rc keeper except keeperexcept code nonod data stat zk get data getdata path string tostr verifi overrid string string tostr string tostr data string data stat stat get avers getavers stat get cversion getcvers stat get ephemer owner getephemeralown stat get version getvers 

stat cb statcb async cb asynccb stat callback statcallback list acl acl id creator acl creator acl version stat stat stat data test get byte getbyt stat cb statcb zoo keeper zookeep zk zk count down latch countdownlatch stat cb statcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch stat set avers setavers stat set cversion setcvers stat set ephemer owner setephemeralown stat set version setvers process result processresult rc string path object ctx stat stat stat stat process result processresult code get rc path ctx verifi set acl verifysetacl stat set avers setavers string cb stringcb zk verifi creat verifycr zk set acl setacl path acl version string tostr verifi verifi set acl failur node verifysetaclfailur nonod rc keeper except keeperexcept code nonod stat zk set acl setacl path acl version string tostr verifi set data setdata zk set data setdata path data version string tostr verifi set data verifysetdata stat set version setvers string cb stringcb zk verifi creat verifycr set data setdata verifi verifi set data failur node verifysetdatafailur nonod rc keeper except keeperexcept code nonod stat zk set data setdata path data version string tostr verifi verifi exist verifyexist string cb stringcb zk verifi creat verifycr zk exist path string tostr verifi verifi exist failur node verifyexistsfailur nonod rc keeper except keeperexcept code nonod stat zk exist path string tostr verifi overrid string string tostr string tostr version string data stat stat get avers getavers stat get cversion getcvers stat get ephemer owner getephemeralown stat get version getvers 

cb voidcb async cb asynccb callback voidcallback version cb voidcb zoo keeper zookeep zk zk count down latch countdownlatch cb voidcb zoo keeper zookeep zk count down latch countdownlatch latch zk latch process result processresult rc string path object ctx process result processresult code get rc path ctx delet zk delet path version string tostr verifi delet verifydelet string cb stringcb zk verifi creat verifycr delet verifi verifi delet failur node verifydeletefailur nonod rc code nonod zk delet path version string tostr verifi sync zk sync path string tostr verifi sync verifysync sync verifi overrid string string tostr string tostr version 

le test letest zk test zktestcas logger log logger factori loggerfactori get logger getlogg le test letest vote vote leader di leaderdi leader random rand random le thread lethread thread leader elect leaderelect le quorum peer quorump peer le thread lethread leader elect leaderelect le quorum peer quorump peer le le peer peer run vote le leader lookforlead vote get id getid le test letest leader di leaderdi leader di leaderdi peer stop leader elect stopleaderelect log info leader dy leader leader le test letest notifi notifyal le test letest leader le test letest wait leader get id getid thread sleep rand next nextint 1000 peer set current vote setcurrentvot vote peer get id getid log info thread vote interrupt except interruptedexcept print stack trace printstacktrac test test le testl except count 30 hash map hashmap quorum server quorumserv peer hash map hashmap quorum server quorumserv count arrai list arraylist le thread lethread thread arrai list arraylist le thread lethread count file tmpdir file count port count vote vote count count peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port port assign portassign uniqu leader elect leaderelect le leader elect leaderelect count leader di leaderdi allow on bad leader allowonebadlead leader di leaderdi le length quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect le leader elect leaderelect peer le thread lethread thread le thread lethread le peer thread start thread add thread thread size thread get join 15000 thread get aliv isal fail thread didn join id vote get id getid vote length vote fail thread vote vote get id getid id allow on bad leader allowonebadlead vote get id getid allow on bad leader allowonebadlead fail thread vote get id getid expect id 

le thread lethread thread leader elect leaderelect le quorum peer quorump peer le thread lethread leader elect leaderelect le quorum peer quorump peer le le peer peer run vote le leader lookforlead vote get id getid le test letest leader di leaderdi leader di leaderdi peer stop leader elect stopleaderelect log info leader dy leader leader le test letest notifi notifyal le test letest leader le test letest wait leader get id getid thread sleep rand next nextint 1000 peer set current vote setcurrentvot vote peer get id getid log info thread vote interrupt except interruptedexcept print stack trace printstacktrac 

zoo keeper server zookeeperserv plai peer partit from major handl read client drop connect from read first processor chain request processor read request processor readonlyrequestprocessor drop state chang request read zoo keeper server readonlyzookeeperserv quorum zoo keeper server quorumzookeeperserv shutdown read zoo keeper server readonlyzookeeperserv file txn snap log filetxnsnaplog log factori logfactori quorum peer quorump self data tree builder datatreebuild tree builder treebuild zk databas zkdatabas zk db zkdb log factori logfactori self tick time ticktim self min session timeout minsessiontimeout self max session timeout maxsessiontimeout tree builder treebuild zk db zkdb self overrid setup request processor setuprequestprocessor request processor requestprocessor processor finalprocessor request processor finalrequestprocessor request processor requestprocessor prep processor prepprocessor prep request processor preprequestprocessor processor finalprocessor prep request processor preprequestprocessor prep processor prepprocessor start first processor firstprocessor read request processor readonlyrequestprocessor prep processor prepprocessor read request processor readonlyrequestprocessor first processor firstprocessor start overrid startup check avoid startup follow shutdown shutdown log warn start read server startup follow shutdown jmx registerjmx read bean readonlybean self jmx local peer bean jmxlocalpeerbean startup self cnxn factori cnxnfactori set zoo keeper server setzookeeperserv log info read server start overrid jmx registerjmx jmx jmx data tree bean jmxdatatreebean data tree bean datatreebean get zk databas getzkdatabas get data tree getdatatre bean registri mbeanregistri get instanc getinst jmx data tree bean jmxdatatreebean jmx server bean jmxserverbean except log warn fail jmx jmx data tree bean jmxdatatreebean jmx registerjmx zoo keeper server bean zookeeperserverbean server bean serverbean local peer bean localpeerbean local peer bean localpeerbean jmx jmx server bean jmxserverbean server bean serverbean bean registri mbeanregistri get instanc getinst server bean serverbean local peer bean localpeerbean except log warn fail jmx jmx server bean jmxserverbean overrid unregist jmx unregisterjmx unregist from jmx jmx data tree bean jmxdatatreebean bean registri mbeanregistri get instanc getinst unregist jmx data tree bean jmxdatatreebean except log warn fail unregist jmx jmx data tree bean jmxdatatreebean unregist jmx unregisterjmx zoo keeper server zookeeperserv zk unregist from jmx jmx server bean jmxserverbean bean registri mbeanregistri get instanc getinst unregist jmx server bean jmxserverbean except log warn fail unregist jmx jmx server bean jmxserverbean overrid string get state getstat read return id associ quorum peer quorump uniqu id server overrid get server id getserverid self get id getid overrid shutdown shutdown unregist jmx unregisterjmx set peer server self cnxn factori cnxnfactori set zoo keeper server setzookeeperserv clear connect self cnxn factori cnxnfactori close closeal shutdown server shutdown 

field jfield type jtype type mtype string name mname creat instanc field jfield field jfield type jtype type string name type mtype type name mname name string get signatur getsignatur type mtype get signatur getsignatur string gen cpp decl gencppdecl type mtype gen cpp decl gencppdecl name mname string gen decl gencdecl type mtype gen decl gencdecl name mname string gen csharp decl gencsharpdecl type mtype gen csharp decl gencsharpdecl name mname string gen csharp constructor param gencsharpconstructorparam string fname type mtype gen csharp constructor param gencsharpconstructorparam fname string gen java decl genjavadecl type mtype gen java decl genjavadecl name mname string gen java constructor param genjavaconstructorparam string fname type mtype gen java constructor param genjavaconstructorparam fname string get name getnam name mname string get csharp name getcsharpnam id equal name mname zkid name mname string get tag gettag name mname type jtype get type gettyp type mtype string gen cpp get set gencppgetset idx fidx type mtype gen cpp get set gencppgetset name mname idx fidx string gen csharp constructor set gencsharpconstructorset string fname type mtype gen csharp constructor set gencsharpconstructorset name mname fname string gen csharp get set gencsharpgetset idx fidx type mtype gen csharp get set gencsharpgetset get csharp name getcsharpnam idx fidx string gen csharp write method name gencsharpwritemethodnam type mtype gen csharp write method gencsharpwritemethod get csharp name getcsharpnam get tag gettag string gen csharp read method name gencsharpreadmethodnam type mtype gen csharp read method gencsharpreadmethod get csharp name getcsharpnam get tag gettag string gen csharp compar gencsharpcompareto type mtype gen csharp compar gencsharpcompareto get csharp name getcsharpnam string gen csharp equal gencsharpequ type mtype gen csharp equal gencsharpequ get csharp name getcsharpnam peer get csharp name getcsharpnam string gen csharp hash code gencsharphashcod type mtype gen csharp hash code gencsharphashcod get csharp name getcsharpnam string gen java get set genjavagetset idx fidx type mtype gen java get set genjavagetset name mname idx fidx string gen java write method name genjavawritemethodnam type mtype gen java write method genjavawritemethod get name getnam get tag gettag string gen java read method name genjavareadmethodnam type mtype gen java read method genjavareadmethod get name getnam get tag gettag string gen java compar genjavacompareto type mtype gen java compar genjavacompareto get name getnam string gen java equal genjavaequ type mtype gen java equal genjavaequ get name getnam peer get name getnam string gen java hash code genjavahashcod type mtype gen java hash code genjavahashcod get name getnam string gen java constructor set genjavaconstructorset string fname type mtype gen java constructor set genjavaconstructorset name mname fname 

get sasl request getsaslrequest record token get sasl request getsaslrequest get sasl request getsaslrequest token token token get token gettoken token set token settoken token serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write buffer writebuff token token end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag token read buffer readbuff token end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write buffer writebuff token token end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get sasl request getsaslrequest cast except classcastexcept compar differ type record get sasl request getsaslrequest peer get sasl request getsaslrequest peer peer ret token ur peer token ret org apach jute util compar byte comparebyt length ur ur length ret ret ret equal object peer peer peer peer get sasl request getsaslrequest peer peer get sasl request getsaslrequest peer get sasl request getsaslrequest peer peer ret ret org apach jute util buf equal bufequ token peer token ret ret ret hash code hashcod result 17 ret ret java util arrai string tostr token hash code hashcod result 37 result ret result string signatur get sasl request lgetsaslrequest 

bean mbean repres zookeep cluster node aka quorum peer quorum mx bean quorummxbean name quorum string get name getnam configur number peer quorum get quorum size getquorums 

start up instanc contain instancecontain watcher async callback asynccallback children callback childrencallback watcher mywatch watcher string node mynod data callback datacallback dc watcher mywatch string node mynod data callback datacallback dc node mynod node mynod dc dc process watch event watchedev event event get path getpath event get path getpath equal node mynod zk get data getdata node mynod dc data callback mydatacallback data callback datacallback last ver lastver string node mynod instanc instanc myinstanc data callback mydatacallback string node mynod instanc instanc myinstanc ver node mynod node mynod instanc myinstanc instanc myinstanc last ver lastver ver process result processresult rc string path object ctx data stat stat rc keeper except keeperexcept code nonod valu intvalu ignor child watcher take care rc keeper except keeperexcept code valu intvalu zk get data getdata node mynod watcher ctx ctx curr ver currver stat get version getvers curr ver currver last ver lastver string part string data split instanc myinstanc configur part last ver lastver curr ver currver report myreport report string report node myreportnod report myreport string child report node myreportnod report node reportsnod child report string report keeper except keeperexcept interrupt except interruptedexcept max maxtri zk set data setdata report node myreportnod report get byte getbyt node except nonodeexcept zk creat report node myreportnod report get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer connect loss except connectionlossexcept logger log logger factori loggerfactori get logger getlogg instanc contain instancecontain string name string zk host port zkhostport run readi node readynod exist string prefix node prefixnod string statu node statusnod avail string report node reportsnod report string assign node assignmentsnod assign zoo keeper zookeep zk sess timeout sesstimeout 5000 max maxtri instanc contain instancecontain string name string zk host port zkhostport string prefix unknown host except unknownhostexcept name length name equal hostnam name inet address inetaddress get local host getlocalhost get canon host name getcanonicalhostnam name name zk host port zkhostport zk host port zkhostport prefix node prefixnod prefix statu node statusnod prefix statu node statusnod name report node reportsnod prefix report node reportsnod assign node assignmentsnod prefix assign node assignmentsnod name rmnod string path interrupt except interruptedexcept keeper except keeperexcept keeper except keeperexcept last except lastexcept max maxtri zk delet path last except lastexcept keeper except keeperexcept node except nonodeexcept cool keeper except keeperexcept last except lastexcept last except lastexcept last except lastexcept mknod inner mknod inner string path creat mode createmod mode keeper except keeperexcept interrupt except interruptedexcept max maxtri zk creat path id open acl unsaf open acl unsaf mode node exist except nodeexistsexcept mode creat mode createmod ephemer stat stat zk exist path stat stat get ephemer owner getephemeralown zk get session id getsessionid connect loss except connectionlossexcept print stack trace printstacktrac mknod string path creat mode createmod mode keeper except keeperexcept interrupt except interruptedexcept string subpath path split string builder stringbuild sb string builder stringbuild start creat empti part first subpath length sb append sb append subpath creat mode createmod creat mode createmod persist subpath length mode mknod inner mknod inner sb string tostr run io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zk zoo keeper zookeep zk host port zkhostport sess timeout sesstimeout mknod assign node assignmentsnod creat mode createmod persist mknod statu node statusnod creat mode createmod ephemer mknod report node reportsnod creat mode createmod persist start watch assign directori zk get children getchildren assign node assignmentsnod param arg first paramet instanc name second zoo keeper zookeep spec instanc name empti string hostnam hostnam us interrupt except interruptedexcept io except ioexcept unknown host except unknownhostexcept keeper except keeperexcept main string arg unknown host except unknownhostexcept io except ioexcept interrupt except interruptedexcept keeper except keeperexcept arg length err println usag instanc contain instancecontain get name getnam name zk host port zkhostport znode prefix znodeprefix exit instanc contain instancecontain arg arg arg run thread sleep 1000 process watch event watchedev event keeper state keeperst expir event get state getstat log error lost session exit event get path getpath event get path getpath equal assign node assignmentsnod children chang read list zk get children getchildren assign node assignmentsnod hash map hashmap string instanc instanc hash map hashmap string instanc process result processresult rc string path object ctx list string children rc keeper except keeperexcept code valu intvalu zk get children getchildren assign node assignmentsnod hash map hashmap string instanc list newlist hash map hashmap string instanc check differ stat stat stat string child children instanc instanc remov child start up instanc data string node mynod assign node assignmentsnod child data zk get data getdata node mynod stat node except nonodeexcept node doesn exist anymor skip keeper except keeperexcept print stack trace printstacktrac interrupt except interruptedexcept data string instanc spec instancespec string data space index spaceindex instanc spec instancespec index indexof string clazz string conf space index spaceindex clazz instanc spec instancespec conf clazz instanc spec instancespec substr space index spaceindex conf instanc spec instancespec substr space index spaceindex name fornam clazz instanc instanc newinst report report report myreport child set report setreport report configur conf start list newlist put child ver stat get version getvers instanc instanc myinstanc data callback datacallback dc data callback mydatacallback node mynod instanc myinstanc ver watcher watcher watcher mywatch node mynod dc zk get data getdata node mynod watcher dc watcher except log warn skip child get caus getcaus log warn caus get caus getcaus move list list newlist put child kill remov children map entri string instanc instanc entri set entryset get valu getvalu stop rmnod report node reportsnod get kei getkei interrupt except interruptedexcept thread current thread currentthread interrupt keeper except keeperexcept print stack trace printstacktrac instanc list newlist 

watcher mywatch watcher string node mynod data callback datacallback dc watcher mywatch string node mynod data callback datacallback dc node mynod node mynod dc dc process watch event watchedev event event get path getpath event get path getpath equal node mynod zk get data getdata node mynod dc 

data callback mydatacallback data callback datacallback last ver lastver string node mynod instanc instanc myinstanc data callback mydatacallback string node mynod instanc instanc myinstanc ver node mynod node mynod instanc myinstanc instanc myinstanc last ver lastver ver process result processresult rc string path object ctx data stat stat rc keeper except keeperexcept code nonod valu intvalu ignor child watcher take care rc keeper except keeperexcept code valu intvalu zk get data getdata node mynod watcher ctx ctx curr ver currver stat get version getvers curr ver currver last ver lastver string part string data split instanc myinstanc configur part last ver lastver curr ver currver 

report myreport report string report node myreportnod report myreport string child report node myreportnod report node reportsnod child report string report keeper except keeperexcept interrupt except interruptedexcept max maxtri zk set data setdata report node myreportnod report get byte getbyt node except nonodeexcept zk creat report node myreportnod report get byte getbyt id open acl unsaf open acl unsaf creat mode createmod ephemer connect loss except connectionlossexcept 

contain method retriev link imag icon imageicon us applic zoo inspector icon resourc zooinspectoriconresourc file icon imag icon imageicon get tree leaf icon gettreeleaficon imag icon imageicon icon file obj file obj gif non nl folder open icon imag icon imageicon get tree open icon gettreeopenicon imag icon imageicon icon fldr obj fldr obj gif non nl folder close icon imag icon imageicon get tree close icon gettreeclosedicon imag icon imageicon icon fldr obj fldr obj gif non nl connect icon imag icon imageicon get connect icon getconnecticon imag icon imageicon icon launch run launch run gif non nl disconnect icon imag icon imageicon get disconnect icon getdisconnecticon imag icon imageicon icon launch stop launch stop gif non nl save icon imag icon imageicon get save icon getsaveicon imag icon imageicon icon save edit save edit gif non nl add icon imag icon imageicon get add node icon getaddnodeicon imag icon imageicon icon gif non nl delet icon imag icon imageicon get delet node icon getdeletenodeicon imag icon imageicon icon trash gif non nl refresh icon imag icon imageicon get refresh icon getrefreshicon imag icon imageicon icon refresh gif non nl inform icon imag icon imageicon get inform icon getinformationicon imag icon imageicon icon info obj info obj gif non nl node viewer icon imag icon imageicon get chang node viewer icon getchangenodeviewersicon imag icon imageicon icon edtsrclkup edtsrclkup gif non nl up icon imag icon imageicon get up icon getupicon imag icon imageicon icon search prev search prev gif non nl down icon imag icon imageicon get down icon getdownicon imag icon imageicon icon search next search next gif non nl 

client port bind test clientportbindtest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg client port bind test clientportbindtest count down latch countdownlatch start signal startsign verifi server bind specifi address test test bind address testbindbyaddress except string bind address bindaddress enumer network networkinterfac intf network networkinterfac get network interfac getnetworkinterfac loopback ha address us intf ha more element hasmoreel network networkinterfac intf next element nextel loopback isloopback enumer inet address inetaddress addr get inet address getinetaddress addr ha more element hasmoreel bind address bindaddress addr next element nextel get host address gethostaddress bind address bindaddress log warn unabl determin loop back address skip test port port assign portassign uniqu log info bind address bindaddress bind address string hostport bind address bindaddress port log info hostport host port file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori inet socket address inetsocketaddress bind address bindaddress port startup zk log info start up server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout start signal startsign count down latch countdownlatch zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout start signal startsign await connect timeout connect timeout time unit timeunit millisecond asserttru count start signal startsign get count getcount zk close shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout process watch event watchedev event log info event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount start signal startsign count down countdown 

quorum base quorumbas client base clientbas logger log logger factori loggerfactori get logger getlogg quorum base quorumbas file s1 dir s1dir s2 dir s2dir s3 dir s3dir s4 dir s4dir s5 dir s5dir quorum peer quorump s1 s2 s3 s4 s5 port1 port2 port3 port4 port5 port le1 portle1 port le2 portle2 port le3 portle3 port le4 portle4 port le5 portle5 test avoid complaint junit test testnul overrid set up setup except set up setup set up setup observ withobserv except log info quorum base quorumbas setup get test name gettestnam setup test env setuptestenv jmx env jmxenv set up setup set up setupal port1 port assign portassign uniqu port2 port assign portassign uniqu port3 port assign portassign uniqu port4 port assign portassign uniqu port5 port assign portassign uniqu port le1 portle1 port assign portassign uniqu port le2 portle2 port assign portassign uniqu port le3 portle3 port assign portassign uniqu port le4 portle4 port assign portassign uniqu port le5 portle5 port assign portassign uniqu host port hostport 127 port1 127 port2 127 port3 127 port4 127 port5 log info port host port hostport s1 dir s1dir client base clientbas creat tmp dir createtmpdir s2 dir s2dir client base clientbas creat tmp dir createtmpdir s3 dir s3dir client base clientbas creat tmp dir createtmpdir s4 dir s4dir client base clientbas creat tmp dir createtmpdir s5 dir s5dir client base clientbas creat tmp dir createtmpdir start server startserv observ withobserv oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean log info initi fdcount unixo get open file descriptor count getopenfiledescriptorcount log info setup finish start server startserv except start server startserv start server startserv observ withobserv except tick time ticktim 2000 init limit initlimit sync limit synclimit hash map hashmap quorum server quorumserv peer hash map hashmap quorum server quorumserv peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port1 1000 inet socket address inetsocketaddress 127 port le1 portle1 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port2 1000 inet socket address inetsocketaddress 127 port le2 portle2 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port3 1000 inet socket address inetsocketaddress 127 port le3 portle3 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port4 1000 inet socket address inetsocketaddress 127 port le4 portle4 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port5 1000 inet socket address inetsocketaddress 127 port le5 portle5 1000 learner type learnertyp particip observ withobserv peer get valu valueof type learner type learnertyp observ peer get valu valueof type learner type learnertyp observ log info creat quorum peer quorump port port1 s1 quorum peer quorump peer s1 dir s1dir s1 dir s1dir port1 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port1 s1 get client port getclientport log info creat quorum peer quorump port port2 s2 quorum peer quorump peer s2 dir s2dir s2 dir s2dir port2 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port2 s2 get client port getclientport log info creat quorum peer quorump port port3 s3 quorum peer quorump peer s3 dir s3dir s3 dir s3dir port3 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port3 s3 get client port getclientport log info creat quorum peer quorump port port4 s4 quorum peer quorump peer s4 dir s4dir s4 dir s4dir port4 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port4 s4 get client port getclientport log info creat quorum peer quorump port port5 s5 quorum peer quorump peer s5 dir s5dir s5 dir s5dir port5 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port5 s5 get client port getclientport observ withobserv s4 set learner type setlearnertyp learner type learnertyp observ s5 set learner type setlearnertyp learner type learnertyp observ log info quorum peer quorump vote view s1 get vote view getvotingview log info quorum peer quorump vote view s2 get vote view getvotingview log info quorum peer quorump vote view s3 get vote view getvotingview log info quorum peer quorump vote view s4 get vote view getvotingview log info quorum peer quorump vote view s5 get vote view getvotingview log info start quorum peer quorump s1 start log info start quorum peer quorump s2 start log info start quorum peer quorump s3 start log info start quorum peer quorump s4 start log info start quorum peer quorump s5 start log info start quorum peer quorump log info check port host port hostport string hp host port hostport split asserttru wait server up client base clientbas wait server up waitforserverup hp connect timeout connect timeout log info hp accept client connect interest jmx env jmxenv dump make server list set string ensur name ensurenam link hash set linkedhashset string ensur name ensurenam add memori data tree inmemorydatatre ensur name ensurenam add name0 replic server id replicatedserv id name1 replica name2 ensur name ensurenam add name0 replic server id replicatedserv id name1 replica ensur name ensurenam add name0 replic server id replicatedserv id jmx env jmxenv ensur ensureal ensur name ensurenam arrai toarrai string ensur name ensurenam size setup server setupserv io except ioexcept setup server setupserv setup server setupserv setup server setupserv setup server setupserv setup server setupserv hash map hashmap quorum server quorumserv peer setup server setupserv io except ioexcept tick time ticktim 2000 init limit initlimit sync limit synclimit peer peer hash map hashmap quorum server quorumserv peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port1 1000 inet socket address inetsocketaddress 127 port le1 portle1 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port2 1000 inet socket address inetsocketaddress 127 port le2 portle2 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port3 1000 inet socket address inetsocketaddress 127 port le3 portle3 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port4 1000 inet socket address inetsocketaddress 127 port le4 portle4 1000 learner type learnertyp particip peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress 127 port5 1000 inet socket address inetsocketaddress 127 port le5 portle5 1000 learner type learnertyp particip log info creat quorum peer quorump port port1 s1 quorum peer quorump peer s1 dir s1dir s1 dir s1dir port1 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port1 s1 get client port getclientport log info creat quorum peer quorump port port2 s2 quorum peer quorump peer s2 dir s2dir s2 dir s2dir port2 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port2 s2 get client port getclientport log info creat quorum peer quorump port port3 s3 quorum peer quorump peer s3 dir s3dir s3 dir s3dir port3 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port3 s3 get client port getclientport log info creat quorum peer quorump port port4 s4 quorum peer quorump peer s4 dir s4dir s4 dir s4dir port4 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port4 s4 get client port getclientport log info creat quorum peer quorump port port5 s5 quorum peer quorump peer s5 dir s5dir s5 dir s5dir port5 tick time ticktim init limit initlimit sync limit synclimit equal assertequ port5 s5 get client port getclientport overrid tear down teardown except log info tear down teardown start oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean log info fdcount after test unixo get open file descriptor count getopenfiledescriptorcount shutdown server shutdownserv string hp host port hostport split asserttru wait server down client base clientbas wait server down waitforserverdown hp client base clientbas connect timeout connect timeout log info hp longer accept client connect jmx env jmxenv tear down teardown shutdown server shutdownserv shutdown s1 shutdown s2 shutdown s3 shutdown s4 shutdown s5 shutdown quorum peer quorump qp log info shut down quorum peer qp get name getnam qp shutdown elect qp get elect alg getelectionalg log info shut down leader elect qp get name getnam shutdown log info elect avail shutdown qp get name getnam log info wait qp get name getnam exit thread qp join 30000 qp aliv isal fail qp fail shutdown 30 second qp get name getnam interrupt except interruptedexcept log debug qp interrupt qp get name getnam testabl zoo keeper testablezookeep creat client createcli io except ioexcept interrupt except interruptedexcept creat client createcli host port hostport testabl zoo keeper testablezookeep creat client createcli string hp io except ioexcept interrupt except interruptedexcept countdown watcher countdownwatch watcher countdown watcher countdownwatch creat client createcli watcher hp 

number arg numberarg arg number arg numberarg valu arg type argtyp number valu valu 

get data request getdatarequest record string path watch get data request getdatarequest get data request getdatarequest string path watch path path watch watch string get path getpath path set path setpath string path get watch getwatch watch set watch setwatch watch serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writebool watch watch end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path watch read readbool watch end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writebool watch watch end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get data request getdatarequest cast except classcastexcept compar differ type record get data request getdatarequest peer get data request getdatarequest peer peer ret ret path compar compareto peer path ret ret ret watch peer watch watch ret ret ret equal object peer peer peer peer get data request getdatarequest peer peer get data request getdatarequest peer get data request getdatarequest peer peer ret ret path equal peer path ret ret ret watch peer watch ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret watch result 37 result ret result string signatur get data request lgetdatarequest sz 

set sasl request setsaslrequest record token set sasl request setsaslrequest set sasl request setsaslrequest token token token get token gettoken token set token settoken token serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write buffer writebuff token token end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag token read buffer readbuff token end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write buffer writebuff token token end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set sasl request setsaslrequest cast except classcastexcept compar differ type record set sasl request setsaslrequest peer set sasl request setsaslrequest peer peer ret token ur peer token ret org apach jute util compar byte comparebyt length ur ur length ret ret ret equal object peer peer peer peer set sasl request setsaslrequest peer peer set sasl request setsaslrequest peer set sasl request setsaslrequest peer peer ret ret org apach jute util buf equal bufequ token peer token ret ret ret hash code hashcod result 17 ret ret java util arrai string tostr token hash code hashcod result 37 result ret result string signatur set sasl request lsetsaslrequest 

watch event test watchedeventtest zk test zktestcas test test creat watch event testcreatingwatchedev event watch eventwatch simpl immut type make creat combin valu set enumset event type eventtyp type alltyp set enumset allof event type eventtyp set enumset keeper state keeperst state allstat set enumset allof keeper state keeperst watch event watchedev event type eventtyp type alltyp keeper state keeperst ks state allstat watch event watchedev ks blah equal assertequ get type gettyp equal assertequ ks get state getstat equal assertequ blah get path getpath test test creat watch event from wrapper testcreatingwatchedeventfromwrapp make handl type correct wrapper set enumset event type eventtyp type alltyp set enumset allof event type eventtyp set enumset keeper state keeperst state allstat set enumset allof keeper state keeperst watch event watchedev watcher event watcherev wep event type eventtyp type alltyp keeper state keeperst ks state allstat wep watcher event watcherev get valu getintvalu ks get valu getintvalu blah watch event watchedev wep equal assertequ get type gettyp equal assertequ ks get state getstat equal assertequ blah get path getpath test test creat watch event from invalid wrapper testcreatingwatchedeventfrominvalidwrapp make convert from invalid wrapper watcher event watcherev wep watcher event watcherev 2342 252352 foo watch event watchedev watch event watchedev wep fail abl creat watch event watchedev from bad wrapper runtim except runtimeexcept good test test convert event wrapper testconvertingtoeventwrapp watch event watchedev watch event watchedev event type eventtyp node creat nodecr keeper state keeperst expir blah watcher event watcherev wew get wrapper getwrapp equal assertequ event type eventtyp node creat nodecr get valu getintvalu wew get type gettyp equal assertequ keeper state keeperst expir get valu getintvalu wew get state getstat equal assertequ blah wew get path getpath 

zoo keeper zookeep server bean mbean zoo keeper server mx bean zookeeperservermxbean server socket port number string get client port getclientport zookeep server version string get version getvers time server start string get start time getstarttim min request latenc ms get min request latenc getminrequestlat averag request latenc ms get avg request latenc getavgrequestlat max request latenc ms get max request latenc getmaxrequestlat number packet receiv get packet receiv getpacketsreceiv number packet sent get packet sent getpacketss number outstand request get outstand request getoutstandingrequest current tick time ticktim server millisecond get tick time getticktim set tick time ticktim server millisecond set tick time setticktim tick time ticktim current max client cnxn maxclientcnxn allow from host get max client cnxn host getmaxclientcnxnsperhost set max client cnxn maxclientcnxn allow from host set max client cnxn host setmaxclientcnxnsperhost max current min session timeout minsessiontimeout server millisecond get min session timeout getminsessiontimeout set min session timeout minsessiontimeout server millisecond set min session timeout setminsessiontimeout min current max session timeout maxsessiontimeout server millisecond get max session timeout getmaxsessiontimeout set max session timeout maxsessiontimeout server millisecond set max session timeout setmaxsessiontimeout max reset packet latenc statist reset statist resetstatist reset min avg max latenc statist reset latenc resetlat reset max latenc statist reset max latenc resetmaxlat number aliv client connect get num aliv connect getnumaliveconnect 

fle predic test flepredicatetest zk test zktestcas logger log logger factori loggerfactori get logger getlogg fle predic test flepredicatetest mock fle mockfl fast leader elect fastleaderelect mock fle mockfl quorum peer quorump peer peer quorum cnx manag quorumcnxmanag peer predic id newid zxid newzxid epoch newepoch cur id curid cur zxid curzxid cur epoch curepoch total order predic totalorderpred id newid zxid newzxid epoch newepoch cur id curid cur zxid curzxid cur epoch curepoch hash map hashmap quorum server quorumserv peer test test predic testpred io except ioexcept peer hash map hashmap quorum server quorumserv creat list peer peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress port assign portassign uniqu inet socket address inetsocketaddress port assign portassign uniqu creat peer file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir quorum peer quorump peer quorum peer quorump peer tmp dir tmpdir tmp dir tmpdir port assign portassign uniqu 1000 mock fle mockfl mock mock fle mockfl peer lower epoch assertfals mock predic 4l 0l 0l 3l 0l 2l epoch asserttru mock predic 0l 0l 1l 1l 0l 0l higher zxid asserttru mock predic 0l 1l 0l 1l 0l 0l higher id asserttru mock predic 1l 1l 0l 0l 1l 0l io except ioexcept log error except creat quorum peer fail except creat quorum peer 

mock fle mockfl fast leader elect fastleaderelect mock fle mockfl quorum peer quorump peer peer quorum cnx manag quorumcnxmanag peer predic id newid zxid newzxid epoch newepoch cur id curid cur zxid curzxid cur epoch curepoch total order predic totalorderpred id newid zxid newzxid epoch newepoch cur id curid cur zxid curzxid cur epoch curepoch 

implement gener class record serial output archiv outputarch archiv string tag io except ioexcept deseri input archiv inputarch archiv string tag io except ioexcept 

upgrad test upgradetest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg upgrad test upgradetest string hostport 127 port assign portassign uniqu file test data testdata file get properti getproperti test data dir build test data count down latch countdownlatch start signal startsign test upgrad except test test upgrad testupgrad except file upgrad dir upgradedir file test data testdata upgrad upgrad main upgrademain upgrad upgrad main upgrademain upgrad dir upgradedir upgrad dir upgradedir upgrad run upgrad runupgrad zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv upgrad dir upgradedir upgrad dir upgradedir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 1000 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk log info start up zookeep server wait asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout stat stat zk exist list string children zk get children getchildren collect sort children 10 asserttru data tree saniti check test equal children get creat on node zk creat upgrad upgrad get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist check zk exist upgrad asserttru zk close bring down server shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport client base clientbas connect timeout connect timeout process watch event watchedev event log info event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount start signal startsign count down countdown 

delet txn deletetxn record string path delet txn deletetxn delet txn deletetxn string path path path string get path getpath path set path setpath string path serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer delet txn deletetxn cast except classcastexcept compar differ type record delet txn deletetxn peer delet txn deletetxn peer peer ret ret path compar compareto peer path ret ret ret equal object peer peer peer peer delet txn deletetxn peer peer delet txn deletetxn peer delet txn deletetxn peer peer ret ret path equal peer path ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret result string signatur delet txn ldeletetxn 

multi header multihead record type done err multi header multihead multi header multihead type done err type type done done err err get type gettyp type set type settyp type get done getdon done set done setdon done get err geterr err set err seterr err serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint type type write writebool done done write writeint err err end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag type read readint type done read readbool done err read readint err end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint type type write writebool done done write writeint err err end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer multi header multihead cast except classcastexcept compar differ type record multi header multihead peer multi header multihead peer peer ret ret type peer type type peer type ret ret ret done peer done done ret ret ret err peer err err peer err ret ret ret equal object peer peer peer peer multi header multihead peer peer multi header multihead peer multi header multihead peer peer ret ret type peer type ret ret ret done peer done ret ret ret err peer err ret ret ret hash code hashcod result 17 ret ret type result 37 result ret ret done result 37 result ret ret err result 37 result ret result string signatur multi header lmultihead izi 

link logger us entir applic logger factori loggerfactori org slf4j logger logger org slf4j logger factori loggerfactori get logger getlogg org apach zookeep inspector non nl link logger zoo inspector zooinspector org slf4j logger get logger getlogg logger 

util function hadoop record runtim util creat instanc util util equal function compar two buffer param onearrai first buffer param twoarrai second buffer on two contain exactli content buf equal bufequ onearrai twoarrai onearrai twoarrai ret onearrai length twoarrai length ret ret idx idx onearrai length idx onearrai idx twoarrai idx hexchar param string xml string toxmlstr string string builder stringbuild sb string builder stringbuild idx idx length idx ch charat idx ch sb append lt ch sb append amp ch sb append 25 ch x20 0x20 sb append sb append hexchar ch 16 sb append hexchar ch 16 sb append ch sb string tostr h2c ch ch ch ch ch ch ch ch ch ch param string from xml string fromxmlstr string string builder stringbuild sb string builder stringbuild idx idx length ch charat idx ch ch1 charat idx ch2 charat idx re h2c ch1 16 h2c ch2 sb append re sb append ch sb string tostr param string csv string tocsvstr string string builder stringbuild sb string builder stringbuild length sb append len length len charat sb append 00 sb append 0a sb append 0d sb append 2c sb append 7d sb append 25 sb append sb string tostr param java io io except ioexcept string from csv string fromcsvstr string io except ioexcept charat io except ioexcept error deseri string len length string builder stringbuild sb string builder stringbuild len len charat ch1 charat ch2 charat ch1 ch2 sb append ch1 ch2 sb append ch1 ch2 sb append ch1 ch2 sb append ch1 ch2 sb append ch1 ch2 sb append io except ioexcept error deseri string sb append sb string tostr param string xml buffer toxmlbuff barr barr barr length string builder stringbuild sb string builder stringbuild barr length idx idx barr length idx sb append integ hex string tohexstr barr idx sb string tostr param java io io except ioexcept from xml buffer fromxmlbuff string io except ioexcept arrai output stream bytearrayoutputstream stream arrai output stream bytearrayoutputstream length stream arrai tobytearrai blen length barr blen idx idx blen idx c1 charat idx c2 charat idx barr idx pars parsebyt c1 c2 16 stream write barr stream arrai tobytearrai param buf string csv buffer tocsvbuff barr barr barr length string builder stringbuild sb string builder stringbuild barr length sb append idx idx barr length idx sb append integ hex string tohexstr barr idx sb string tostr convert csv serial represent buffer arrai output stream bytearrayoutputstream param csv serial represent buffer java io io except ioexcept deseri arrai output stream bytearrayoutputstream from csv buffer fromcsvbuff string io except ioexcept charat io except ioexcept error deseri buffer arrai output stream bytearrayoutputstream stream arrai output stream bytearrayoutputstream length stream arrai tobytearrai blen length barr blen idx idx blen idx c1 charat idx c2 charat idx barr idx pars parsebyt c1 c2 16 stream write barr stream arrai tobytearrai compar byte comparebyt b1 off1 len1 b2 off2 len2 len1 len2 b1 off1 b2 off2 b1 off1 b2 off2 len1 len2 len1 len2 

fle lost messag test flelostmessagetest zk test zktestcas logger log logger factori loggerfactori get logger getlogg fle lost messag test flelostmessagetest count hash map hashmap quorum server quorumserv peer file tmpdir port quorum cnx manag quorumcnxmanag cnx manag cnxmanag befor set up setup except count peer hash map hashmap quorum server quorumserv count tmpdir file count port count after tear down teardown except cnx manag cnxmanag halt test test lost messag testlostmessag except fast leader elect fastleaderelect le fast leader elect fastleaderelect count log info test le testl get test name gettestnam count count clientport port assign portassign uniqu peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress clientport inet socket address inetsocketaddress port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port clientport start server quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect fle test util fletestutil le thread lethread thread fle test util fletestutil le thread lethread peer thread start start mock server mock server mockserv thread join 5000 thread aliv isal fail thread didn join mock server mockserv interrupt except interruptedexcept io except ioexcept creat instanc connect manag quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 cnx manag cnxmanag quorum cnx manag quorumcnxmanag peer quorum cnx manag quorumcnxmanag listen listen cnx manag cnxmanag listen listen start cnx manag cnxmanag send tosend 1l fle test util fletestutil creat msg createmsg server state serverst ordin cnx manag cnxmanag recv queue recvqueu cnx manag cnxmanag send tosend 1l fle test util fletestutil creat msg createmsg server state serverst follow ordin 

leader elect protocol bean mbean leader elect mx bean leaderelectionmxbean time leader elect start string get start time getstarttim 

send ack request processor sendackrequestprocessor request processor requestprocessor flushabl logger log logger factori loggerfactori get logger getlogg send ack request processor sendackrequestprocessor learner learner send ack request processor sendackrequestprocessor learner peer learner peer process request processrequest request si si type op code opcod sync quorum packet quorumpacket qp quorum packet quorumpacket leader ack si hdr get zxid getzxid learner write packet writepacket qp io except ioexcept log warn close connect leader except packet send learner sock close isclos learner sock close io except ioexcept e1 shut thing down except here irrelev log debug ignor error close connect e1 flush io except ioexcept learner write packet writepacket io except ioexcept log warn close connect leader except packet send learner sock close isclos learner sock close io except ioexcept e1 shut thing down except here irrelev log debug ignor error close connect e1 shutdown need 

version implement zoo keeper zookeep rest specif todo test octet fulli path znode v1 path node resourc znoderesourc zoo keeper zookeep zk node resourc znoderesourc valu defaultvalu queri param queryparam session string session context uri info uriinfo ui context http servlet request httpservletrequest request io except ioexcept string context path contextpath request get context path getcontextpath context path contextpath equal context path contextpath session equal session zoo keeper servic zookeeperservic connect isconnect context path contextpath session web applic except webapplicationexcept respons statu respons statu unauthor build zk zoo keeper servic zookeeperservic get client getclient context path contextpath session ensur path ensurepathnotnul string path path illeg argument except illegalargumentexcept invalid path path head produc media type mediatyp applic json applic json applic javascript media type mediatyp applic xml applic xml respons exist node existsznod path param pathparam path string path context uri info uriinfo ui interrupt except interruptedexcept keeper except keeperexcept stat stat zk exist path stat found thrownotfound path ui respons statu respons statu build head produc media type mediatyp applic octet stream applic octet stream respons exist node octet existsznodeasoctet path param pathparam path string path context uri info uriinfo ui interrupt except interruptedexcept keeper except keeperexcept stat stat zk exist path stat found thrownotfound path ui respons statu respons statu content content build get node list getznodelist get node list json getznodelistjson bogu necessari jersei unabl render xml json properli object contain list arrai imposs get render properli result split two jaxb class get produc media type mediatyp applic json applic json applic javascript respons get node list json getznodelistjson path param pathparam path string path queri param queryparam callback string callback valu defaultvalu data queri param queryparam view string view valu defaultvalu base64 queri param queryparam dataformat string dataformat context uri info uriinfo ui interrupt except interruptedexcept keeper except keeperexcept get node list getznodelist path callback view dataformat ui get produc media type mediatyp applic xml applic xml respons get node list getznodelist path param pathparam path string path queri param queryparam callback string callback valu defaultvalu data queri param queryparam view string view valu defaultvalu base64 queri param queryparam dataformat string dataformat context uri info uriinfo ui interrupt except interruptedexcept keeper except keeperexcept get node list getznodelist path callback view dataformat ui respons get node list getznodelist json string path string callback string view string dataformat uri info uriinfo ui interrupt except interruptedexcept keeper except keeperexcept ensur path ensurepathnotnul path view equal children list string children arrai list arraylist string string child zk get children getchildren path children add child object child string child childtempl ui get absolut path getabsolutepath string tostr child childtempl end endswith child childtempl child childtempl child json child children json zchildrenjson path ui get absolut path getabsolutepath string tostr child childtempl children child children zchildren path ui get absolut path getabsolutepath string tostr child childtempl children respons statu respons statu entiti json pad jsonwithpad child callback build stat stat stat data zk get data getdata path stat data64 string data utf8 datautf8 data data64 data utf8 datautf8 dataformat equal utf8 data64 data data utf8 datautf8 data64 data utf8 datautf8 string data stat zstat zstat stat zstat path ui get absolut path getabsolutepath string tostr data64 data utf8 datautf8 stat get czxid getczxid stat get mzxid getmzxid stat get ctime getctim stat get mtime getmtim stat get version getvers stat get cversion getcvers stat get avers getavers stat get ephemer owner getephemeralown stat get data length getdatalength stat get num children getnumchildren stat get pzxid getpzxid respons statu respons statu entiti json pad jsonwithpad zstat callback build get produc media type mediatyp applic octet stream applic octet stream respons get node list octet getznodelistasoctet path param pathparam path string path interrupt except interruptedexcept keeper except keeperexcept ensur path ensurepathnotnul path stat stat stat data zk get data getdata path stat data respons statu respons statu content content build respons statu respons statu entiti data build put produc media type mediatyp applic json applic json applic javascript media type mediatyp applic xml applic xml consum media type mediatyp applic octet stream applic octet stream respons set node setznod path param pathparam path string path queri param queryparam callback string callback valu defaultvalu queri param queryparam version string version param versionparam valu defaultvalu base64 queri param queryparam dataformat string dataformat valu defaultvalu queri param queryparam string set setnul context uri info uriinfo ui data interrupt except interruptedexcept keeper except keeperexcept ensur path ensurepathnotnul path version version integ pars parseint version param versionparam number format except numberformatexcept web applic except webapplicationexcept respons statu respons statu bad request bad request entiti error zerror ui get request uri getrequesturi string tostr path bad version version param versionparam build set setnul equal data stat stat zk set data setdata path data version stat zstat zstat stat zstat path ui get absolut path getabsolutepath string tostr stat get czxid getczxid stat get mzxid getmzxid stat get ctime getctim stat get mtime getmtim stat get version getvers stat get cversion getcvers stat get avers getavers stat get ephemer owner getephemeralown stat get data length getdatalength stat get num children getnumchildren stat get pzxid getpzxid respons statu respons statu entiti json pad jsonwithpad zstat callback build put produc media type mediatyp applic octet stream applic octet stream consum media type mediatyp applic octet stream applic octet stream set node octet setznodeasoctet path param pathparam path string path valu defaultvalu queri param queryparam version string version param versionparam valu defaultvalu queri param queryparam string set setnul context uri info uriinfo ui data interrupt except interruptedexcept keeper except keeperexcept ensur path ensurepathnotnul path version version integ pars parseint version param versionparam number format except numberformatexcept web applic except webapplicationexcept respons statu respons statu bad request bad request entiti error zerror ui get request uri getrequesturi string tostr path bad version version param versionparam build set setnul equal data zk set data setdata path data version post produc media type mediatyp applic json applic json applic javascript media type mediatyp applic xml applic xml consum media type mediatyp applic octet stream applic octet stream respons creat node createznod path param pathparam path string path queri param queryparam callback string callback valu defaultvalu creat queri param queryparam op string op queri param queryparam name string name valu defaultvalu base64 queri param queryparam dataformat string dataformat valu defaultvalu queri param queryparam string set setnul valu defaultvalu queri param queryparam sequenc string sequenc valu defaultvalu queri param queryparam ephemer string ephemer context uri info uriinfo ui data interrupt except interruptedexcept keeper except keeperexcept ensur path ensurepathnotnul path path equal path name path name op equal creat web applic except webapplicationexcept respons statu respons statu bad request bad request entiti error zerror ui get request uri getrequesturi string tostr path bad operaton op build set setnul equal data creat mode createmod creat mode createmod sequenc equal ephemer equal creat mode createmod creat mode createmod persist sequenti persist sequenti creat mode createmod creat mode createmod ephemer sequenti ephemer sequenti ephemer equal creat mode createmod creat mode createmod persist creat mode createmod creat mode createmod ephemer string path newpath zk creat path data id open acl unsaf open acl unsaf creat mode createmod uri uri ui get absolut path builder getabsolutepathbuild path path newpath build respons creat uri entiti json pad jsonwithpad path zpath path newpath ui get absolut path getabsolutepath string tostr build post produc media type mediatyp applic octet stream applic octet stream consum media type mediatyp applic octet stream applic octet stream respons creat node octet createznodeasoctet path param pathparam path string path valu defaultvalu creat queri param queryparam op string op queri param queryparam name string name valu defaultvalu queri param queryparam string set setnul valu defaultvalu queri param queryparam sequenc string sequenc context uri info uriinfo ui data interrupt except interruptedexcept keeper except keeperexcept ensur path ensurepathnotnul path path equal path name path name op equal creat web applic except webapplicationexcept respons statu respons statu bad request bad request entiti error zerror ui get request uri getrequesturi string tostr path bad operaton op build set setnul equal data creat mode createmod creat mode createmod sequenc equal creat mode createmod creat mode createmod persist sequenti persist sequenti creat mode createmod creat mode createmod persist string path newpath zk creat path data id open acl unsaf open acl unsaf creat mode createmod uri uri ui get absolut path builder getabsolutepathbuild path path newpath build respons creat uri entiti path zpath path newpath ui get absolut path getabsolutepath string tostr build delet produc media type mediatyp applic json applic json applic javascript media type mediatyp applic xml applic xml media type mediatyp applic octet stream applic octet stream delet node deleteznod path param pathparam path string path valu defaultvalu queri param queryparam version string version param versionparam context uri info uriinfo ui interrupt except interruptedexcept keeper except keeperexcept ensur path ensurepathnotnul path version version integ pars parseint version param versionparam number format except numberformatexcept web applic except webapplicationexcept respons statu respons statu bad request bad request entiti error zerror ui get request uri getrequesturi string tostr path bad version version param versionparam build zk delet path version found thrownotfound string path uri info uriinfo ui web applic except webapplicationexcept web applic except webapplicationexcept respons statu respons statu found found entiti error zerror ui get request uri getrequesturi string tostr path found build 

graph data graphdata json servlet jsonservlet logger log logger factori loggerfactori get logger getlogg graph data graphdata period period 1000 log sourc logsourc sourc graph data graphdata log sourc logsourc src except sourc src string handl request handlerequest json request jsonrequest request except starttim endtim period filter op filterop fo starttim request get number getnumb start endtim request get number getnumb end period request get number getnumb period string filterstr request get string getstr filter filterstr length fo filter parser filterpars filterstr pars starttim starttim sourc get start time getstarttim endtim period endtim starttim period endtim starttim period period log debug enabl isdebugen log debug handl start starttim end endtim period period log iter logiter iter fo sourc iter starttim endtim fo sourc iter starttim endtim json gener jsongener iter string tostr 

code gener front end hadoop record gener cgener string name mname arrai list arraylist file jfile incl file minclfil arrai list arraylist record jrecord rec list mreclist file output directori outputdirectori creat instanc cpp gener cppgener param name possibl full pathnam file param ilist includ file file jfile param rlist list record defin file param output directori outputdirectori gener cgener string name arrai list arraylist file jfile ilist arrai list arraylist record jrecord rlist file output directori outputdirectori output directori outputdirectori output directori outputdirectori name mname file name get name getnam incl file minclfil ilist rec list mreclist rlist gener code method creat request file spit file level element includ statement record level code gener record jrecord gen code gencod io except ioexcept output directori outputdirectori exist output directori outputdirectori mkdir io except ioexcept unabl creat output directori output directori outputdirectori file writer filewrit file writer filewrit file output directori outputdirectori name mname file writer filewrit file writer filewrit file output directori outputdirectori name mname write write licens apach softwar foundat asf on write more contributor licens agreement notic file write distribut work addit inform write copyright ownership asf licens file write apach licens version write licens us file complianc write licens obtain copi licens write write http www apach org licens licens write write requir applic law agre write softwar write distribut licens distribut basi write warranti condit kind express impli write licens specif languag govern permiss write limit licens write write write write licens apach softwar foundat asf on write more contributor licens agreement notic file write distribut work addit inform write copyright ownership asf licens file write apach licens version write licens us file complianc write licens obtain copi licens write write http www apach org licens licens write write requir applic law agre write softwar write distribut licens distribut basi write warranti condit kind express impli write licens specif languag govern permiss write limit licens write write write ifndef name mname upper touppercas replac write defin name mname upper touppercas replac write includ recordio iter file jfile incl file minclfil iter ha next hasnext file jfile next write includ get name getnam requir compil from write ifdef cplusplu cplusplu nextern endif write includ stdlib calloc free write includ name mname iter record jrecord rec list mreclist iter ha next hasnext record jrecord jr next jr gen code genccod write ifdef cplusplu cplusplu endif write endif name mname upper touppercas replac close close 

jersei resolv json format specif detail field arrai number string provid suppress warn suppresswarn uncheck jaxb context resolv jaxbcontextresolv context resolv contextresolv jaxb context jaxbcontext jaxb context jaxbcontext context set type set typesset jaxb context resolv jaxbcontextresolv except type arr typesarr path zpath stat zstat children json zchildrenjson type set typesset hash set hashset arrai list aslist type arr typesarr context jsonjaxb context jsonjaxbcontext json configur jsonconfigur map arrai children non string nonstr czxid non string nonstr mzxid non string nonstr ctime non string nonstr mtime non string nonstr version non string nonstr cversion non string nonstr avers non string nonstr ephemer owner ephemeralown non string nonstr data length datalength non string nonstr num children numchildren non string nonstr pzxid build type arr typesarr jaxb context jaxbcontext get context getcontext object type objecttyp type set typesset contain object type objecttyp context 

helper allow programmat creat jaa configur section name login modul set kei valu describ login option exampl jaa jaa configur jaasconfigur jaa add section addsect server org apach zookeep server auth digest login modul digestloginmodul usernam passowrd jaa configur jaasconfigur javax secur auth login configur map string app configur entri appconfigurationentri section hash map hashmap string app configur entri appconfigurationentri jaa configur jaasconfigur add section jaa conf param name section name param login modul name loginmodulenam login modul name param arg login kei valu arg add section addsect string name string login modul name loginmodulenam string arg map string string conf hash map hashmap string string loop arg kei valu sequenc arg length conf put arg arg add section addsect name login modul name loginmodulenam conf add section jaa conf param name section name param login modul name loginmodulenam login modul name param conf login kei valu arg add section addsect string name string login modul name loginmodulenam map string string conf app configur entri appconfigurationentri entri app configur entri appconfigurationentri entri app configur entri appconfigurationentri login modul name loginmodulenam login modul control flag loginmodulecontrolflag requir conf section put name entri overrid app configur entri appconfigurationentri get app configur entri getappconfigurationentri string app name appnam section get app name appnam 

observ quorum hammer test observerquorumhammertest quorum hammer test quorumhammertest connect timeout connect timeout client test clienttest connect timeout connect timeout befor overrid set up setup except qb set up setup cht host port hostport qb host port hostport cht set up setupal test test hammer basic testhammerbas throwabl cht test hammer basic testhammerbas 

repres singl oper multi oper transact oper creat updat delet version check sub class op repres detail type referenc provid factori method zoo keeper zookeep creat string java util list creat mode createmod zoo keeper zookeep creat string java util list creat mode createmod org apach zookeep async callback asynccallback string callback stringcallback object zoo keeper zookeep delet string zoo keeper zookeep set data setdata string abstract op type string path prevent untyp construct op type string path type type path path construct creat oper argument zoo keeper zookeep method name zoo keeper zookeep creat string java util list creat mode createmod creat mode createmod from flag fromflag param path path node param data initi data node param acl acl node param flag specifi node creat ephemer sequenti integ encod op creat string path data list acl acl flag creat path data acl flag construct creat oper argument zoo keeper zookeep method name zoo keeper zookeep creat string java util list creat mode createmod param path path node param data initi data node param acl acl node param creat mode createmod specifi node creat ephemer sequenti op creat string path data list acl acl creat mode createmod creat mode createmod creat path data acl creat mode createmod construct delet oper argument zoo keeper zookeep method name zoo keeper zookeep delet string param path path node delet param version expect node version op delet string path version delet path version construct updat oper argument zoo keeper zookeep method name zoo keeper zookeep set data setdata string param path path node param data data set param version expect match version op set data setdata string path data version set data setdata path data version construct version check oper argument zoo keeper zookeep set data setdata method data provid updat intend purpos allow read modifi write oper appli multipl znode znode involv read write similar effect achiev write data back lead more version updat necessari more write gener param path path node param version expect match version op check string path version check path version get integ type code op code from zoo def zoodef op code opcod zoo def zoodef op code opcod type code get type gettyp type get path op path string get path getpath path encod op wire transmiss appropri record structur abstract record request record torequestrecord reconstruct transact chroot prefix transact chroot abstract op chroot withchroot string add root prefix addrootprefix intern class gener referenc creat op data list acl acl flag creat string path data list acl acl flag zoo def zoodef op code opcod creat path data data acl acl flag flag creat string path data list acl acl creat mode createmod creat mode createmod zoo def zoodef op code opcod creat path data data acl acl flag creat mode createmod flag toflag overrid equal object creat creat op creat acl equal aclequ iter acl op acl iter acl acl op acl ha more data hasmoredata ha next hasnext ha more data hasmoredata acl equal aclequ acl acl otheracl next acl equal acl otheracl acl equal aclequ ha next hasnext get type gettyp op get type gettyp arrai equal data op data flag op flag acl equal aclequ overrid hash code hashcod get type gettyp get path getpath hash code hashcod arrai hash code hashcod data overrid record request record torequestrecord creat request createrequest get path getpath data acl flag overrid op chroot withchroot string path creat path data acl flag delet op version delet string path version zoo def zoodef op code opcod delet path version version overrid equal object delet delet op delet get type gettyp op get type gettyp version op version get path getpath equal op get path getpath overrid hash code hashcod get type gettyp get path getpath hash code hashcod version overrid record request record torequestrecord delet request deleterequest get path getpath version overrid op chroot withchroot string path delet path version set data setdata op data version set data setdata string path data version zoo def zoodef op code opcod set data setdata path data data version version overrid equal object set data setdata set data setdata op set data setdata get type gettyp op get type gettyp version op version get path getpath equal op get path getpath arrai equal data op data overrid hash code hashcod get type gettyp get path getpath hash code hashcod arrai hash code hashcod data version overrid record request record torequestrecord set data request setdatarequest get path getpath data version overrid op chroot withchroot string path set data setdata path data version check op version check string path version zoo def zoodef op code opcod check path version version overrid equal object check check op check get type gettyp op get type gettyp get path getpath equal op get path getpath version op version overrid hash code hashcod get type gettyp get path getpath hash code hashcod version overrid record request record torequestrecord check version request checkversionrequest get path getpath version overrid op chroot withchroot string path check path version 

intern class gener referenc creat op data list acl acl flag creat string path data list acl acl flag zoo def zoodef op code opcod creat path data data acl acl flag flag creat string path data list acl acl creat mode createmod creat mode createmod zoo def zoodef op code opcod creat path data data acl acl flag creat mode createmod flag toflag overrid equal object creat creat op creat acl equal aclequ iter acl op acl iter acl acl op acl ha more data hasmoredata ha next hasnext ha more data hasmoredata acl equal aclequ acl acl otheracl next acl equal acl otheracl acl equal aclequ ha next hasnext get type gettyp op get type gettyp arrai equal data op data flag op flag acl equal aclequ overrid hash code hashcod get type gettyp get path getpath hash code hashcod arrai hash code hashcod data overrid record request record torequestrecord creat request createrequest get path getpath data acl flag overrid op chroot withchroot string path creat path data acl flag 

delet op version delet string path version zoo def zoodef op code opcod delet path version version overrid equal object delet delet op delet get type gettyp op get type gettyp version op version get path getpath equal op get path getpath overrid hash code hashcod get type gettyp get path getpath hash code hashcod version overrid record request record torequestrecord delet request deleterequest get path getpath version overrid op chroot withchroot string path delet path version 

set data setdata op data version set data setdata string path data version zoo def zoodef op code opcod set data setdata path data data version version overrid equal object set data setdata set data setdata op set data setdata get type gettyp op get type gettyp version op version get path getpath equal op get path getpath arrai equal data op data overrid hash code hashcod get type gettyp get path getpath hash code hashcod arrai hash code hashcod data version overrid record request record torequestrecord set data request setdatarequest get path getpath data version overrid op chroot withchroot string path set data setdata path data version 

check op version check string path version zoo def zoodef op code opcod check path version version overrid equal object check check op check get type gettyp op get type gettyp get path getpath equal op get path getpath version op version overrid hash code hashcod get type gettyp get path getpath hash code hashcod version overrid record request record torequestrecord check version request checkversionrequest get path getpath version overrid op chroot withchroot string path check path version 

quorum bean quorumbean quorum mx bean quorummxbean zkm bean info zkmbeaninfo quorum peer quorump peer string name quorum bean quorumbean quorum peer quorump peer peer peer name replic server id replicatedserv id peer get myid getmyid string get name getnam name hidden ishidden get quorum size getquorums peer get quorum size getquorums 

fle restart test flerestarttest zk test zktestcas logger log logger factori loggerfactori get logger getlogg fle test fletest test vote testvot test vote testvot id leader leader leader leader count vote countvot hash set hashset test vote testvot hs id counter test vote testvot hs leader id counter counter count baseport base eport baseleport hash map hashmap quorum server quorumserv peer arrai list arraylist fle restart thread flerestartthread restart thread restartthread hash map hashmap integ hash set hashset test vote testvot vote map votemap file tmpdir port success count successcount semaphor finish vote vote leader di leaderdi leader round random rand random befor set up setup except count peer hash map hashmap quorum server quorumserv count restart thread restartthread arrai list arraylist fle restart thread flerestartthread count vote map votemap hash map hashmap integ hash set hashset test vote testvot vote vote count tmpdir file count port count success count successcount finish semaphor after tear down teardown except restart thread restartthread size fast leader elect fastleaderelect restart thread restartthread get peer get elect alg getelectionalg shutdown fle restart thread flerestartthread thread quorum peer quorump peer peer round peerround fle restart thread flerestartthread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead log info thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote peer round peerround log info first peer shut down quorum base quorumbas shutdown peer fast leader elect fastleaderelect restart thread restartthread get peer get elect alg getelectionalg shutdown peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect peer round peerround finish releas log info second enter finish acquir thread get peer get peer state getpeerst server state serverst lead log info releas log info first peer join finish acquir thread get peer get peer state getpeerst server state serverst lead log info releas except print stack trace printstacktrac test test le restart testlerestart except fast leader elect fastleaderelect le fast leader elect fastleaderelect count leader di leaderdi allow on bad leader allowonebadlead leader di leaderdi log info test le testl get test name gettestnam count count peer put valu valueof quorum server quorumserv inet socket address inetsocketaddress port assign portassign uniqu inet socket address inetsocketaddress port assign portassign uniqu tmpdir client base clientbas creat tmp dir createtmpdir port port assign portassign uniqu count quorum peer quorump peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect fle restart thread flerestartthread thread fle restart thread flerestartthread peer thread start restart thread restartthread add thread log info start thread get test name gettestnam restart thread restartthread size restart thread restartthread get join 10000 restart thread restartthread get aliv isal fail thread didn join 

test vote testvot test vote testvot id leader leader leader leader 

fle restart thread flerestartthread thread quorum peer quorump peer peer round peerround fle restart thread flerestartthread quorum peer quorump peer peer peer log info constructor get name getnam run vote peer set peer state setpeerst server state serverst log info call leader elect peer get elect alg getelectionalg leader lookforlead log info thread vote real zookeep care set current vote here manual peer set current vote setcurrentvot log info finish elect get id getid vote peer round peerround log info first peer shut down quorum base quorumbas shutdown peer fast leader elect fastleaderelect restart thread restartthread get peer get elect alg getelectionalg shutdown peer quorum peer quorump peer tmpdir tmpdir port 1000 peer start leader elect startleaderelect peer round peerround finish releas log info second enter finish acquir thread get peer get peer state getpeerst server state serverst lead log info releas log info first peer join finish acquir thread get peer get peer state getpeerst server state serverst lead log info releas except print stack trace printstacktrac 

nio server cnxn factori nioservercnxnfactori server cnxn factori servercnxnfactori runnabl logger log logger factori loggerfactori get logger getlogg nio server cnxn factori nioservercnxnfactori thread set uncaught except handler setdefaultuncaughtexceptionhandl thread uncaught except handler uncaughtexceptionhandl uncaught except uncaughtexcept thread throwabl log error thread di avoid jvm bug pointer except nullpointerexcept selector open http bug sun com view bug view bug bug id bug id 6427854 selector open close io except ioexcept log error selector fail open server socket channel serversocketchannel ss selector selector selector open us buffer effici socket singl sender thread nio server cnxn nioservercnxn instanc us member variabl alloc buffer bytebuff direct buffer directbuff buffer bytebuff alloc direct allocatedirect 64 1024 hash map hashmap inet address inetaddress set nio server cnxn nioservercnxn ip map ipmap hash map hashmap inet address inetaddress set nio server cnxn nioservercnxn max client cnxn maxclientcnxn 60 construct server connect factori accept unlimit number concurr connect from client up file descriptor limit oper startup zk call subsequ io except ioexcept nio server cnxn factori nioservercnxnfactori io except ioexcept thread thread overrid configur inet socket address inetsocketaddress addr maxcc io except ioexcept configur sasl login configuresasllogin thread thread nio server cxn nioservercxn factori addr thread set daemon setdaemon max client cnxn maxclientcnxn maxcc ss server socket channel serversocketchannel open ss socket set reus address setreuseaddress log info bind port addr ss socket bind addr ss configur block configureblock ss selector select kei selectionkei op accept op accept inherit doc inheritdoc get max client cnxn host getmaxclientcnxnsperhost max client cnxn maxclientcnxn inherit doc inheritdoc set max client cnxn host setmaxclientcnxnsperhost max max client cnxn maxclientcnxn max overrid start ensur thread start thread get state getstat thread state thread start overrid startup zoo keeper server zookeeperserv zk io except ioexcept interrupt except interruptedexcept start zk startdata zk startup set zoo keeper server setzookeeperserv zk overrid inet socket address inetsocketaddress get local address getlocaladdress inet socket address inetsocketaddress ss socket get local socket address getlocalsocketaddress overrid get local port getlocalport ss socket get local port getlocalport add cnxn addcnxn nio server cnxn nioservercnxn cnxn cnxn cnxn add cnxn ip map ipmap inet address inetaddress addr cnxn sock socket get inet address getinetaddress set nio server cnxn nioservercnxn ip map ipmap get addr gener connect from host set initi cap allow minim mem usag common entri set initi cap avoid rehash first entri ad hash set hashset nio server cnxn nioservercnxn add cnxn ip map ipmap put addr add cnxn nio server cnxn nioservercnxn creat connect createconnect socket channel socketchannel sock select kei selectionkei sk io except ioexcept nio server cnxn nioservercnxn zk server zkserver sock sk get client cnxn count getclientcnxncount inet address inetaddress cl ip map ipmap lock cover map content cnxn set shouldn modifi lock ip map ipmap set nio server cnxn nioservercnxn ip map ipmap get cl size run ss socket close isclos selector select 1000 set select kei selectionkei select select selector select kei selectedkei arrai list arraylist select kei selectionkei select list selectedlist arrai list arraylist select kei selectionkei select collect shuffl select list selectedlist select kei selectionkei select list selectedlist readi op readyop select kei selectionkei op accept op accept socket channel socketchannel sc server socket channel serversocketchannel channel accept inet address inetaddress ia sc socket get inet address getinetaddress cnxncount get client cnxn count getclientcnxncount ia max client cnxn maxclientcnxn cnxncount max client cnxn maxclientcnxn log warn connect from ia max max client cnxn maxclientcnxn sc close log info accept socket connect from sc socket get remot socket address getremotesocketaddress sc configur block configureblock select kei selectionkei sk sc selector select kei selectionkei op read op read nio server cnxn nioservercnxn cnxn creat connect createconnect sc sk sk attach cnxn add cnxn addcnxn cnxn readi op readyop select kei selectionkei op read op read select kei selectionkei op write op write nio server cnxn nioservercnxn nio server cnxn nioservercnxn attach io doio log debug enabl isdebugen log debug unexpect op select readi op readyop select clear runtim except runtimeexcept log warn ignor unexpect runtim except except log warn ignor except close closeal log info nio server cnxn nioservercnxn factori exit run method clear connect selector overrid suppress warn suppresswarn uncheck close closeal selector wakeup hash set hashset nio server cnxn nioservercnxn cnxn cnxn cnxn hash set hashset nio server cnxn nioservercnxn cnxn clone clear connect selector nio server cnxn nioservercnxn cnxn cnxn don hold cnxn lock deadlock occur cnxn close except log warn ignor except close cnxn sessionid 0x hex string tohexstr cnxn session id sessionid shutdown ss close close closeal thread interrupt thread join login login shutdown interrupt except interruptedexcept log warn ignor interrupt except shutdown except log warn ignor unexpect except shutdown selector close io except ioexcept log warn selector close zk server zkserver zk server zkserver shutdown overrid close session closesess session id sessionid selector wakeup close session wakeup closesessionwithoutwakeup session id sessionid suppress warn suppresswarn uncheck close session wakeup closesessionwithoutwakeup session id sessionid hash set hashset nio server cnxn nioservercnxn cnxn cnxn cnxn hash set hashset nio server cnxn nioservercnxn cnxn clone nio server cnxn nioservercnxn cnxn cnxn cnxn get session id getsessionid session id sessionid cnxn close except log warn except session close overrid join interrupt except interruptedexcept thread join overrid iter server cnxn servercnxn get connect getconnect cnxn 

superclass two three main actor zk ensembl follow observ follow observ share good deal code move peer avoid duplic learner packet flight packetinflight txn header txnheader hdr record rec quorum peer quorump self learner zoo keeper server learnerzookeeperserv zk buffer output stream bufferedoutputstream buffer output bufferedoutput socket sock socket getter socket get socket getsocket sock input archiv inputarch leader leaderi output archiv outputarch leader os leadero protocol version leader leader protocol version leaderprotocolvers x01 0x01 logger log logger factori loggerfactori get logger getlogg learner nodelai get properti getproperti follow nodelai equal log info tcp delai nodelai set nodelai concurr hash map concurrenthashmap server cnxn servercnxn pend revalid pendingrevalid concurr hash map concurrenthashmap server cnxn servercnxn get pend revalid count getpendingrevalidationscount pend revalid pendingrevalid size valid session client param client id clientid client revalid param timeout timeout session valid io except ioexcept valid session validatesess server cnxn servercnxn cnxn client id clientid timeout io except ioexcept log info revalid client 0x hex string tohexstr client id clientid arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream data output stream dataoutputstream do data output stream dataoutputstream bao do write writelong client id clientid do write writeint timeout do close quorum packet quorumpacket qp quorum packet quorumpacket leader revalid bao arrai tobytearrai pend revalid pendingrevalid put client id clientid cnxn log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask valid session 0x hex string tohexstr client id clientid write packet writepacket qp write packet leader param pp propos packet sent leader io except ioexcept write packet writepacket quorum packet quorumpacket pp flush io except ioexcept leader os leadero pp leader os leadero write record writerecord pp packet flush buffer output bufferedoutput flush read packet from leader param pp packet instanti io except ioexcept read packet readpacket quorum packet quorumpacket pp io except ioexcept leader leaderi leader leaderi read record readrecord pp packet trace mask tracemask zoo trace zootrac server packet trace mask server packet trace mask pp get type gettyp leader ping trace mask tracemask zoo trace zootrac server ping trace mask server ping trace mask log trace enabl istraceen zoo trace zootrac log quorum packet logquorumpacket log trace mask tracemask pp send request packet leader param request request from client io except ioexcept request request request io except ioexcept arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream data output stream dataoutputstream oa data output stream dataoutputstream bao oa write writelong request session id sessionid oa write writeint request cxid oa write writeint request type request request request request rewind len request request remain len request request get request request rewind oa write oa close quorum packet quorumpacket qp quorum packet quorumpacket leader request bao arrai tobytearrai request auth info authinfo write packet writepacket qp return address node leader inet socket address inetsocketaddress find leader findlead inet socket address inetsocketaddress addr find leader id vote current self get current vote getcurrentvot quorum server quorumserv self get view getview valu id current get id getid addr addr addr log warn couldn find leader id current get id getid addr establish connect leader found find leader findlead retri time befor give up param addr address leader connect io except ioexcept socket connect fail th 5th attempt connect except connectexcept interrupt except interruptedexcept connect leader connecttolead inet socket address inetsocketaddress addr io except ioexcept connect except connectexcept interrupt except interruptedexcept sock socket sock set timeout setsotimeout self tick time ticktim self init limit initlimit sock connect addr self tick time ticktim self sync limit synclimit sock set tcp delai settcpnodelai nodelai io except ioexcept log error unexpect except log warn unexpect except connect addr sock socket sock set timeout setsotimeout self tick time ticktim self init limit initlimit thread sleep 1000 leader leaderi binari input archiv binaryinputarch get archiv getarch buffer input stream bufferedinputstream sock get input stream getinputstream buffer output bufferedoutput buffer output stream bufferedoutputstream sock get output stream getoutputstream leader os leadero binari output archiv binaryoutputarch get archiv getarch buffer output bufferedoutput connect leader perform handshak protocol establish follow observ connect param pkt type pkttype zxid leader send synchron purpos io except ioexcept leader registerwithlead pkt type pkttype io except ioexcept send follow info includ last zxid sid last log zxid lastloggedzxid self get last log zxid getlastloggedzxid quorum packet quorumpacket qp quorum packet quorumpacket qp set type settyp pkt type pkttype qp set zxid setzxid zxid util zxidutil make zxid makezxid self get accept epoch getacceptedepoch add sid payload learner info learnerinfo li learner info learnerinfo self get id getid x10000 0x10000 arrai output stream bytearrayoutputstream bsid arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bsid boa write record writerecord li learner info learnerinfo qp set data setdata bsid arrai tobytearrai write packet writepacket qp read packet readpacket qp epoch newepoch zxid util zxidutil get epoch from zxid getepochfromzxid qp get zxid getzxid qp get type gettyp leader leaderinfo connect server accept epoch read next packet leader protocol version leaderprotocolvers buffer bytebuff wrap qp get data getdata get getint epoch byte epochbyt buffer bytebuff wrap epoch byte wrappedepochbyt buffer bytebuff wrap epoch byte epochbyt epoch newepoch self get accept epoch getacceptedepoch wrap epoch byte wrappedepochbyt put putint self get current epoch getcurrentepoch self set accept epoch setacceptedepoch epoch newepoch epoch newepoch self get accept epoch getacceptedepoch ack epoch equal leader ack send last zxid lastzxid leader sync assum leadership epoch repli count ack epoch wrap epoch byte wrappedepochbyt put putint io except ioexcept leader epoch epoch newepoch accept epoch self get accept epoch getacceptedepoch quorum packet quorumpacket ack epoch acknewepoch quorum packet quorumpacket leader ackepoch last log zxid lastloggedzxid epoch byte epochbyt write packet writepacket ack epoch acknewepoch zxid util zxidutil make zxid makezxid epoch newepoch epoch newepoch self get accept epoch getacceptedepoch self set accept epoch setacceptedepoch epoch newepoch qp get type gettyp leader newlead log error first packet newlead io except ioexcept first packet newlead qp get zxid getzxid synchron histori leader param leader zxid newleaderzxid io except ioexcept interrupt except interruptedexcept sync leader syncwithlead leader zxid newleaderzxid io except ioexcept interrupt except interruptedexcept quorum packet quorumpacket ack quorum packet quorumpacket leader ack quorum packet quorumpacket qp quorum packet quorumpacket epoch newepoch zxid util zxidutil get epoch from zxid getepochfromzxid leader zxid newleaderzxid read packet readpacket qp link list linkedlist packet commit packetscommit link list linkedlist link list linkedlist packet flight packetinflight packet commit packetsnotcommit link list linkedlist packet flight packetinflight zk qp get type gettyp leader diff log info get diff from leader 0x hex string tohexstr qp get zxid getzxid qp get type gettyp leader snap log info get snapshot from leader leader dump databas clear databas read zk get zk databas getzkdatabas clear zk get zk databas getzkdatabas deseri snapshot deserializesnapshot leader leaderi string signatur leader leaderi read string readstr signatur signatur equal ben here benwasher log error miss signatur signatur io except ioexcept miss signatur qp get type gettyp leader trunc truncat log lastzxid leader log warn truncat log get sync leader 0x hex string tohexstr qp get zxid getzxid truncat zk get zk databas getzkdatabas truncat log truncatelog qp get zxid getzxid truncat abl truncat log log error abl truncat log hex string tohexstr qp get zxid getzxid exit 13 log error unexpect packet from leader qp get type gettyp exit exit 13 zk get zk databas getzkdatabas setlast process zxid setlastprocessedzxid qp get zxid getzxid zk creat session tracker createsessiontrack last queu lastqueu v1 snapshot get newlead messag pre v1 snapshot updat v1 get updat after newlead make don snapshot twice snapshot snapshottaken start get transact appli follow uptod outer loop outerloop self run isrun read packet readpacket qp qp get type gettyp leader propos packet flight packetinflight pif packet flight packetinflight pif hdr txn header txnheader pif rec serial util serializeutil deseri txn deserializetxn qp get data getdata pif hdr pif hdr get zxid getzxid last queu lastqueu log warn zxid 0x hex string tohexstr pif hdr get zxid getzxid expect 0x hex string tohexstr last queu lastqueu last queu lastqueu pif hdr get zxid getzxid packet commit packetsnotcommit add pif leader commit snapshot snapshottaken pif packet commit packetsnotcommit peek first peekfirst pif hdr get zxid getzxid qp get zxid getzxid log warn commit qp get zxid getzxid next propos pif hdr get zxid getzxid zk process txn processtxn pif hdr pif rec packet commit packetsnotcommit remov packet commit packetscommit add qp get zxid getzxid leader inform txn header txnheader hdr txn header txnheader record txn serial util serializeutil deseri txn deserializetxn qp get data getdata hdr zk process txn processtxn hdr txn leader uptod snapshot snapshottaken pre v1 zk snapshot takesnapshot self set current epoch setcurrentepoch epoch newepoch self cnxn factori cnxnfactori set zoo keeper server setzookeeperserv zk outer loop outerloop leader newlead newlead v1 zk snapshot takesnapshot self set current epoch setcurrentepoch epoch newepoch snapshot snapshottaken write packet writepacket quorum packet quorumpacket leader ack leader zxid newleaderzxid ack set zxid setzxid zxid util zxidutil make zxid makezxid epoch newepoch write packet writepacket ack sock set timeout setsotimeout self tick time ticktim self sync limit synclimit zk startup log stuff snapshot uptod zk follow zoo keeper server followerzookeeperserv follow zoo keeper server followerzookeeperserv fzk follow zoo keeper server followerzookeeperserv zk packet flight packetinflight packet commit packetsnotcommit fzk log request logrequest hdr rec zxid packet commit packetscommit fzk commit zxid revalid quorum packet quorumpacket qp io except ioexcept arrai input stream bytearrayinputstream bi arrai input stream bytearrayinputstream qp get data getdata data input stream datainputstream di data input stream datainputstream bi session id sessionid di read readlong valid di read readboolean server cnxn servercnxn cnxn pend revalid pendingrevalid remov session id sessionid cnxn log warn miss session 0x hex string tohexstr session id sessionid valid zk finish session init finishsessioninit cnxn valid log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac session trace mask session trace mask session 0x hex string tohexstr session id sessionid valid valid ping quorum packet quorumpacket qp io except ioexcept send back ping session data arrai output stream bytearrayoutputstream bo arrai output stream bytearrayoutputstream data output stream dataoutputstream do data output stream dataoutputstream bo hash map hashmap integ touch tabl touchtabl zk get touch snapshot gettouchsnapshot entri integ entri touch tabl touchtabl entri set entryset do write writelong entri get kei getkei do write writeint entri get valu getvalu qp set data setdata bo arrai tobytearrai write packet writepacket qp shutdown peer shutdown set zookeep server self cnxn factori cnxnfactori set zoo keeper server setzookeeperserv clear connect self cnxn factori cnxnfactori close closeal shutdown previou zookeep zk zk shutdown 

packet flight packetinflight txn header txnheader hdr record rec 

prefix match compon filesystem path trie tree edg map compon path exampl ab bc cf map trie ab ab bc bc cf cf path trie pathtri logger logger log logger factori loggerfactori get logger getlogg path trie pathtri root node path trie pathtri trie node trienod root node rootnod trie node trienod properti hash map hashmap string trie node trienod children trie node trienod parent creat trienod parent paramet param parent parent trienod trie node trienod trie node trienod parent children hash map hashmap string trie node trienod parent parent get parent node parent node trie node trienod get parent getpar parent set parent node param parent parent set set parent setpar trie node trienod parent parent parent properti set node make special set properti setproperti prop properti prop properti node properti node get properti getproperti properti add child exist node param child name childnam string name child param node node child add child addchild string child name childnam trie node trienod node children children contain kei containskei child name childnam children put child name childnam node delet child from node param child name childnam string name child delet delet child deletechild string child name childnam children children contain kei containskei child name childnam trie node trienod child node childnod children get child name childnam child node child node childnod get children getchildren length child node childnod set parent setpar children remov child name childnam more child node reset properti child node childnod set properti setproperti child node map input childnam param child name childnam name child child node trie node trienod get child getchild string child name childnam children children contain kei containskei child name childnam children get child name childnam get list children trienod param node get children string list children string get children getchildren children children kei set keyset arrai toarrai string get string represent node string string tostr string builder stringbuild sb string builder stringbuild sb append children trienod children string str children kei set keyset sb append str sb string tostr construct path trie pathtri root node path trie pathtri root node rootnod trie node trienod add path path trie param path add path addpath string path path string path compon pathcompon path split trie node trienod parent root node rootnod string part path compon pathcompon length illeg argument except illegalargumentexcept invalid path path path compon pathcompon length part path compon pathcompon parent get child getchild part parent add child addchild part trie node trienod parent parent parent get child getchild part parent set properti setproperti delet path from trie param path path delet delet path deletepath string path path string path compon pathcompon path split trie node trienod parent root node rootnod string part path compon pathcompon length illeg argument except illegalargumentexcept invalid path path path compon pathcompon length part path compon pathcompon parent get child getchild part path exist parent parent get child getchild part log info parent trie node trienod real parent realpar parent get parent getpar real parent realpar delet child deletechild part largest prefix input path param path input path largest prefix input path string find max prefix findmaxprefix string path path equal path path string path compon pathcompon path split trie node trienod parent root node rootnod list string compon arrai list arraylist string path compon pathcompon length illeg argument except illegalargumentexcept invalid path path string part string builder stringbuild sb string builder stringbuild lastindex path compon pathcompon length parent get child getchild path compon pathcompon part path compon pathcompon parent parent get child getchild part compon add part parent get properti getproperti lastindex lastindex sb append compon get sb string tostr 

trie node trienod properti hash map hashmap string trie node trienod children trie node trienod parent creat trienod parent paramet param parent parent trienod trie node trienod trie node trienod parent children hash map hashmap string trie node trienod parent parent get parent node parent node trie node trienod get parent getpar parent set parent node param parent parent set set parent setpar trie node trienod parent parent parent properti set node make special set properti setproperti prop properti prop properti node properti node get properti getproperti properti add child exist node param child name childnam string name child param node node child add child addchild string child name childnam trie node trienod node children children contain kei containskei child name childnam children put child name childnam node delet child from node param child name childnam string name child delet delet child deletechild string child name childnam children children contain kei containskei child name childnam trie node trienod child node childnod children get child name childnam child node child node childnod get children getchildren length child node childnod set parent setpar children remov child name childnam more child node reset properti child node childnod set properti setproperti child node map input childnam param child name childnam name child child node trie node trienod get child getchild string child name childnam children children contain kei containskei child name childnam children get child name childnam get list children trienod param node get children string list children string get children getchildren children children kei set keyset arrai toarrai string get string represent node string string tostr string builder stringbuild sb string builder stringbuild sb append children trienod children string str children kei set keyset sb append str sb string tostr 

demonstr run rest servic grizzli rest main restmain logger log logger factori loggerfactori get logger getlogg rest main restmain grizzli web server grizzlywebserv gw rest cfg restcfg cfg rest main restmain rest cfg restcfg cfg cfg cfg start io except ioexcept println start grizzli us ssl usessl cfg us ssl usessl gw grizzli web server grizzlywebserv cfg get port getport tmp 23 cxv45345 23cxv45345 2131 xc2 2131xc2 us ssl usessl bug grizzli doc root multipl adapt endpoint cfg get endpoint getendpoint zoo keeper servic zookeeperservic map context mapcontext get context getcontext gw add grizzli adapt addgrizzlyadapt creat jersei adapt createjerseyadapt string get context getcontext us ssl usessl println start ssl string jk cfg get jk getjk kei rest jk string jk password jkspassword cfg get jk password getjkspassword ssl config sslconfig ssl config sslconfig ssl config sslconfig url resourc get getclass get loader getclassload get resourc getresourc jk resourc log error unabl find keystor file jk exit ssl config sslconfig set kei store file setkeystorefil file resourc uri touri get absolut path getabsolutepath uri syntax except urisyntaxexcept e1 log error unabl load keystor jk e1 exit ssl config sslconfig set kei store pass setkeystorepass jk password jkspassword gw set ssl config setsslconfig ssl config sslconfig gw start stop gw stop zoo keeper servic zookeeperservic close closeal servlet adapt servletadapt creat jersei adapt createjerseyadapt endpoint servlet adapt servletadapt jersei servlet adapt servletadapt jersei set servlet instanc setservletinst servlet contain servletcontain jersei add init paramet addinitparamet com sun jersei config properti packag org apach zookeep server jersei resourc jersei set context path setcontextpath get context getcontext credenti credenti join get credenti getcredenti cfg get credenti getcredenti empti isempti jersei add filter addfilt http basic auth httpbasicauth get context getcontext basic auth jersei entri point start server main string arg except rest cfg restcfg cfg rest cfg restcfg rest properti rest main restmain main rest main restmain cfg main start runtim get runtim getruntim add shutdown hook addshutdownhook thread overrid run main stop println exit request bye print endpoint printendpoint cfg println server start print endpoint printendpoint rest cfg restcfg cfg port cfg get port getport endpoint cfg get endpoint getendpoint string context get context getcontext context charat context length context println string format start wadl http localhost sapplic wadl context port context 

get children2 request getchildren2request record string path watch get children2 request getchildren2request get children2 request getchildren2request string path watch path path watch watch string get path getpath path set path setpath string path get watch getwatch watch set watch setwatch watch serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write writebool watch watch end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path watch read readbool watch end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write writebool watch watch end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer get children2 request getchildren2request cast except classcastexcept compar differ type record get children2 request getchildren2request peer get children2 request getchildren2request peer peer ret ret path compar compareto peer path ret ret ret watch peer watch watch ret ret ret equal object peer peer peer peer get children2 request getchildren2request peer peer get children2 request getchildren2request peer get children2 request getchildren2request peer peer ret ret path equal peer path ret ret ret watch peer watch ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret watch result 37 result ret result string signatur get children2 request lgetchildren2request sz 

server connect repres connect from client server abstract server cnxn servercnxn stat watcher arbitrari object repres request issu aka own object object arrai list arraylist id auth info authinfo arrai list arraylist id client old version don send mode info reason old client doesn read result tcp rst packet connect reset peer old client isoldcli abstract get session timeout getsessiontimeout abstract close abstract send respons sendrespons repli header replyhead record string tag io except ioexcept notifi client session close close cleanup socket abstract send close session sendclosesess abstract process watch event watchedev event abstract get session id getsessionid abstract set session id setsessionid session id sessionid auth info cnxn return unmodify list list id get auth info getauthinfo collect unmodifi list unmodifiablelist auth info authinfo add auth info addauthinfo id id auth info authinfo contain id auth info authinfo add id remov auth info removeauthinfo id id auth info authinfo remov id abstract send buffer sendbuff buffer bytebuff close conn closeconn abstract enabl recv enablerecv abstract disabl recv disablerecv abstract set session timeout setsessiontimeout session timeout sessiontimeout zoo keeper sasl server zookeepersaslserv zoo keeper sasl server zookeepersaslserv close request except closerequestexcept io except ioexcept serial version uid serialversionuid 7854505709816442681l close request except closerequestexcept string msg msg end stream except endofstreamexcept io except ioexcept serial version uid serialversionuid 8255690282104294178l end stream except endofstreamexcept string msg msg string string tostr end stream except endofstreamexcept get messag getmessag href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command conf cmd confcmd buffer bytebuff wrap conf get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command con cmd conscmd buffer bytebuff wrap con get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command crst cmd crstcmd buffer bytebuff wrap crst get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command dump cmd dumpcmd buffer bytebuff wrap dump get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command envi cmd envicmd buffer bytebuff wrap envi get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command get trace mask cmd gettracemaskcmd buffer bytebuff wrap gtmk get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command ruok cmd ruokcmd buffer bytebuff wrap ruok get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command set trace mask cmd settracemaskcmd buffer bytebuff wrap stmk get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command srvr cmd srvrcmd buffer bytebuff wrap srvr get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command srst cmd srstcmd buffer bytebuff wrap srst get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command stat cmd statcmd buffer bytebuff wrap stat get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command wchc cmd wchccmd buffer bytebuff wrap wchc get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command wchp cmd wchpcmd buffer bytebuff wrap wchp get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command wch cmd wchscmd buffer bytebuff wrap wch get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command mntr cmd mntrcmd buffer bytebuff wrap mntr get byte getbyt get getint href doc root docroot doc zookeep admin zookeeperadmin html sc zk command sc zkcommand zk admin link command isro cmd isrocmd buffer bytebuff wrap isro get byte getbyt get getint hash map hashmap integ string cmd2 string cmd2string hash map hashmap integ string specifi command avail cmd2 string cmd2string put conf cmd confcmd conf cmd2 string cmd2string put con cmd conscmd con cmd2 string cmd2string put crst cmd crstcmd crst cmd2 string cmd2string put dump cmd dumpcmd dump cmd2 string cmd2string put envi cmd envicmd envi cmd2 string cmd2string put get trace mask cmd gettracemaskcmd gtmk cmd2 string cmd2string put ruok cmd ruokcmd ruok cmd2 string cmd2string put set trace mask cmd settracemaskcmd stmk cmd2 string cmd2string put srst cmd srstcmd srst cmd2 string cmd2string put srvr cmd srvrcmd srvr cmd2 string cmd2string put stat cmd statcmd stat cmd2 string cmd2string put wchc cmd wchccmd wchc cmd2 string cmd2string put wchp cmd wchpcmd wchp cmd2 string cmd2string put wch cmd wchscmd wch cmd2 string cmd2string put mntr cmd mntrcmd mntr cmd2 string cmd2string put isro cmd isrocmd isro packet receiv packetreceiv incr packet receiv incrpacketsreceiv server stat serverstat server stat serverstat server stat serverstat server stat serverstat server stat serverstat increment packet receiv incrementpacketsreceiv packet sent packets incr packet sent incrpacketss server stat serverstat server stat serverstat server stat serverstat server stat serverstat server stat serverstat increment packet sent incrementpacketss abstract server stat serverstat server stat serverstat date establish date atom atomiclong packet receiv packetsreceiv atom atomiclong atom atomiclong packet sent packetss atom atomiclong min latenc minlat max latenc maxlat string last op lastop last cxid lastcxid last zxid lastzxid last respons time lastresponsetim last latenc lastlat count total latenc totallat reset stat resetstat packet receiv packetsreceiv set packet sent packetss set min latenc minlat max valu max valu max latenc maxlat last op lastop na last cxid lastcxid last zxid lastzxid last respons time lastresponsetim last latenc lastlat count total latenc totallat incr packet receiv incrpacketsreceiv packet receiv packetsreceiv increment get incrementandget incr outstand request incroutstandingrequest request header requesthead incr packet sent incrpacketss packet sent packetss increment get incrementandget updat stat respons updatestatsforrespons cxid zxid string op start end don overwrit special xid interest client last real oper cxid last cxid lastcxid cxid last zxid lastzxid zxid last op lastop op last respons time lastresponsetim end elaps end start last latenc lastlat elaps elaps min latenc minlat min latenc minlat elaps elaps max latenc maxlat max latenc maxlat elaps count total latenc totallat elaps date get establish getestablish date establish clone abstract get outstand request getoutstandingrequest get packet receiv getpacketsreceiv packet receiv packetsreceiv valu longvalu get packet sent getpacketss packet sent packetss valu longvalu get min latenc getminlat min latenc minlat max valu max valu min latenc minlat get avg latenc getavglat count total latenc totallat count get max latenc getmaxlat max latenc maxlat string get last oper getlastoper last op lastop get last cxid getlastcxid last cxid lastcxid get last zxid getlastzxid last zxid lastzxid get last respons time getlastresponsetim last respons time lastresponsetim get last latenc getlastlat last latenc lastlat print detail stat inform connect dump connect info dumpconnectioninfo print writer printwrit brief stat overrid string string tostr string writer stringwrit sw string writer stringwrit print writer printwrit pwriter print writer printwrit sw dump connect info dumpconnectioninfo pwriter pwriter flush pwriter close sw string tostr abstract inet socket address inetsocketaddress get remot socket address getremotesocketaddress abstract get interest op getinterestop print inform connect param brief iff print brief detail otw full detail inform connect dump connect info dumpconnectioninfo print writer printwrit pwriter brief pwriter print pwriter print get remot socket address getremotesocketaddress pwriter print interest op interestop get interest op getinterestop pwriter print interest op interestop integ hex string tohexstr interest op interestop pwriter print queu pwriter print get outstand request getoutstandingrequest pwriter print recv pwriter print get packet receiv getpacketsreceiv pwriter print sent pwriter print get packet sent getpacketss brief session id sessionid get session id getsessionid session id sessionid pwriter print sid 0x pwriter print hex string tohexstr session id sessionid pwriter print lop pwriter print get last oper getlastoper pwriter print est pwriter print get establish getestablish get time gettim pwriter print pwriter print get session timeout getsessiontimeout last cxid lastcxid get last cxid getlastcxid last cxid lastcxid pwriter print lcxid 0x pwriter print hex string tohexstr last cxid lastcxid pwriter print lzxid 0x pwriter print hex string tohexstr get last zxid getlastzxid pwriter print lresp pwriter print get last respons time getlastresponsetim pwriter print llat pwriter print get last latenc getlastlat pwriter print minlat pwriter print get min latenc getminlat pwriter print avglat pwriter print get avg latenc getavglat pwriter print maxlat pwriter print get max latenc getmaxlat pwriter print 

close request except closerequestexcept io except ioexcept serial version uid serialversionuid 7854505709816442681l close request except closerequestexcept string msg msg 

end stream except endofstreamexcept io except ioexcept serial version uid serialversionuid 8255690282104294178l end stream except endofstreamexcept string msg msg string string tostr end stream except endofstreamexcept get messag getmessag 

test stand server zoo keeper server main test zookeeperservermaintest zk test zktestcas watcher logger log logger factori loggerfactori get logger getlogg zoo keeper server main test zookeeperservermaintest main thread mainthread thread file conf file conffil test zk main testzksmain main main thread mainthread client port clientport io except ioexcept standalon server client port clientport client port clientport file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir conf file conffil file tmp dir tmpdir zoo cfg file writer filewrit fwriter file writer filewrit conf file conffil fwriter write tick time ticktim 2000 fwriter write init limit initlimit 10 fwriter write sync limit synclimit file data dir datadir file tmp dir tmpdir data data dir datadir mkdir io except ioexcept unabl mkdir data dir datadir convert window path unix avoid problem string dir data dir datadir string tostr string osnam java lang get properti getproperti os name osnam lower tolowercas contain window dir dir replac fwriter write data dir datadir dir fwriter write client port clientport client port clientport fwriter flush fwriter close main test zk main testzksmain run string arg string arg conf file conffil string tostr main initi run initializeandrun arg except test fail even log ignor log error unexpect except run shutdown main shutdown test zk main testzksmain zoo keeper server main zookeeperservermain shutdown shutdown verifi abil start standalon server instanc test test standalon teststandalon except client base clientbas setup test env setuptestenv client port client port 3181 main thread mainthread main main thread mainthread client port client port main start asserttru wait server up client base clientbas wait server up waitforserverup 127 client port client port connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep 127 client port client port client base clientbas connect timeout connect timeout zk creat foo foobar get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist equal assertequ string zk get data getdata foo foobar zk close main shutdown asserttru wait server down client base clientbas wait server down waitforserverdown 127 client port client port client base clientbas connect timeout connect timeout process watch event watchedev event ignor test 

main thread mainthread thread file conf file conffil test zk main testzksmain main main thread mainthread client port clientport io except ioexcept standalon server client port clientport client port clientport file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir conf file conffil file tmp dir tmpdir zoo cfg file writer filewrit fwriter file writer filewrit conf file conffil fwriter write tick time ticktim 2000 fwriter write init limit initlimit 10 fwriter write sync limit synclimit file data dir datadir file tmp dir tmpdir data data dir datadir mkdir io except ioexcept unabl mkdir data dir datadir convert window path unix avoid problem string dir data dir datadir string tostr string osnam java lang get properti getproperti os name osnam lower tolowercas contain window dir dir replac fwriter write data dir datadir dir fwriter write client port clientport client port clientport fwriter flush fwriter close main test zk main testzksmain run string arg string arg conf file conffil string tostr main initi run initializeandrun arg except test fail even log ignor log error unexpect except run shutdown main shutdown 

test zk main testzksmain zoo keeper server main zookeeperservermain shutdown shutdown 

base protocol implement number higher level helper method work zoo keeper zookeep retri synchron oper connect zoo keeper zookeep close link retri oper retryoper zoo keeper oper zookeeperoper protocol support protocolsupport logger log logger factori loggerfactori get logger getlogg protocol support protocolsupport zoo keeper zookeep zookeep atom atomicboolean close atom atomicboolean retri delai retrydelai 500l retri count retrycount 10 list acl acl zoo def zoodef id open acl unsaf open acl unsaf protocol support protocolsupport zoo keeper zookeep zookeep zookeep zookeep close strategi releas zoo keeper zookeep resourc keep zoo keeper zookeep instanc open close close compar set compareandset close doclos zookeep client instanc zookeep client instanc zoo keeper zookeep get zookeep getzookeep zookeep acl acl list acl get acl getacl acl set acl param acl acl set set acl setacl list acl acl acl acl get retri delai millisecond retri delai get retri delai getretrydelai retri delai retrydelai set time wait retri delai param retri delai retrydelai retri delai set retri delai setretrydelai retri delai retrydelai retri delai retrydelai retri delai retrydelai allow deriv class perform custom close oper releas resourc close doclos perform oper retri connect fail object cast calle expect type object retri oper retryoper zoo keeper oper zookeeperoper oper keeper except keeperexcept interrupt except interruptedexcept keeper except keeperexcept except retri count retrycount oper execut keeper except keeperexcept session expir except sessionexpiredexcept log warn session expir zookeep reconnect keeper except keeperexcept connect loss except connectionlossexcept except except log debug attempt fail connect loss attempt reconnect retri delai retrydelai except ensur path exist data current acl flag param path ensur path exist ensurepathexist string path ensur exist ensureexist path acl creat mode createmod persist ensur path exist data acl flag param path param acl param flag ensur exist ensureexist string path data list acl acl creat mode createmod flag retri oper retryoper zoo keeper oper zookeeperoper execut keeper except keeperexcept interrupt except interruptedexcept stat stat zookeep exist path stat zookeep creat path data acl flag keeper except keeperexcept log warn caught interrupt except interruptedexcept log warn caught return protocol ha close protocol close close isclos close get perform retri delai first attempt param attempt count attemptcount number attempt perform retri delai retrydelai attempt count attemptcount attempt count attemptcount thread sleep attempt count attemptcount retri delai retrydelai interrupt except interruptedexcept log debug fail sleep 

follow bean mbean intefac implement follow bean followerbean zoo keeper server bean zookeeperserverbean follow mx bean followermxbean follow follow follow bean followerbean follow follow zoo keeper server zookeeperserv zk zk follow follow string get name getnam follow string get quorum address getquorumaddress follow sock string tostr string get last queu zxid getlastqueuedzxid 0x hex string tohexstr follow get last queu getlastqueu get pend revalid count getpendingrevalidationcount follow get pend revalid count getpendingrevalidationscount 

request processor requestprocessor match incom commit request local submit request trick local submit request chang state back incom commit request match up commit processor commitprocessor thread request processor requestprocessor logger log logger factori loggerfactori get logger getlogg commit processor commitprocessor request hold commit link list linkedlist request queu request queuedrequest link list linkedlist request request commit link list linkedlist request commit request committedrequest link list linkedlist request request processor requestprocessor next processor nextprocessor arrai list arraylist request process toprocess arrai list arraylist request flag wait respons back from leader let sync oper flow read flag commit processor commitprocessor leader pipelin match sync matchsync commit processor commitprocessor request processor requestprocessor next processor nextprocessor string id match sync matchsync commit processor commitprocessor id next processor nextprocessor next processor nextprocessor match sync matchsync match sync matchsync finish overrid run request next pend nextpend finish len process toprocess size len next processor nextprocessor process request processrequest process toprocess get process toprocess clear queu request queuedrequest size next pend nextpend commit request committedrequest size wait first check commit pend request queu request queuedrequest size next pend nextpend commit request committedrequest size request commit request committedrequest remov match next pend nextpend move next request commit us next pend nextpend ha cnxn member set properli next pend nextpend next pend nextpend session id sessionid session id sessionid next pend nextpend cxid cxid send version request pointer connect request next pend nextpend hdr hdr next pend nextpend txn txn next pend nextpend zxid zxid process toprocess add next pend nextpend next pend nextpend request from send commit packet process toprocess add haven match pend request back wait next pend nextpend process next request queu request queuedrequest next pend nextpend queu request queuedrequest size request request queu request queuedrequest remov request type op code opcod creat op code opcod delet op code opcod set data setdata op code opcod multi op code opcod set acl setacl op code opcod creat session createsess op code opcod close session closesess next pend nextpend request op code opcod sync match sync matchsync next pend nextpend request process toprocess add request process toprocess add request interrupt except interruptedexcept log warn interrupt except wait throwabl log error unexpect except caus commit processor commitprocessor exit log info commit processor commitprocessor exit loop commit request request finish request log warn commit except commit log debug enabl isdebugen log debug commit request request commit request committedrequest add request notifi notifyal process request processrequest request request request add rq rec addrqrec commit log debug enabl isdebugen log debug process request request finish queu request queuedrequest add request notifi notifyal shutdown log info shut down finish queu request queuedrequest clear notifi notifyal next processor nextprocessor next processor nextprocessor shutdown 

test znodenam node name test znodenametest test testcas test test order prefix testorderwithsameprefix except string name 11 string expect 11 order node name assertorderednodenam name expect test test order differ prefix testorderwithdifferentprefix except string name string expect order node name assertorderednodenam name expect order node name assertorderednodenam string name string expect size name length equal assertequ two arrai size name length expect length sort set sortedset node name znodenam node name nodenam tree set treeset node name znodenam string name name node name nodenam add node name znodenam name index node name znodenam node name nodenam node name nodenam string name node name nodenam get name getnam equal assertequ node index expect index name 

provid insight runtim environ environ string jaa conf kei jaa conf kei java secur auth login config entri string string entri string string string get kei getkei string get valu getvalu overrid string string tostr put arrai list arraylist entri string string add entri list entri list arrai list arraylist entri arrai list arraylist entri put zookeep version version get full version getfullvers put host name inet address inetaddress get local host getlocalhost get canon host name getcanonicalhostnam unknown host except unknownhostexcept put host name na put java version get properti getproperti java version na put java vendor get properti getproperti java vendor na put java home get properti getproperti java home na put java path get properti getproperti java path na put java librari path get properti getproperti java librari path na put java io tmpdir get properti getproperti java io tmpdir na put java compil get properti getproperti java compil na put os name get properti getproperti os name na put os arch get properti getproperti os arch na put os version get properti getproperti os version na put user name get properti getproperti user name na put user home get properti getproperti user home na put user dir get properti getproperti user dir na log env logenv string msg logger log list entri env environ list entri env log info msg string tostr 

entri string string entri string string string get kei getkei string get valu getvalu overrid string string tostr 

front end deseri act factori deseri record reader recordread input archiv inputarch archiv hash map hashmap archiv factori archivefactori archiv factori archivefactori hash map hashmap param input stream inputstream archiv factori archivefactori put binari binari input archiv binaryinputarch get declar method getdeclaredmethod get archiv getarch param archiv factori archivefactori put csv csv input archiv csvinputarch get declar method getdeclaredmethod get archiv getarch param archiv factori archivefactori put xml xml input archiv xmlinputarch get declar method getdeclaredmethod get archiv getarch param secur except securityexcept ex ex print stack trace printstacktrac method except nosuchmethodexcept ex ex print stack trace printstacktrac input archiv inputarch creat archiv createarch input stream inputstream string format io except ioexcept method factori method archiv factori archivefactori get format factori object param input archiv inputarch factori invok param illeg argument except illegalargumentexcept ex ex print stack trace printstacktrac invoc target except invocationtargetexcept ex ex print stack trace printstacktrac illeg access except illegalaccessexcept ex ex print stack trace printstacktrac creat instanc record reader recordread param stream from deseri record param format deseri format binari xml csv record reader recordread input stream inputstream string format io except ioexcept archiv creat archiv createarch format deseri record param record deseri read record io except ioexcept deseri archiv 

id record string scheme string id id id string scheme string id scheme scheme id id string get scheme getschem scheme set scheme setschem string scheme string get id getid id set id setid string id serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr scheme scheme write string writestr id id end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag scheme read string readstr scheme id read string readstr id end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr scheme scheme write string writestr id id end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer id cast except classcastexcept compar differ type record id peer id peer peer ret ret scheme compar compareto peer scheme ret ret ret id compar compareto peer id ret ret ret equal object peer peer peer peer id peer peer id peer id peer peer ret ret scheme equal peer scheme ret ret ret id equal peer id ret ret ret hash code hashcod result 17 ret ret scheme hash code hashcod result 37 result ret ret id hash code hashcod result 37 result ret result string signatur lid ss 

jfloat type jtype creat instanc jfloat jfloat tofloat string get signatur getsignatur string gen java hash code genjavahashcod string fname ret bit floattointbit fname 

quorum quota test quorumquotatest quorum base quorumbas logger log logger factori loggerfactori get logger getlogg quorum quota test quorumquotatest test test quota quorum testquotawithquorum except zoo keeper zookeep zk creat client createcli zk set data setdata get byte getbyt zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist 300 zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist zoo keeper main zookeepermain creat quota createquota zk 1000l 5000 string stat path statpath quota quota zookeep quotazookeep quota stat node statnod data zk get data getdata stat path statpath stat stat track statstrack st stat track statstrack string data asserttru byte set st get byte getbyt 1204l asserttru num count set st get count getcount 301 300 600 zk creat get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist data zk get data getdata stat path statpath stat st stat track statstrack string data asserttru byte set st get byte getbyt 2404l asserttru num count set st get count getcount 601 

session test sessiontest zk test zktestcas logger log logger factori loggerfactori get logger getlogg session test sessiontest string hostport 127 port assign portassign uniqu server cnxn factori servercnxnfactori server factori serverfactori count down latch countdownlatch start signal startsign file tmp dir tmpdir tick time tick time 3000 befor set up setup except tmp dir tmpdir tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zs zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir tick time tick time port integ pars parseint hostport split server factori serverfactori server cnxn factori servercnxnfactori creat factori createfactori port server factori serverfactori startup zs asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout after tear down teardown except server factori serverfactori shutdown asserttru wait server down client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout countdown watcher countdownwatch watcher count down latch countdownlatch client connect clientconnect count down latch countdownlatch process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect client connect clientconnect count down countdown disconnect zoo keeper disconnectablezookeep creat client createcli io except ioexcept interrupt except interruptedexcept countdown watcher countdownwatch watcher countdown watcher countdownwatch creat client createcli connect timeout connect timeout watcher disconnect zoo keeper disconnectablezookeep creat client createcli timeout io except ioexcept interrupt except interruptedexcept countdown watcher countdownwatch watcher countdown watcher countdownwatch creat client createcli timeout watcher disconnect zoo keeper disconnectablezookeep creat client createcli timeout countdown watcher countdownwatch watcher io except ioexcept interrupt except interruptedexcept disconnect zoo keeper disconnectablezookeep zk disconnect zoo keeper disconnectablezookeep hostport timeout watcher watcher client connect clientconnect await timeout time unit timeunit millisecond fail unabl connect server zk fixm test fail client close race condit fix separ patch zookeep 63 test check sessionid creat first zookeep client reus second on immidi after first client close client resu io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test session reus testsessionreus io except ioexcept interrupt except interruptedexcept zoo keeper zookeep zk creat client createcli session id sessionid zk get session id getsessionid passwd zk get session passwd getsessionpasswd zk close zk close log info close first session start signal startsign count down latch countdownlatch zk zoo keeper zookeep hostport connect timeout connect timeout session id sessionid passwd start signal startsign await log info open reus equal assertequ session id sessionid zk get session id getsessionid zk close watcher mywatch watcher string name watcher mywatch string name name name process watch event watchedev event log info name event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount start signal startsign count down countdown test verifi session id reus origin client disconnect session close server remov ephemer node creat origin session test test session testsess io except ioexcept interrupt except interruptedexcept keeper except keeperexcept disconnect zoo keeper disconnectablezookeep zk creat client createcli zk creat id open acl unsaf open acl unsaf creat mode createmod ephemer log info zk session id 0x hex string tohexstr zk get session id getsessionid destroi disconnect client kill socket send session disconnect server usual allow test verifi disconnect handl zk disconnect stat stat stat start signal startsign count down latch countdownlatch zk disconnect zoo keeper disconnectablezookeep hostport connect timeout connect timeout watcher mywatch test session testsess zk get session id getsessionid zk get session passwd getsessionpasswd start signal startsign await log info zk session id 0x hex string tohexstr zk get session id getsessionid creat zk get data getdata stat log info after get data zk close zk creat client createcli equal assertequ zk exist log info befor close zk session id 0x hex string tohexstr zk get session id getsessionid zk close zk get data getdata stat fail receiv session expir except sessionexpiredexcept keeper except keeperexcept session expir except sessionexpiredexcept async callback asynccallback data callback datacallback cb async callback asynccallback data callback datacallback string statu done process result processresult rc string object stat statu keeper except keeperexcept code get rc string tostr notifi string string tostr statu zk get data getdata cb cb cb string tostr equal done cb wait 1000 equal assertequ keeper except keeperexcept code sessionexpir string tostr cb string tostr list thread find thread findthread string name thread count threadcount thread activ count activecount thread thread thread thread count threadcount thread count threadcount thread enumer thread arrai list arraylist thread list arrai list arraylist thread thread count threadcount thread get name getnam index indexof name list add thread list make ephemer get clean up session time test test session timeout testsessiontimeout except timeout 5000 list thread befor etbefor find thread findthread event thread eventthread list thread st befor stbefor find thread findthread send thread sendthread disconnect zoo keeper disconnectablezookeep zk creat client createcli timeout zk creat stest id open acl unsaf open acl unsaf creat mode createmod ephemer find event send thread list thread after etaft find thread findthread event thread eventthread list thread st after stafter find thread findthread send thread sendthread thread event thread eventthread thread send thread sendthread thread after etaft befor etbefor contain event thread eventthread thread st after stafter st befor stbefor contain send thread sendthread send thread sendthread suspend zk disconnect thread sleep timeout send thread sendthread resum event thread eventthread join timeout assertfals event thread eventthread run event thread eventthread aliv isal zk creat client createcli timeout zk creat stest id open acl unsaf open acl unsaf creat mode createmod ephemer tear down teardown zk close zk disconnect set up setup zk creat client createcli timeout asserttru zk exist stest thread sleep timeout asserttru zk exist stest zk close make two connect session id io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test test session move testsessionmov except string host port hostport hostport split disconnect zoo keeper disconnectablezookeep zk disconnect zoo keeper disconnectablezookeep host port hostport connect timeout connect timeout watcher mywatch zk creat session move test sessionmovetest id open acl unsaf open acl unsaf creat mode createmod ephemer loop list twice host port hostport length zk dont reconnect dontreconnect stomp zk handl disconnect zoo keeper disconnectablezookeep zknew disconnect zoo keeper disconnectablezookeep host port hostport host port hostport length connect timeout connect timeout watcher mywatch integ string tostr zk get session id getsessionid zk get session passwd getsessionpasswd result result integ max valu max valu zknew sync async callback asynccallback callback voidcallback process result processresult rc string path object ctx result result rc result notifi result result integ max valu max valu result wait 5000 log info host port hostport host port hostport length sync return result asserttru result keeper except keeperexcept code valu intvalu zknew set data setdata zk set data setdata fail lost connect keeper except keeperexcept connect loss except connectionlossexcept log info connect loss except expect zk close zk zknew zk close test make duplic state chang commun client watcher exampl notifi state disconnect watch ha disconnect gener don dup state notif event type non commun event test test session state dup state report testsessionstatenodupstatereport io except ioexcept interrupt except interruptedexcept keeper except keeperexcept timeout 3000 dup watcher dupwatch watcher dup watcher dupwatch zoo keeper zookeep zk creat client createcli timeout watcher shutdown server server factori serverfactori shutdown thread sleep 10000 interrupt except interruptedexcept ignor verifi size connect disconnect client attempt reconnect handl current state correctli event duplic disconnect ll disconnect fail connect attempt equal assertequ watcher state size zk close verifi access negoti session timeout test test session timeout access testsessiontimeoutaccess except valid typic request negoti disconnect zoo keeper disconnectablezookeep zk creat client createcli tick time tick time equal assertequ tick time tick time zk get session timeout getsessiontimeout make tostr work case log info zk string tostr zk close log info zk string tostr valid lower limit zk creat client createcli tick time tick time equal assertequ tick time tick time zk get session timeout getsessiontimeout log info zk string tostr zk close log info zk string tostr valid upper limit zk creat client createcli tick time tick time 30 equal assertequ tick time tick time 20 zk get session timeout getsessiontimeout log info zk string tostr zk close log info zk string tostr dup watcher dupwatch countdown watcher countdownwatch link list linkedlist watch event watchedev state link list linkedlist watch event watchedev process watch event watchedev event process event event get type gettyp event type eventtyp state add event test test min max session timeout testminmaxsessiontimeout except overrid default minsess 20000 maxsess 240000 zoo keeper server zookeeperserv zs client base clientbas get server getserv server factori serverfactori zs set min session timeout setminsessiontimeout minsess zs set max session timeout setmaxsessiontimeout maxsess valid typic request negoti timeout 120000 disconnect zoo keeper disconnectablezookeep zk creat client createcli timeout equal assertequ timeout zk get session timeout getsessiontimeout make tostr work case log info zk string tostr zk close log info zk string tostr valid lower limit zk creat client createcli minsess equal assertequ minsess zk get session timeout getsessiontimeout log info zk string tostr zk close log info zk string tostr valid upper limit zk creat client createcli maxsess equal assertequ maxsess zk get session timeout getsessiontimeout log info zk string tostr zk close log info zk string tostr 

countdown watcher countdownwatch watcher count down latch countdownlatch client connect clientconnect count down latch countdownlatch process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect client connect clientconnect count down countdown 

fixm test fail client close race condit fix separ patch zookeep 63 test check sessionid creat first zookeep client reus second on immidi after first client close client resu io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test session reus testsessionreus io except ioexcept interrupt except interruptedexcept zoo keeper zookeep zk creat client createcli session id sessionid zk get session id getsessionid passwd zk get session passwd getsessionpasswd zk close zk close log info close first session start signal startsign count down latch countdownlatch zk zoo keeper zookeep hostport connect timeout connect timeout session id sessionid passwd start signal startsign await log info open reus equal assertequ session id sessionid zk get session id getsessionid zk close watcher mywatch watcher string name watcher mywatch string name name name process watch event watchedev event log info name event event get state getstat event get type gettyp event get path getpath event get state getstat keeper state keeperst sync connect syncconnect start signal startsign start signal startsign get count getcount start signal startsign count down countdown 

dup watcher dupwatch countdown watcher countdownwatch link list linkedlist watch event watchedev state link list linkedlist watch event watchedev process watch event watchedev event process event event get type gettyp event type eventtyp state add event 

test zk client session logic sessiontrack session tracker test sessiontrackertest zk test zktestcas session id sessionid 339900 session timeout sessiontimeout 3000 first processor firstprocessor first processor firstprocessor count down latch countdownlatch latch verifi creat session call leader request processor finalrequestprocessor after session expir test timeout 20000 test add session after session expiri testaddsessionaftersessionexpiri except zoo keeper server zookeeperserv zk setup session tracker setupsessiontrack latch count down latch countdownlatch zk session tracker sessiontrack add session addsess session id sessionid session timeout sessiontimeout session tracker impl sessiontrackerimpl session tracker impl sessiontrackerimpl session tracker impl sessiontrackerimpl zk session tracker sessiontrack session impl sessionimpl session impl sessionimpl session tracker impl sessiontrackerimpl session id sessionsbyid get session id sessionid assertnotnul sessionid session id sessionid doesn exist sessiontrack session impl sessionimpl verifi session exist object session owner sessionown object session tracker impl sessiontrackerimpl check session checksess session id sessionid session owner sessionown wait session expiri latch await session timeout sessiontimeout time unit timeunit millisecond simul request processor finalrequestprocessor logic creat session request ha delai reach request processor finalrequestprocessor here leader zk session tracker sessiontrack add session addsess id timeout session tracker impl sessiontrackerimpl add session addsess session id sessionid session timeout sessiontimeout session tracker impl sessiontrackerimpl check session checksess session id sessionid session owner sessionown fail session expiri except session ha expir close keeper except keeperexcept session expir except sessionexpiredexcept expect behaviour asserttru session didn expir session impl sessionimpl close isclos assertfals session didn expir session tracker impl sessiontrackerimpl touch session touchsess session id sessionid session timeout sessiontimeout equal assertequ duplic session expiri request ha gener first processor firstprocessor get count close session req getcountofclosesessionreq verifi session closur request ha reach prep request processor preprequestprocessor after session expir session tracker test timeout 20000 test close session request after session expiri testclosesessionrequestaftersessionexpiri except zoo keeper server zookeeperserv zk setup session tracker setupsessiontrack latch count down latch countdownlatch zk session tracker sessiontrack add session addsess session id sessionid session timeout sessiontimeout session tracker impl sessiontrackerimpl session tracker impl sessiontrackerimpl session tracker impl sessiontrackerimpl zk session tracker sessiontrack session impl sessionimpl session impl sessionimpl session tracker impl sessiontrackerimpl session id sessionsbyid get session id sessionid assertnotnul sessionid session id sessionid doesn exist sessiontrack session impl sessionimpl verifi session exist object session owner sessionown object session tracker impl sessiontrackerimpl check session checksess session id sessionid session owner sessionown wait session expiri latch await session timeout sessiontimeout time unit timeunit millisecond simul close session request remov session removesess execut op code opcod close session closesess session tracker impl sessiontrackerimpl remov session removesess session id sessionid session impl sessionimpl actual session actualsess session tracker impl sessiontrackerimpl session id sessionsbyid get session id sessionid assertnul session session id sessionid exist after remov actual session actualsess zoo keeper server zookeeperserv setup session tracker setupsessiontrack io except ioexcept file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 zk setup request processor setuprequestprocessor first processor firstprocessor first processor firstprocessor zk zk first processor firstprocessor first processor firstprocessor setup session tracker zk creat session tracker createsessiontrack zk start session tracker startsessiontrack zk mock processor us zookeep server first processor firstprocessor prep request processor preprequestprocessor count close session req countofclosesessionreq first processor firstprocessor zoo keeper server zookeeperserv zk request processor requestprocessor next processor nextprocessor zk next processor nextprocessor overrid process request processrequest request request check session close request request type op code opcod close session closesess latch count down countdown count close session req countofclosesessionreq number session expiri call get count close session req getcountofclosesessionreq count close session req countofclosesessionreq 

mock processor us zookeep server first processor firstprocessor prep request processor preprequestprocessor count close session req countofclosesessionreq first processor firstprocessor zoo keeper server zookeeperserv zk request processor requestprocessor next processor nextprocessor zk next processor nextprocessor overrid process request processrequest request request check session close request request type op code opcod close session closesess latch count down countdown count close session req countofclosesessionreq number session expiri call get count close session req getcountofclosesessionreq count close session req countofclosesessionreq 

max cnxn test maxcnxnstest client base clientbas num cnxn numcnxn 30 atom integ atomicinteg num connect numconnect atom integ atomicinteg string host port overrid set up setup except max cnxn maxcnxn num cnxn numcnxn set up setup cnxn thread cnxnthread thread socket channel socketchannel socket cnxn thread cnxnthread cnxn thread cnxnthread run futur unwari socket programm connect block requir accept server side assum socket connect end loop socket channel socketchannel channel schannel socket channel socketchannel open channel schannel connect inet socket address inetsocketaddress host port construct connect request connect request connectrequest req conreq connect request connectrequest 10000 password get byte getbyt arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao boa write writeint len req conreq serial boa connect bao close buffer bytebuff bb buffer bytebuff wrap bao arrai tobytearrai bb put putint bb capac bb rewind send connect request socket ha close least ad cnxn list server byte read get eof trick here find call caus server put byte input stream close cnxn four letter command creat session send back maintain connect eof channel schannel write bb socket time count fail server respond 10 channel schannel socket set timeout setsotimeout 10000 channel schannel socket close isclos eof channel schannel socket get input stream getinputstream read eof num connect numconnect increment get incrementandget io except ioexcept io connect reset peer verifi abil limit number concurr connect io except ioexcept interrupt except interruptedexcept test test max cnxn testmaxcnxn io except ioexcept interrupt except interruptedexcept string split host port hostport split host split port integ pars parseint split num thread numthread num cnxn numcnxn cnxn thread cnxnthread thread cnxn thread cnxnthread num thread numthread num cnxn numcnxn thread cnxn thread cnxnthread num cnxn numcnxn thread start num cnxn numcnxn thread join assertsam num cnxn numcnxn num connect numconnect get 

cnxn thread cnxnthread thread socket channel socketchannel socket cnxn thread cnxnthread cnxn thread cnxnthread run futur unwari socket programm connect block requir accept server side assum socket connect end loop socket channel socketchannel channel schannel socket channel socketchannel open channel schannel connect inet socket address inetsocketaddress host port construct connect request connect request connectrequest req conreq connect request connectrequest 10000 password get byte getbyt arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream binari output archiv binaryoutputarch boa binari output archiv binaryoutputarch get archiv getarch bao boa write writeint len req conreq serial boa connect bao close buffer bytebuff bb buffer bytebuff wrap bao arrai tobytearrai bb put putint bb capac bb rewind send connect request socket ha close least ad cnxn list server byte read get eof trick here find call caus server put byte input stream close cnxn four letter command creat session send back maintain connect eof channel schannel write bb socket time count fail server respond 10 channel schannel socket set timeout setsotimeout 10000 channel schannel socket close isclos eof channel schannel socket get input stream getinputstream read eof num connect numconnect increment get incrementandget io except ioexcept io connect reset peer 

rcc rcc constant rccconstant hashtabl rec tab rectab hashtabl string cur dir curdir get properti getproperti user dir string cur file name curfilenam string cur modul name curmodulenam main string arg string languag java arrai list arraylist rec file recfil arrai list arraylist file jfile cur file curfil arg length equal ignor equalsignorecas arg languag equal ignor equalsignorecas arg languag arg lower tolowercas rec file recfil add arg equal languag java equal languag equal languag println recogn languag languag exit rec file recfil size println record file specifi exit exit rec file recfil size cur file name curfilenam string rec file recfil get file file file cur file name curfilenam cur file curfil pars file parsefil file file found except filenotfoundexcept println file string rec file recfil get found exit pars except parseexcept println string tostr exit println string rec file recfil get pars successfulli cur file curfil gen code gencod languag file io except ioexcept println string tostr exit file jfile pars file parsefil file file file found except filenotfoundexcept pars except parseexcept cur dir curdir file get parent getpar cur file name curfilenam file get name getnam file reader fileread reader file reader fileread file rcc parser rcc reader rec tab rectab hashtabl parser input reader close io except ioexcept file jfile input pars except parseexcept arrai list arraylist ilist arrai list arraylist arrai list arraylist rlist arrai list arraylist file jfile arrai list arraylist label label jj ntk jj ntk jj ntk jj ntk jj ntk jj ntk includ tkn includ tkn includ ilist add modul tkn modul tkn modul rlist add addal jj la1 jj la1 jj gen jj gen jj consum token jj consum token pars except parseexcept jj ntk jj ntk jj ntk jj ntk jj ntk jj ntk modul tkn modul tkn includ tkn includ tkn jj la1 jj la1 jj gen jj gen label label jj consum token jj consum token file jfile cur file name curfilenam ilist rlist error miss statement function file jfile includ pars except parseexcept string fname token jj consum token jj consum token includ tkn includ tkn jj consum token jj consum token cstring tkn cstring tkn file jfile ret fname imag replac replaceal replac replaceal file file file cur dir curdir fname string tmp dir tmpdir cur dir curdir string tmp file tmpfile cur file name curfilenam cur dir curdir file get parent getpar cur file name curfilenam file get name getnam file reader fileread reader file reader fileread file rcc parser rcc reader ret parser input println fname pars successfulli pars except parseexcept println string tostr exit reader close io except ioexcept file found except filenotfoundexcept println file fname found exit cur dir curdir tmp dir tmpdir cur file name curfilenam tmp file tmpfile ret error miss statement function arrai list arraylist modul pars except parseexcept string name mname arrai list arraylist rlist jj consum token jj consum token modul tkn modul tkn name mname modul name modulenam cur modul name curmodulenam name mname jj consum token jj consum token lbrace tkn lbrace tkn rlist record list recordlist jj consum token jj consum token rbrace tkn rbrace tkn rlist error miss statement function string modul name modulenam pars except parseexcept string name token jj consum token jj consum token ident tkn ident tkn name imag label label jj ntk jj ntk jj ntk jj ntk jj ntk jj ntk dot tkn dot tkn jj la1 jj la1 jj gen jj gen label label jj consum token jj consum token dot tkn dot tkn jj consum token jj consum token ident tkn ident tkn name imag name error miss statement function arrai list arraylist record list recordlist pars except parseexcept arrai list arraylist rlist arrai list arraylist record jrecord label label record rlist add jj ntk jj ntk jj ntk jj ntk jj ntk jj ntk record tkn record tkn jj la1 jj la1 jj gen jj gen label label rlist error miss statement function record jrecord record pars except parseexcept string rname arrai list arraylist flist arrai list arraylist token field jfield jj consum token jj consum token record tkn record tkn jj consum token jj consum token ident tkn ident tkn rname imag jj consum token jj consum token lbrace tkn lbrace tkn label label field flist add jj consum token jj consum token semicolon tkn semicolon tkn jj ntk jj ntk jj ntk jj ntk jj ntk jj ntk tkn tkn tkn tkn tkn tkn tkn tkn tkn tkn tkn tkn ustr tkn ustr tkn buffer tkn buffer tkn vector tkn vector tkn map tkn map tkn ident tkn ident tkn jj la1 jj la1 jj gen jj gen label label jj consum token jj consum token rbrace tkn rbrace tkn string fqn cur modul name curmodulenam rname record jrecord record jrecord fqn flist rec tab rectab put fqn error miss statement function field jfield field pars except parseexcept type jtype jt token jt type jj consum token jj consum token ident tkn ident tkn field jfield jt imag error miss statement function type jtype type pars except parseexcept type jtype jt token string rname jj ntk jj ntk jj ntk jj ntk jj ntk jj ntk map tkn map tkn jt map jt vector tkn vector tkn jt vector jt tkn tkn jj consum token jj consum token tkn tkn jbyte tkn tkn jj consum token jj consum token tkn tkn jboolean tkn tkn jj consum token jj consum token tkn tkn jint tkn tkn jj consum token jj consum token tkn tkn jlong tkn tkn jj consum token jj consum token tkn tkn jfloat tkn tkn jj consum token jj consum token tkn tkn jdoubl ustr tkn ustr tkn jj consum token jj consum token ustr tkn ustr tkn string jstring buffer tkn buffer tkn jj consum token jj consum token buffer tkn buffer tkn buffer jbuffer ident tkn ident tkn rname modul name modulenam rname index indexof rname cur modul name curmodulenam rname record jrecord record jrecord rec tab rectab get rname println type rname known exit exit jj la1 jj la1 jj gen jj gen jj consum token jj consum token pars except parseexcept error miss statement function map jmap map pars except parseexcept type jtype jt1 type jtype jt2 jj consum token jj consum token map tkn map tkn jj consum token jj consum token lt tkn lt tkn jt1 type jj consum token jj consum token comma tkn comma tkn jt2 type jj consum token jj consum token gt tkn gt tkn map jmap jt1 jt2 error miss statement function vector jvector vector pars except parseexcept type jtype jt jj consum token jj consum token vector tkn vector tkn jj consum token jj consum token lt tkn lt tkn jt type jj consum token jj consum token gt tkn gt tkn vector jvector jt error miss statement function rcc token manag rcctokenmanag token sourc token sourc simpl stream simplecharstream jj input stream jj input stream token token jj nt jj nt jj ntk jj ntk jj gen jj gen jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 jj la1 x2800 0x2800 x2800 0x2800 x40000000 0x40000000 x1000 0x1000 xffc000 0xffc000 xffc000 0xffc000 jj la1 jj la1 jj la1 jj la1 x0 0x0 x0 0x0 x0 0x0 x0 0x0 x1 0x1 x1 0x1 rcc java io input stream inputstream stream stream rcc java io input stream inputstream stream string encod jj input stream jj input stream simpl stream simplecharstream stream encod java io unsupport encod except unsupportedencodingexcept runtim except runtimeexcept token sourc token sourc rcc token manag rcctokenmanag jj input stream jj input stream token token jj ntk jj ntk jj gen jj gen jj la1 jj la1 init reinit java io input stream inputstream stream init reinit stream init reinit java io input stream inputstream stream string encod jj input stream jj input stream init reinit stream encod java io unsupport encod except unsupportedencodingexcept runtim except runtimeexcept token sourc token sourc init reinit jj input stream jj input stream token token jj ntk jj ntk jj gen jj gen jj la1 jj la1 rcc java io reader stream jj input stream jj input stream simpl stream simplecharstream stream token sourc token sourc rcc token manag rcctokenmanag jj input stream jj input stream token token jj ntk jj ntk jj gen jj gen jj la1 jj la1 init reinit java io reader stream jj input stream jj input stream init reinit stream token sourc token sourc init reinit jj input stream jj input stream token token jj ntk jj ntk jj gen jj gen jj la1 jj la1 rcc rcc token manag rcctokenmanag tm token sourc token sourc tm token token jj ntk jj ntk jj gen jj gen jj la1 jj la1 init reinit rcc token manag rcctokenmanag tm token sourc token sourc tm token token jj ntk jj ntk jj gen jj gen jj la1 jj la1 token jj consum token jj consum token kind pars except parseexcept token old token oldtoken old token oldtoken token next token token next token token next token sourc token sourc get next token getnexttoken jj ntk jj ntk token kind kind jj gen jj gen token token old token oldtoken jj kind jj kind kind gener pars except generateparseexcept token get next token getnexttoken token next token token next token token next token sourc token sourc get next token getnexttoken jj ntk jj ntk jj gen jj gen token token get token gettoken index token token index next next next token sourc token sourc get next token getnexttoken jj ntk jj ntk jj nt jj nt token next jj ntk jj ntk token next token sourc token sourc get next token getnexttoken kind jj ntk jj ntk jj nt jj nt kind java util vector jj expentri jj expentri java util vector jj expentri jj expentri jj kind jj kind pars except parseexcept gener pars except generateparseexcept jj expentri jj expentri remov element removeallel la1 token la1token 33 33 la1 token la1token jj kind jj kind la1 token la1token jj kind jj kind jj kind jj kind jj la1 jj la1 jj gen jj gen 32 jj la1 jj la1 la1 token la1token jj la1 jj la1 la1 token la1token 32 33 la1 token la1token jj expentri jj expentri jj expentri jj expentri jj expentri jj expentri add element addel jj expentri jj expentri exptokseq jj expentri jj expentri size jj expentri jj expentri size exptokseq jj expentri jj expentri element elementat pars except parseexcept token exptokseq token imag tokenimag enabl trace enabl trace disabl trace disabl trace 

link zoo keeper zookeep automat retri call zookeep link keeper except keeperexcept connect loss except connectionlossexcept occur zoo keeper retri zookeeperretri zoo keeper zookeep close watcher watcher limit param connect string connectstr param session timeout sessiontimeout param watcher io except ioexcept zoo keeper retri zookeeperretri string connect string connectstr session timeout sessiontimeout watcher watcher io except ioexcept connect string connectstr session timeout sessiontimeout watcher watcher watcher param connect string connectstr param session timeout sessiontimeout param watcher param session id sessionid param session passwd sessionpasswd io except ioexcept zoo keeper retri zookeeperretri string connect string connectstr session timeout sessiontimeout watcher watcher session id sessionid session passwd sessionpasswd io except ioexcept connect string connectstr session timeout sessiontimeout watcher session id sessionid session passwd sessionpasswd watcher watcher overrid close interrupt except interruptedexcept close close overrid string creat string path data list acl acl creat mode createmod creat mode createmod keeper except keeperexcept interrupt except interruptedexcept count creat path data acl creat mode createmod keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect exist path path keeper except keeperexcept node exist except nodeexistsexcept path close limit count limit overrid delet string path version interrupt except interruptedexcept keeper except keeperexcept count delet path version keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect exist path keeper except keeperexcept node except nonodeexcept close limit count limit overrid stat exist string path watch keeper except keeperexcept interrupt except interruptedexcept count exist path watch watcher keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect close limit count limit overrid stat exist string path watcher watcher keeper except keeperexcept interrupt except interruptedexcept count exist path watcher keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect close limit count limit overrid list acl get acl getacl string path stat stat keeper except keeperexcept interrupt except interruptedexcept count get acl getacl path stat keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect close limit count limit overrid list string get children getchildren string path watch keeper except keeperexcept interrupt except interruptedexcept count get children getchildren path watch watcher keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect close limit count limit arrai list arraylist string overrid list string get children getchildren string path watcher watcher keeper except keeperexcept interrupt except interruptedexcept count get children getchildren path watcher keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect close limit count limit arrai list arraylist string overrid get data getdata string path watch stat stat keeper except keeperexcept interrupt except interruptedexcept count get data getdata path watch watcher stat keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect close limit count limit overrid get data getdata string path watcher watcher stat stat keeper except keeperexcept interrupt except interruptedexcept count get data getdata path watcher stat keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect close limit count limit overrid stat set acl setacl string path list acl acl version keeper except keeperexcept interrupt except interruptedexcept count set acl setacl path acl version keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect stat exist path get acl getacl path equal acl close limit count limit overrid stat set data setdata string path data version keeper except keeperexcept interrupt except interruptedexcept count set data setdata path data version keeper except keeperexcept connect loss except connectionlossexcept logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect stat exist path get data getdata path data close limit count limit param limit set retri limit setretrylimit limit limit limit successfulli connect zookeep test connect testconnect count exist except logger factori loggerfactori get logger getlogg warn zoo keeper zookeep connect lost reconnect count 

request processor requestprocessor log request disk batch request io effici request pass next request processor requestprocessor log ha sync disk sync request processor syncrequestprocessor thread request processor requestprocessor logger log logger factori loggerfactori get logger getlogg sync request processor syncrequestprocessor zoo keeper server zookeeperserv zk link block queue linkedblockingqueu request queu request queuedrequest link block queue linkedblockingqueu request request processor requestprocessor next processor nextprocessor thread snap process snapinprocess run transact written wait flush disk basic list sync item syncitem callback invok after flush return successfulli link list linkedlist request flush toflush link list linkedlist request random random nano time nanotim number log entri log befor start snapshot snap count snapcount zoo keeper server zookeeperserv get snap count getsnapcount request request death requestofdeath request request death requestofdeath sync request processor syncrequestprocessor zoo keeper server zookeeperserv zk request processor requestprocessor next processor nextprocessor sync thread syncthread zk get server id getserverid zk zk next processor nextprocessor next processor nextprocessor run us test check chang snapcount param count set snap count setsnapcount count snap count snapcount count us test get snapcount snapcount get snap count getsnapcount snap count snapcount overrid run log count logcount attempt ensur server ensembl snapshot time rand roll randrol next nextint snap count snapcount request si flush toflush empti isempti si queu request queuedrequest si queu request queuedrequest poll si flush flush toflush si request death requestofdeath si track number record written log zk get zk databas getzkdatabas append si log count logcount log count logcount snap count snapcount rand roll randrol rand roll randrol next nextint snap count snapcount roll log zk get zk databas getzkdatabas roll log rolllog snapshot snap process snapinprocess snap process snapinprocess aliv isal log warn busi snap skip snap process snapinprocess thread snapshot thread run zk snapshot takesnapshot except log warn unexpect except snap process snapinprocess start log count logcount flush toflush empti isempti optim read heavi workload iff read pend flush write pass next processor next processor nextprocessor process request processrequest si next processor nextprocessor flushabl flushabl next processor nextprocessor flush flush toflush add si flush toflush size 1000 flush flush toflush throwabl log error sever unrecover error exit run exit 11 log info sync request processor syncrequestprocessor exit flush link list linkedlist request flush toflush io except ioexcept request processor except requestprocessorexcept flush toflush empti isempti zk get zk databas getzkdatabas commit flush toflush empti isempti request flush toflush remov next processor nextprocessor process request processrequest next processor nextprocessor flushabl flushabl next processor nextprocessor flush shutdown log info shut down queu request queuedrequest add request death requestofdeath run join interrupt except interruptedexcept log warn interrupt wate finish next processor nextprocessor shutdown process request processrequest request request request add rq rec addrqrec sync queu request queuedrequest add request 

request processor requestprocessor forward request modifi state leader follow request processor followerrequestprocessor thread request processor requestprocessor logger log logger factori loggerfactori get logger getlogg follow request processor followerrequestprocessor follow zoo keeper server followerzookeeperserv zk request processor requestprocessor next processor nextprocessor link block queue linkedblockingqueu request queu request queuedrequest link block queue linkedblockingqueu request finish follow request processor followerrequestprocessor follow zoo keeper server followerzookeeperserv zk request processor requestprocessor next processor nextprocessor follow request processor followerrequestprocessor zk get server id getserverid zk zk next processor nextprocessor next processor nextprocessor overrid run finish request request queu request queuedrequest log trace enabl istraceen zoo trace zootrac log request logrequest log zoo trace zootrac client request trace mask client request trace mask request request request request death requestofdeath queue request process befor submit request leader readi receiv respons next processor nextprocessor process request processrequest request ship request leader quorum oper sync follow code path differ from keep track sync oper follow ha pend add pend sync pendingsync request type op code opcod sync zk pend sync pendingsync add request zk get follow getfollow request request op code opcod creat op code opcod delet op code opcod set data setdata op code opcod set acl setacl op code opcod creat session createsess op code opcod close session closesess op code opcod multi zk get follow getfollow request request except log error unexpect except caus exit log info follow request processor followerrequestprocessor exit loop process request processrequest request request finish queu request queuedrequest add request shutdown log info shut down finish queu request queuedrequest clear queu request queuedrequest add request request death requestofdeath next processor nextprocessor shutdown 

handl commun client nio on client on thread commun nio server cnxn nioservercnxn server cnxn servercnxn logger log logger factori loggerfactori get logger getlogg nio server cnxn nioservercnxn nio server cnxn factori nioservercnxnfactori factori socket channel socketchannel sock select kei selectionkei sk initi buffer bytebuff len buffer lenbuff buffer bytebuff alloc buffer bytebuff incom buffer incomingbuff len buffer lenbuff link block queue linkedblockingqueu buffer bytebuff outgo buffer outgoingbuff link block queue linkedblockingqueu buffer bytebuff session timeout sessiontimeout zoo keeper server zookeeperserv zk server zkserver number request submit respond outstand request outstandingrequest id uniqu identifi session client session longer activ ephemer node awai session id sessionid next session id nextsessionid outstand limit outstandinglimit nio server cnxn nioservercnxn zoo keeper server zookeeperserv zk socket channel socketchannel sock select kei selectionkei sk nio server cnxn factori nioservercnxnfactori factori io except ioexcept zk server zkserver zk sock sock sk sk factori factori factori login zoo keeper sasl server zookeepersaslserv zoo keeper sasl server zookeepersaslserv factori login zk outstand limit outstandinglimit zk get global outstand limit getglobaloutstandinglimit sock socket set tcp delai settcpnodelai set socket linger socket close block sock socket set linger setsoling inet address inetaddress addr inet socket address inetsocketaddress sock socket get remot socket address getremotesocketaddress get address getaddress auth info authinfo add id ip addr get host address gethostaddress sk interest op interestop select kei selectionkei op read op read send close connect packet client io doio eventu close underli machineri socket selectorkei send close session sendclosesess send buffer sendbuff server cnxn factori servercnxnfactori close conn closeconn send buffer asynchron call selector close socket param bb send buffer sync sendbuffersync buffer bytebuff bb configur socket block dont write tight loop sock configur block configureblock bb server cnxn factori servercnxnfactori close conn closeconn sock sock write bb packet sent packets io except ioexcept log error error send data synchron send buffer sendbuff buffer bytebuff bb bb server cnxn factori servercnxnfactori close conn closeconn check write interest here set queu send buffer right awai wake up selector sk interest op interestop select kei selectionkei op write op write sock write bb io except ioexcept best effort right left send done bb remain packet sent packets factori sk selector wakeup log trace enabl istraceen log trace add buffer outgo buffer outgoingbuff sk sk valid sk valid isvalid outgo buffer outgoingbuff add bb sk valid isvalid sk interest op interestop sk interest op interestop select kei selectionkei op write op write except log error unexpect except read request payload follow length prefix read payload readpayload io except ioexcept interrupt except interruptedexcept incom buffer incomingbuff remain read length byte rc sock read incom buffer incomingbuff sock non block rc end stream except endofstreamexcept unabl read addit data from client sessionid 0x hex string tohexstr session id sessionid client ha close socket incom buffer incomingbuff remain read length byte packet receiv packetreceiv incom buffer incomingbuff flip initi read connect request readconnectrequest read request readrequest len buffer lenbuff clear incom buffer incomingbuff len buffer lenbuff io doio select kei selectionkei interrupt except interruptedexcept sock log warn socket session 0x hex string tohexstr session id sessionid readabl isread rc sock read incom buffer incomingbuff rc end stream except endofstreamexcept unabl read addit data from client sessionid 0x hex string tohexstr session id sessionid client ha close socket incom buffer incomingbuff remain payload ispayload incom buffer incomingbuff len buffer lenbuff start next request incom buffer incomingbuff flip payload ispayload read length readlength incom buffer incomingbuff clear continu payload ispayload payload ispayload letterword 4letterword read payload readpayload four letter word care writabl iswrit zoo log zoolog log trace messag logtracemessag log zoo log zoolog client data packet trace mask client data packet trace mask outgo buffer outgoingbuff size outgo buffer outgoingbuff size outgo buffer outgoingbuff size zoo log zoolog log trace messag logtracemessag log zoo log zoolog client data packet trace mask client data packet trace mask sk valid valid isvalid reset buffer posit limit size buffer fill data from non direct buffer send buffer bytebuff direct buffer directbuff factori direct buffer directbuff direct buffer directbuff clear buffer bytebuff outgo buffer outgoingbuff direct buffer directbuff remain remain call put direct buffer directbuff small hold copi ve slice buffer big buffer bytebuff slice limit direct buffer directbuff remain put modifi posit buffer put don chang posit sourc buffer ll after send need save reset posit after copi posit direct buffer directbuff put posit direct buffer directbuff remain flip limit posit posit get set set up write direct buffer directbuff flip sent sock write direct buffer directbuff buffer bytebuff bb remov buffer sent outgo buffer outgoingbuff size bb outgo buffer outgoingbuff peek bb server cnxn factori servercnxnfactori close conn closeconn close request except closerequestexcept close request left bb remain sent left partial sent buffer updat posit exit loop bb posit bb posit sent packet sent packets ve sent buffer drop buffer sent bb remain outgo buffer outgoingbuff remov zoo log zoolog log trace messag logtracemessag log zoo log zoolog client data packet trace mask client data packet trace mask after send outgo buffer outgoingbuff size outgo buffer outgoingbuff size factori outgo buffer outgoingbuff size initi sk interest op interestop select kei selectionkei op read op read close request except closerequestexcept respond info probe sk interest op interestop sk interest op interestop select kei selectionkei op write op write sk interest op interestop sk interest op interestop select kei selectionkei op write op write cancel kei except cancelledkeyexcept log warn except caus close session 0x hex string tohexstr session id sessionid log debug enabl isdebugen log debug cancel kei except cancelledkeyexcept stack trace close close request except closerequestexcept expect close log session closur close end stream except endofstreamexcept log warn caught end stream except user expect close log session closur close io except ioexcept log warn except caus close session 0x hex string tohexstr session id sessionid log debug enabl isdebugen log debug io except ioexcept stack trace close read request readrequest io except ioexcept zk server zkserver process packet processpacket incom buffer incomingbuff incr outstand request incroutstandingrequest request header requesthead get xid getxid outstand request outstandingrequest factori check throttl zk server zkserver get process getinprocess outstand limit outstandinglimit log debug enabl isdebugen log debug throttl recv zk server zkserver get process getinprocess disabl recv disablerecv follow line need read enabl recv enablerecv disabl recv disablerecv sk interest op interestop sk interest op interestop select kei selectionkei op read op read enabl recv enablerecv factori sk selector wakeup sk valid isvalid interest sk interest op interestop interest select kei selectionkei op read op read sk interest op interestop interest select kei selectionkei op read op read read connect request readconnectrequest io except ioexcept interrupt except interruptedexcept zk server zkserver io except ioexcept zoo keeper server zookeeperserv run zk server zkserver process connect request processconnectrequest incom buffer incomingbuff initi clean up socket relat command make flush data befor param pwriter pwriter command socket cleanup writer socket cleanupwritersocket print writer printwrit pwriter pwriter pwriter flush pwriter close except log info error close print writer printwrit close except log error error close command socket wrap send buffer sendbuff method nio server cnxn nioservercnxn respons chunk up respons client con ing up respons fulli memori larg command chunk up result send buffer writer sendbufferwrit writer string buffer stringbuff sb string buffer stringbuff check readi send chunk param forc forc send even full chunk check flush checkflush forc forc sb length sb length 2048 send buffer sync sendbuffersync buffer bytebuff wrap sb string tostr get byte getbyt clear intern buffer sb set length setlength overrid close io except ioexcept sb check flush checkflush sb clear ref ensur reus overrid flush io except ioexcept check flush checkflush overrid write cbuf len io except ioexcept sb append cbuf len check flush checkflush string zk serv zk serv zoo keeper zookeep instanc current serv request set thread commmand port letter command run thread map letter command command thread commandthread abstract from inherit abstract command thread commandthread thread print writer printwrit pw command thread commandthread print writer printwrit pw pw pw run command run commandrun io except ioexcept log error error run command cleanup writer socket cleanupwritersocket pw abstract command run commandrun io except ioexcept ruok command ruokcommand command thread commandthread ruok command ruokcommand print writer printwrit pw pw overrid command run commandrun pw print imok trace mask command tracemaskcommand command thread commandthread trace mask command tracemaskcommand print writer printwrit pw pw overrid command run commandrun trace mask tracemask zoo trace zootrac get text trace level gettexttracelevel pw print trace mask tracemask set trace mask command settracemaskcommand command thread commandthread trace set trace mask command settracemaskcommand print writer printwrit pw trace pw trace trace overrid command run commandrun pw print trace env command envcommand command thread commandthread env command envcommand print writer printwrit pw pw overrid command run commandrun list environ entri env environ list pw println environ environ entri env pw print get kei getkei pw print pw println get valu getvalu conf command confcommand command thread commandthread conf command confcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver dump conf dumpconf pw stat reset command statresetcommand command thread commandthread stat reset command statresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver server stat serverstat reset pw println server stat reset cnxn stat reset command cnxnstatresetcommand command thread commandthread cnxn stat reset command cnxnstatresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv factori cnxn server cnxn servercnxn factori cnxn reset stat resetstat pw println connect stat reset dump command dumpcommand command thread commandthread dump command dumpcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv pw println session tracker sessiontrack dump zk server zkserver session tracker sessiontrack dump session dumpsess pw pw println ephemer node dump zk server zkserver dump ephemer dumpephemer pw stat command statcommand command thread commandthread len stat command statcommand print writer printwrit pw len pw len len suppress warn suppresswarn uncheck overrid command run commandrun zk server zkserver pw println zk serv zk serv pw print zookeep version pw println version get full version getfullvers zk server zkserver read zoo keeper server readonlyzookeeperserv pw println read mode serv read client len stat cmd statcmd log info stat command output pw println client clone faster iter up cnxn lock faster hash set hashset nio server cnxn nioservercnxn cnxnset factori cnxn cnxnset hash set hashset nio server cnxn nioservercnxn factori cnxn clone nio server cnxn nioservercnxn cnxnset dump connect info dumpconnectioninfo pw pw println pw println pw print zk server zkserver server stat serverstat string tostr pw print node count pw println zk server zkserver get zk databas getzkdatabas get node count getnodecount con command conscommand command thread commandthread con command conscommand print writer printwrit pw pw suppress warn suppresswarn uncheck overrid command run commandrun zk server zkserver pw println zk serv zk serv clone faster iter up cnxn lock faster hash set hashset nio server cnxn nioservercnxn cnxn factori cnxn cnxn hash set hashset nio server cnxn nioservercnxn factori cnxn clone nio server cnxn nioservercnxn cnxn dump connect info dumpconnectioninfo pw pw println pw println watch command watchcommand command thread commandthread len watch command watchcommand print writer printwrit pw len pw len len overrid command run commandrun zk server zkserver pw println zk serv zk serv data tree datatre dt zk server zkserver get zk databas getzkdatabas get data tree getdatatre len wch cmd wchscmd dt dump watch summari dumpwatchessummari pw len wchp cmd wchpcmd dt dump watch dumpwatch pw dt dump watch dumpwatch pw pw println monitor command monitorcommand command thread commandthread monitor command monitorcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk databas zkdatabas zkdb zk server zkserver get zk databas getzkdatabas server stat serverstat stat zk server zkserver server stat serverstat print version version get full version getfullvers print avg latenc avg latenc stat get avg latenc getavglat print max latenc max latenc stat get max latenc getmaxlat print min latenc min latenc stat get min latenc getminlat print packet receiv packet receiv stat get packet receiv getpacketsreceiv print packet sent packet sent stat get packet sent getpacketss print num aliv connect num aliv connect stat get num aliv client connect getnumaliveclientconnect print outstand request outstand request stat get outstand request getoutstandingrequest print server state server state stat get server state getserverst print znode count znode count zkdb get node count getnodecount print watch count watch count zkdb get data tree getdatatre get watch count getwatchcount print ephemer count ephemer count zkdb get data tree getdatatre get ephemer count getephemeralscount print approxim data size approxim data size zkdb get data tree getdatatre approxim data size approximatedatas oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean print open file descriptor count open file descriptor count unixo get open file descriptor count getopenfiledescriptorcount print max file descriptor count max file descriptor count unixo get max file descriptor count getmaxfiledescriptorcount stat get server state getserverst equal leader leader leader leader zoo keeper server leaderzookeeperserv zk server zkserver get leader getlead print follow leader get learner getlearn size print sync follow sync follow leader get forward follow getforwardingfollow size print pend sync pend sync leader get num pend sync getnumpendingsync print string kei number print kei number print string kei string valu pw print zk zk pw print kei pw print pw println valu isro command isrocommand command thread commandthread isro command isrocommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw print zk server zkserver read zoo keeper server readonlyzookeeperserv pw print ro pw print rw four letter word found respond otw check four letter word checkfourletterword select kei selectionkei len io except ioexcept advantag limit size length cmd byte fit insid string cmd cmd2 string cmd2string get len cmd log info process cmd command from sock socket get remot socket address getremotesocketaddress packet receiv packetreceiv cancel select kei remov socket handl from selector prevent netcat problem netcat immedi close send side after send command keep receiv channel open idea remov selectionkei from selector selector notic close read socket channel keep socket aliv write data make close socket after done write data cancel except log error error cancel command select kei print writer printwrit pwriter print writer printwrit buffer writer bufferedwrit send buffer writer sendbufferwrit len ruok cmd ruokcmd ruok command ruokcommand ruok ruok command ruokcommand pwriter ruok start len get trace mask cmd gettracemaskcmd trace mask command tracemaskcommand tmask trace mask command tracemaskcommand pwriter tmask start len set trace mask cmd settracemaskcmd rc sock read incom buffer incomingbuff rc io except ioexcept read error incom buffer incomingbuff flip trace mask tracemask incom buffer incomingbuff get getlong zoo trace zootrac set text trace level settexttracelevel trace mask tracemask set trace mask command settracemaskcommand set mask setmask set trace mask command settracemaskcommand pwriter trace mask tracemask set mask setmask start len envi cmd envicmd env command envcommand env env command envcommand pwriter env start len conf cmd confcmd conf command confcommand ccmd conf command confcommand pwriter ccmd start len srst cmd srstcmd stat reset command statresetcommand strst stat reset command statresetcommand pwriter strst start len crst cmd crstcmd cnxn stat reset command cnxnstatresetcommand crst cnxn stat reset command cnxnstatresetcommand pwriter crst start len dump cmd dumpcmd dump command dumpcommand dump dump command dumpcommand pwriter dump start len stat cmd statcmd len srvr cmd srvrcmd stat command statcommand stat stat command statcommand pwriter len stat start len con cmd conscmd con command conscommand con con command conscommand pwriter con start len wchp cmd wchpcmd len wchc cmd wchccmd len wch cmd wchscmd watch command watchcommand wcmd watch command watchcommand pwriter len wcmd start len mntr cmd mntrcmd monitor command monitorcommand mntr monitor command monitorcommand pwriter mntr start len isro cmd isrocmd isro command isrocommand isro isro command isrocommand pwriter isro start read first byte len buffer lenbuff length four letter word param select kei length read otw wasn length io except ioexcept buffer size exce max buffer maxbuff size read length readlength select kei selectionkei io except ioexcept read length get buffer len len buffer lenbuff get getint initi check four letter word checkfourletterword sk len len len binari input archiv binaryinputarch max buffer maxbuff io except ioexcept len error len zk server zkserver io except ioexcept zoo keeper server zookeeperserv run incom buffer incomingbuff buffer bytebuff alloc len get outstand request getoutstandingrequest factori outstand request outstandingrequest non javadoc org apach zookeep server server cnxn ifac servercnxnifac get session timeout getsessiontimeout get session timeout getsessiontimeout session timeout sessiontimeout overrid string string tostr nio server cnxn nioservercnxn object sock sock sk sk close cnxn remov from factori cnxn list function return immedi cnxn cnxn list overrid close factori cnxn cnxn close factori cnxn remov factori ip map ipmap set nio server cnxn nioservercnxn factori ip map ipmap get sock socket get inet address getinetaddress remov factori unregist connect unregisterconnect zk server zkserver zk server zkserver remov cnxn removecnxn close sock closesock sk cancel select kei from selector sk cancel except log debug enabl isdebugen log debug ignor except selectionkei cancel close resourc associ sock cnxn close sock closesock sock log info close socket connect client sock socket get remot socket address getremotesocketaddress session id sessionid sessionid 0x hex string tohexstr session id sessionid session establish client follow sequenc code stupid sock close need ala doesn work sock close case socket doesn close sock socket shutdown output shutdownoutput io except ioexcept common except avoid log debug enabl isdebugen log debug ignor except output shutdown sock socket shutdown input shutdowninput io except ioexcept common except avoid log debug enabl isdebugen log debug ignor except input shutdown sock socket close io except ioexcept log debug enabl isdebugen log debug ignor except socket close sock close xxx next line doesn need post forum suggest need keep mind error section aris factori selector wakeup io except ioexcept log debug enabl isdebugen log debug ignor except socketchannel close sock four byte fourbyt non javadoc org apach zookeep server server cnxn ifac servercnxnifac send respons sendrespons org apach zookeep proto repli header replyhead org apach jute record java lang string overrid send respons sendrespons repli header replyhead record string tag arrai output stream bytearrayoutputstream bao arrai output stream bytearrayoutputstream make space length binari output archiv binaryoutputarch bo binari output archiv binaryoutputarch get archiv getarch bao bao write four byte fourbyt bo write record writerecord header bo write record writerecord tag bao close io except ioexcept log error error serial respons bao arrai tobytearrai buffer bytebuff bb buffer bytebuff wrap bb put putint length rewind send buffer sendbuff bb get xid getxid outstand request outstandingrequest check throttl factori zk server zkserver get process getinprocess outstand limit outstandinglimit outstand request outstandingrequest sk selector wakeup enabl recv enablerecv except log warn unexpect except destruct avert non javadoc org apach zookeep server server cnxn ifac servercnxnifac process org apach zookeep proto watcher event watcherev overrid process watch event watchedev event repli header replyhead repli header replyhead 1l log trace enabl istraceen zoo trace zootrac log trace messag logtracemessag log zoo trace zootrac event deliveri trace mask event deliveri trace mask deliv event event 0x hex string tohexstr session id sessionid convert watch event watchedev type sent wire watcher event watcherev event get wrapper getwrapp send respons sendrespons notif non javadoc org apach zookeep server server cnxn ifac servercnxnifac get session id getsessionid overrid get session id getsessionid session id sessionid overrid set session id setsessionid session id sessionid session id sessionid session id sessionid overrid set session timeout setsessiontimeout session timeout sessiontimeout session timeout sessiontimeout session timeout sessiontimeout overrid get interest op getinterestop sk valid isvalid sk interest op interestop overrid inet socket address inetsocketaddress get remot socket address getremotesocketaddress sock inet socket address inetsocketaddress sock socket get remot socket address getremotesocketaddress overrid server stat serverstat server stat serverstat zk server zkserver zk server zkserver server stat serverstat 

wrap send buffer sendbuff method nio server cnxn nioservercnxn respons chunk up respons client con ing up respons fulli memori larg command chunk up result send buffer writer sendbufferwrit writer string buffer stringbuff sb string buffer stringbuff check readi send chunk param forc forc send even full chunk check flush checkflush forc forc sb length sb length 2048 send buffer sync sendbuffersync buffer bytebuff wrap sb string tostr get byte getbyt clear intern buffer sb set length setlength overrid close io except ioexcept sb check flush checkflush sb clear ref ensur reus overrid flush io except ioexcept check flush checkflush overrid write cbuf len io except ioexcept sb append cbuf len check flush checkflush 

set thread commmand port letter command run thread map letter command command thread commandthread abstract from inherit abstract command thread commandthread thread print writer printwrit pw command thread commandthread print writer printwrit pw pw pw run command run commandrun io except ioexcept log error error run command cleanup writer socket cleanupwritersocket pw abstract command run commandrun io except ioexcept 

ruok command ruokcommand command thread commandthread ruok command ruokcommand print writer printwrit pw pw overrid command run commandrun pw print imok 

trace mask command tracemaskcommand command thread commandthread trace mask command tracemaskcommand print writer printwrit pw pw overrid command run commandrun trace mask tracemask zoo trace zootrac get text trace level gettexttracelevel pw print trace mask tracemask 

set trace mask command settracemaskcommand command thread commandthread trace set trace mask command settracemaskcommand print writer printwrit pw trace pw trace trace overrid command run commandrun pw print trace 

env command envcommand command thread commandthread env command envcommand print writer printwrit pw pw overrid command run commandrun list environ entri env environ list pw println environ environ entri env pw print get kei getkei pw print pw println get valu getvalu 

conf command confcommand command thread commandthread conf command confcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver dump conf dumpconf pw 

stat reset command statresetcommand command thread commandthread stat reset command statresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk server zkserver server stat serverstat reset pw println server stat reset 

cnxn stat reset command cnxnstatresetcommand command thread commandthread cnxn stat reset command cnxnstatresetcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv factori cnxn server cnxn servercnxn factori cnxn reset stat resetstat pw println connect stat reset 

dump command dumpcommand command thread commandthread dump command dumpcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv pw println session tracker sessiontrack dump zk server zkserver session tracker sessiontrack dump session dumpsess pw pw println ephemer node dump zk server zkserver dump ephemer dumpephemer pw 

stat command statcommand command thread commandthread len stat command statcommand print writer printwrit pw len pw len len suppress warn suppresswarn uncheck overrid command run commandrun zk server zkserver pw println zk serv zk serv pw print zookeep version pw println version get full version getfullvers zk server zkserver read zoo keeper server readonlyzookeeperserv pw println read mode serv read client len stat cmd statcmd log info stat command output pw println client clone faster iter up cnxn lock faster hash set hashset nio server cnxn nioservercnxn cnxnset factori cnxn cnxnset hash set hashset nio server cnxn nioservercnxn factori cnxn clone nio server cnxn nioservercnxn cnxnset dump connect info dumpconnectioninfo pw pw println pw println pw print zk server zkserver server stat serverstat string tostr pw print node count pw println zk server zkserver get zk databas getzkdatabas get node count getnodecount 

con command conscommand command thread commandthread con command conscommand print writer printwrit pw pw suppress warn suppresswarn uncheck overrid command run commandrun zk server zkserver pw println zk serv zk serv clone faster iter up cnxn lock faster hash set hashset nio server cnxn nioservercnxn cnxn factori cnxn cnxn hash set hashset nio server cnxn nioservercnxn factori cnxn clone nio server cnxn nioservercnxn cnxn dump connect info dumpconnectioninfo pw pw println pw println 

watch command watchcommand command thread commandthread len watch command watchcommand print writer printwrit pw len pw len len overrid command run commandrun zk server zkserver pw println zk serv zk serv data tree datatre dt zk server zkserver get zk databas getzkdatabas get data tree getdatatre len wch cmd wchscmd dt dump watch summari dumpwatchessummari pw len wchp cmd wchpcmd dt dump watch dumpwatch pw dt dump watch dumpwatch pw pw println 

monitor command monitorcommand command thread commandthread monitor command monitorcommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw println zk serv zk serv zk databas zkdatabas zkdb zk server zkserver get zk databas getzkdatabas server stat serverstat stat zk server zkserver server stat serverstat print version version get full version getfullvers print avg latenc avg latenc stat get avg latenc getavglat print max latenc max latenc stat get max latenc getmaxlat print min latenc min latenc stat get min latenc getminlat print packet receiv packet receiv stat get packet receiv getpacketsreceiv print packet sent packet sent stat get packet sent getpacketss print num aliv connect num aliv connect stat get num aliv client connect getnumaliveclientconnect print outstand request outstand request stat get outstand request getoutstandingrequest print server state server state stat get server state getserverst print znode count znode count zkdb get node count getnodecount print watch count watch count zkdb get data tree getdatatre get watch count getwatchcount print ephemer count ephemer count zkdb get data tree getdatatre get ephemer count getephemeralscount print approxim data size approxim data size zkdb get data tree getdatatre approxim data size approximatedatas oper mx bean operatingsystemmxbean os mbean osmbean manag factori managementfactori get oper mx bean getoperatingsystemmxbean os mbean osmbean os mbean osmbean unix oper mx bean unixoperatingsystemmxbean unix oper mx bean unixoperatingsystemmxbean unixo unix oper mx bean unixoperatingsystemmxbean os mbean osmbean print open file descriptor count open file descriptor count unixo get open file descriptor count getopenfiledescriptorcount print max file descriptor count max file descriptor count unixo get max file descriptor count getmaxfiledescriptorcount stat get server state getserverst equal leader leader leader leader zoo keeper server leaderzookeeperserv zk server zkserver get leader getlead print follow leader get learner getlearn size print sync follow sync follow leader get forward follow getforwardingfollow size print pend sync pend sync leader get num pend sync getnumpendingsync print string kei number print kei number print string kei string valu pw print zk zk pw print kei pw print pw println valu 

isro command isrocommand command thread commandthread isro command isrocommand print writer printwrit pw pw overrid command run commandrun zk server zkserver pw print zk server zkserver read zoo keeper server readonlyzookeeperserv pw print ro pw print rw 

vector jvector comp type jcomptyp level string get id getid string id id get level getlevel string get level getlevel integ string tostr level incr level incrlevel level decr level decrlevel level type jtype element melement creat instanc vector jvector vector jvector type jtype extract vector name extractvectornam std vector get cpp type getcpptyp collect gener list get csharp type getcsharptyp java util list get java type getjavatyp vector collect gener list get csharp type getcsharptyp java util arrai list arraylist get java type getjavatyp element melement string get signatur getsignatur element melement get signatur getsignatur string gen java compar genjavacompareto string fname unsupport oper except unsupportedoperationexcept compar fname unimpl string gen java read wrapper genjavareadwrapp string fname string tag decl string builder stringbuild ret string builder stringbuild decl ret append java util list fname ret append incr level incrlevel ret append index get id getid vidx start vector startvector tag ret append get id getid vidx ret append fname java util arrai list arraylist element melement get java type getjavatyp ret append get id getid vidx done get id getid vidx incr ret append element melement gen java read wrapper genjavareadwrapp get id getid get id getid ret append fname add get id getid ret append ret append ret append end vector endvector tag decr level decrlevel ret append ret string tostr string gen java read method genjavareadmethod string fname string tag gen java read wrapper genjavareadwrapp fname tag string gen java write wrapper genjavawritewrapp string fname string tag string builder stringbuild ret string builder stringbuild incr level incrlevel ret append start vector startvector fname tag ret append fname ret append get id getid len fname size ret append get id getid vidx get id getid vidx get id getid len get id getid vidx ret append element melement get java wrapper type getjavawrappertyp get id getid element melement get java wrapper type getjavawrappertyp fname get get id getid vidx ret append element melement gen java write wrapper genjavawritewrapp get id getid get id getid ret append ret append ret append end vector endvector fname tag ret append decr level decrlevel ret string tostr string gen java write method genjavawritemethod string fname string tag gen java write wrapper genjavawritewrapp fname tag type jtype get element type getelementtyp element melement string gen csharp write wrapper gencsharpwritewrapp string fname string tag string builder stringbuild ret string builder stringbuild incr level incrlevel ret append start vector startvector capit fname tag ret append capit fname ret append get id getid len capit fname count ret append get id getid vidx get id getid vidx get id getid len get id getid vidx ret append element melement get csharp wrapper type getcsharpwrappertyp get id getid element melement get csharp wrapper type getcsharpwrappertyp capit fname get id getid vidx ret append element melement gen csharp write wrapper gencsharpwritewrapp get id getid get id getid ret append ret append ret append end vector endvector capit fname tag ret append decr level decrlevel ret string tostr string gen csharp write method gencsharpwritemethod string fname string tag gen csharp write wrapper gencsharpwritewrapp fname tag string gen csharp read wrapper gencsharpreadwrapp string fname string tag decl string builder stringbuild ret string builder stringbuild decl ret append collect gener list element melement get csharp type getcsharptyp capit fname ret append incr level incrlevel ret append index iindex get id getid vidx start vector startvector tag ret append get id getid vidx ret append capit fname collect gener list element melement get csharp type getcsharptyp ret append get id getid vidx done get id getid vidx incr ret append element melement gen csharp read wrapper gencsharpreadwrapp get id getid get id getid ret append capit fname add get id getid ret append ret append ret append end vector endvector tag decr level decrlevel ret append ret string tostr string gen csharp read method gencsharpreadmethod string fname string tag gen csharp read wrapper gencsharpreadwrapp fname tag string extract vector name extractvectornam type jtype jv type jvtype record jrecord extract method suffix extractmethodsuffix jv type jvtype vector vector 

set data txn setdatatxn record string path data version set data txn setdatatxn set data txn setdatatxn string path data version path path data data version version string get path getpath path set path setpath string path get data getdata data set data setdata data get version getvers version set version setvers version serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write string writestr path path write buffer writebuff data data write writeint version version end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag path read string readstr path data read buffer readbuff data version read readint version end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write string writestr path path write buffer writebuff data data write writeint version version end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer set data txn setdatatxn cast except classcastexcept compar differ type record set data txn setdatatxn peer set data txn setdatatxn peer peer ret ret path compar compareto peer path ret ret data ur peer data ret org apach jute util compar byte comparebyt length ur ur length ret ret ret version peer version version peer version ret ret ret equal object peer peer peer peer set data txn setdatatxn peer peer set data txn setdatatxn peer set data txn setdatatxn peer peer ret ret path equal peer path ret ret ret org apach jute util buf equal bufequ data peer data ret ret ret version peer version ret ret ret hash code hashcod result 17 ret ret path hash code hashcod result 37 result ret ret java util arrai string tostr data hash code hashcod result 37 result ret ret version result 37 result ret result string signatur set data txn lsetdatatxn bi sbi 

zoo keeper server test zookeeperservertest zk test zktestcas test test sort data dir ascend testsortdatadirascend file file file file file foo 10027 c6 de 10027c6de file file foo 10027 c6 df 10027c6df file file bar 10027 c6 dd 10027c6dd file file foo 10027 c6 dc 10027c6dc file file foo 20027 c6 dc 20027c6dc file orig file clone list file filelist util sort data dir sortdatadir file foo equal assertequ orig filelist get equal assertequ orig filelist get equal assertequ orig filelist get equal assertequ orig filelist get equal assertequ orig filelist get test test sort data dir descend testsortdatadirdescend file file file file file foo 10027 c6 de 10027c6de file file foo 10027 c6 df 10027c6df file file bar 10027 c6 dd 10027c6dd file file foo 10027 c6 dc 10027c6dc file file foo 20027 c6 dc 20027c6dc file orig file clone list file filelist util sort data dir sortdatadir file foo equal assertequ orig filelist get equal assertequ orig filelist get equal assertequ orig filelist get equal assertequ orig filelist get equal assertequ orig filelist get test test get log file testgetlogfil file file file file file log 10027 c6 de 10027c6de file file log 10027 c6 df 10027c6df file file snapshot 10027 c6 dd 10027c6dd file file log 10027 c6 dc 10027c6dc file file log 20027 c6 dc 20027c6dc file orig file clone file filelist file txn log filetxnlog get log file getlogfil file pars parselong 10027 c6 de 10027c6de 16 equal assertequ filelist length equal assertequ orig filelist equal assertequ orig filelist equal assertequ orig filelist test test forc sync enabl testforcesyncdefaulten file file file foo 10027 c6 de 10027c6de file txn log filetxnlog log file txn log filetxnlog file asserttru log forc sync isforcesync test test forc sync disabl testforcesyncdefaultdis file file file foo 10027 c6 de 10027c6de set properti setproperti zookeep forc sync forcesync file txn log filetxnlog log file txn log filetxnlog file assertfals log forc sync isforcesync reset back set properti setproperti zookeep forc sync forcesync ye test test invalid snapshot testinvalidsnapshot file file tmp file dir tmpfiledir tmp file dir tmpfiledir client base clientbas creat tmp dir createtmpdir file tmp file dir tmpfiledir snapshot exist creat file createnewfil assertfals snapshot file size greater byte util valid snapshot isvalidsnapshot asserttru delet file delet io except ioexcept tmp file dir tmpfiledir client base clientbas recurs delet recursivedelet tmp file dir tmpfiledir 

href html protocol implement distribut queue distribut queue distributedqueu logger log logger factori loggerfactori get logger getlogg distribut queue distributedqueu string dir zoo keeper zookeep zookeep list acl acl zoo def zoodef id open acl unsaf open acl unsaf string prefix qn distribut queue distributedqueu zoo keeper zookeep zookeep string dir list acl acl dir dir acl acl acl zookeep zookeep return map children order id param watcher option watcher get children getchildren oper map from id child name children tree map treemap string order children orderedchildren watcher watcher keeper except keeperexcept interrupt except interruptedexcept tree map treemap string order children orderedchildren tree map treemap string list string child name childnam child name childnam zookeep get children getchildren dir watcher keeper except keeperexcept node except nonodeexcept string child name childnam child name childnam check format child name childnam region match regionmatch prefix prefix length log warn found child node improp name child name childnam string suffix child name childnam substr prefix length child id childid suffix order children orderedchildren put child id childid child name childnam number format except numberformatexcept log warn found child node improp format child name childnam order children orderedchildren find smallest child node name smallest child node string smallest child name smallestchildnam keeper except keeperexcept interrupt except interruptedexcept min id minid max valu max valu string min name minnam list string child name childnam child name childnam zookeep get children getchildren dir keeper except keeperexcept node except nonodeexcept log warn caught string child name childnam child name childnam check format child name childnam region match regionmatch prefix prefix length log warn found child node improp name child name childnam string suffix child name childnam substr prefix length child id childid pars parselong suffix child id childid min id minid min id minid child id childid min name minnam child name childnam number format except numberformatexcept log warn found child node improp format child name childnam min id minid max valu max valu min name minnam head queue modifi queue data head queue element except nosuchelementexcept keeper except keeperexcept interrupt except interruptedexcept element element except nosuchelementexcept keeper except keeperexcept interrupt except interruptedexcept tree map treemap string order children orderedchildren element remov follow pattern child node smallest sequenc number client remov ing ing node concurr child smallest sequenc number order children orderedchildren time check don call get children getchildren rest node sequenc order order children orderedchildren order children orderedchildren keeper except keeperexcept node except nonodeexcept element except nosuchelementexcept order children orderedchildren size element except nosuchelementexcept string head node headnod order children orderedchildren valu head node headnod zookeep get data getdata dir head node headnod keeper except keeperexcept node except nonodeexcept client remov node first next attempt remov head queue head queue element except nosuchelementexcept keeper except keeperexcept interrupt except interruptedexcept remov element except nosuchelementexcept keeper except keeperexcept interrupt except interruptedexcept tree map treemap string order children orderedchildren element refactor order children orderedchildren order children orderedchildren keeper except keeperexcept node except nonodeexcept element except nosuchelementexcept order children orderedchildren size element except nosuchelementexcept string head node headnod order children orderedchildren valu string path dir head node headnod data zookeep get data getdata path zookeep delet path data keeper except keeperexcept node except nonodeexcept client delet node first latch child watcher latchchildwatch watcher count down latch countdownlatch latch latch child watcher latchchildwatch latch count down latch countdownlatch process watch event watchedev event log debug watcher fire path event get path getpath state event get state getstat type event get type gettyp latch count down countdown await interrupt except interruptedexcept latch await remov head queue return block succe head queue element except nosuchelementexcept keeper except keeperexcept interrupt except interruptedexcept keeper except keeperexcept interrupt except interruptedexcept tree map treemap string order children orderedchildren element refactor latch child watcher latchchildwatch child watcher childwatch latch child watcher latchchildwatch order children orderedchildren order children orderedchildren child watcher childwatch keeper except keeperexcept node except nonodeexcept zookeep creat dir acl creat mode createmod persist order children orderedchildren size child watcher childwatch await string head node headnod order children orderedchildren valu string path dir head node headnod data zookeep get data getdata path zookeep delet path data keeper except keeperexcept node except nonodeexcept client delet node first insert data queue param data data successfulli ad offer data keeper except keeperexcept interrupt except interruptedexcept zookeep creat dir prefix data acl creat mode createmod persist sequenti persist sequenti keeper except keeperexcept node except nonodeexcept zookeep creat dir acl creat mode createmod persist return data first element queue queue empti data first element queue keeper except keeperexcept interrupt except interruptedexcept peek keeper except keeperexcept interrupt except interruptedexcept element element except nosuchelementexcept attempt remov head queue return queue empti head queue keeper except keeperexcept interrupt except interruptedexcept poll keeper except keeperexcept interrupt except interruptedexcept remov element except nosuchelementexcept 

latch child watcher latchchildwatch watcher count down latch countdownlatch latch latch child watcher latchchildwatch latch count down latch countdownlatch process watch event watchedev event log debug watcher fire path event get path getpath state event get state getstat type event get type gettyp latch count down countdown await interrupt except interruptedexcept latch await 

acl record perm org apach zookeep data id id acl acl perm org apach zookeep data id id perm perm id id get perm getperm perm set perm setperm perm org apach zookeep data id get id getid id set id setid org apach zookeep data id id serial output archiv outputarch string tag java io io except ioexcept start record startrecord tag write writeint perm perm write record writerecord id id end record endrecord tag deseri input archiv inputarch string tag java io io except ioexcept start record startrecord tag perm read readint perm id org apach zookeep data id read record readrecord id id end record endrecord tag string string tostr java io arrai output stream bytearrayoutputstream java io arrai output stream bytearrayoutputstream csv output archiv csvoutputarch csv output archiv csvoutputarch start record startrecord write writeint perm perm write record writerecord id id end record endrecord string arrai tobytearrai utf throwabl ex ex print stack trace printstacktrac error write java io data output dataoutput java io io except ioexcept binari output archiv binaryoutputarch archiv binari output archiv binaryoutputarch serial archiv read field readfield java io data input datainput java io io except ioexcept binari input archiv binaryinputarch archiv binari input archiv binaryinputarch deseri archiv compar compareto object peer peer cast except classcastexcept peer peer acl cast except classcastexcept compar differ type record acl peer acl peer peer ret ret perm peer perm perm peer perm ret ret ret id compar compareto peer id ret ret ret equal object peer peer peer peer acl peer peer acl peer acl peer peer ret ret perm peer perm ret ret ret id equal peer id ret ret ret hash code hashcod result 17 ret ret perm result 37 result ret ret id hash code hashcod result 37 result ret result string signatur lacl lid ilid ss 

after replica start load commit commit log committedlog list test check commit log committedlog after replica restart restor commit log test restorecommittedlogtest zk test zktestcas watcher logger log logger get logger getlogg restor commit log test restorecommittedlogtest string hostport 127 port assign portassign uniqu connect timeout connect timeout 3000 test purg except except thrown here test test restor commit log testrestorecommittedlog except file tmp dir tmpdir client base clientbas creat tmp dir createtmpdir client base clientbas setup test env setuptestenv zoo keeper server zookeeperserv zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 sync request processor syncrequestprocessor set snap count setsnapcount 100 port integ pars parseint hostport split server cnxn factori servercnxnfactori server cnxn factori servercnxnfactori creat factori createfactori port startup zk asserttru wait server up client base clientbas wait server up waitforserverup hostport connect timeout connect timeout zoo keeper zookeep zk zoo keeper zookeep hostport connect timeout connect timeout 2000 zk creat invalidsnap id open acl unsaf open acl unsaf creat mode createmod persist zk close shutdown asserttru wait server shutdown client base clientbas wait server down waitforserverdown hostport connect timeout connect timeout start server zk zoo keeper server zookeeperserv tmp dir tmpdir tmp dir tmpdir 3000 zk startdata link list linkedlist propos commit log committedlog zk get zk databas getzkdatabas get commit log getcommittedlog logsiz commit log committedlog size log info commit log committedlog size logsiz asserttru log size logsiz process watch event watchedev event 

op orop filter op filterop match log entri logentri entri filter except filterexcept filter op filterop sub op subop match entri 

simpl request processor requestprocessor simpli forward request from previou stage leader ack ack request processor ackrequestprocessor request processor requestprocessor logger log logger factori loggerfactori get logger getlogg ack request processor ackrequestprocessor leader leader ack request processor ackrequestprocessor leader leader leader leader forward request ack leader process request processrequest request request quorum peer quorump self leader self self leader process ack processack self get id getid request zxid log error quorum peer quorump shutdown xxx 

implement connect bean mbean connect bean connectionbean connect mx bean connectionmxbean zkm bean info zkmbeaninfo logger log logger factori loggerfactori get logger getlogg connect bean connectionbean server cnxn servercnxn connect stat stat zoo keeper server zookeeperserv zk string remot ip remoteip session id sessionid connect bean connectionbean server cnxn servercnxn connect zoo keeper server zookeeperserv zk connect connect stat connect zk zk inet socket address inetsocketaddress sock addr sockaddr connect get remot socket address getremotesocketaddress sock addr sockaddr remot ip remoteip unknown inet address inetaddress addr sock addr sockaddr get address getaddress addr inet6 address inet6address remot ip remoteip object name objectnam quot addr get host address gethostaddress remot ip remoteip addr get host address gethostaddress session id sessionid connect get session id getsessionid string get session id getsessionid 0x hex string tohexstr session id sessionid string get sourc ip getsourceip inet socket address inetsocketaddress sock addr sockaddr connect get remot socket address getremotesocketaddress sock addr sockaddr sock addr sockaddr get address getaddress get host address gethostaddress sock addr sockaddr get port getport string get name getnam bean registri mbeanregistri get instanc getinst make full path makefullpath connect remot ip remoteip get session id getsessionid hidden ishidden string get ephemer node getephemeralnod zk get zk databas getzkdatabas string re zk get zk databas getzkdatabas get ephemer getephemer session id sessionid arrai toarrai string arrai sort re re string get start time getstartedtim stat get establish getestablish string tostr termin session terminatesess zk close session closesess session id sessionid except log warn unabl close session closesess session 0x get session id getsessionid termin connect terminateconnect connect send close session sendclosesess reset counter resetcount stat reset stat resetstat overrid string string tostr connect bean connectionbean client ip clientip object name objectnam quot get sourc ip getsourceip session id sessionid 0x get session id getsessionid get outstand request getoutstandingrequest stat get outstand request getoutstandingrequest get packet receiv getpacketsreceiv stat get packet receiv getpacketsreceiv get packet sent getpacketss stat get packet sent getpacketss get session timeout getsessiontimeout connect get session timeout getsessiontimeout get min latenc getminlat stat get min latenc getminlat get avg latenc getavglat stat get avg latenc getavglat get max latenc getmaxlat stat get max latenc getmaxlat string get last oper getlastoper stat get last oper getlastoper string get last cxid getlastcxid 0x hex string tohexstr stat get last cxid getlastcxid string get last zxid getlastzxid 0x hex string tohexstr stat get last zxid getlastzxid string get last respons time getlastresponsetim date stat get last respons time getlastresponsetim string tostr get last latenc getlastlat stat get last latenc getlastlat 

encapsul state comparison logic specif two differ state compar state summari statesummari current epoch currentepoch last zxid lastzxid state summari statesummari current epoch currentepoch last zxid lastzxid current epoch currentepoch current epoch currentepoch last zxid lastzxid last zxid lastzxid get current epoch getcurrentepoch current epoch currentepoch get last zxid getlastzxid last zxid lastzxid more recent ismorerecentthan state summari statesummari ss current epoch currentepoch ss current epoch currentepoch current epoch currentepoch ss current epoch currentepoch last zxid lastzxid ss last zxid lastzxid overrid equal object obj obj state summari statesummari state summari statesummari ss state summari statesummari obj current epoch currentepoch ss current epoch currentepoch last zxid lastzxid ss last zxid lastzxid overrid hash code hashcod current epoch currentepoch last zxid lastzxid 

link panel jpanel contain link zoo inspector node viewer zooinspectornodeview zoo inspector node viewer panel zooinspectornodeviewerspanel panel jpanel tree select listen treeselectionlisten chang listen changelisten list zoo inspector node viewer zooinspectornodeview node veiwer nodeveiw arrai list arraylist zoo inspector node viewer zooinspectornodeview list reload needsreload arrai list arraylist tab pane jtabbedpan tab pane tabbedpan list string select node selectednod arrai list arraylist string zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag param zoo inspector manag zooinspectormanag link zoo inspector manag zooinspectormanag applic param node veiwer nodeveiw link zoo inspector node viewer zooinspectornodeview show zoo inspector node viewer panel zooinspectornodeviewerspanel zoo inspector node manag zooinspectornodemanag zoo inspector manag zooinspectormanag list zoo inspector node viewer zooinspectornodeview node veiwer nodeveiw zoo inspector manag zooinspectormanag zoo inspector manag zooinspectormanag set layout setlayout border layout borderlayout tab pane tabbedpan tab pane jtabbedpan tab pane jtabbedpan tab pane jtabbedpan wrap tab layout wrap tab layout set node viewer setnodeview node veiwer nodeveiw tab pane tabbedpan add chang listen addchangelisten add tab pane tabbedpan border layout borderlayout center reload select viewer reloadselectedview param node viewer nodeview link zoo inspector node viewer zooinspectornodeview show set node viewer setnodeview list zoo inspector node viewer zooinspectornodeview node viewer nodeview node veiwer nodeveiw clear node veiwer nodeveiw add addal node viewer nodeview reload needsreload clear tab pane tabbedpan remov removeal zoo inspector node viewer zooinspectornodeview node viewer nodeview node veiwer nodeveiw node viewer nodeview set zoo inspector manag setzooinspectormanag zoo inspector manag zooinspectormanag reload needsreload add tab pane tabbedpan add node viewer nodeview get titl gettitl node viewer nodeview revalid repaint reload select viewer reloadselectedview index tab pane tabbedpan get select index getselectedindex index reload needsreload get index zoo inspector node viewer zooinspectornodeview viewer node veiwer nodeveiw get index viewer node select chang nodeselectionchang select node selectednod reload needsreload set index non javadoc javax swing event tree select listen treeselectionlisten valu chang valuechang javax swing event tree select event treeselectionev valu chang valuechang tree select event treeselectionev tree path treepath path get path getpath select node selectednod clear tree path treepath path path append string builder stringbuild sb string builder stringbuild object path arrai patharrai path get path getpath object path arrai patharrai string node name nodenam string tostr node name nodenam node name nodenam length append sb append non nl sb append string tostr append select node selectednod add sb string tostr reload needsreload size reload needsreload set reload select viewer reloadselectedview non javadoc javax swing event chang listen changelisten state chang statechang javax swing event chang event changeev state chang statechang chang event changeev reload select viewer reloadselectedview 

quorum test quorumtest zk test zktestcas logger log logger factori loggerfactori get logger getlogg quorum test quorumtest connect timeout connect timeout client test clienttest connect timeout connect timeout quorum base quorumbas qb quorum base quorumbas client test clienttest ct client test clienttest befor set up setup except qb set up setup ct host port hostport qb host port hostport ct set up setupal after tear down teardown except ct tear down teardownal qb tear down teardown test test delet children testdeletewithchildren except ct test delet children testdeletewithchildren test test ping testp except ct test ping testp test test sequenti node name testsequentialnodenam io except ioexcept interrupt except interruptedexcept keeper except keeperexcept ct test sequenti node name testsequentialnodenam test test acl testacl except ct test acl testacl test test clientwithout watcher obj testclientwithoutwatcherobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept ct test clientwithout watcher obj testclientwithoutwatcherobj test test client watcher obj testclientwithwatcherobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept ct test client watcher obj testclientwithwatcherobj test test get view testgetview equal assertequ qb s1 get view getview size equal assertequ qb s2 get view getview size equal assertequ qb s3 get view getview size equal assertequ qb s4 get view getview size equal assertequ qb s5 get view getview size test test view contain testviewcontain test view contain self asserttru qb s1 view contain viewcontain qb s1 get id getid test view contain server asserttru qb s1 view contain viewcontain qb s2 get id getid test view contain non exist server assertfals qb s1 view contain viewcontain 1l counter error test test leader shutdown testleadershutdown io except ioexcept interrupt except interruptedexcept keeper except keeperexcept zoo keeper zookeep zk disconnect zoo keeper disconnectablezookeep qb host port hostport client base clientbas connect timeout connect timeout watcher process watch event watchedev event zk creat blah zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist zk creat blah blah zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist leader leader qb s1 leader leader leader qb s2 leader leader leader qb s3 leader leader leader qb s4 leader leader leader qb s5 leader assertnotnul leader 5000 zk set data setdata blah blah async callback asynccallback stat callback statcallback process result processresult rc string path object ctx stat stat counter rc error learner handler learnerhandl leader get forward follow getforwardingfollow get socket getsocket shutdown input shutdowninput 5000 zk set data setdata blah blah async callback asynccallback stat callback statcallback process result processresult rc string path object ctx stat stat counter rc error check follow aliv asserttru qb s1 aliv isal asserttru qb s2 aliv isal asserttru qb s3 aliv isal asserttru qb s4 aliv isal asserttru qb s5 aliv isal zk close test test multipl watcher obj testmultiplewatcherobj io except ioexcept interrupt except interruptedexcept keeper except keeperexcept ct test mutipl watcher obj testmutiplewatcherobj make chang session from follow leader io except ioexcept interrupt except interruptedexcept keeper except keeperexcept test test session move testsessionmov except string host port hostport qb host port hostport split disconnect zoo keeper disconnectablezookeep zk disconnect zoo keeper disconnectablezookeep host port hostport client base clientbas connect timeout connect timeout watcher process watch event watchedev event zk creat session move test sessionmovetest id open acl unsaf open acl unsaf creat mode createmod ephemer loop list twice host port hostport length zk dont reconnect dontreconnect stomp zk handl disconnect zoo keeper disconnectablezookeep zknew disconnect zoo keeper disconnectablezookeep host port hostport host port hostport length client base clientbas connect timeout connect timeout watcher process watch event watchedev event zk get session id getsessionid zk get session passwd getsessionpasswd zknew set data setdata result result integ max valu max valu zknew sync async callback asynccallback callback voidcallback process result processresult rc string path object ctx result result rc result notifi result result integ max valu max valu result wait 5000 log info host port hostport host port hostport length sync return result asserttru result keeper except keeperexcept code valu intvalu zk set data setdata fail lost connect keeper except keeperexcept connect loss except connectionlossexcept zk zknew zk close disco watcher discowatch watcher zk disco zkdisco process watch event watchedev event event get state getstat keeper state keeperst disconnect zk disco zkdisco connect two differ server two differ handl session make chang test ignor test session move testsessionmov except string hp qb host port hostport split disco watcher discowatch old watcher oldwatch disco watcher discowatch disconnect zoo keeper disconnectablezookeep zk disconnect zoo keeper disconnectablezookeep hp client base clientbas connect timeout connect timeout old watcher oldwatch zk creat t1 zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer zk dont reconnect dontreconnect stomp zk handl disco watcher discowatch watcher disco watcher discowatch disconnect zoo keeper disconnectablezookeep zknew disconnect zoo keeper disconnectablezookeep hp client base clientbas connect timeout connect timeout watcher zk get session id getsessionid zk get session passwd getsessionpasswd zknew creat t2 zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer zk creat t3 zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer fail lost connect keeper except keeperexcept connect loss except connectionlossexcept wait up 30 second disco deliv 30 old watcher oldwatch zk disco zkdisco thread sleep 1000 asserttru old watcher oldwatch zk disco zkdisco arrai list arraylist zoo keeper zookeep close toclos arrai list arraylist zoo keeper zookeep close toclos add zknew let make move 10 zknew dont reconnect dontreconnect zknew disconnect zoo keeper disconnectablezookeep hp client base clientbas connect timeout connect timeout disco watcher discowatch zk get session id getsessionid zk get session passwd getsessionpasswd close toclos add zknew zknew creat zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod ephemer zoo keeper zookeep close toclos close zk close zookeep 790 detail test test follow start after leader testfollowersstartafterlead except quorum util quorumutil qu quorum util quorumutil countdown watcher countdownwatch watcher countdown watcher countdownwatch qu start quorum startquorum index qu get peer getpeer index peer leader index zoo keeper zookeep zk zoo keeper zookeep 127 qu get peer getpeer index peer get client port getclientport client base clientbas connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout quorum qu shutdown index reestablish quorum qu start index asserttru quorum reestablish fail quorum base quorumbas wait server up waitforserverup 127 qu get peer getpeer client port clientport connect timeout connect timeout 30 zk creat test test get byte getbyt zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist keeper except keeperexcept connect loss except connectionlossexcept thread sleep 1000 test fail connect quorum after 30 second fail client connect reestablish quorum give up after 30 second zk close test close session closesess log befor leader get establish lead lock follow zookeep 790 test work follow ha client connect follow send batch 000 updat goal ha zxid higher server initi leader elect crash recov follow follow believ leader recov le optim server receiv messag from server pick leader make session timeout forc leader close session write log buggi code befor zookeep 790 drop leadership find current leader epoch higher reject leader prevent leader from close session start up leader lead obtain quorum support find current leader support won high epoch test test log befor leader establish testnologbeforeleaderestablish io except ioexcept interrupt except interruptedexcept keeper except keeperexcept semaphor sem semaphor quorum util quorumutil qu quorum util quorumutil qu start quorum startquorum index qu get peer getpeer index peer leader index leader leader qu get peer getpeer index peer leader assertnotnul leader reus index variabl select follow connect index index zoo keeper zookeep zk disconnect zoo keeper disconnectablezookeep 127 qu get peer getpeer index peer get client port getclientport client base clientbas connect timeout connect timeout watcher process watch event watchedev event zk creat blah zoo def zoodef id open acl unsaf open acl unsaf creat mode createmod persist 50000 zk set data setdata blah async callback asynccallback stat callback statcallback process result processresult rc string path object ctx stat stat counter rc error counter 20000 sem releas 5000 qu shutdown index log info shut down s1 12000 qu start index log info set up server index 1000 thread sleep 500 wait updat sem acquir tryacquir 15 time unit timeunit second verifi server follow ha epoch leader asserttru follow qu get peer getpeer index peer follow epochf qu get peer getpeer index peer get activ server getactiveserv get zxid getzxid 32l epochl leader get epoch getepoch 32l asserttru zxid qu get peer getpeer index peer get activ server getactiveserv get zxid getzxid current epoch epochf epochf epochl skip superhamm clientcleanup expens quorum test multiop submit non leader propag leader properli zookeep 1124 test work follow ha client connect follow submit multiop follow verifi multiop successfulli get commit leader fix zookeep 1124 fail connect loss connectionloss keeper except keeperexcept test test multi follow testmultitofollow except quorum util quorumutil qu quorum util quorumutil countdown watcher countdownwatch watcher countdown watcher countdownwatch qu start quorum startquorum index qu get peer getpeer index peer leader index zoo keeper zookeep zk zoo keeper zookeep 127 qu get peer getpeer index peer get client port getclientport client base clientbas connect timeout connect timeout watcher watcher wait connect waitforconnect connect timeout connect timeout list op result opresult result arrai list arraylist op result opresult result zk multi arrai list aslist op creat multi0 id open acl unsaf open acl unsaf creat mode createmod persist op creat multi1 id open acl unsaf open acl unsaf creat mode createmod persist op creat multi2 id open acl unsaf open acl unsaf creat mode createmod persist zk get data getdata multi0 zk get data getdata multi1 zk get data getdata multi2 zk close 

disco watcher discowatch watcher zk disco zkdisco process watch event watchedev event event get state getstat keeper state keeperst disconnect zk disco zkdisco 

log formatt logformatt logger log logger factori loggerfactori get logger getlogg log formatt logformatt param arg main string arg except arg length err println usag log formatt logformatt log file log file exit file input stream fileinputstream fi file input stream fileinputstream arg binari input archiv binaryinputarch log stream logstream binari input archiv binaryinputarch get archiv getarch fi file header filehead fhdr file header filehead fhdr deseri log stream logstream filehead fhdr get magic getmag file txn log filetxnlog txnlog magic txnlog magic err println invalid magic number arg exit println zoo keeper zookeep transact log file dbid fhdr get dbid getdbid txnlog format version fhdr get version getvers count crc valu crcvalu byte crc valu crcvalu log stream logstream read readlong crcvalu byte log stream logstream read buffer readbuff txn entri txnentri eof except eofexcept println eof reach after count txn byte length prealloc defin eof empti transact println eof reach after count txn checksum crc adler32 crc updat byte byte length crc valu crcvalu crc get valu getvalu io except ioexcept crc doesn match crc valu crcvalu vs crc get valu getvalu txn header txnheader hdr txn header txnheader record txn serial util serializeutil deseri txn deserializetxn byte hdr println date format dateformat get date time instanc getdatetimeinst date format dateformat date format dateformat format date hdr get time gettim session 0x hex string tohexstr hdr get client id getclientid cxid 0x hex string tohexstr hdr get cxid getcxid zxid 0x hex string tohexstr hdr get zxid getzxid trace formatt traceformatt op2 string op2str hdr get type gettyp txn log stream logstream read readbyt eor log error last transact partial eof except eofexcept last transact partial count 

basic test start up ensembl server set client make client up kill server make chang ensur client chang signal client die watch disappear simpl sy test simplesystest base sy test basesystest watcher max maxtri 10 connect logger log logger factori loggerfactori get logger getlogg simpl sy test simplesystest wait connect waitforconnect zoo keeper zookeep zk timeout interrupt except interruptedexcept connect zk get state getstat state connect end current time milli currenttimemilli timeout connect end current time milli currenttimemilli wait timeout connect zk get state getstat state connect connect test check follow client connect successfulli half server die assum odd number write succe server restart cluster stai aliv client chang server client ephemer node clean up except test test simpl testsimplecas except configur server configureserv server count servercount configur client configurecli client count clientcount simpl client simplecli get host port gethostport stat stat stat start server startserv log debug connect get host port gethostport zoo keeper zookeep zk zoo keeper zookeep get host port gethostport 15000 wait connect waitforconnect zk 10000 zk creat simpl simplecas orig get byte getbyt id open acl unsaf open acl unsaf creat mode createmod persist start client startclient check client connect properli get client count getclientcount max maxtri zk get data getdata simpl simplecas stat equal assertequ orig string node except nonodeexcept max maxtri fail max exceed client thread sleep 1000 kill half server make chang restart dead server bounc server on on get server count getservercount stop server stopserv get server count getservercount start server startserv get server count getservercount asserttru connect didn recov wait connect waitforconnect zk 10000 zk set data setdata simpl simplecas get byte getbyt connect loss except connectionlossexcept asserttru connect didn recov wait connect waitforconnect zk 10000 zk set data setdata simpl simplecas get byte getbyt log info start server start server startserv thread sleep 100 wait thing stabil asserttru server didn bounc wait connect waitforconnect zk 15000 zk get data getdata simpl simplecas stat connect loss except connectionlossexcept asserttru server didn bounc wait connect waitforconnect zk 15000 check chang ha propag get client count getclientcount max maxtri data zk get data getdata simpl simplecas stat string data equal max maxtri fail max exceed thread sleep 1000 send kill signal zk set data setdata simpl simplecas die get byte getbyt watch die get client count getclientcount max maxtri zk get data getdata simpl simplecas stat max maxtri fail max exceed wait child die thread sleep 200 node except nonodeexcept great hope stop client stopclient stop server stopserv process watch event watchedev event event get state getstat keeper state keeperst sync connect syncconnect connect notifi notifyal event get state getstat keeper state keeperst disconnect connect notifi notifyal 

sasl auth fail test saslauthfailtest client base clientbas set properti setproperti zookeep auth provid authprovid org apach zookeep server auth sasl authent provid saslauthenticationprovid set properti setproperti zookeep allow sasl fail client allowsaslfailedcli file tmp dir tmpdir creat tmp dir createtmpdir file sasl conf file saslconffil file tmp dir tmpdir jaa conf file writer filewrit fwriter file writer filewrit sasl conf file saslconffil fwriter write server org apach zookeep server auth digest login modul digestloginmodul requir user user test client org apach zookeep server auth digest login modul digestloginmodul requir usernam password test1 note wrong password test test1 test sasl authent failur fwriter close set properti setproperti java secur auth login config sasl conf file saslconffil get absolut path getabsolutepath io except ioexcept creat tmp directori hold jaa conf file atom integ atomicinteg auth fail authfail atom integ atomicinteg overrid testabl zoo keeper testablezookeep creat client createcli string hp io except ioexcept interrupt except interruptedexcept watcher mywatch watcher watcher mywatch creat client createcli watcher hp watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail auth fail authfail increment get incrementandget auth fail authfail notifi process event test test bad sasl auth notifi watch testbadsaslauthnotifieswatch except zoo keeper zookeep zk creat client createcli wait auth fail authfail event from client event thread eventthread auth fail authfail auth fail authfail wait equal assertequ auth fail authfail get zk close test test auth fail testauthfail except zoo keeper zookeep zk creat client createcli zk creat path1 id creator acl creator acl creat mode createmod persist fail except except except expect log info except expect zk close 

watcher mywatch countdown watcher countdownwatch overrid process watch event watchedev event event get state getstat keeper state keeperst auth fail authfail auth fail authfail auth fail authfail increment get incrementandget auth fail authfail notifi process event 

zookeep bean mbean info bean registri mbeanregistri us gener jmx object name zkm bean info zkmbeaninfo string identifi bean mbean string get name getnam hidden ishidden return bean mbean won regist bean mbean server won avail manag tool us group bean mbean bean mbean hidden hidden ishidden 

