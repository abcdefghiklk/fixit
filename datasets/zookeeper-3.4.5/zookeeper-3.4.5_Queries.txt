2
concurr hash map concurrenthashmap isn apo us properli quorum cnx manag quorumcnxmanag lt gt queue send map queuesendmap concurr hash map concurrenthashmap lt br gt line 210 lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt lt span quot code keyword quot gt lt span gt queue send map queuesendmap contain kei containskei sid queue send map queuesendmap put sid lt span quot code keyword quot gt lt span gt arrai block queue arrayblockingqueu amp lt buffer bytebuff amp gt send capac send_capac lt pre gt lt div gt lt div gt lt gt time control enter block concurr put sid concurr hash map concurrenthashmap lt br gt put absent putifabs us lt gt lt gt similar issu occur line 307 lt gt
1
src.java.main.org.apache.zookeeper.server.quorum.QuorumCnxManager

3
async version reconfig don apo keeper except keeperexcept interrupt except interruptedexcept lt gt caught lt href quot http issu apach org jira secur view profil viewprofil jspa name fournc quot quot user hover quot rel quot fournc quot gt camil fournier lt gt async version reconfig java client don apo keeper except keeperexcept interrupt except interruptedexcept unreleas code don apo issu chang api except thrown part api lt gt
1
src.java.main.org.apache.zookeeper.ZooKeeper

4
toler incorrectli set hostnam test lt gt bunch test fail unknown host except unknownhostexcept error hostnam incorrectli set run test lt gt
10
src.java.test.org.apache.zookeeper.ClientReconnectTest
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test
src.java.test.org.apache.zookeeper.test.CnxManagerTest
src.java.test.org.apache.zookeeper.test.FLEBackwardElectionRoundTest
src.java.test.org.apache.zookeeper.test.FLELostMessageTest
src.java.test.org.apache.zookeeper.test.FLENewEpochTest
src.java.test.org.apache.zookeeper.test.FLEPredicateTest
src.java.test.org.apache.zookeeper.test.FLERestartTest
src.java.test.org.apache.zookeeper.test.FLETest
src.java.test.org.apache.zookeeper.test.JMXEnv

5
distinguish initi configur from first establish configur lt gt distinguish initi config server initi config run ensembl befor reconfig happen current version lt gt lt gt version config increas reconfigur problem initi config lt gt
4
src.java.main.org.apache.zookeeper.server.quorum.FastLeaderElection
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test

6
us logger object lt gt logger declar apo apo class lt gt
8
src.java.main.org.apache.zookeeper.Login
src.java.main.org.apache.zookeeper.Shell
src.java.main.org.apache.zookeeper.server.NIOServerCnxn
src.java.main.org.apache.zookeeper.server.NettyServerCnxn
src.java.main.org.apache.zookeeper.server.NettyServerCnxnFactory
src.java.main.org.apache.zookeeper.server.ServerCnxnFactory
src.java.main.org.apache.zookeeper.server.ZooKeeperSaslServer
src.java.main.org.apache.zookeeper.server.ZooTrace

7
zoo inspector zooinspector apo displai node data metadata acl lt gt bug trunk prevent zoo inspector zooinspector load node viewer tab main window select zk node tree don apo show up more lt br gt appar ha introduc year ago after refactor icon partial fix typo quot veiwer quot amp gt quot viewer quot lt gt lt gt note bug trunk fine lt gt
3
src.contrib.zooinspector.src.java.org.apache.zookeeper.inspector.ZooInspector
src.contrib.zooinspector.src.java.org.apache.zookeeper.inspector.gui.nodeviewer.NodeViewerData
src.contrib.zooinspector.src.java.org.apache.zookeeper.inspector.manager.ZooInspectorManagerImpl

8
consist log sever level guard statement lt gt log statement guard match sever level log statement lt gt lt gt log trace enabl istraceen lt br gt log info quot session close 0x quot hex string tohexstr session id sessionid lt gt lt gt doesn apo make sens log messag print trace level enabl inconsist possibl introduc develop demot origin log statement from info forgot chang log sever level lt gt
2
src.java.main.org.apache.zookeeper.server.SessionTrackerImpl
src.java.systest.org.apache.zookeeper.test.system.QuorumPeerInstance

9
ad abil allow read oper authent user versu keep acl wide open read lt gt todai sasl authent provid saslauthenticationprovid authent zookeep client access data base acl set znode choic set read acl quot world quot quot quot lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt lt span quot code keyword quot gt lt span gt lt span quot code object quot gt lt span gt match lt span quot code object quot gt string lt span gt id lt span quot code object quot gt string lt span gt acl expr aclexpr lt pre gt lt div gt lt div gt lt gt current implement mean unauthent user read data applic make creator znode read content lt br gt propos introduc properti quot zookeep read user readus quot incom id match valu properti allow proce quot match quot method lt br gt creator znode lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt acl acl1 lt span quot code keyword quot gt lt span gt acl perm admin perm creat perm write perm delet id auth id auth_id acl acl2 lt span quot code keyword quot gt lt span gt acl perm read id id unsaf anyone_id_unsaf lt pre gt lt div gt lt div gt lt gt lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt acl acl1 lt span quot code keyword quot gt lt span gt acl perm admin perm creat perm write perm delet id auth id auth_id acl acl2 lt span quot code keyword quot gt lt span gt acl perm read lt span quot code keyword quot gt lt span gt id lt span quot code quot quot gt quot sasl quot lt span gt lt span quot code quot quot gt quot quot lt span gt lt pre gt lt div gt lt div gt lt gt assum valu quot zookeep read user readus quot properti quot quot lt br gt least read access znode ha authent lt gt
2
src.java.main.org.apache.zookeeper.server.auth.SASLAuthenticationProvider
src.java.test.org.apache.zookeeper.test.SaslAuthDesignatedClientTest

10
support line jline lt gt fix lt gt
2
src.java.main.org.apache.zookeeper.JLineZNodeCompletor
src.java.main.org.apache.zookeeper.ZooKeeperMain

11
fle test fletest consist fail set last quorum verifi setlastseenquorumverifi hang lt gt apo consist failur laptop run fle test fletest quot test join testjoin quot test happen call set last quorum verifi setlastseenquorumverifi hang lt gt lt gt follow log from test notic 17 35 57 period question note turn debug log ad log messag call set last quorum verifi setlastseenquorumverifi code enter leav lt gt lt gt note apo ve appli lt href quot http issu apach org jira brows zookeep 1324 quot titl quot remov duplic newlead packet from leader follow quot quot issu link quot data issu kei quot zookeep 1324 quot gt lt del gt zookeep 1324 lt del gt lt gt trunk code run test doesn apo help note test pass consist run branch lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt 2013 05 07 17 35 57 859 myid info quorum peer quorump myid 11221 follow 65 follow leader elect 16 2013 05 07 17 35 57 859 myid info quorum peer quorump myid 11224 leader 436 lead leader elect 17 2013 05 07 17 35 57 863 myid info quorum peer quorump myid 11224 file txn snap log filetxnsnaplog 270 snapshot x0 0x0 home phunt dev zookeep trunk build test tmp test3690487600947307322 junit dir version snapshot 2013 05 07 17 35 57 873 myid info learner handler learnerhandl 127 34262 learner handler learnerhandl 269 follow sid info 11222 11223 particip 11221 2013 05 07 17 35 57 878 myid info learner handler learnerhandl 127 34262 learner handler learnerhandl 328 synchron follow sid max commit log maxcommittedlog x0 0x0 min commit log mincommittedlog x0 0x0 peer last zxid peerlastzxid x0 0x0 2013 05 07 17 35 57 878 myid debug learner handler learnerhandl 127 34262 learner handler learnerhandl 395 commit log committedlog empti leader follow sync zxid x0 0x0 2013 05 07 17 35 57 878 myid info learner handler learnerhandl 127 34262 learner handler learnerhandl 404 send diff 2013 05 07 17 35 57 879 myid debug learner handler learnerhandl 127 34262 learner handler learnerhandl 411 send newlead messag 2013 05 07 17 35 57 880 myid info quorum peer quorump myid 11221 learner 331 get diff from leader x0 0x0 2013 05 07 17 35 57 885 myid info quorum peer quorump myid 11221 learner 457 learner receiv newlead messag 2013 05 07 17 35 57 885 myid info quorum peer quorump myid 11221 learner 460 newlead call configfromstr 2013 05 07 17 35 57 885 myid info quorum peer quorump myid 11221 learner 462 newlead set quorum verifi 2013 05 07 17 35 57 886 myid warn quorum peer quorump myid 11221 quorum peer quorump 1218 set last quorum verifi setlastseenquorumverifi call stale config current version 2013 05 07 17 36 01 880 myid info quorum peer quorump myid 11224 leader 585 shut down 2013 05 07 17 36 01 881 myid info quorum peer quorump myid 11224 leader 591 shutdown call java lang except shutdown leader reason wait quorum follow sync sid org apach zookeep server quorum leader shutdown leader java 591 org apach zookeep server quorum leader lead leader java 487 org apach zookeep server quorum quorum peer quorump run quorum peer quorump java 949 2013 05 07 17 36 01 881 myid info quorum peer quorump myid 11224 zoo keeper server zookeeperserv 398 shut down 2013 05 07 17 36 01 881 myid info learner cnx acceptor learnercnxacceptor 11225 leader learner cnx acceptor learnercnxacceptor 398 except shut down acceptor java net socket except socketexcept socket close 2013 05 07 17 36 01 882 myid warn quorum peer quorump myid 11224 quorum peer quorump 979 peer state peerstat set 2013 05 07 17 36 01 882 myid info quorum peer quorump myid 11224 quorum peer quorump 863 2013 05 07 17 36 01 883 myid debug quorum peer quorump myid 11224 quorum peer quorump 792 initi leader elect protocol lt pre gt lt div gt lt div gt
1
src.java.test.org.apache.zookeeper.test.FLETest

12
add flag disabl standalon mode lt gt current us dynam reconfigur bootstrap zookeep cluster server standalon mode on server cluster lt gt lt gt michi lt gt
8
src.java.main.org.apache.zookeeper.server.PrepRequestProcessor
src.java.main.org.apache.zookeeper.server.quorum.FastLeaderElection
src.java.main.org.apache.zookeeper.server.quorum.FollowerZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.LeaderZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerConfig
src.java.test.org.apache.zookeeper.server.quorum.QuorumPeerTestBase
src.java.test.org.apache.zookeeper.test.StandaloneTest

14
kerbero auth doesn apo work platform gss integr lt gt java linux solari set up us librari lt br gt gss implement configur set properti lt br gt sun secur jgss lt br gt featur zoo keeper zookeep sasl jgss authent doesn apo work lt br gt reason explain lt br gt lt href quot http doc oracl com javas doc technot guid secur jgss jgss featur html quot quot extern link quot rel quot nofollow quot gt http doc oracl com javas doc technot guid secur jgss jgss featur html lt gt lt gt lt gt quot quot quot lt br gt lt span quot error quot gt amp 91 gss amp 93 lt span gt lt br gt addit perform oper subject lt br gt subject doa subject privileg doasprivileg us lt br gt gss credenti gsscredenti ad subject apo credenti set lt br gt gss oper fail credenti found lt br gt quot quot quot lt gt
2
src.java.main.org.apache.zookeeper.client.ZooKeeperSaslClient
src.java.main.org.apache.zookeeper.server.ZooKeeperSaslServer

15
document list allow charact zk doc line code lt gt document set allow charact zoo keeper zookeep node name programm apo guid line code lt gt lt gt rang non printabl ascii charact doc end earli x19 0x19 x1f 0x1f lt gt lt gt rang check code path util pathutil includ on error charact border unallow allow code lt gt
1
src.java.main.org.apache.zookeeper.common.PathUtils

16
nio server cnxn factori nioservercnxnfactori code introduc zk 1504 open selector close lt gt code commit zk 1504 open selector doesn apo close lt br gt specif abstract select thread abstractselectthread constructor lt gt lt gt selector selector open lt gt lt gt possibl test fail follow messag lt gt lt gt java io io except ioexcept open file lt br gt sun nio ch poll arrai wrapper epollarraywrapp epol creat epollcr method lt br gt sun nio ch poll arrai wrapper epollarraywrapp amp lt init amp gt poll arrai wrapper epollarraywrapp java 69 lt br gt sun nio ch poll selector impl epollselectorimpl amp lt init amp gt poll selector impl epollselectorimpl java 52 lt br gt sun nio ch poll selector provid epollselectorprovid open selector openselector poll selector provid epollselectorprovid java 18 lt br gt java nio channel selector open selector java 209 lt br gt org apach zookeep server nio server cnxn factori nioservercnxnfactori abstract select thread abstractselectthread amp lt init amp gt nio server cnxn factori nioservercnxnfactori java 128 lt br gt org apach zookeep server nio server cnxn factori nioservercnxnfactori accept thread acceptthread amp lt init amp gt nio server cnxn factori nioservercnxnfactori java 177 lt br gt org apach zookeep server nio server cnxn factori nioservercnxnfactori configur nio server cnxn factori nioservercnxnfactori java 663 lt br gt org apach zookeep server server cnxn factori servercnxnfactori creat factori createfactori server cnxn factori servercnxnfactori java 127 lt br gt org apach zookeep server quorum quorum peer quorump amp lt init amp gt quorum peer quorump java 709 lt br gt org apach zookeep test quorum base quorumbas start server startserv quorum base quorumbas java 177 lt br gt org apach zookeep test quorum base quorumbas set up setup quorum base quorumbas java 113 lt br gt org apach zookeep test quorum base quorumbas set up setup quorum base quorumbas java 71 lt br gt org apach zookeep test reconfig test reconfigtest set up setup reconfig test reconfigtest java 56 lt gt
1
src.java.main.org.apache.zookeeper.server.NIOServerCnxnFactory

17
allow space url lt gt current space allow url format work lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt 10 10 2181 10 10 2181 usergrid lt pre gt lt div gt lt div gt lt gt format notic space comma lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt 10 10 2181 10 10 2181 usergrid lt pre gt lt div gt lt div gt lt gt add trim port hostnam pars lt gt
1
src.java.main.org.apache.zookeeper.client.ConnectStringParser

18
chang quorum peer config quorumpeerconfig apo api broke compat base hbase lt gt follow patch broke api apo us base hbase current trunk compil fine us hbase lt gt lt blockquot gt lt gt lt href quot http issu apach org jira brows zookeep 1411 quot titl quot consolid membership manag distinguish dynam configur paramet quot quot issu link quot data issu kei quot zookeep 1411 quot gt lt del gt zookeep 1411 lt del gt lt gt consolid membership manag distinguish dynam configur paramet alex shraer breed lt gt lt blockquot gt lt gt blocker even apo quot quot api add back quot get server getserv quot method quorum peer config quorumpeerconfig reduc friction hbase team lt gt
1
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerConfig

19
add async multi request lt gt current async multi request zoo keeper zookeep java client lt gt
6
src.java.main.org.apache.zookeeper.AsyncCallback
src.java.main.org.apache.zookeeper.AsyncCallback.VoidCallback
src.java.main.org.apache.zookeeper.ClientCnxn
src.java.main.org.apache.zookeeper.Transaction
src.java.main.org.apache.zookeeper.ZooKeeper
src.java.test.org.apache.zookeeper.test.MultiTransactionTest

20
multi thread commit processor commitprocessor lt gt commit processor commitprocessor ha singl thread pull request queue run downstream processor notic ineffici read intens workload run concurr trick handl write transact propos multi thread code follow two constraint lt gt lt ul quot altern quot type quot squar quot gt lt li gt session request respond order lt li gt lt li gt commit transact handl zxid order session lt li gt lt ul gt lt gt cover constraint honor relax follow lt gt lt ul quot altern quot type quot squar quot gt lt li gt matter read request on session befor after write request session lt li gt lt ul gt lt gt constraint propos follow thread lt gt lt ul quot altern quot type quot squar quot gt lt li gt primari queue servic work dispatch thread lt li gt lt li gt assign worker thread session assign worker thread lt li gt lt ul gt lt gt assign session worker thread simpl session id sessionid mod number worker thread guarante first constraint request push thread queue process order guarante second constraint allow singl commit transact flight time queue servic thread block commit transact flight transact complet clear flag lt gt lt gt 32 core machin run linux 38 achiev best perform 32 worker thread 56 improv throughput improv measur lt href quot http issu apach org jira brows zookeep 1504 quot titl quot multi thread nio server cnxn nioservercnxn quot quot issu link quot data issu kei quot zookeep 1504 quot gt zookeep 1504 lt gt isol lt gt lt gt class introduc patch lt gt lt gt worker servic workerservic lt href quot http issu apach org jira brows zookeep 1504 quot titl quot multi thread nio server cnxn nioservercnxn quot quot issu link quot data issu kei quot zookeep 1504 quot gt zookeep 1504 lt gt executor servic executorservic wrapper make worker thread daemon thread name easili debugg manner support assign thread us here non assign thread us nio server cnxn factori nioservercnxnfactori lt gt
6
src.java.main.org.apache.zookeeper.server.FinalRequestProcessor
src.java.main.org.apache.zookeeper.server.PrepRequestProcessor
src.java.main.org.apache.zookeeper.server.ServerCnxnFactory
src.java.main.org.apache.zookeeper.server.quorum.CommitProcessor
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.main.org.apache.zookeeper.server.quorum.Leader.XidRolloverException

21
client port clientport config chang backward compat lt gt reconfig logic client port clientport 2181 zoo cfg file longer get read client apo connect ad 2181 end server line lt gt
1
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer

22
us disk transact log learner sync up lt gt motiv lt br gt learner sync up leader retriev commit log from leader current leader keep 500 entri recent commit log memori learner fall more 500 updat leader send entir snapshot learner lt gt lt gt size snapshot zookeep deploy 10g prohibit expens send entir snapshot network addition zookeep serv more 4k updat second result network hiccup second caus learner us snapshot transfer lt gt lt gt design lt br gt commit log memori leader transact log disk amount transact log kept disk configur current 100k allow zookeep toler longer tempor network failur befor initi snapshot transfer lt gt lt gt implement lt br gt plan add persist layer us retriev propos from disk transact log propos us send learner exist protocol lt gt
8
src.java.main.org.apache.zookeeper.server.ZKDatabase
src.java.main.org.apache.zookeeper.server.persistence.FileTxnLog
src.java.main.org.apache.zookeeper.server.persistence.FileTxnSnapLog
src.java.main.org.apache.zookeeper.server.persistence.TxnLog
src.java.main.org.apache.zookeeper.server.quorum.LearnerHandler
src.java.test.org.apache.zookeeper.test.FollowerResyncConcurrencyTest
src.java.test.org.apache.zookeeper.test.FollowerResyncConcurrencyTest.MyWatcher
src.java.test.org.apache.zookeeper.test.LoadFromLogTest

23
consolid membership manag distinguish dynam configur paramet lt gt current server ha differ configur file patch distinguish dynam paramet separ quot dynam configur file quot paramet usual file config file point dynam config file specifi quot dynam config file dynamicconfigfil quot first stage patch cluster membership definit dynam config file futur addit paramet move dynam file lt gt lt gt backward compat make us singl config file apo config chang zk 107 dynam file automat creat necessari paramet move lt gt lt gt patch move membership pars manag quorum verifi quorumverifi class remov quorum peer quorump quorum peer quorump lt br gt cluster membership contain quorum peer quorump quorum verifi quorumverifi quorum verifi quorumverifi expand ha method get member getallmemb get vote member getvotingmemb get observ member getobservingmemb lt gt
25
src.java.main.org.apache.zookeeper.server.quorum.FastLeaderElection
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.main.org.apache.zookeeper.server.quorum.LearnerHandler
src.java.main.org.apache.zookeeper.server.quorum.QuorumCnxManager
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer.QuorumServer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerConfig
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerMain
src.java.main.org.apache.zookeeper.server.quorum.QuorumZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.flexible.QuorumHierarchical
src.java.main.org.apache.zookeeper.server.quorum.flexible.QuorumMaj
src.java.main.org.apache.zookeeper.server.quorum.flexible.QuorumVerifier
src.java.test.org.apache.zookeeper.server.quorum.QuorumPeerMainTest
src.java.test.org.apache.zookeeper.server.quorum.QuorumPeerTestBase
src.java.test.org.apache.zookeeper.server.quorum.QuorumPeerTestBase.MainThread
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test
src.java.test.org.apache.zookeeper.test.CnxManagerTest
src.java.test.org.apache.zookeeper.test.FLETest
src.java.test.org.apache.zookeeper.test.FLEZeroWeightTest
src.java.test.org.apache.zookeeper.test.HierarchicalQuorumTest
src.java.test.org.apache.zookeeper.test.LENonTerminateTest
src.java.test.org.apache.zookeeper.test.ObserverTest
src.java.test.org.apache.zookeeper.test.QuorumBase
src.java.test.org.apache.zookeeper.test.QuorumUtil
src.java.test.org.apache.zookeeper.test.StandaloneTest

24
add support local session lt gt improv bucket make zoo keeper zookeep work larg scale plan million client connect zoo keeper zookeep ensembl set 50 100 observ major client read updat creat ephemer node lt gt lt gt zoo keeper zookeep todai client creat session session creation handl updat us session creat drop workload easili overwhelm ensembl follow propos quot local session quot support larger number connect lt gt lt gt idea introduc type session quot local quot session quot local quot session doesn apo full function normal session lt br gt local session creat ephemer node lt br gt local session lost establish session id password session watch good lt br gt local session connect session info maintain zookeep server observ connect leader awar creation session state written disk lt br gt ping expir handl server session connect lt gt lt gt chang make zoo keeper zookeep scale larger number client make core ensembl bottleneck lt gt lt gt term api two option consid lt br gt let client specifi connect time kind session lt br gt session connect local session automat get promot global session oper requir global session creat ephemer node lt gt lt gt chubbi approach lazili promot session global don apo work keep session creat ephemer node local option make more broadli usabl option easier implement lt gt lt gt think implement option first cut client flag local session islocalsess current read readonli flag us determin creat local session global session lt gt
31
src.java.main.org.apache.zookeeper.KeeperException
src.java.main.org.apache.zookeeper.server.FinalRequestProcessor
src.java.main.org.apache.zookeeper.server.PrepRequestProcessor
src.java.main.org.apache.zookeeper.server.Request
src.java.main.org.apache.zookeeper.server.SessionTracker
src.java.main.org.apache.zookeeper.server.SessionTrackerImpl
src.java.main.org.apache.zookeeper.server.SessionTrackerImpl.SessionImpl
src.java.main.org.apache.zookeeper.server.TraceFormatter
src.java.main.org.apache.zookeeper.server.ZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.CommitProcessor
src.java.main.org.apache.zookeeper.server.quorum.FollowerRequestProcessor
src.java.main.org.apache.zookeeper.server.quorum.LeaderZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.Learner
src.java.main.org.apache.zookeeper.server.quorum.LearnerHandler
src.java.main.org.apache.zookeeper.server.quorum.LearnerSessionTracker
src.java.main.org.apache.zookeeper.server.quorum.LearnerZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.ObserverRequestProcessor
src.java.main.org.apache.zookeeper.server.quorum.ProposalRequestProcessor
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerConfig
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerMain
src.java.main.org.apache.zookeeper.server.quorum.QuorumZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.ReadOnlyZooKeeperServer
src.java.test.org.apache.zookeeper.server.PrepRequestProcessorTest
src.java.test.org.apache.zookeeper.server.PrepRequestProcessorTest.MySessionTracker
src.java.test.org.apache.zookeeper.server.quorum.QuorumPeerMainTest
src.java.test.org.apache.zookeeper.test.QuorumBase
src.java.test.org.apache.zookeeper.test.QuorumTest
src.java.test.org.apache.zookeeper.test.QuorumUtil
src.java.test.org.apache.zookeeper.test.ReadOnlyModeTest
src.java.test.org.apache.zookeeper.test.WatcherTest

25
unnecessari snapshot transfer leader follow lt gt start leadership unnecessari snapshot transfer happen leader follow multipl small bug lt gt lt gt comparison zxid done base propos last log zxid learner handler learnerhandl java 297 lt br gt follow on zxid check interv commit log exclud follow learner handler learnerhandl java 277 lt br gt bug report lt href quot http issu apach org jira brows zookeep 874 quot titl quot file txn snap log filetxnsnaplog restor call listen quot quot issu link quot data issu kei quot zookeep 874 quot gt lt del gt zookeep 874 lt del gt lt gt commit log commitlog empti after recov lt gt
1
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer

26
remov watch longer interest lt gt current watch clear trigger enumer outstand watch object find watch event object watch remov interest event lt gt
12
src.java.main.org.apache.zookeeper.ClientCnxn
src.java.main.org.apache.zookeeper.KeeperException
src.java.main.org.apache.zookeeper.Watcher
src.java.main.org.apache.zookeeper.ZooDefs
src.java.main.org.apache.zookeeper.ZooKeeper
src.java.main.org.apache.zookeeper.ZooKeeper.ZKWatchManager
src.java.main.org.apache.zookeeper.server.DataTree
src.java.main.org.apache.zookeeper.server.FinalRequestProcessor
src.java.main.org.apache.zookeeper.server.PrepRequestProcessor
src.java.main.org.apache.zookeeper.server.Request
src.java.main.org.apache.zookeeper.server.WatchManager
src.java.main.org.apache.zookeeper.server.ZKDatabase

27
unnecessarili instanc found except instancenotfoundexcept come unregist fail jmxbean lt gt bean registri mbeanregistri keep bean fail complet registr unregistr time fail bean result follow except lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt junit 2014 01 29 08 34 56 667 myid warn main bean registri mbeanregistri 134 error unregist junit javax manag instanc found except instancenotfoundexcept org apach zoo keeper servic zookeeperservic name0 standalon server port standaloneserver_port junit com sun jmx interceptor bean server interceptor defaultmbeanserverinterceptor get bean getmbean bean server interceptor defaultmbeanserverinterceptor java 1095 junit com sun jmx interceptor bean server interceptor defaultmbeanserverinterceptor exclus unregist bean exclusiveunregistermbean bean server interceptor defaultmbeanserverinterceptor java 427 junit com sun jmx interceptor bean server interceptor defaultmbeanserverinterceptor unregist bean unregistermbean bean server interceptor defaultmbeanserverinterceptor java 415 junit com sun jmx mbeanserv jmx bean server jmxmbeanserv unregist bean unregistermbean jmx bean server jmxmbeanserv java 536 junit org apach zookeep jmx bean registri mbeanregistri unregist bean registri mbeanregistri java 115 lt pre gt lt div gt lt div gt
1
src.java.main.org.apache.zookeeper.jmx.MBeanRegistry

28
bug zk databas corrupt test zkdatabasecorruptiontest lt gt apo read test test corrupt testcorrupt right depend server elect fail wait server up lt gt
1
src.java.test.org.apache.zookeeper.test.ZkDatabaseCorruptionTest

29
jmx check potenti race condit stop start server lt gt apo ve notic on potenti previous creat zkclient session immedi reconnect publish bean start back zkserver affect zk startup jmx check lt gt lt gt befor stop server zk client session x143576544 c50000 0x143576544c50000 exist start back server possibl client session jmx follow on log ha from build lt href quot http build apach org job zoo keeper zookeep trunk win vs2008 java winvs2008_java 642 quot quot extern link quot rel quot nofollow quot gt http build apach org job zoo keeper zookeep trunk win vs2008 java winvs2008_java 642 lt gt lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt junit 2014 01 03 09 18 12 809 myid info main send thread sendthread 127 11222 client cnxn clientcnxn send thread sendthread 1228 session establish complet server 127 127 11222 sessionid x143576544 c50000 0x143576544c50000 negoti timeout 30000 junit 2014 01 03 09 18 12 809 myid info nio server cxn nioservercxn factori 11222 zoo keeper server zookeeperserv 617 establish session x143576544 c50000 0x143576544c50000 negoti timeout 30000 lt span quot code keyword quot gt lt span gt client 127 55377 lt pre gt lt div gt lt div gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt junit 2014 01 03 09 18 12 391 myid info main jmx env jmxenv 135 ensur ensureonli junit 2014 01 03 09 18 12 395 myid info main client base clientbas 438 start server junit 2014 01 03 09 18 12 395 myid info main client base clientbas 359 creat server instanc 127 11222 junit 2014 01 03 09 18 12 395 myid info main nio server cnxn factori nioservercnxnfactori 94 bind port 11222 junit 2014 01 03 09 18 12 395 myid info main client base clientbas 334 start server instanc 127 11222 junit 2014 01 03 09 18 19 030 myid info main jmx env jmxenv 142 unexpect org apach zoo keeper servic zookeeperservic name0 standalon server port standaloneserver_port name1 connect name2 127 name3 x143576544 c50000 0x143576544c50000 junit 2014 01 03 09 18 19 030 myid info main jmx env jmxenv 142 unexpect org apach zoo keeper servic zookeeperservic name0 standalon server port standaloneserver_port junit 2014 01 03 09 18 19 030 myid info main unit4 zk test runner junit4zktestrunn log invok method loggedinvokemethod 62 test method fail test watcher reset chroot testdefaultwatcherautoresetwithchroot junit junit framework assert fail error assertionfailederror expect amp lt amp gt amp lt amp gt junit junit framework fail java 47 junit junit framework fail equal failnotequ java 283 junit junit framework equal assertequ java 64 junit junit framework equal assertequ java 195 junit junit framework equal assertequ java 201 junit org apach zookeep test jmx env jmxenv ensur ensureonli jmx env jmxenv java 144 junit org apach zookeep test client base clientbas start server startserv client base clientbas java 443 junit org apach zookeep test disconnect watcher test disconnectedwatchertest test watcher reset chroot testdefaultwatcherautoresetwithchroot disconnect watcher test disconnectedwatchertest java 123 junit sun reflect method accessor impl nativemethodaccessorimpl invoke0 method lt pre gt lt div gt lt div gt
10
src.java.test.org.apache.zookeeper.test.ClientBase
src.java.test.org.apache.zookeeper.test.DisconnectedWatcherTest
src.java.test.org.apache.zookeeper.test.FourLetterWordsQuorumTest
src.java.test.org.apache.zookeeper.test.FourLetterWordsTest
src.java.test.org.apache.zookeeper.test.HierarchicalQuorumTest
src.java.test.org.apache.zookeeper.test.JMXEnv
src.java.test.org.apache.zookeeper.test.QuorumBase
src.java.test.org.apache.zookeeper.test.QuorumUtil
src.java.test.org.apache.zookeeper.test.WatcherTest
src.java.test.org.apache.zookeeper.test.ZooKeeperQuotaTest

30
server cnxn factori servercnxnfactori instanc properli cleanedup lt gt client base clientbas creat server instanc createnewserverinst startup server fail initi apo server factori serverfactori apo flow teardown shutdown bypass stop server instanc follow check affect test verif jmx check apo jmx env jmxenv ensur ensureonli apo lt gt lt gt client base clientbas shutdown server instanc shutdownserverinst lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt lt span quot code keyword quot gt lt span gt shutdown server instanc shutdownserverinst server cnxn factori servercnxnfactori factori lt span quot code object quot gt string lt span gt host port hostport lt span quot code keyword quot gt lt span gt factori lt span quot code keyword quot gt lt span gt lt span quot code comment quot gt shutdown logic lt span gt lt pre gt lt div gt lt div gt
2
src.java.test.org.apache.zookeeper.test.ClientBase
src.java.test.org.apache.zookeeper.test.TruncateTest

31
truncat test truncatetest fail window lt gt truncat test truncatetest ha fail consist window lt gt lt gt lt href quot http build apach org job zoo keeper zookeep trunk win vs2008 java winvs2008_java 627 test report testreport junit org apach zookeep test truncat test truncatetest test truncat testtrunc quot quot extern link quot rel quot nofollow quot gt http build apach org job zoo keeper zookeep trunk win vs2008 java winvs2008_java 627 test report testreport junit org apach zookeep test truncat test truncatetest test truncat testtrunc lt gt lt gt
5
src.java.main.org.apache.zookeeper.server.ZKDatabase
src.java.main.org.apache.zookeeper.server.persistence.FileTxnLog
src.java.main.org.apache.zookeeper.server.persistence.FileTxnSnapLog
src.java.main.org.apache.zookeeper.server.quorum.LearnerHandler
src.java.test.org.apache.zookeeper.test.TruncateTest

32
problem quorum test quorumtest lt gt quorum test quorumtest test log befor leader establish testnologbeforeleaderestablish fail assert quot follow quot lt gt
1
src.java.test.org.apache.zookeeper.test.QuorumTest

33
deadlock netti server cnxn nettyservercnxn lt gt deadlock found netti server cnxn nettyservercnxn closur attach threaddump lt gt
2
src.java.main.org.apache.zookeeper.server.NettyServerCnxn
src.java.main.org.apache.zookeeper.server.NettyServerCnxnFactory

34
fix jmx env jmxenv check potenti race condit lt gt follow failur zoo keeper zookeep win vs2008 java winvs2008_java zoo keeper zookeep trunk win vs2008 java winvs2008_java requir fix lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework assert fail error assertionfailederror expect amp lt amp gt amp lt amp gt lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework fail java 47 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework fail equal failnotequ java 283 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework equal assertequ java 64 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework equal assertequ java 195 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework equal assertequ java 201 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org apach zookeep test jmx env jmxenv ensur ensureonli jmx env jmxenv java 138 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org apach zookeep test client base clientbas start server startserv client base clientbas java 417 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org apach zookeep test zoo keeper quota test zookeeperquotatest test quota testquota zoo keeper quota test zookeeperquotatest java 80 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt sun reflect method accessor impl nativemethodaccessorimpl invoke0 method lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt sun reflect method accessor impl nativemethodaccessorimpl invok method accessor impl nativemethodaccessorimpl java 39 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java 25 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt java lang reflect method invok method java 597 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit runner model framework method frameworkmethod run reflect call runreflectivecal framework method frameworkmethod java 44 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit intern runner model reflect callabl reflectivecal run reflect callabl reflectivecal java 15 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit runner model framework method frameworkmethod invok explos invokeexplos framework method frameworkmethod java 41 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit intern runner statement invok method invokemethod evalu invok method invokemethod java 20 lt gt lt gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework assert fail error assertionfailederror expect amp lt amp gt amp lt amp gt lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework fail java 47 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework fail equal failnotequ java 283 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework equal assertequ java 64 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework equal assertequ java 195 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt junit framework equal assertequ java 201 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org apach zookeep test jmx env jmxenv ensur ensureonli jmx env jmxenv java 138 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org apach zookeep test client base clientbas start server startserv client base clientbas java 417 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org apach zookeep test zoo keeper quota test zookeeperquotatest test quota testquota zoo keeper quota test zookeeperquotatest java 80 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt sun reflect method accessor impl nativemethodaccessorimpl invoke0 method lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt sun reflect method accessor impl nativemethodaccessorimpl invok method accessor impl nativemethodaccessorimpl java 39 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java 25 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt java lang reflect method invok method java 597 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit runner model framework method frameworkmethod run reflect call runreflectivecal framework method frameworkmethod java 44 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit intern runner model reflect callabl reflectivecal run reflect callabl reflectivecal java 15 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit runner model framework method frameworkmethod invok explos invokeexplos framework method frameworkmethod java 41 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org junit intern runner statement invok method invokemethod evalu invok method invokemethod java 20 lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt org apach zookeep unit4 zk test runner junit4zktestrunn log invok method loggedinvokemethod evalu unit4 zk test runner junit4zktestrunn java 52 lt br gt lt gt lt gt junit framework assert fail error assertionfailederror expect lt span quot error quot gt amp 91 x142 e5 f027 b50001 0x142e5f027b50001 amp 93 lt span gt expect amp lt amp gt amp lt amp gt lt br gt org apach zookeep test jmx env jmxenv ensur ensureal jmx env jmxenv java 115 lt br gt org apach zookeep test client base clientbas creat client createcli client base clientbas java 197 lt br gt org apach zookeep test client base clientbas creat client createcli client base clientbas java 171 lt br gt org apach zookeep test client base clientbas creat client createcli client base clientbas java 156 lt br gt org apach zookeep test client base clientbas creat client createcli client base clientbas java 149 lt br gt org apach zookeep zoo keeper test zookeepertest test delet recurs testdeleterecurs zoo keeper test zookeepertest java 45 lt br gt org apach zookeep unit4 zk test runner junit4zktestrunn log invok method loggedinvokemethod evalu unit4 zk test runner junit4zktestrunn java 52 lt gt
3
src.java.test.org.apache.zookeeper.test.ClientBase
src.java.test.org.apache.zookeeper.test.JMXEnv
src.java.test.org.apache.zookeeper.test.QuorumUtil

35
io except ioexcept file txn log filetxnlog lt gt io except ioexcept file txn log filetxnlog next log file open remain open caus test case least buffer size test buffersizetest fail add block lt gt
1
src.java.main.org.apache.zookeeper.server.persistence.FileTxnLog

36
fix don apo care b3 lt gt umbrella jira lt gt
4
src.java.main.org.apache.zookeeper.server.quorum.FastLeaderElection
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.main.org.apache.zookeeper.server.quorum.Vote
src.java.main.org.apache.zookeeper.server.quorum.flexible.QuorumMaj

37
zoo inspector zooinspector reconnect fail first connect fail lt gt step reproduc lt gt lt ul quot altern quot type quot squar quot gt lt li gt connect localhost 2181 zoo keeper zookeep server down after second zoo inspector zooinspector warn connect ha fail lt li gt lt li gt start zoo keeper zookeep server lt li gt lt li gt reconnect localhost 2181 zoo inspector zooinspector abl connect server lt li gt lt ul gt lt gt workaround relaunch zoo inspector zooinspector lt gt
1
src.contrib.zooinspector.src.java.org.apache.zookeeper.inspector.manager.ZooInspectorManagerImpl

39
fix race condit test normal observ run testnormalobserverrun lt gt output messg lt gt lt gt amp lt noformat amp gt lt br gt testcas test normal observ run testnormalobserverrun 221 sec lt br gt fail lt br gt expect amp lt data lt span quot error quot gt amp 91 amp 93 lt span gt amp gt amp lt data lt span quot error quot gt amp 91 amp 93 lt span gt amp gt lt br gt junit framework assert fail error assertionfailederror expect amp lt data lt span quot error quot gt amp 91 amp 93 lt span gt amp gt amp lt data lt span quot error quot gt amp 91 amp 93 lt span gt amp gt lt br gt org apach zookeep server quorum zab1 test zab1_0test convers observ conversewithobserv zab1 test zab1_0test java 1118 lt br gt org apach zookeep server quorum zab1 test zab1_0test test observ convers testobserverconvers zab1 test zab1_0test java 546 lt br gt org apach zookeep server quorum zab1 test zab1_0test test normal observ run testnormalobserverrun zab1 test zab1_0test java 994 lt br gt amp lt noformat amp gt lt gt
4
src.java.main.org.apache.zookeeper.server.FinalRequestProcessor
src.java.main.org.apache.zookeeper.server.SyncRequestProcessor
src.java.main.org.apache.zookeeper.server.quorum.ObserverZooKeeperServer
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test

40
zoo keeper zookeep server fail snap count snapcount set lt gt snap count snapcount set zoo keeper zookeep server start fail error lt gt lt gt 2013 10 02 18 09 07 600 lt span quot error quot gt amp 91 myid amp 93 lt span gt error lt span quot error quot gt amp 91 sync thread syncthread sync request processor syncrequestprocessor 151 amp 93 lt span gt sever unrecover error exit lt br gt java lang illeg argument except illegalargumentexcept posit lt br gt java util random next nextint random java 300 lt br gt org apach zookeep server sync request processor syncrequestprocessor run sync request processor syncrequestprocessor java 93 lt gt lt gt sourc code suppos snap count snapcount more lt gt lt div quot code panel quot style quot border style solid border width px 1px quot gt lt div quot code header codehead panel header panelhead quot style quot border bottom width px 1px border bottom style solid quot gt lt gt org apach zookeep server sync request processor syncrequestprocessor java lt gt lt div gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt 91 lt span quot code comment quot gt lt span quot code keyword quot gt lt span gt lt span quot code keyword quot gt lt span gt attempt ensur ofth server lt span gt 92 lt span quot code comment quot gt ensembl snapshot time lt span gt 93 lt span quot code object quot gt lt span gt rand roll randrol next nextint snap count snapcount lt pre gt lt div gt lt div gt lt gt supposit bad snap count snapcount realist set lt br gt better mention restrict document add valid sourc code lt gt
1
src.java.main.org.apache.zookeeper.server.ZooKeeperServer

41
quorum peer main test quorumpeermaintest fail consist quot complain host quot assert failur lt gt quorum peer main test quorumpeermaintest fail consist quot complain host quot assert failur lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt 2013 10 01 16 09 17 962 myid info main unit4 zk test runner junit4zktestrunn log invok method loggedinvokemethod 54 test method fail test bad peer address quorum testbadpeeraddressinquorum java lang assert error assertionerror complain host org junit fail java 91 org junit asserttru java 43 org apach zookeep server quorum quorum peer main test quorumpeermaintest test bad peer address quorum testbadpeeraddressinquorum quorum peer main test quorumpeermaintest java 434 sun reflect method accessor impl nativemethodaccessorimpl invoke0 method sun reflect method accessor impl nativemethodaccessorimpl invok method accessor impl nativemethodaccessorimpl java 39 sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org junit runner model framework method frameworkmethod run reflect call runreflectivecal framework method frameworkmethod java 44 org junit intern runner model reflect callabl reflectivecal run reflect callabl reflectivecal java 15 org junit runner model framework method frameworkmethod invok explos invokeexplos framework method frameworkmethod java 41 org junit intern runner statement invok method invokemethod evalu invok method invokemethod java 20 org apach zookeep unit4 zk test runner junit4zktestrunn log invok method loggedinvokemethod evalu unit4 zk test runner junit4zktestrunn java 52 org junit rule test watchman testwatchman evalu test watchman testwatchman java 48 org junit runner block unit4 runner blockjunit4classrunn run child runchild block unit4 runner blockjunit4classrunn java 76 org junit runner block unit4 runner blockjunit4classrunn run child runchild block unit4 runner blockjunit4classrunn java 50 org junit runner parent runner parentrunn run parent runner parentrunn java 193 org junit runner parent runner parentrunn schedul parent runner parentrunn java 52 org junit runner parent runner parentrunn run children runchildren parent runner parentrunn java 191 org junit runner parent runner parentrunn access 000 parent runner parentrunn java 42 org junit runner parent runner parentrunn evalu parent runner parentrunn java 184 org junit runner parent runner parentrunn run parent runner parentrunn java 236 junit framework unit4 test adapt junit4testadapt run unit4 test adapt junit4testadapt java 39 org apach tool ant taskdef option junit unit test runner junittestrunn run unit test runner junittestrunn java 518 org apach tool ant taskdef option junit unit test runner junittestrunn launch unit test runner junittestrunn java 1052 org apach tool ant taskdef option junit unit test runner junittestrunn main unit test runner junittestrunn java 906 2013 10 01 16 09 17 963 myid info main zk test zktestcas 65 fail test bad peer address quorum testbadpeeraddressinquorum java lang assert error assertionerror complain host org junit fail java 91 org junit asserttru java 43 org apach zookeep server quorum quorum peer main test quorumpeermaintest test bad peer address quorum testbadpeeraddressinquorum quorum peer main test quorumpeermaintest java 434 sun reflect method accessor impl nativemethodaccessorimpl invoke0 method sun reflect method accessor impl nativemethodaccessorimpl invok method accessor impl nativemethodaccessorimpl java 39 sun reflect deleg method accessor impl delegatingmethodaccessorimpl invok deleg method accessor impl delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org junit runner model framework method frameworkmethod run reflect call runreflectivecal framework method frameworkmethod java 44 org junit intern runner model reflect callabl reflectivecal run reflect callabl reflectivecal java 15 org junit runner model framework method frameworkmethod invok explos invokeexplos framework method frameworkmethod java 41 org junit intern runner statement invok method invokemethod evalu invok method invokemethod java 20 org apach zookeep unit4 zk test runner junit4zktestrunn log invok method loggedinvokemethod evalu unit4 zk test runner junit4zktestrunn java 52 org junit rule test watchman testwatchman evalu test watchman testwatchman java 48 org junit runner block unit4 runner blockjunit4classrunn run child runchild block unit4 runner blockjunit4classrunn java 76 org junit runner block unit4 runner blockjunit4classrunn run child runchild block unit4 runner blockjunit4classrunn java 50 org junit runner parent runner parentrunn run parent runner parentrunn java 193 org junit runner parent runner parentrunn schedul parent runner parentrunn java 52 org junit runner parent runner parentrunn run children runchildren parent runner parentrunn java 191 org junit runner parent runner parentrunn access 000 parent runner parentrunn java 42 org junit runner parent runner parentrunn evalu parent runner parentrunn java 184 org junit runner parent runner parentrunn run parent runner parentrunn java 236 junit framework unit4 test adapt junit4testadapt run unit4 test adapt junit4testadapt java 39 org apach tool ant taskdef option junit unit test runner junittestrunn run unit test runner junittestrunn java 518 org apach tool ant taskdef option junit unit test runner junittestrunn launch unit test runner junittestrunn java 1052 org apach tool ant taskdef option junit unit test runner junittestrunn main unit test runner junittestrunn java 906 lt pre gt lt div gt lt div gt
1
src.java.test.org.apache.zookeeper.server.quorum.QuorumPeerMainTest

42
zoo inspector zooinspector authent lt gt zoo inspector zooinspector doesn apo support authent connect anonym ensembl lt br gt nice abl configur authent scheme data order brows node acl set lt gt
1
src.contrib.zooinspector.src.java.org.apache.zookeeper.inspector.manager.ZooInspectorManagerImpl

43
pointer except nullpointerexcept snapshot formatt snapshotformatt lt gt snapshot formatt snapshotformatt fail pointer except nullpointerexcept pars on snapshot quot quot data on znode lt br gt except thread quot main quot java lang pointer except nullpointerexcept lt br gt org apach zookeep server snapshot formatt snapshotformatt print znode printznod snapshot formatt snapshotformatt java 90 lt br gt org apach zookeep server snapshot formatt snapshotformatt print znode printznod snapshot formatt snapshotformatt java 95 lt br gt org apach zookeep server snapshot formatt snapshotformatt print znode printznod snapshot formatt snapshotformatt java 95 lt br gt org apach zookeep server snapshot formatt snapshotformatt print znode printznod snapshot formatt snapshotformatt java 95 lt br gt org apach zookeep server snapshot formatt snapshotformatt print znode detail printznodedetail snapshot formatt snapshotformatt java 79 lt br gt org apach zookeep server snapshot formatt snapshotformatt print detail printdetail snapshot formatt snapshotformatt java 71 lt br gt org apach zookeep server snapshot formatt snapshotformatt run snapshot formatt snapshotformatt java 67 lt br gt org apach zookeep server snapshot formatt snapshotformatt main snapshot formatt snapshotformatt java 51 lt gt
1
src.java.main.org.apache.zookeeper.server.SnapshotFormatter

44
concurr oper four letter apo dump apo ephemer command kill session killsess caus npe lt gt potenti problem occur execut four letter apo dump apo command meantim zkserver ha trigger session closur remov relat inform from data tree datatre lt gt lt gt except lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt java lang pointer except nullpointerexcept org apach zookeep server data tree datatre dump ephemer dumpephemer data tree datatre java 1278 org apach zookeep server data tree test datatreetest run data tree test datatreetest java 82 lt pre gt lt div gt lt div gt
3
src.java.main.org.apache.zookeeper.server.DataTree
src.java.test.org.apache.zookeeper.server.DataTreeUnitTest
src.java.test.org.apache.zookeeper.test.DataTreeTest

45
client cnxn clientcnxn properli releas resourc us ping rw server rwserver lt gt ping rw server rwserver client cnxn clientcnxn open socket buffer reader bufferedread properli close block caus leak except case lt gt lt gt client cnxn clientcnxn ping rw server pingrwserv lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt lt span quot code keyword quot gt lt span gt socket sock lt span quot code keyword quot gt lt span gt socket addr get host name gethostnam addr get port getport buffer reader bufferedread br lt span quot code keyword quot gt lt span gt buffer reader bufferedread lt span quot code keyword quot gt lt span gt input stream reader inputstreamread sock get input stream getinputstream sock close br close lt span quot code keyword quot gt lt span gt connect except connectexcept lt span quot code comment quot gt ignor lt span quot code keyword quot gt lt span gt mean server up lt span gt lt span quot code keyword quot gt lt span gt io except ioexcept lt span quot code comment quot gt unexpect error warn lt span gt log warn lt span quot code quot quot gt quot except lt span quot code keyword quot gt lt span gt seek lt span quot code keyword quot gt lt span gt server quot lt span gt get messag getmessag lt pre gt lt div gt lt div gt
1
src.java.main.org.apache.zookeeper.ClientCnxn

46
client cnxn clientcnxn run miss second ping connect get drop befor ping lt gt session timeout except sessiontimeoutexcept except even time next ping timetonextp neg depend time follow line execut thread check time befor send ping lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt read timeout readtimeout client cnxn socket clientcnxnsocket get idl recv getidlerecv lt pre gt lt div gt lt div gt lt gt addit ping twice matter session time valu exampl set session time 60 min 60min ping twice 40 min 40min window connect drop os after idl time lt gt lt gt issu caus randomli quot connect loss quot quot session expir quot issu client side bad applic base hbase lt gt
1
src.java.main.org.apache.zookeeper.ClientCnxn

47
race condit produc npe nio server cnxn nioservercnxn string tostr lt gt socket close variabl quot sock quot set normal reason string tostr method call befor quot sock quot set produc pointer except nullpointerexcept lt gt lt gt stack trace lt gt lt gt 2013 08 29 01 49 19 991 6277 lt span quot error quot gt amp 91 commit proc work thread commitprocworkthread amp 93 lt span gt warn org apach zookeep server worker servic workerservic unexpect except lt br gt java lang pointer except nullpointerexcept lt br gt org apach zookeep server nio server cnxn nioservercnxn string tostr nio server cnxn nioservercnxn java 961 lt br gt java lang string valu valueof string java 2854 lt br gt java lang string builder stringbuild append string builder stringbuild java 128 lt br gt org apach zookeep server nio server cnxn nioservercnxn process nio server cnxn nioservercnxn java 1104 lt br gt org apach zookeep server watch manag watchmanag trigger watch triggerwatch watch manag watchmanag java 120 lt br gt org apach zookeep server watch manag watchmanag trigger watch triggerwatch watch manag watchmanag java 92 lt br gt org apach zookeep server data tree datatre creat node createnod data tree datatre java 544 lt br gt org apach zookeep server data tree datatre process txn processtxn data tree datatre java 805 lt br gt org apach zookeep server zk databas zkdatabas process txn processtxn zk databas zkdatabas java 319 lt br gt org apach zookeep server zoo keeper server zookeeperserv process txn processtxn zoo keeper server zookeeperserv java 967 lt br gt org apach zookeep server request processor finalrequestprocessor process request processrequest request processor finalrequestprocessor java 115 lt br gt org apach zookeep server quorum leader appli request processor tobeappliedrequestprocessor process request processrequest leader java 859 lt br gt org apach zookeep server quorum commit processor commitprocessor commit work request commitworkrequest work dowork commit processor commitprocessor java 271 lt br gt org apach zookeep server worker servic workerservic schedul work request scheduledworkrequest run worker servic workerservic java 152 lt br gt java util concurr thread pool executor threadpoolexecutor run worker runwork thread pool executor threadpoolexecutor java 1145 lt br gt java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java 615 lt br gt java lang thread run thread java 722 lt gt
1
src.java.main.org.apache.zookeeper.server.NIOServerCnxn

48
fle test fletest test le testl flaki window box lt gt fle test fletest test le testl fail intermitt window box reason le thread lethread run lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt lt span quot code keyword quot gt lt span gt leader lt span quot code keyword quot gt lt span gt obj finalobj success count successcount lt span quot code keyword quot gt lt span gt success count successcount amp gt count obj finalobj notifi lt span quot code keyword quot gt lt span gt lt pre gt lt div gt lt div gt lt gt basic confirm leader leader thread di quot quot loop lt gt lt gt verif step check leader thread aliv follow lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt lt span quot code keyword quot gt lt span gt thread get lt span quot code object quot gt lt span gt leader aliv isal fail lt span quot code quot quot gt quot leader hasn apo join quot lt span gt leader lt pre gt lt div gt lt div gt lt gt window box verif step fail frequent leader thread most exit lt gt lt gt leader aliv verif step lead thread bump up success count successcount amp gt count lt gt
2
src.java.test.org.apache.zookeeper.test.FLETest
src.java.test.org.apache.zookeeper.test.FLETest.TestVote

49
zoo keeper zookeep server unabl join establish ensembl lt gt test roll restart three zoo keeper zookeep server fail from time time lt br gt ran test loop failur point on server unabl join enssembl form two lt gt
5
src.java.main.org.apache.zookeeper.server.quorum.FastLeaderElection
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.main.org.apache.zookeeper.server.quorum.Learner
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.test.org.apache.zookeeper.test.FLETest

50
upgrad netti version lt gt upgrad netti version lt gt
2
src.java.main.org.apache.zookeeper.server.NIOServerCnxn
src.java.main.org.apache.zookeeper.server.NettyServerCnxn

51
fail run zookeep client weblog applic server lt gt problem detail describ here lt href quot http comment gmane org gmane comp java zookeep user 2897 quot quot extern link quot rel quot nofollow quot gt http comment gmane org gmane comp java zookeep user 2897 lt gt lt br gt provid link contain refer fix implement lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt amp lt apr 24 2013 03 28 pm msk amp gt amp lt warn amp gt amp lt org apach zookeep client cnxn clientcnxn amp gt amp lt devapp090 amp gt amp lt clust2 amp gt amp lt activ execut thread executethread apo apo queue apo weblog kernel devapp090 2182 amp gt amp lt intern amp gt amp lt amp gt amp lt amp gt amp lt 1366794208810 amp gt amp lt bea 000000 amp gt amp lt warn org apach zookeep client cnxn clientcnxn session x0 0x0 server unexpect error close socket connect attempt reconnect java lang illeg argument except illegalargumentexcept configur regist handl configur name client com bea common secur jdkutil jaa configur jaasconfigur get app configur entri getappconfigurationentri jaa configur jaasconfigur java 130 org apach zookeep client zoo keeper sasl client zookeepersaslcli amp lt init amp gt zoo keeper sasl client zookeepersaslcli java 97 org apach zookeep client cnxn clientcnxn send thread sendthread start connect startconnect client cnxn clientcnxn java 943 org apach zookeep client cnxn clientcnxn send thread sendthread run client cnxn clientcnxn java 993 amp gt lt pre gt lt div gt lt div gt
1
src.java.main.org.apache.zookeeper.client.ZooKeeperSaslClient

52
watch event isn apo handl correctli client reestablish server lt gt client reestablish server send watch trigger code data tree datatre handl correctli lt gt lt gt obviou notic lt img quot emoticon quot src quot http issu apach org jira imag icon emoticon smile gif quot height quot 16 quot width quot 16 quot align quot absmiddl quot alt quot quot border quot quot gt lt gt lt gt scenario lt br gt client set data watch disconnect client delet creat client reestablish zk receiv node creat nodecr node data chang nodedatachang lt br gt client set exist watch exist disconnect client creat client reestablish zk receiv node data chang nodedatachang node creat nodecr lt gt
1
src.java.main.org.apache.zookeeper.server.DataTree

53
avoid revers dn lookup hostnam connect string liter ip address lt gt env inet socket address inetsocketaddress get host name gethostnam call host name connect string liter ip address call trigger revers dn lookup slow lt br gt situat host name simpli set ip caus problem lt gt
2
src.java.main.org.apache.zookeeper.client.StaticHostProvider
src.java.test.org.apache.zookeeper.test.StaticHostProviderTest

54
increas cpu usag unnecessari sasl check lt gt profil on java environ found interest footprint zoo keeper zookeep sasl support trigger lot time client apo even us lt gt lt gt disabl sasl complet lt gt lt gt attach screenshot show 10 minut profil session on product jetti server jetti server handl 1k web request minut averag respons time web request milli second profil perform machin run amp gt 24h lt gt lt gt notic signific cpu increas server deploi updat from zoo keeper zookeep zoo keeper zookeep start investig screenshot show 32 cpu time spent jetti contrast 65 spend zoo keeper zookeep lt gt lt gt note thought lt gt lt ul gt lt li gt lt tt gt client cnxn clientcnxn send thread sendthread client tunnel authent progress clienttunneledauthenticationinprogress lt tt gt culprit lt li gt lt li gt lt tt gt javax secur auth login configur get configur getconfigur lt tt gt call lt li gt lt li gt bit reflect involv lt tt gt java secur access control accesscontrol privileg doprivileg lt tt gt lt li gt lt li gt secur manag activ jvm tend place check code befor call lt tt gt access control accesscontrol privileg doprivileg lt tt gt sm instal runnabl call directli safe cycl lt li gt lt ul gt
2
src.java.main.org.apache.zookeeper.ClientCnxn
src.java.main.org.apache.zookeeper.client.ZooKeeperSaslClient

55
fix watcher test watchertest jdk7 lt gt jdk7 run unit test random order caus intermitt watcher test watchertest failur fix clean up variabl interfer test lt gt
1
src.java.test.org.apache.zookeeper.test.WatcherTest

56
leader load databas twice lt gt leader server current load databas befor run leader elect figur zxid us elect start lead problemat larger databas remov redund load lt gt lt gt code refer lt gt lt ol gt lt li gt get last log zxid getlastloggedzxid quorum peer quorump lt li gt lt li gt load data loaddata zoo keeper server zookeeperserv lt li gt lt ol gt
1
src.java.main.org.apache.zookeeper.server.ZooKeeperServer

57
introduc protocol version connect initi messag lt gt current first messag server send server includ on field server apo id quorum cnx manag quorumcnxmanag java make chang inform pass initi connect difficult patch chang first field messag protocol version neg number apo server id second field server id third field number byte remaind messag server read first field befor neg number read second field find server id remov remaind messag from stream affect earlier server send server id code patch run server amp gt connect provid necessari flexibl futur releas upgrad path from lt gt
3
src.java.main.org.apache.zookeeper.server.quorum.QuorumCnxManager
src.java.test.org.apache.zookeeper.test.CnxManagerTest
src.java.test.org.apache.zookeeper.test.CnxManagerTest.CnxManagerThread

58
test transact log corrupt testtransactionlogcorrupt occasion fail lt gt test transact log corrupt testtransactionlogcorrupt flaki exampl fail here lt gt lt gt lt href quot http build apach org job zoo keeper zookeep trunk jdk7 500 quot quot extern link quot rel quot nofollow quot gt http build apach org job zoo keeper zookeep trunk jdk7 500 lt gt lt br gt lt href quot http build apach org job zoo keeper zookeep trunk jdk7 502 quot quot extern link quot rel quot nofollow quot gt http build apach org job zoo keeper zookeep trunk jdk7 502 lt gt lt br gt lt href quot http build apach org job zoo keeper zookeep trunk jdk7 503 show failur link showfailureslink quot quot extern link quot rel quot nofollow quot gt http build apach org job zoo keeper zookeep trunk jdk7 503 show failur link showfailureslink lt gt lt gt lt gt fail older build longer websit exampl build from 381 399 lt gt
6
src.java.test.org.apache.zookeeper.server.TruncateCorruptionTest
src.java.test.org.apache.zookeeper.server.TruncateCorruptionTest.Check
src.java.test.org.apache.zookeeper.server.TruncateCorruptionTest.ZkWatcher
src.java.test.org.apache.zookeeper.server.TruncateCorruptionTest.ZookeeperServerWrapper
src.java.test.org.apache.zookeeper.server.util.PortForwarder
src.java.test.org.apache.zookeeper.test.TruncateTest

59
prep request processor preprequestprocessor abort multi oper incorrectli lt gt found issu issu multipl instanc follow multi op concurr lt gt lt gt multi lt gt creat sequenti node creat node lt gt expect result first multi op request success rest request fail exist lt gt lt gt report result subsequ multi op fail sequenti node creation fail lt gt lt gt code sub op issu instanc multi op asynchron lt gt lt gt zok zok lt br gt zok znodeexist lt br gt znodeexist zruntimeinconsist lt gt lt gt ad more debug log caus prep request processor preprequestprocessor rollback outstand chang outstandingchang second multi op incorrectli caus sequenti node name gener incorrect sequenti node name gener prep request processor preprequestprocessor lt gt lt gt creat 0001 lt br gt creat 0003 lt br gt creat 0001 lt gt lt gt bug get pend chang getpendingchang method fail copi chang record changerecord parent node quot quot rollback pend chang rollbackpendingchang restor right previou chang record parent node abort second multi op lt gt lt gt impact bug sequenti node creation parent node fail previou on commit implic lt gt
1
src.java.main.org.apache.zookeeper.server.PrepRequestProcessor

60
session id neg year 2022 lt gt decid us larg number myid file caus session id neg softwar apach accumulo handl diagnos problem notic session impl sessionimpl lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt initi next session initializenextsess id next sid nextsid next sid nextsid current time milli currenttimemilli amp lt amp lt 24 amp gt amp gt next sid nextsid next sid nextsid id amp lt amp lt 56 next sid nextsid lt pre gt lt div gt lt div gt lt gt 40 th 40th bit current time milli currenttimemilli on sign extens fill upper byte next sid nextsid id make session id uniqu recommend chang right shift logic shift lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt initi next session initializenextsess id next sid nextsid next sid nextsid current time milli currenttimemilli amp lt amp lt 24 amp gt amp gt amp gt next sid nextsid next sid nextsid id amp lt amp lt 56 next sid nextsid lt pre gt lt div gt lt div gt lt gt year 2022 befor worri lt gt
1
src.java.main.org.apache.zookeeper.server.SessionTrackerImpl

61
class compar string object equal lt gt class org apach zookeep client zoo keeper sasl client zookeepersaslcli java lt br gt org apach zookeep server quorum flexibl quorum hierarch quorumhierarch java compar string long referenti equal lt gt lt gt problem long cach string intern problem kind comparison past on product jvm didn apo reus object lt gt
2
src.java.main.org.apache.zookeeper.client.ZooKeeperSaslClient
src.java.main.org.apache.zookeeper.server.quorum.flexible.QuorumHierarchical

62
intermitt failur zk databas corrupt test zkdatabasecorruptiontest jenkin lt gt zk databas corrupt test zkdatabasecorruptiontest fail intermitt jenkin lt gt lt gt quot error messag last server leader quot lt gt lt gt jdk7 openjdk7 solari time last month lt gt lt gt lt href quot http build apach org view view zoo keeper zookeep job zoo keeper zookeep trunk openjdk7 test report testreport junit org apach zookeep test zk databas corrupt test zkdatabasecorruptiontest test corrupt testcorrupt quot quot extern link quot rel quot nofollow quot gt http build apach org view view zoo keeper zookeep job zoo keeper zookeep trunk openjdk7 test report testreport junit org apach zookeep test zk databas corrupt test zkdatabasecorruptiontest test corrupt testcorrupt lt gt lt gt
1
src.java.test.org.apache.zookeeper.test.ZkDatabaseCorruptionTest

63
host provid test statichostprovidertest test updat client migrat testupdateclientmigrateornot hang lt gt host provid test statichostprovidertest method test updat client migrat testupdateclientmigrateornot hang forev lt gt lt gt laptop get host name gethostnam 10 10 10 take second call result method effect run forev lt gt lt gt time run test hang consist lt gt
2
src.java.main.org.apache.zookeeper.client.StaticHostProvider
src.java.test.org.apache.zookeeper.test.StaticHostProviderTest

64
org apach zookeep server quorum zab1 test zab1_0test fail hard code 33556 port lt gt org apach zookeep server quorum zab1 test zab1_0test fail sun jdk open jdk lt gt lt gt lt span quot error quot gt amp 91 junit amp 93 lt span gt run org apach zookeep server quorum zab1 test zab1_0test lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt test run failur error time elaps 18 334 sec lt br gt lt span quot error quot gt amp 91 junit amp 93 lt span gt test org apach zookeep server quorum zab1 test zab1_0test fail lt gt lt gt zab1 test zab1_0test log lt br gt zab1 test zab1_0test log lt br gt 2012 07 11 23 17 15 579 lt span quot error quot gt amp 91 myid amp 93 lt span gt info lt span quot error quot gt amp 91 main leader 427 amp 93 lt span gt shutdown call lt br gt java lang except shutdown leader reason end test lt br gt org apach zookeep server quorum leader shutdown leader java 427 lt br gt org apach zookeep server quorum zab1 test zab1_0test test last accept epoch testlastacceptedepoch zab1 test zab1_0test java 211 lt br gt sun reflect method accessor impl nativemethodaccessorimpl invoke0 method lt br gt sun reflect method accessor impl nativemethodaccessorimpl invok method accessor impl nativemethodaccessorimpl java 48 lt gt lt gt 2012 07 11 23 17 15 584 lt span quot error quot gt amp 91 myid amp 93 lt span gt error lt span quot error quot gt amp 91 main leader 139 amp 93 lt span gt couldn apo bind port 33556 lt br gt java net bind except bindexcept address us lt br gt java net plain socket impl plainsocketimpl bind plain socket impl plainsocketimpl java 402 lt br gt java net server socket serversocket bind server socket serversocket java 328 lt br gt java net server socket serversocket bind server socket serversocket java 286 lt br gt org apach zookeep server quorum leader amp lt init amp gt leader java 137 lt br gt org apach zookeep server quorum zab1 test zab1_0test creat leader createlead zab1 test zab1_0test java 810 lt br gt org apach zookeep server quorum zab1 test zab1_0test test leader elect follow testleaderinelectingfollow zab1 test zab1_0test java 224 lt br gt sun reflect method accessor impl nativemethodaccessorimpl invoke0 method lt gt lt gt 2012 07 11 23 17 20 202 lt span quot error quot gt amp 91 myid amp 93 lt span gt error lt span quot error quot gt amp 91 learner handler learnerhandl bdvm039 svl ibm com 30 122 48 40153 learner handler learnerhandl 559 amp 93 lt span gt unex lt br gt pect except caus shutdown sock open lt br gt java net socket timeout except sockettimeoutexcept read time lt br gt java net socket input stream socketinputstream read socket input stream socketinputstream java 129 lt br gt java io buffer input stream bufferedinputstream fill buffer input stream bufferedinputstream java 218 lt br gt java io buffer input stream bufferedinputstream read buffer input stream bufferedinputstream java 237 lt br gt java io data input stream datainputstream read readint data input stream datainputstream java 370 lt br gt org apach jute binari input archiv binaryinputarch read readint binari input archiv binaryinputarch java 63 lt br gt org apach zookeep server quorum quorum packet quorumpacket deseri quorum packet quorumpacket java 83 lt br gt org apach jute binari input archiv binaryinputarch read record readrecord binari input archiv binaryinputarch java 108 lt br gt org apach zookeep server quorum learner handler learnerhandl run learner handler learnerhandl java 291 lt br gt 2012 07 11 23 17 20 203 lt span quot error quot gt amp 91 myid amp 93 lt span gt warn lt span quot error quot gt amp 91 learner handler learnerhandl bdvm039 svl ibm com 30 122 48 40153 learner handler learnerhandl 569 amp 93 lt span gt lt gt lt ul gt lt li gt lt ul gt lt li gt lt ul gt lt li gt goodby bdvm039 svl ibm com 30 122 48 40153 lt br gt 2012 07 11 23 17 20 204 lt span quot error quot gt amp 91 myid amp 93 lt span gt info lt span quot error quot gt amp 91 thread 20 leader 421 amp 93 lt span gt shut down lt br gt 2012 07 11 23 17 20 204 lt span quot error quot gt amp 91 myid amp 93 lt span gt info lt span quot error quot gt amp 91 thread 20 leader 427 amp 93 lt span gt shutdown call lt br gt java lang except shutdown leader reason lead end lt li gt lt ul gt lt li gt lt ul gt lt li gt lt ul gt lt gt failur 33556 port us us command check fact hard code unit test improv code patch lt gt
1
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test

65
unabl load databas miss parent node lt gt replai txnlog data tree server ha code detect miss parent node code block last modifi part lt href quot http issu apach org jira brows zookeep 1333 quot titl quot npe file txn snap log filetxnsnaplog restart cluster quot quot issu link quot data issu kei quot zookeep 1333 quot gt lt del gt zookeep 1333 lt del gt lt gt product found check posit lt gt lt gt sequenc txn follow lt gt lt gt zxid creat prefix lt br gt zxid creat prefix lt br gt zxid delet prefix lt br gt zxid delet prefix lt gt lt gt server start captur snapshot zxid time travers data tree down prefix txn appli prefix children lt gt lt gt server restor from snapshot process txnlog start from zxid txn gener miss parent error server refus start up lt gt lt gt check allow discov bug lt href quot http issu apach org jira brows zookeep 1551 quot titl quot observ ignor txn after snapshot uptod quot quot issu link quot data issu kei quot zookeep 1551 quot gt lt del gt zookeep 1551 lt del gt lt gt don apo option remov check solv issu lt gt
2
src.java.main.org.apache.zookeeper.server.persistence.FileTxnSnapLog
src.java.test.org.apache.zookeeper.test.LoadFromLogTest

66
allow unit junit test build ibm java lt gt org apach zookeep test client base clientbas org apach zookeep test client test clienttest org apach zookeep test quorum base quorumbas org apach zookeep test quorum util quorumutil class com sun manag unix oper mx bean unixoperatingsystemmxbean fail build ibm java sr 11 issu resolv osmx bean osmxbean propos jira apo lt href quot http issu apach org jira brows zookeep 1474 quot titl quot build zookeep ibm java us sun mx bean mxbean class quot quot issu link quot data issu kei quot zookeep 1474 quot gt lt del gt zookeep 1474 lt del gt lt gt lt gt lt gt osmx bean osmxbean org apach zookeep server util osmx bean osmxbean wrapper implement com sun manag unix oper mx bean unixoperatingsystemmxbean decid us sun api implement depend runtim vendor us lt gt
4
src.java.test.org.apache.zookeeper.test.ClientBase
src.java.test.org.apache.zookeeper.test.ClientTest
src.java.test.org.apache.zookeeper.test.QuorumBase
src.java.test.org.apache.zookeeper.test.QuorumUtil

67
leader snapshot uncommit state lt gt leader current take snapshot call load data loaddata begin lead method load data contain uncommit state lt gt
4
src.java.main.org.apache.zookeeper.server.SyncRequestProcessor
src.java.main.org.apache.zookeeper.server.ZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test

68
enabl sync request processor observ lt gt observ doesn apo forward txn sync request processor syncrequestprocessor persist txn disk period creat snapshot increas start up time get entir snapshot observ ha run time lt gt
5
src.java.main.org.apache.zookeeper.server.SyncRequestProcessor
src.java.main.org.apache.zookeeper.server.quorum.ObserverZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerConfig
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerMain

69
observ ignor txn after snapshot uptod lt gt learner java txn after learner ha snapshot after newlead packet store packet commit packetsnotcommit follow ha special logic appli txn end sync leader syncwithlead method observ ignor txn complet caus data inconsist lt gt
4
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.main.org.apache.zookeeper.server.quorum.Learner
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test

70
zk shell cli execut last command exit lt gt zk releas apo version zk cli zkcli sh last command execut lt gt lt gt execut lt tt gt ctrl lt tt gt shell snippet lt tt gt ls lt tt gt execut lt tt gt ctrl lt tt gt trigger insert illustr output from lt tt gt ls lt tt gt appear command run lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt zk zookeep exampl com 2181 connect ls blah foo zk zookeep exampl com 2181 connect amp lt ctrl amp gt foo lt pre gt lt div gt lt div gt
1
src.java.main.org.apache.zookeeper.ZooKeeperMain

71
zk client hang function avail server lt gt exampl zk multi client server lt gt lt gt issu server side server drop packet unknown op code opcod zoo keeper server zookeeperserv submit request submitrequest lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt submit request submitrequest request si snip touch si cnxn validpacket request valid isvalid si type amp gt check op code opcod validpacket snip log warn quot drop packet server type quot si type invalid packet drop packet miss session except missingsessionexcept log debug enabl isdebugen log debug quot drop request quot get messag getmessag lt pre gt lt div gt lt div gt lt gt solut discuss lt href quot http issu apach org jira brows zookeep 1381 quot titl quot add method get zookeep server version from client quot quot issu link quot data issu kei quot zookeep 1381 quot gt zookeep 1381 lt gt get except client side amp amp close session lt gt
2
src.java.main.org.apache.zookeeper.server.ZooKeeperServer
src.java.test.org.apache.zookeeper.test.ClientTest

72
small bug quorum test quorumtest test follow start after leader testfollowersstartafterlead lt gt follow code appear quorum test quorumtest test follow start after leader testfollowersstartafterlead lt gt lt gt amp lt 30 lt br gt lt gt zk creat quot test quot quot test quot get byte getbyt zoo def zoodef id open acl unsaf open_acl_unsaf creat mode createmod persist lt gt keeper except keeperexcept connect loss except connectionlossexcept lt gt thread sleep 1000 lt gt test fail apo connect quorum after 30 second lt br gt fail quot client connect reestablish quorum give up after 30 second quot lt br gt lt gt lt gt from comment intent reconnect 30 time trigger apo lt br gt after fail connect thread sleep execut fail execut retri creat lt gt
1
src.java.test.org.apache.zookeeper.test.QuorumTest

73
build zookeep ibm java us sun mx bean mxbean class lt gt zookeep server nio server cnxn nioservercnxn zookeep server netti server cnxn nettyservercnxn import com sun manag unix oper mx bean unixoperatingsystemmxbean oper mx bean operatingsystemmxbean implement ibm open java lt gt lt gt ibm java run zookeep power ppc64 server lt gt
2
src.java.main.org.apache.zookeeper.server.NIOServerCnxn
src.java.main.org.apache.zookeeper.server.NettyServerCnxn

74
standalon zoo keeper server zookeeperserv close transact log file shutdown lt gt shutdown standalon zk server clear zkdatabas close transact log stream delet temporari file unit test window fail lt br gt zoo keeper server zookeeperserv java lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt zk db zkdb zk db zkdb clear lt pre gt lt div gt lt div gt lt gt suggest close zk db zkdb follow inturn care transact log lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt zk db zkdb zk db zkdb clear zk db zkdb close io except ioexcept log warn quot error close log quot lt pre gt lt div gt lt div gt
4
src.java.main.org.apache.zookeeper.server.ZooKeeperServer
src.java.main.org.apache.zookeeper.server.ZooKeeperServerMain
src.java.test.org.apache.zookeeper.server.ZooKeeperServerMainTest
src.java.test.org.apache.zookeeper.server.ZooKeeperServerMainTest.MainThread

75
node quota creation transact log crash leader startup lt gt lt gt lt gt apo ve found bug zookeep relat quota creation shutdown zookeep leader startup lt gt lt gt step reproduc lt br gt creat quota bug quota_bug lt br gt setquota 10000 quota bug quota_bug lt br gt stop ensembl previou oper transact log lt br gt start server lt br gt elect leader shutdown except miss stat node count zookeep quota quota bug quota_bug zookeep zookeeper_ lt br gt stat lt gt lt gt apo ve debug bit happen found follow problem lt br gt startup server load last snapshot replai last transact log fill up trie ptrie variabl data tree datatre path node quota lt br gt after leader elect leader server load snapshot last transact log doesn apo clean up trie ptrie variabl mean contain quot quota bug quota_bug quot path quot creat quota bug quota_bug quot process from transact log data tree datatre think quota node quot zookeep quota quota bug quota_bug zookeep limit zookeeper_limit quot quot zookeep quota quota bug quota_bug zookeep stat zookeeper_stat quot creat node creation transact log lead miss stat node except lt gt lt gt clear trie ptrie solv problem lt gt
3
src.java.main.org.apache.zookeeper.common.PathTrie
src.java.main.org.apache.zookeeper.server.DataTree
src.java.test.org.apache.zookeeper.test.DataTreeTest

76
quorum peer main test quorumpeermaintest test quorum testquorum test bad packet testbadpacket fail intermitt lt gt quorum peer main test quorumpeermaintest test quorum testquorum test bad packet testbadpacket testcas fail intermitt wrong zk client zkclient usag pattern lt gt lt gt follow connect loss connectionloss version lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt keeper error code keepererrorcod connect loss connectionloss foo q1 foo_q1 org apach zookeep keeper except keeperexcept connect loss except connectionlossexcept keeper error code keepererrorcod connect loss connectionloss foo q1 foo_q1 org apach zookeep keeper except keeperexcept creat keeper except keeperexcept java 90 org apach zookeep keeper except keeperexcept creat keeper except keeperexcept java 42 org apach zookeep zoo keeper zookeep creat zoo keeper zookeep java 657 org apach zookeep server quorum quorum peer main test quorumpeermaintest test bad packet testbadpacket quorum peer main test quorumpeermaintest java 212 lt pre gt lt div gt lt div gt lt gt zoo keeper zookeep connect happen async client cnxn clientcnxn client wait apo keeper state keeperst sync connect syncconnect apo event befor start test case wait connect lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt zoo keeper zookeep zk zoo keeper zookeep quot 127 quot client port qp1 client_port_qp1 client base clientbas connect timeout connection_timeout zk creat quot foo q1 foo_q1 quot quot foobar1 quot get byte getbyt id open acl unsaf open_acl_unsaf creat mode createmod persist lt pre gt lt div gt lt div gt
1
src.java.test.org.apache.zookeeper.server.quorum.QuorumPeerMainTest

77
client side apo path valid pathvalid apo miss multi transact api lt gt multi op op creat path op delet path op set data setdata path lt br gt op check path api perform client side path valid call server side throw except back client lt gt lt gt good provid zoo keeper zookeep client side path valid multi transact api present get err code from server properli convei caus lt gt lt gt exampl specifi invalid znode path op creat give follow except actual caus lt gt lt div quot code panel quot style quot border width px 1px quot gt lt div quot code content codecont panel content panelcont quot gt lt pre quot code java quot gt org apach zookeep keeper except keeperexcept node except nonodeexcept keeper error code keepererrorcod node nonod org apach zookeep keeper except keeperexcept creat keeper except keeperexcept java 115 org apach zookeep zoo keeper zookeep multi intern multiintern zoo keeper zookeep java 1174 org apach zookeep zoo keeper zookeep multi zoo keeper zookeep java 1115 lt pre gt lt div gt lt div gt
4
src.java.main.org.apache.zookeeper.Op
src.java.main.org.apache.zookeeper.Op.Delete
src.java.main.org.apache.zookeeper.ZooKeeper
src.java.test.org.apache.zookeeper.test.MultiTransactionTest

78
wrong epoch file creat lt gt line 443 quorum peer quorump lt span quot error quot gt amp 91 amp 93 lt span gt chang from lt gt lt gt write file writelongtofil current epoch filenam current_epoch_filenam accept epoch acceptedepoch lt gt lt gt lt gt lt gt write file writelongtofil accept epoch filenam accepted_epoch_filenam accept epoch acceptedepoch lt gt lt gt notic read code wrong don apo affect runtim lt gt lt gt lt span quot error quot gt amp 91 amp 93 lt span gt lt href quot http github com apach zookeep blob trunk src java main org apach zookeep server quorum quorum peer quorump java l443 quot quot extern link quot rel quot nofollow quot gt http github com apach zookeep blob trunk src java main org apach zookeep server quorum quorum peer quorump java l443 lt gt lt gt
2
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test

79
zookeep server hold dead expir session id watch data structur lt gt apo ve observ zookeep server hold expir session id watcher data structur result wchp command report session id found con dump expir session id sit server restart here snippet from client server log lead state on session id x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt lt gt server zookeep cluster 223 224 225 leader 226 apo zk client zkclient connect cluster lt gt lt gt from applic log lt gt lt gt applic log 2012 01 26 325 gz 2012 01 26 04 56 36 177 info lt span quot error quot gt amp 91 client cnxn clientcnxn amp 93 lt span gt lt span quot error quot gt amp 91 main send thread sendthread 223 prod 12913 amp 93 lt span gt applic session establish complet server 223 prod 172 17 135 38 12913 sessionid x134485 fd7 bcb26f 0x134485fd7bcb26f negoti timeout 6000 lt br gt applic log 2012 01 27 gz 2012 01 27 09 52 37 714 info lt span quot error quot gt amp 91 client cnxn clientcnxn amp 93 lt span gt lt span quot error quot gt amp 91 main send thread sendthread 223 prod 12913 amp 93 lt span gt lt span quot error quot gt amp 91 applic amp 93 lt span gt client session time heard from server 9827 ms 9827m sessionid x134485 fd7 bcb26f 0x134485fd7bcb26f close socket connect attempt reconnect lt br gt applic log 2012 01 27 gz 2012 01 27 09 52 38 191 info lt span quot error quot gt amp 91 client cnxn clientcnxn amp 93 lt span gt lt span quot error quot gt amp 91 main send thread sendthread 226 prod 12913 amp 93 lt span gt lt span quot error quot gt amp 91 applic amp 93 lt span gt unabl reconnect zoo keeper zookeep servic session x134485 fd7 bcb26f 0x134485fd7bcb26f ha expir close socket connect lt gt lt gt leader zk 225 lt gt lt gt zookeep log 2012 01 27 leader 225 gz 2012 01 27 09 52 34 010 info lt span quot error quot gt amp 91 session tracker sessiontrack zoo keeper server zookeeperserv 314 amp 93 lt span gt expir session x134485 fd7 bcb26f 0x134485fd7bcb26f timeout 6000 ms 6000m exceed lt br gt zookeep log 2012 01 27 leader 225 gz 2012 01 27 09 52 34 010 info lt span quot error quot gt amp 91 process thread processthread prep request processor preprequestprocessor 391 amp 93 lt span gt process session termin sessionid x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt lt gt server client initi connect 223 lt gt lt gt zookeep log 2012 01 26 223 gz 2012 01 26 04 56 36 173 info lt span quot error quot gt amp 91 commit processor commitprocessor nio server cnxn nioservercnxn 1580 amp 93 lt span gt establish session x134485 fd7 bcb26f 0x134485fd7bcb26f negoti timeout 6000 client 172 17 136 82 45020 lt br gt zookeep log 2012 01 27 223 gz 2012 01 27 09 52 34 018 info lt span quot error quot gt amp 91 commit processor commitprocessor nio server cnxn nioservercnxn 1435 amp 93 lt span gt close socket connect client 172 17 136 82 45020 sessionid x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt lt gt here log snippet from 226 server client reconnect befor get session expir event lt gt lt gt 2012 01 27 09 52 38 190 info lt span quot error quot gt amp 91 nio server cxn nioservercxn factori 12913 nio server cnxn nioservercnxn 770 amp 93 lt span gt client attempt renew session x134485 fd7 bcb26f 0x134485fd7bcb26f 172 17 136 82 49367 lt br gt 2012 01 27 09 52 38 191 info lt span quot error quot gt amp 91 quorum peer quorump 12913 nio server cnxn nioservercnxn 1573 amp 93 lt span gt invalid session x134485 fd7 bcb26f 0x134485fd7bcb26f client 172 17 136 82 49367 expir lt br gt 2012 01 27 09 52 38 191 info lt span quot error quot gt amp 91 nio server cxn nioservercxn factori 12913 nio server cnxn nioservercnxn 1435 amp 93 lt span gt close socket connect client 172 17 136 82 49367 sessionid x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt lt gt wchp output from 226 01 30 lt gt lt gt nnarkh ld zk con wchp 2012013000 nnarkh grep x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt 226 wchp lt gt wc lt br gt lt gt lt gt wchp output from 223 01 30 lt gt lt gt nnarkh ld zk con wchp 2012013000 nnarkh grep x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt 223 wchp lt gt wc lt br gt lt gt lt gt con output from 223 226 01 30 lt gt lt gt nnarkh ld zk con wchp 2012013000 nnarkh grep x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt 226 con lt gt wc lt br gt lt gt lt gt nnarkh ld zk con wchp 2012013000 nnarkh grep x134485 fd7 bcb26f 0x134485fd7bcb26f lt gt 223 con lt gt wc lt br gt lt gt lt gt happen client abl watch server 226 after disconnect from 223 inspit expir session id lt gt lt gt nio server cnxn nioservercnxn after suspect session expir server remov cnxn watch from intern data structur befor allow more request process even session expir lt gt lt gt session readi start receiv packet lt br gt factori lt gt sk selector wakeup enabl recv enablerecv lt gt except lt gt log warn quot except establish session close quot close lt gt wonder client sneak set watch right after server remov connect remov cnxn removecnxn api lt gt
13
src.java.main.org.apache.zookeeper.ClientCnxn
src.java.main.org.apache.zookeeper.ClientCnxn.Packet
src.java.main.org.apache.zookeeper.server.DataTree
src.java.main.org.apache.zookeeper.server.FinalRequestProcessor
src.java.main.org.apache.zookeeper.server.NIOServerCnxn
src.java.main.org.apache.zookeeper.server.NIOServerCnxnFactory
src.java.main.org.apache.zookeeper.server.WatchManager
src.java.main.org.apache.zookeeper.server.ZKDatabase
src.java.main.org.apache.zookeeper.server.ZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.main.org.apache.zookeeper.server.quorum.ProposalRequestProcessor
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.test.org.apache.zookeeper.test.DisconnectedWatcherTest

80
apo printwatch redo histori connect apo client command print usag necessari lt gt execut command lt br gt apo printwatch redo histori connect usag get print lt br gt basic print usag user ha enter command lt br gt wrong command time usag get print lt br gt lt gt lt div quot preformat panel quot style quot border width px 1px quot gt lt div quot preformat content preformattedcont panel content panelcont quot gt lt pre gt zk localhost 2181 connect printwatch printwatch zoo keeper zookeep server host port cmd arg connect host port get path watch ls path watch set path data version delquota path quit printwatch creat path data acl stat path watch close ls2 path watch histori listquota path set acl setacl path acl get acl getacl path sync path redo cmdno addauth scheme auth delet path version setquota val path lt pre gt lt div gt lt div gt
2
src.java.main.org.apache.zookeeper.ZooKeeperMain
src.java.test.org.apache.zookeeper.ZooKeeperTest

81
netti server cnxn nettyservercnxn properli close socket letter word request lt gt call letter word server configur us netti server cnxn factori nettyservercnxnfactori factori properli cancel kei close socket after send respons lw 4lw close request except thread shut down lt br gt 2011 09 13 12 14 17 546 warn lt span quot error quot gt amp 91 server worker netti server cnxn factori nettyservercnxnfactori cnxn channel handler cnxnchannelhandl 117 amp 93 lt span gt except caught lt span quot error quot gt amp 91 id x009300 cc 0x009300cc 38542 amp gt 139 172 114 138 2181 amp 93 lt span gt except java io io except ioexcept non block socket oper complet immedi lt br gt java io io except ioexcept non block socket oper complet immedi lt br gt sun nio ch socket dispatch socketdispatch close0 method lt br gt sun nio ch socket dispatch socketdispatch pre close preclos socket dispatch socketdispatch java 44 lt br gt sun nio ch socket channel impl socketchannelimpl impl close select channel implcloseselectablechannel socket channel impl socketchannelimpl java 684 lt br gt java nio channel spi abstract select channel abstractselectablechannel impl close channel implclosechannel abstract select channel abstractselectablechannel java 201 lt br gt java nio channel spi abstract interrupt channel abstractinterruptiblechannel close abstract interrupt channel abstractinterruptiblechannel java 97 lt br gt org jboss netti channel socket nio nio worker niowork close nio worker niowork java 593 lt br gt org jboss netti channel socket nio nio server socket pipelin sink nioserversocketpipelinesink handl accept socket handleacceptedsocket nio server socket pipelin sink nioserversocketpipelinesink java 119 lt br gt org jboss netti channel socket nio nio server socket pipelin sink nioserversocketpipelinesink event sunk eventsunk nio server socket pipelin sink nioserversocketpipelinesink java 76 lt br gt org jboss netti channel channel close channel java 720 lt br gt org jboss netti channel abstract channel abstractchannel close abstract channel abstractchannel java 208 lt br gt org apach zookeep server netti server cnxn nettyservercnxn close netti server cnxn nettyservercnxn java 116 lt br gt org apach zookeep server netti server cnxn nettyservercnxn cleanup writer socket cleanupwritersocket netti server cnxn nettyservercnxn java 241 lt br gt org apach zookeep server netti server cnxn nettyservercnxn access netti server cnxn nettyservercnxn java 231 lt br gt org apach zookeep server netti server cnxn nettyservercnxn command thread commandthread run netti server cnxn nettyservercnxn java 314 lt br gt org apach zookeep server netti server cnxn nettyservercnxn command thread commandthread start netti server cnxn nettyservercnxn java 305 lt br gt org apach zookeep server netti server cnxn nettyservercnxn check four letter word checkfourletterword netti server cnxn nettyservercnxn java 674 lt br gt org apach zookeep server netti server cnxn nettyservercnxn receiv messag receivemessag netti server cnxn nettyservercnxn java 791 lt br gt org apach zookeep server netti server cnxn factori nettyservercnxnfactori cnxn channel handler cnxnchannelhandl process messag processmessag netti server cnxn factori nettyservercnxnfactori java 217 lt br gt org apach zookeep server netti server cnxn factori nettyservercnxnfactori cnxn channel handler cnxnchannelhandl messag receiv messagereceiv netti server cnxn factori nettyservercnxnfactori java 141 lt br gt org jboss netti channel channel fire messag receiv firemessagereceiv channel java 274 lt br gt org jboss netti channel channel fire messag receiv firemessagereceiv channel java 261 lt br gt org jboss netti channel socket nio nio worker niowork read nio worker niowork java 350 lt br gt org jboss netti channel socket nio nio worker niowork process select kei processselectedkei nio worker niowork java 281 lt br gt org jboss netti channel socket nio nio worker niowork run nio worker niowork java 201 lt br gt org jboss netti util intern io worker runnabl ioworkerrunn run io worker runnabl ioworkerrunn java 46 lt br gt java util concurr thread pool executor threadpoolexecutor worker run task runtask thread pool executor threadpoolexecutor java 886 lt br gt java util concurr thread pool executor threadpoolexecutor worker run thread pool executor threadpoolexecutor java 908 lt br gt java lang thread run thread java 619 lt gt
2
src.java.main.org.apache.zookeeper.server.NettyServerCnxn
src.java.main.org.apache.zookeeper.server.NettyServerCnxnFactory

82
leader commun listen specifi ip wildcard address lt gt server specifi local address us leader commun leader elect us listen interfac similar client port address clientportaddress paramet ad year ago after review code apo reason port us wildcard server connect specif lt gt lt gt submit patch account leader elect algorithm lt gt lt gt option toggl backward compat bug chang broke thing lt gt lt gt more inform make option here lt br gt lt href quot http mail archiv apach org mod mbox mod_mbox hadoop zookeep dev 201008 mbox caan lk tikk t97 djqt3 cu 3caanlktikkt97djqt3cu h2 gnj p28 hg xjh345 hiyn 7gnj_4p28hgcxjh345hiyn mail gmail com 3e quot quot extern link quot rel quot nofollow quot gt http mail archiv apach org mod mbox mod_mbox hadoop zookeep dev 201008 mbox caan lk tikk t97 djqt3 cu 3caanlktikkt97djqt3cu h2 gnj p28 hg xjh345 hiyn 7gnj_4p28hgcxjh345hiyn mail gmail com 3e lt gt lt gt
7
src.java.main.org.apache.zookeeper.server.ZooKeeperServer
src.java.main.org.apache.zookeeper.server.quorum.Leader
src.java.main.org.apache.zookeeper.server.quorum.QuorumCnxManager
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeer
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerConfig
src.java.main.org.apache.zookeeper.server.quorum.QuorumPeerMain
src.java.test.org.apache.zookeeper.test.LENonTerminateTest

83
follow shut down leader lt gt current follow lag keep send ping leader stai aliv keep get leader follow shut down abl keep up leader limit gurante updat made client connect differ server lt gt
5
src.java.main.org.apache.zookeeper.server.quorum.LearnerHandler
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test
src.java.test.org.apache.zookeeper.server.quorum.Zab1_0Test.LeadThread
src.java.test.org.apache.zookeeper.test.QuorumTest
src.java.test.org.apache.zookeeper.test.QuorumUtil

